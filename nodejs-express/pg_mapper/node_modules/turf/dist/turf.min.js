!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?b(exports):typeof define==='function'&&define.amd?define(['exports'],b):(b((a.turf={})))}(this,(function(h){'use strict';let w=6371008.8,x={centimeters:w*100,centimetres:w*100,degrees:180/Math.PI,feet:w*3.28084,inches:w*39.370,kilometers:w/1000,kilometres:w/1000,meters:w,metres:w,miles:w/1609.344,millimeters:w*1000,millimetres:w*1000,nauticalmiles:w/1852,radians:1,yards:w/1.0936},y={acres:0.000247105,centimeters:10000,centimetres:10000,feet:10.763910417,inches:1550.003100006,kilometers:0.000001,kilometres:0.000001,meters:1,metres:1,miles:3.86e-7,millimeters:1000000,millimetres:1000000,yards:1.195990046};function E(a,b,c){c=af(c);let d={type:'Feature'};(c.id===0||c.id)&&(d.id=c.id);c.bbox&&(d.bbox=c.bbox);d.properties=b||{};d.geometry=a;return d}function F(a,b){switch(a){case 'Point':return G(b).geometry;case 'LineString':return K(b).geometry;case 'Polygon':return I(b).geometry;case 'MultiPoint':return P(b).geometry;case 'MultiLineString':return O(b).geometry;case 'MultiPolygon':return Q(b).geometry;default:throw new Error(a+' is invalid')}}function G(a,b,c){c=af(c);let d={type:'Point',coordinates:a};return E(d,b,c)}function H(a,b,c){c=af(c);return N(a.map(a=>{return G(a,b)}),c)}function I(a,b,c){c=af(c);for(const b of a){if(b.length<4){throw new Error('Each LinearRing of a Polygon must have 4 or more Positions.')}for(let a=0;a<b[b.length-1].length;a++){if(b[b.length-1][a]!==b[0][a]){throw new Error('First and last Position are not equivalent.')}}}let d={type:'Polygon',coordinates:a};return E(d,b,c)}function J(a,b,c){c=af(c);return N(a.map(a=>{return I(a,b)}),c)}function K(a,b,c){c=af(c);if(a.length<2){throw new Error('coordinates must be an array of two or more positions')}let d={type:'LineString',coordinates:a};return E(d,b,c)}function L(a,b,c){c=af(c);return N(a.map(a=>{return K(a,b)}),c)}function N(a,b){b=af(b);let c={type:'FeatureCollection'};b.id&&(c.id=b.id);b.bbox&&(c.bbox=b.bbox);c.features=a;return c}function O(a,b,c){c=af(c);let d={type:'MultiLineString',coordinates:a};return E(d,b,c)}function P(a,b,c){c=af(c);let d={type:'MultiPoint',coordinates:a};return E(d,b,c)}function Q(a,b,c){c=af(c);let d={type:'MultiPolygon',coordinates:a};return E(d,b,c)}function R(a,b,c){c=af(c);let d={type:'GeometryCollection',geometries:a};return E(d,b,c)}function S(a,b){if(b&&!(b>=0)){throw new Error('precision must be a positive number')}let c=Math.pow(10,b||0);return Math.round(a*c)/c}function T(a,b){if(a===undefined||a===null)throw new Error('radians is required');if(b&&typeof b!=='string')throw new Error('units must be a string');var c=x[b||'kilometers'];if(!c){throw new Error(b+' units is invalid')}return a*c}function U(a,b){if(a===undefined||a===null)throw new Error('distance is required');if(b&&typeof b!=='string')throw new Error('units must be a string');var c=x[b||'kilometers'];if(!c){throw new Error(b+' units is invalid')}return a/c}function V(a,b){b===null&&(b='kilometers');return X(U(a,b))}function W(a){if(a===null||a===undefined)throw new Error('bearing is required');let b=a%360;b<0&&(b+=360);return b}function X(a){if(a===null||a===undefined)throw new Error('radians is required');let b=a%(2*Math.PI);return b*180/Math.PI}function Y(a){if(a===null||a===undefined)throw new Error('degrees is required');let b=a%360;return b*Math.PI/180}function Z(a,b,c){if(a===null||a===undefined)throw new Error('length is required');return T(U(a,b),c||'kilometers')}function $(a,b,c){if(a===null||a===undefined)throw new Error('area is required');if(!(a>=0))throw new Error('area must be a positive number');var d=y[b||'meters'];if(!d)throw new Error('invalid original units');var e=y[c||'kilometers'];if(!e)throw new Error('invalid final units');return a/d*e}function ab(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function ac(a){return!!a&&a.constructor===Object}function ad(a){if(!a){throw new Error('bbox is required')}if(!Array.isArray(a)){throw new Error('bbox must be an Array')}if(a.length!==4&&a.length!==6){throw new Error('bbox must be an Array of 4 or 6 numbers')}a.forEach(a=>{if(!ab(a)){throw new Error('bbox must only contain numbers')}})}function ae(a){if(!a){throw new Error('id is required')}if(['string','number'].indexOf(typeof a)===-1){throw new Error('id must be a number or a string')}}function af(a){a=a||{};if(!ac(a))throw new Error('options is invalid');return a}function ag(){throw new Error('method has been renamed to `radiansToDegrees`')}function ah(){throw new Error('method has been renamed to `degreesToRadians`')}function ai(){throw new Error('method has been renamed to `lengthToDegrees`')}function aj(){throw new Error('method has been renamed to `lengthToRadians`')}function ak(){throw new Error('method has been renamed to `radiansToLength`')}function al(){throw new Error('method has been renamed to `bearingToAzimuth`')}function am(){throw new Error('method has been renamed to `convertLength`')}var an=Object.freeze({earthRadius:w,factors:x,areaFactors:y,feature:E,geometry:F,point:G,points:H,polygon:I,polygons:J,lineString:K,lineStrings:L,featureCollection:N,multiLineString:O,multiPoint:P,multiPolygon:Q,geometryCollection:R,round:S,radiansToLength:T,lengthToRadians:U,lengthToDegrees:V,bearingToAzimuth:W,radiansToDegrees:X,degreesToRadians:Y,convertLength:Z,convertArea:$,isNumber:ab,isObject:ac,validateBBox:ad,validateId:ae,checkIfOptionsExist:af,radians2degrees:ag,degrees2radians:ah,distanceToDegrees:ai,distanceToRadians:aj,radiansToDistance:ak,bearingToAngle:al,convertDistance:am});function ao(a,b,c){if(a===null)return;var d,e,f,g,h,i,j,k=0,l=0,m,n=a.type,o=n==='FeatureCollection',p=n==='Feature',q=o?a.features.length:1;for(var r=0;r<q;r++){j=o?a.features[r].geometry:(p?a.geometry:a);m=j?j.type==='GeometryCollection':!1;h=m?j.geometries.length:1;for(var s=0;s<h;s++){var t=0,u=0;g=m?j.geometries[s]:j;if(g===null)continue;i=g.coordinates;var v=g.type;k=c&&(v==='Polygon'||v==='MultiPolygon')?1:0;switch(v){case null:break;case 'Point':if(b(i,l,r,t,u)===!1)return !1;l++;t++;break;case 'LineString':;case 'MultiPoint':for(d=0;d<i.length;d++){if(b(i[d],l,r,t,u)===!1)return !1;l++;v==='MultiPoint'&&t++};v==='LineString'&&t++;break;case 'Polygon':;case 'MultiLineString':for(d=0;d<i.length;d++){for(e=0;e<i[d].length-k;e++){if(b(i[d][e],l,r,t,u)===!1)return !1;l++}v==='MultiLineString'&&t++;v==='Polygon'&&u++};v==='Polygon'&&t++;break;case 'MultiPolygon':for(d=0;d<i.length;d++){u=0;for(e=0;e<i[d].length;e++){for(f=0;f<i[d][e].length-k;f++){if(b(i[d][e][f],l,r,t,u)===!1)return !1;l++}u++}t++};break;case 'GeometryCollection':for(d=0;d<g.geometries.length;d++)if(ao(g.geometries[d],b,c)===!1)return !1;break;default:throw new Error('Unknown Geometry Type')}}}}function ap(a,b,c,d){var e=c;ao(a,function(a,d,f,g,h){d===0&&c===undefined?(e=a):(e=b(e,a,d,f,g,h))},d);return e}function aq(a,b){var c;switch(a.type){case 'FeatureCollection':for(c=0;c<a.features.length;c++){if(b(a.features[c].properties,c)===!1)break};break;case 'Feature':b(a.properties,0);break}}function ar(a,b,c){var d=c;aq(a,function(a,e){e===0&&c===undefined?(d=a):(d=b(d,a,e))});return d}function as(a,b){if(a.type==='Feature')b(a,0);else if(a.type==='FeatureCollection'){for(var c=0;c<a.features.length;c++){if(b(a.features[c],c)===!1)break}}}function at(a,b,c){var d=c;as(a,function(a,e){e===0&&c===undefined?(d=a):(d=b(d,a,e))});return d}function au(a){var b=[];ao(a,function(a){b.push(a)});return b}function av(a,b){var c,d,e,f,g,h,i,j,k,l,m=0,n=a.type==='FeatureCollection',o=a.type==='Feature',p=n?a.features.length:1;for(c=0;c<p;c++){h=n?a.features[c].geometry:(o?a.geometry:a);j=n?a.features[c].properties:(o?a.properties:{});k=n?a.features[c].bbox:(o?a.bbox:undefined);l=n?a.features[c].id:(o?a.id:undefined);i=h?h.type==='GeometryCollection':!1;g=i?h.geometries.length:1;for(e=0;e<g;e++){f=i?h.geometries[e]:h;if(f===null){if(b(null,m,j,k,l)===!1)return !1;continue}switch(f.type){case 'Point':;case 'LineString':;case 'MultiPoint':;case 'Polygon':;case 'MultiLineString':;case 'MultiPolygon':{if(b(f,m,j,k,l)===!1)return !1;break};case 'GeometryCollection':{for(d=0;d<f.geometries.length;d++){if(b(f.geometries[d],m,j,k,l)===!1)return !1}break};default:throw new Error('Unknown Geometry Type')}}m++}}function aw(a,b,c){var d=c;av(a,function(a,e,f,g,h){e===0&&c===undefined?(d=a):(d=b(d,a,e,f,g,h))});return d}function az(a,b){av(a,function(a,c,d,e,f){var g=a===null?null:a.type;switch(g){case null:;case 'Point':;case 'LineString':;case 'Polygon':if(b(E(a,d,{bbox:e,id:f}),c,0)===!1)return !1;return};var h;switch(g){case 'MultiPoint':h='Point';break;case 'MultiLineString':h='LineString';break;case 'MultiPolygon':h='Polygon';break};for(var i=0;i<a.coordinates.length;i++){var j=a.coordinates[i],k={type:h,coordinates:j};if(b(E(k,d),c,i)===!1)return !1}})}function aA(a,b,c){var d=c;az(a,function(a,e,f){e===0&&f===0&&c===undefined?(d=a):(d=b(d,a,e,f))});return d}function aB(a,b){az(a,function(a,c,d){var e=0;if(!a.geometry)return;var f=a.geometry.type;if(f==='Point'||f==='MultiPoint')return;var g,h=0,i=0,j=0;if(ao(a,function(f,k,l,m,n){if(g===undefined||c>h||m>i||n>j){g=f;h=c;i=m;j=n;e=0;return}var o=K([g,f],a.properties);if(b(o,c,d,n,e)===!1)return !1;e++;g=f})===!1)return !1})}function aC(a,b,c){var d=c,e=!1;aB(a,function(a,f,g,h,i){e===!1&&c===undefined?(d=a):(d=b(d,a,f,g,h,i));e=!0});return d}function aD(a,b){if(!a)throw new Error('geojson is required');az(a,function(a,c,d){if(a.geometry===null)return;var e=a.geometry.type,f=a.geometry.coordinates;switch(e){case 'LineString':if(b(a,c,d,0,0)===!1)return !1;break;case 'Polygon':for(var g=0;g<f.length;g++){if(b(K(f[g],a.properties),c,d,g)===!1)return !1};break}})}function aE(a,b,c){var d=c;aD(a,function(a,e,f,g){e===0&&c===undefined?(d=a):(d=b(d,a,e,f,g))});return d}function aF(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.featureIndex||0,d=b.multiFeatureIndex||0,e=b.geometryIndex||0,f=b.segmentIndex||0,g=b.properties,h;switch(a.type){case 'FeatureCollection':c<0&&(c=a.features.length+c);g=g||a.features[c].properties;h=a.features[c].geometry;break;case 'Feature':g=g||a.properties;h=a.geometry;break;case 'Point':;case 'MultiPoint':return null;case 'LineString':;case 'Polygon':;case 'MultiLineString':;case 'MultiPolygon':h=a;break;default:throw new Error('geojson is invalid')};if(h===null)return null;var i=h.coordinates;switch(h.type){case 'Point':;case 'MultiPoint':return null;case 'LineString':f<0&&(f=i.length+f-1);return K([i[f],i[f+1]],g,b);case 'Polygon':e<0&&(e=i.length+e);f<0&&(f=i[e].length+f-1);return K([i[e][f],i[e][f+1]],g,b);case 'MultiLineString':d<0&&(d=i.length+d);f<0&&(f=i[d].length+f-1);return K([i[d][f],i[d][f+1]],g,b);case 'MultiPolygon':d<0&&(d=i.length+d);e<0&&(e=i[d].length+e);f<0&&(f=i[d][e].length-f-1);return K([i[d][e][f],i[d][e][f+1]],g,b)};throw new Error('geojson is invalid')}function aG(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.featureIndex||0,d=b.multiFeatureIndex||0,e=b.geometryIndex||0,f=b.coordIndex||0,g=b.properties,h;switch(a.type){case 'FeatureCollection':c<0&&(c=a.features.length+c);g=g||a.features[c].properties;h=a.features[c].geometry;break;case 'Feature':g=g||a.properties;h=a.geometry;break;case 'Point':;case 'MultiPoint':return null;case 'LineString':;case 'Polygon':;case 'MultiLineString':;case 'MultiPolygon':h=a;break;default:throw new Error('geojson is invalid')};if(h===null)return null;var i=h.coordinates;switch(h.type){case 'Point':return G(i,g,b);case 'MultiPoint':d<0&&(d=i.length+d);return G(i[d],g,b);case 'LineString':f<0&&(f=i.length+f);return G(i[f],g,b);case 'Polygon':e<0&&(e=i.length+e);f<0&&(f=i[e].length+f);return G(i[e][f],g,b);case 'MultiLineString':d<0&&(d=i.length+d);f<0&&(f=i[d].length+f);return G(i[d][f],g,b);case 'MultiPolygon':d<0&&(d=i.length+d);e<0&&(e=i[d].length+e);f<0&&(f=i[d][e].length-f);return G(i[d][e][f],g,b)};throw new Error('geojson is invalid')}var aH=Object.freeze({coordEach:ao,coordReduce:ap,propEach:aq,propReduce:ar,featureEach:as,featureReduce:at,coordAll:au,geomEach:av,geomReduce:aw,flattenEach:az,flattenReduce:aA,segmentEach:aB,segmentReduce:aC,lineEach:aD,lineReduce:aE,findSegment:aF,findPoint:aG});function aI(a){let b=[Infinity,Infinity,-Infinity,-Infinity];ao(a,a=>{b[0]>a[0]&&(b[0]=a[0]);b[1]>a[1]&&(b[1]=a[1]);b[2]<a[0]&&(b[2]=a[0]);b[3]<a[1]&&(b[3]=a[1])});return b}function aJ(a){if(!a){throw new Error('coord is required')}if(!Array.isArray(a)){if(a.type==='Feature'&&a.geometry!==null&&a.geometry.type==='Point'){return a.geometry.coordinates}if(a.type==='Point'){return a.coordinates}}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1])){return a}throw new Error('coord must be GeoJSON Point or an Array of numbers')}function aK(a){if(Array.isArray(a)){return a}if(a.type==='Feature'){if(a.geometry!==null){return a.geometry.coordinates}}else{if(a.coordinates){return a.coordinates}}throw new Error('coords must be GeoJSON Feature, Geometry Object or an Array')}function aL(a){if(a.length>1&&ab(a[0])&&ab(a[1])){return !0}if(Array.isArray(a[0])&&a[0].length){return aL(a[0])}throw new Error('coordinates must only contain numbers')}function aM(a,b,c){if(!b||!c){throw new Error('type and name required')}if(!a||a.type!==b){throw new Error('Invalid input to '+c+': must be a '+b+', given '+a.type)}}function aN(a,b,c){if(!a){throw new Error('No feature passed')}if(!c){throw new Error('.featureOf() requires a name')}if(!a||a.type!=='Feature'||!a.geometry){throw new Error('Invalid input to '+c+', Feature with geometry required')}if(!a.geometry||a.geometry.type!==b){throw new Error('Invalid input to '+c+': must be a '+b+', given '+a.geometry.type)}}function aO(a,b,c){if(!a){throw new Error('No featureCollection passed')}if(!c){throw new Error('.collectionOf() requires a name')}if(!a||a.type!=='FeatureCollection'){throw new Error('Invalid input to '+c+', FeatureCollection required')}for(const d of a.features){if(!d||d.type!=='Feature'||!d.geometry){throw new Error('Invalid input to '+c+', Feature with geometry required')}if(!d.geometry||d.geometry.type!==b){throw new Error('Invalid input to '+c+': must be a '+b+', given '+d.geometry.type)}}}function aP(a){if(a.type==='Feature'){return a.geometry}return a}function aQ(a,b){if(a.type==='FeatureCollection'){return'FeatureCollection'}if(a.type==='GeometryCollection'){return'GeometryCollection'}if(a.type==='Feature'&&a.geometry!==null){return a.geometry.type}return a.type}var aR=Object.freeze({getCoord:aJ,getCoords:aK,containsNumber:aL,geojsonType:aM,featureOf:aN,collectionOf:aO,getGeom:aP,getType:aQ}),aS={successCallback:null,verbose:!1},aT={};function aU(a,b,c){c=c?c:{};var d=Object.keys(aS);for(var e=0;e<d.length;e++){var f=d[e],g=c[f];g=typeof g!=='undefined'&&g!==null?g:aS[f];aT[f]=g}aT.verbose&&console.log('MarchingSquaresJS-isoContours: computing isocontour for '+b);var h=a$(aW(a,b));typeof aT.successCallback==='function'&&aT.successCallback(h);return h}function aV(a,b,c){return(a-b)/(c-b)}function aW(a,b){var c=a.length-1,d=a[0].length-1,e={rows:c,cols:d,cells:[]};for(var f=0;f<c;++f){e.cells[f]=[];for(var g=0;g<d;++g){var h=0,i=a[f+1][g],j=a[f+1][g+1],k=a[f][g+1],l=a[f][g];if(isNaN(i)||isNaN(j)||isNaN(k)||isNaN(l)){continue}h|=i>=b?8:0;h|=j>=b?4:0;h|=k>=b?2:0;h|=l>=b?1:0;var m=!1;if(h===5||h===10){var n=(i+j+k+l)/4;h===5&&n<b?(h=10,m=!0):h===10&&n<b&&(h=5,m=!0)}if(h!==0&&h!==15){var o,p,q,r;o=p=q=r=0.5;h===1?(q=1-aV(b,i,l),p=1-aV(b,k,l)):h===2?(p=aV(b,l,k),r=1-aV(b,j,k)):h===3?(q=1-aV(b,i,l),r=1-aV(b,j,k)):h===4?(o=aV(b,i,j),r=aV(b,k,j)):h===5?(o=aV(b,i,j),r=aV(b,k,j),p=1-aV(b,k,l),q=1-aV(b,i,l)):h===6?(p=aV(b,l,k),o=aV(b,i,j)):h===7?(q=1-aV(b,i,l),o=aV(b,i,j)):h===8?(q=aV(b,l,i),o=1-aV(b,j,i)):h===9?(p=1-aV(b,k,l),o=1-aV(b,j,i)):h===10?(o=1-aV(b,j,i),r=1-aV(b,j,k),p=aV(b,l,k),q=aV(b,l,i)):h===11?(o=1-aV(b,j,i),r=1-aV(b,j,k)):h===12?(q=aV(b,l,i),r=aV(b,k,j)):h===13?(p=1-aV(b,k,l),r=aV(b,k,j)):h===14?(q=aV(b,l,i),p=aV(b,l,k)):console.log('MarchingSquaresJS-isoContours: Illegal cval detected: '+h);e.cells[f][g]={cval:h,flipped:m,top:o,right:r,bottom:p,left:q}}}}return e}function aX(a){return a.cval===5||a.cval===10}function aY(a){return a.cval===0||a.cval===15}function aZ(a){!aY(a)&&a.cval!==5&&a.cval!==10&&(a.cval=15)}function a_(a,b){if(b==='top'){return[a.top,1.0]}else if(b==='bottom'){return[a.bottom,0.0]}else if(b==='right'){return[1.0,a.right]}else if(b==='left'){return[0.0,a.left]}}function a$(a){var b=[],c=0,f=1e-7;a.cells.forEach(function(d,e){d.forEach(function(d,g){if(typeof d!=='undefined'&&!aX(d)&&!aY(d)){var h=ba(a.cells,e,g),i=!1;if(h.info==='mergeable'){var j=h.path[h.path.length-1][0],k=h.path[h.path.length-1][1];for(var l=c-1;l>=0;l--){if(Math.abs(b[l][0][0]-j)<=f&&Math.abs(b[l][0][1]-k)<=f){for(var m=h.path.length-2;m>=0;--m)b[l].unshift(h.path[m]);i=!0;break}}}i||(b[c++]=h.path)}})});return b}function ba(a,b,c){var d=a.length,e=[],f=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],g=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],h,i,j=['none','left','bottom','left','right','none','bottom','left','top','top','none','top','right','right','bottom','none'],k=['none','bottom','right','right','top','top','top','top','left','bottom','right','right','left','bottom','left','none'],l,n=a[b][c],o=n.cval,l=j[o],p=a_(n,l);e.push([c+p[0],b+p[1]]);l=k[o];p=a_(n,l);e.push([c+p[0],b+p[1]]);aZ(n);var q=c+f[o],r=b+g[o],s=o;while(q>=0&&r>=0&&r<d&&(q!=c||r!=b)){n=a[r][q];if(typeof n==='undefined'){break}o=n.cval;if(o===0||o===15){return{path:e,info:'mergeable'}}l=k[o];h=f[o];i=g[o];(o===5||o===10)&&(o===5?(n.flipped?(g[s]===-1?(l='left',h=-1,i=0):(l='right',h=1,i=0)):f[s]===-1&&(l='bottom',h=0,i=-1)):o===10&&(n.flipped?(f[s]===-1?(l='top',h=0,i=1):(l='bottom',h=0,i=-1)):g[s]===1&&(l='left',h=-1,i=0)));p=a_(n,l);e.push([q+p[0],r+p[1]]);aZ(n);q+=h;r+=i;s=o}return{path:e,info:'closed'}}function bb(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.zProperty||'elevation',d=b.flip,e=b.flags;aO(a,'Point','input must contain Points');var f=bc(a,d),g=[];for(var h=0;h<f.length;h++){var i=f[h],j=[];for(var k=0;k<i.length;k++){var l=i[k];l.properties[c]?j.push(l.properties[c]):j.push(0);e===!0&&(l.properties.matrixPosition=[h,k])}g.push(j)}return g}function bc(c,d){var e={};as(c,function(a){var b=aK(a)[1];e[b]||(e[b]=[]);e[b].push(a)});var f=Object.keys(e).map(function(c){var d=e[c],f=d.sort(function(a,b){return aK(a)[0]-aK(b)[0]});return f}),g=f.sort(function(a,b){if(d)return aK(a[0])[1]-aK(b[0])[1];else return aK(b[0])[1]-aK(a[0])[1]});return g}function bd(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.zProperty||'elevation',e=c.commonProperties||{},f=c.breaksProperties||[];aO(a,'Point','Input must contain Points');if(!b)throw new Error('breaks is required');if(!Array.isArray(b))throw new Error('breaks must be an Array');if(!ac(e))throw new Error('commonProperties must be an Object');if(!Array.isArray(f))throw new Error('breaksProperties must be an Array');var g=bb(a,{zProperty:d,flip:!0}),h=be(g,b,d,e,f),i=bf(h,g,a);return N(i)}function be(a,b,c,d,e){var f=[];for(var g=1;g<b.length;g++){var h=+b[g],i=Object.assign({},d,e[g]);i[c]=h;var j=O(aU(a,h),i);f.push(j)}return f}function bf(a,b,c){var d=aI(c),e=d[2]-d[0],f=d[3]-d[1],g=d[0],h=d[1],i=b[0].length-1,j=b.length-1,k=e/i,l=f/j,m=function(a){a[0]=a[0]*k+g;a[1]=a[1]*l+h};a.forEach(function(a){ao(a,m)});return a}var bg=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function bh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,'default')?a['default']:a}function bi(a,b){return b={exports:{}}, a(b,b.exports), b.exports}var bj=bi(function(c,d){!function(a,b){c.exports=b()}(bg,(function(){function c(a,b,c,e,g){d(a,b,c||0,e||a.length-1,g||f)}function d(a,b,c,f,g){while(f>c){if(f-c>600){var h=f-c+1,i=b-c+1,j=Math.log(h),k=0.5*Math.exp(2*j/3),l=0.5*Math.sqrt(j*k*(h-k)/h)*(i-h/2<0?-1:1),m=Math.max(c,Math.floor(b-i*k/h+l)),n=Math.min(f,Math.floor(b+(h-i)*k/h+l));d(a,b,m,n,g)}var o=a[b],p=c,q=f;e(a,c,b);g(a[f],o)>0&&e(a,c,f);while(p<q){e(a,p,q);p++;q--;while(g(a[p],o)<0)p++;while(g(a[q],o)>0)q--}g(a[c],o)===0?e(a,c,q):(q++,e(a,q,f));q<=b&&(c=q+1);b<=q&&(f=q-1)}}function e(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function f(a,b){return a<b?-1:a>b?1:0}return c}))}),bk=Object.freeze({default:bj,__moduleExports:bj}),bl=bk&&bj||bk,bm=bo,bn=bo;function bo(a,b){if(!(this instanceof bo))return new bo(a,b);this._maxEntries=Math.max(4,a||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*0.4));b&&this._initFormat(b);this.clear()}bo.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,c=[],d=this.toBBox;if(!bC(a,b))return c;var e=[],f,g,h,i;while(b){for(f=0, g=b.children.length;f<g;f++)h=b.children[f],i=b.leaf?d(h):h,bC(a,i)&&(b.leaf?c.push(h):bB(a,i)?this._all(h,c):e.push(h));b=e.pop()}return c},collides:function(a){var b=this.data,c=this.toBBox;if(!bC(a,b))return !1;var d=[],e,f,g,h;while(b){for(e=0, f=b.children.length;e<f;e++){g=b.children[e];h=b.leaf?c(g):g;if(bC(a,h)){if(b.leaf||bB(a,h))return !0;d.push(g)}}b=d.pop()}return !1},load:function(a){if(!(a&&a.length))return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}var d=this._build(a.slice(),0,a.length-1,0);if(!this.data.children.length)this.data=d;else if(this.data.height===d.height)this._splitRoot(this.data,d);else{if(this.data.height<d.height){var e=this.data;this.data=d;d=e}this._insert(d,this.data.height-d.height-1,!0)};return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=bD([]);return this},remove:function(a,b){if(!a)return this;var c=this.data,d=this.toBBox(a),e=[],f=[],g,h,i,j;while(c||e.length){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),j=!0);if(c.leaf){i=bp(a,c.children,b);if(i!==-1){c.children.splice(i,1);e.push(c);this._condense(e);return this}}!j&&!c.leaf&&bB(c,d)?(e.push(c),f.push(g),g=0,h=c,c=c.children[0]):h?(g++,c=h.children[g],j=!1):(c=null)}return this},toBBox:function(a){return a},compareMinX:bt,compareMinY:bu,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){var c=[];while(a)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},_build:function(a,b,c,d){var e=c-b+1,f=this._maxEntries,g;if(e<=f){g=bD(a.slice(b,c+1));bq(g,this.toBBox);return g}d||(d=Math.ceil(Math.log(e)/Math.log(f)),f=Math.ceil(e/Math.pow(f,d-1)));g=bD([]);g.leaf=!1;g.height=d;var h=Math.ceil(e/f),i=h*Math.ceil(Math.sqrt(f)),j,k,l,m;bE(a,b,c,i,this.compareMinX);for(j=b;j<=c;j+=i){l=Math.min(j+i-1,c);bE(a,j,l,h,this.compareMinY);for(k=j;k<=l;k+=h)m=Math.min(k+h-1,l),g.children.push(this._build(a,k,m,d-1))}bq(g,this.toBBox);return g},_chooseSubtree:function(a,b,c,d){var e,f,g,h,i,j,k,l;while(!0){d.push(b);if(b.leaf||d.length-1===c)break;k=l=Infinity;for(e=0, f=b.children.length;e<f;e++)g=b.children[e],i=bv(g),j=bz(a,g)-i,j<l?(l=j,k=i<k?i:k,h=g):j===l&&(i<k&&(k=i,h=g));b=h||b.children[0]}return b},_insert:function(a,b,c){var d=this.toBBox,e=c?a:d(a),f=[],g=this._chooseSubtree(e,this.data,b,f);g.children.push(a);bs(g,e);while(b>=0){if(f[b].children.length>this._maxEntries)this._split(f,b),b--;else break}this._adjustParentBBoxes(e,f,b)},_split:function(a,b){var c=a[b],d=c.children.length,e=this._minEntries;this._chooseSplitAxis(c,e,d);var f=this._chooseSplitIndex(c,e,d),g=bD(c.children.splice(f,c.children.length-f));g.height=c.height;g.leaf=c.leaf;bq(c,this.toBBox);bq(g,this.toBBox);b?a[b-1].children.push(g):this._splitRoot(c,g)},_splitRoot:function(a,b){this.data=bD([a,b]);this.data.height=a.height+1;this.data.leaf=!1;bq(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,c){var d,e,f,g,h,i,j,k;i=j=Infinity;for(d=b;d<=c-b;d++)e=br(a,0,d,this.toBBox),f=br(a,d,c,this.toBBox),g=bA(e,f),h=bv(e)+bv(f),g<i?(i=g,k=d,j=h<j?h:j):g===i&&(h<j&&(j=h,k=d));return k},_chooseSplitAxis:function(a,b,c){var d=a.leaf?this.compareMinX:bt,e=a.leaf?this.compareMinY:bu,f=this._allDistMargin(a,b,c,d),g=this._allDistMargin(a,b,c,e);f<g&&a.children.sort(d)},_allDistMargin:function(a,b,c,d){a.children.sort(d);var e=this.toBBox,f=br(a,0,b,e),g=br(a,c-b,c,e),h=bw(f)+bw(g),i,j;for(i=b;i<c-b;i++)j=a.children[i],bs(f,a.leaf?e(j):j),h+=bw(f);for(i=c-b-1;i>=b;i--)j=a.children[i],bs(g,a.leaf?e(j):j),h+=bw(g);return h},_adjustParentBBoxes:function(a,b,c){for(var d=c;d>=0;d--)bs(b[d],a)},_condense:function(a){for(var b=a.length-1,c;b>=0;b--)a[b].children.length===0?(b>0?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear()):bq(a[b],this.toBBox)},_initFormat:function(a){var b=['return a',' - b',';'];this.compareMinX=new Function('a','b',b.join(a[0]));this.compareMinY=new Function('a','b',b.join(a[1]));this.toBBox=new Function('a','return {minX: a'+a[0]+', minY: a'+a[1]+', maxX: a'+a[2]+', maxY: a'+a[3]+'};')}};function bp(a,b,c){if(!c)return b.indexOf(a);for(var d=0;d<b.length;d++){if(c(a,b[d]))return d}return-1}function bq(a,b){br(a,0,a.children.length,b,a)}function br(a,b,c,d,e){e||(e=bD(null));e.minX=Infinity;e.minY=Infinity;e.maxX=-Infinity;e.maxY=-Infinity;for(var f=b,g;f<c;f++)g=a.children[f],bs(e,a.leaf?d(g):g);return e}function bs(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function bt(a,b){return a.minX-b.minX}function bu(a,b){return a.minY-b.minY}function bv(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bw(a){return a.maxX-a.minX+(a.maxY-a.minY)}function bz(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function bA(a,b){var c=Math.max(a.minX,b.minX),d=Math.max(a.minY,b.minY),e=Math.min(a.maxX,b.maxX),f=Math.min(a.maxY,b.maxY);return Math.max(0,e-c)*Math.max(0,f-d)}function bB(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function bC(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function bD(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function bE(a,b,c,d,e){var f=[b,c],g;while(f.length){c=f.pop();b=f.pop();if(c-b<=d)continue;g=b+Math.ceil((c-b)/d/2)*d;bl(a,g,b,c,e);f.push(b,g,g,c)}}bm.default=bn;var bF=bH,bG=+(Math.pow(2,27)+1.0);function bH(a,b,c){var d=a*b,e=bG*a,f=e-a,g=e-f,h=a-g,i=bG*b,j=i-b,k=i-j,l=b-k,m=d-g*k,n=m-h*k,o=n-g*l,p=h*l-o;if(c){c[0]=p;c[1]=d;return c}return[p,d]}var bI=Object.freeze({default:bF,__moduleExports:bF}),bJ=bL;function bK(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;if(h){return[h,c]}return[c]}function bL(a,b){var c=a.length|0,d=b.length|0;if(c===1&&d===1){return bK(a[0],b[0])}var e=c+d,f=new Array(e),g=0,h=0,i=0,j=Math.abs,k=a[h],l=j(k),m=b[i],n=j(m),o,p;l<n?(p=k,h+=1,h<c&&(k=a[h],l=j(k))):(p=m,i+=1,i<d&&(m=b[i],n=j(m)));h<c&&l<n||i>=d?(o=k,h+=1,h<c&&(k=a[h],l=j(k))):(o=m,i+=1,i<d&&(m=b[i],n=j(m)));var q=o+p,r=q-o,s=p-r,t=s,u=q,v,w,x,y,z;while(h<c&&i<d)l<n?(o=k,h+=1,h<c&&(k=a[h],l=j(k))):(o=m,i+=1,i<d&&(m=b[i],n=j(m))),p=t,q=o+p,r=q-o,s=p-r,s&&(f[g++]=s),v=u+q,w=v-u,x=v-w,y=q-w,z=u-x,t=z+y,u=v;while(h<c)o=k,p=t,q=o+p,r=q-o,s=p-r,s&&(f[g++]=s),v=u+q,w=v-u,x=v-w,y=q-w,z=u-x,t=z+y,u=v,h+=1,h<c&&(k=a[h]);while(i<d)o=m,p=t,q=o+p,r=q-o,s=p-r,s&&(f[g++]=s),v=u+q,w=v-u,x=v-w,y=q-w,z=u-x,t=z+y,u=v,i+=1,i<d&&(m=b[i]);t&&(f[g++]=t);u&&(f[g++]=u);g||(f[g++]=0.0);f.length=g;return f}var bM=Object.freeze({default:bJ,__moduleExports:bJ}),bN=bO;function bO(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;if(c){c[0]=h+g;c[1]=d;return c}return[h+g,d]}var bP=Object.freeze({default:bN,__moduleExports:bN}),bQ=bI&&bF||bI,bR=bP&&bN||bP,bS=bT;function bT(a,b){var c=a.length;if(c===1){var d=bQ(a[0],b);if(d[0]){return d}return[d[1]]}var e=new Array(2*c),f=[0.1,0.1],g=[0.1,0.1],h=0;bQ(a[0],b,f);f[0]&&(e[h++]=f[0]);for(var i=1;i<c;++i){bQ(a[i],b,g);var j=f[1];bR(j,g[0],f);f[0]&&(e[h++]=f[0]);var k=g[1],l=f[1],m=k+l,n=m-k,o=l-n;f[1]=m;o&&(e[h++]=o)}f[1]&&(e[h++]=f[1]);h===0&&(e[h++]=0.0);e.length=h;return e}var bU=Object.freeze({default:bS,__moduleExports:bS}),bV=bX;function bW(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;if(h){return[h,c]}return[c]}function bX(a,b){var c=a.length|0,d=b.length|0;if(c===1&&d===1){return bW(a[0],-b[0])}var e=c+d,f=new Array(e),g=0,h=0,i=0,j=Math.abs,k=a[h],l=j(k),m=-b[i],n=j(m),o,p;l<n?(p=k,h+=1,h<c&&(k=a[h],l=j(k))):(p=m,i+=1,i<d&&(m=-b[i],n=j(m)));h<c&&l<n||i>=d?(o=k,h+=1,h<c&&(k=a[h],l=j(k))):(o=m,i+=1,i<d&&(m=-b[i],n=j(m)));var q=o+p,r=q-o,s=p-r,t=s,u=q,v,w,x,y,z;while(h<c&&i<d)l<n?(o=k,h+=1,h<c&&(k=a[h],l=j(k))):(o=m,i+=1,i<d&&(m=-b[i],n=j(m))),p=t,q=o+p,r=q-o,s=p-r,s&&(f[g++]=s),v=u+q,w=v-u,x=v-w,y=q-w,z=u-x,t=z+y,u=v;while(h<c)o=k,p=t,q=o+p,r=q-o,s=p-r,s&&(f[g++]=s),v=u+q,w=v-u,x=v-w,y=q-w,z=u-x,t=z+y,u=v,h+=1,h<c&&(k=a[h]);while(i<d)o=m,p=t,q=o+p,r=q-o,s=p-r,s&&(f[g++]=s),v=u+q,w=v-u,x=v-w,y=q-w,z=u-x,t=z+y,u=v,i+=1,i<d&&(m=-b[i]);t&&(f[g++]=t);u&&(f[g++]=u);g||(f[g++]=0.0);f.length=g;return f}var bY=Object.freeze({default:bV,__moduleExports:bV}),bZ=bM&&bJ||bM,b_=bU&&bS||bU,b$=bY&&bV||bY,ca=bi(function(e){var f=5,g=1.1102230246251565e-16,h=(3.0+16.0*g)*g,i=(7.0+56.0*g)*g;function j(a,b){var c=new Array(a.length-1);for(var d=1;d<a.length;++d){var e=c[d-1]=new Array(a.length-1);for(var f=0,g=0;f<a.length;++f){if(f===b){continue}e[g++]=a[d][f]}}return c}function k(a){var b=new Array(a);for(var c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function l(a){if(a&1){return"-"}return""}function o(a){if(a.length===1){return a[0]}else if(a.length===2){return["sum(",a[0],",",a[1],")"].join("")}else{var b=a.length>>1;return["sum(",o(a.slice(0,b)),",",o(a.slice(b)),")"].join("")}}function p(a){if(a.length===2){return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")]}else{var b=[];for(var c=0;c<a.length;++c)b.push(["scale(",o(p(j(a,c))),",",l(c),a[0][c],")"].join(""));return b}}function q(a){var b=[],c=[],d=k(a),e=[];for(var f=0;f<a;++f)(f&1)===0?b.push.apply(b,p(j(d,f))):c.push.apply(c,p(j(d,f))),e.push("m"+f);var g=o(b),h=o(c),i="orientation"+a+"Exact",l=["function ",i,"(",e.join(),"){var p=",g,",n=",h,",d=sub(p,n);\
return d[d.length-1];};return ",i].join(""),m=new Function("sum","prod","scale","sub",l);return m(bZ,bQ,b_,b$)}var r=q(3),s=q(4),t=[function a(){return 0},function a(){return 0},function c(a,b){return b[0]-a[0]},function d(a,b,c){var e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f,i;if(e>0){if(f<=0){return g}else i=e+f}else if(e<0){if(f>=0){return g}else i=-(e+f)}else{return g};var j=h*i;if(g>=j||g<=-j){return g}return r(a,b,c)},function e(a,b,c,d){var f=a[0]-d[0],g=b[0]-d[0],h=c[0]-d[0],j=a[1]-d[1],k=b[1]-d[1],l=c[1]-d[1],m=a[2]-d[2],n=b[2]-d[2],o=c[2]-d[2],p=g*l,q=h*k,r=h*j,t=f*l,u=f*k,v=g*j,w=m*(p-q)+n*(r-t)+o*(u-v),x=(Math.abs(p)+Math.abs(q))*Math.abs(m)+(Math.abs(r)+Math.abs(t))*Math.abs(n)+(Math.abs(u)+Math.abs(v))*Math.abs(o),y=i*x;if(w>y||-w>y){return w}return s(a,b,c,d)}];function u(a){var b=t[a.length];b||(b=t[a.length]=q(a.length));return b.apply(undefined,a)}function v(){while(t.length<=f)t.push(q(t.length));var a=[],b=["slow"];for(var c=0;c<=f;++c)a.push("a"+c),b.push("o"+c);var d=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(c=2;c<=f;++c)d.push("case ",c,":return o",c,"(",a.slice(0,c).join(),");");d.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");b.push(d.join(""));var g=Function.apply(undefined,b);e.exports=g.apply(undefined,[u].concat(t));for(c=0;c<=f;++c)e.exports[c]=t[c]}v()}),cb=Object.freeze({default:ca,__moduleExports:ca}),cc=cb&&ca||cb,cd=cf,ce=cc[3];function cf(c){var d=c.length;if(d<3){var e=new Array(d);for(var f=0;f<d;++f)e[f]=f;if(d===2&&c[0][0]===c[1][0]&&c[0][1]===c[1][1]){return[0]}return e}var g=new Array(d);for(f=0;f<d;++f)g[f]=f;g.sort(function(a,b){var d=c[a][0]-c[b][0];if(d){return d}return c[a][1]-c[b][1]});var h=[g[0],g[1]],i=[g[0],g[1]];for(f=2;f<d;++f){var j=g[f],k=c[j],l=h.length;while(l>1&&ce(c[h[l-2]],c[h[l-1]],k)<=0)l-=1,h.pop();h.push(j);l=i.length;while(l>1&&ce(c[i[l-2]],c[i[l-1]],k)>=0)l-=1,i.pop();i.push(j)}e=new Array(i.length+h.length-2),m=0;for(var f=0,n=h.length;f<n;++f)e[m++]=h[f];for(var o=i.length-2;o>0;--o)e[m++]=i[o];return e}var cg=Object.freeze({default:cd,__moduleExports:cd}),ci=ck,cj=ck;function ck(a,b){if(!(this instanceof ck))return new ck(a,b);this.data=a||[];this.length=this.data.length;this.compare=b||cl;if(this.length>0){for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)}}function cl(a,b){return a<b?-1:a>b?1:0}ck.prototype={push:function(a){this.data.push(a);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var a=this.data[0];this.length--;this.length>0&&(this.data[0]=this.data[this.length],this._down(0));this.data.pop();return a},peek:function(){return this.data[0]},_up:function(a){var b=this.data,c=this.compare,d=b[a];while(a>0){var e=a-1>>1,f=b[e];if(c(d,f)>=0)break;b[a]=f;a=e}b[a]=d},_down:function(a){var b=this.data,c=this.compare,d=this.length>>1,e=b[a];while(a<d){var f=(a<<1)+1,g=f+1,h=b[f];g<this.length&&c(b[g],h)<0&&(f=g,h=b[g]);if(c(h,e)>=0)break;b[a]=h;a=f}b[a]=e}};ci.default=cj;var cm=Object.freeze({default:ci,__moduleExports:ci}),cn=function(a,b){var c=a[0],d=a[1],e=!1;for(var f=0,g=b.length-1;f<b.length;g=f++){var h=b[f][0],i=b[f][1],j=b[g][0],k=b[g][1],l=i>d!=k>d&&c<(j-h)*(d-i)/(k-i)+h;l&&(e=!e)}return e},co=Object.freeze({default:cn,__moduleExports:cn}),cp=cg&&cd||cg,cq=cm&&ci||cm,cr=co&&cn||co,cs=cc[3],ct=cv,cu=cv;function cv(a,b,c){b=Math.max(0,b===undefined?2:b);c=c||0;var d=cF(a),e=bm(16,['[0]','[1]','[0]','[1]']).load(a),f=[];for(var g=0,h;g<d.length;g++){var i=d[g];e.remove(i);h=cG(i,h);f.push(h)}var j=bm(16);for(g=0;g<f.length;g++)j.insert(cE(f[g]));var k=b*b,l=c*c;while(f.length){var m=f.shift(),n=m.p,o=m.next.p,p=cH(n,o);if(p<l)continue;var q=p/k;i=cw(e,m.prev.p,n,o,m.next.next.p,q,j);i&&Math.min(cH(i,n),cH(i,o))<=q&&(f.push(m),f.push(cG(i,m)),e.remove(i),j.remove(m),j.insert(cE(m)),j.insert(cE(m.next)))}m=h;var r=[];do{r.push(m.p),m=m.next}while(m!==h);r.push(m.p);return r}function cw(a,b,c,d,e,f,g){var h=new cq(null,cz),i=a.data;while(i){for(var j=0;j<i.children.length;j++){var k=i.children[j],l=i.leaf?cI(k,c,d):cA(c,d,k);if(l>f)continue;h.push({node:k,dist:l})}while(h.length&&!h.peek().node.children){var m=h.pop(),n=m.node,o=cI(n,b,c),p=cI(n,d,e);if(m.dist<o&&m.dist<p&&cC(c,n,g)&&cC(d,n,g))return n}i=h.pop();i&&(i=i.node)}return null}function cz(a,b){return a.dist-b.dist}function cA(a,b,c){if(cB(a,c)||cB(b,c))return 0;var d=cJ(a[0],a[1],b[0],b[1],c.minX,c.minY,c.maxX,c.minY);if(d===0)return 0;var e=cJ(a[0],a[1],b[0],b[1],c.minX,c.minY,c.minX,c.maxY);if(e===0)return 0;var f=cJ(a[0],a[1],b[0],b[1],c.maxX,c.minY,c.maxX,c.maxY);if(f===0)return 0;var g=cJ(a[0],a[1],b[0],b[1],c.minX,c.maxY,c.maxX,c.maxY);if(g===0)return 0;return Math.min(d,e,f,g)}function cB(a,b){return a[0]>=b.minX&&a[0]<=b.maxX&&a[1]>=b.minY&&a[1]<=b.maxY}function cC(a,b,c){var d=Math.min(a[0],b[0]),e=Math.min(a[1],b[1]),f=Math.max(a[0],b[0]),g=Math.max(a[1],b[1]),h=c.search({minX:d,minY:e,maxX:f,maxY:g});for(var i=0;i<h.length;i++){if(cD(h[i].p,h[i].next.p,a,b))return !1}return !0}function cD(a,b,c,d){return a!==d&&b!==c&&cs(a,b,c)>0!==cs(a,b,d)>0&&cs(c,d,a)>0!==cs(c,d,b)>0}function cE(a){var b=a.p,c=a.next.p;a.minX=Math.min(b[0],c[0]);a.minY=Math.min(b[1],c[1]);a.maxX=Math.max(b[0],c[0]);a.maxY=Math.max(b[1],c[1]);return a}function cF(a){var b=a[0],c=a[0],d=a[0],e=a[0];for(var f=0;f<a.length;f++){var g=a[f];g[0]<b[0]&&(b=g);g[0]>d[0]&&(d=g);g[1]<c[1]&&(c=g);g[1]>e[1]&&(e=g)}var h=[b,c,d,e],i=h.slice();for(f=0;f<a.length;f++)cr(a[f],h)||i.push(a[f]);var j=cp(i),k=[];for(f=0;f<j.length;f++)k.push(i[j[f]]);return k}function cG(a,b){var c={p:a,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};b?(c.next=b.next,c.prev=b,b.next.prev=c,b.next=c):(c.prev=c,c.next=c);return c}function cH(a,b){var c=a[0]-b[0],d=a[1]-b[1];return c*c+d*d}function cI(a,b,c){var d=b[0],e=b[1],f=c[0]-d,g=c[1]-e;if(f!==0||g!==0){var h=((a[0]-d)*f+(a[1]-e)*g)/(f*f+g*g);h>1?(d=c[0],e=c[1]):h>0&&(d+=f*h,e+=g*h)}f=a[0]-d;g=a[1]-e;return f*f+g*g}function cJ(a,b,c,d,e,f,g,h){var i=c-a,j=d-b,k=g-e,l=h-f,m=a-e,n=b-f,o=i*i+j*j,p=i*k+j*l,q=k*k+l*l,r=i*m+j*n,s=k*m+l*n,t=o*q-p*p,u,v,w,x,y=t,z=t;t===0?(v=0,y=1,x=s,z=q):(v=p*s-q*r,x=o*s-p*r,v<0?(v=0,x=s,z=q):v>y&&(v=y,x=s+p,z=q));x<0.0?(x=0.0,-r<0.0?(v=0.0):-r>o?(v=y):(v=-r,y=o)):x>z&&(x=z,-r+p<0.0?(v=0):-r+p>o?(v=y):(v=-r+p,y=o));u=v===0?0:v/y;w=x===0?0:x/z;var A=(1-u)*a+u*c,B=(1-u)*b+u*d,C=(1-w)*e+w*g,D=(1-w)*f+w*h,E=C-A,F=D-B;return E*E+F*F}ct.default=cu;function cK(a,b){b=af(b);b.concavity=b.concavity||Infinity;let c=[];ao(a,a=>{c.push([a[0],a[1]])});if(!c.length){return null}let d=ct(c,b.concavity);if(d.length>3){return I([d])}return null}function cL(a,b,c){c=af(c);if(!a){throw new Error('point is required')}if(!b){throw new Error('polygon is required')}let d=aJ(a),e=aP(b),f=e.type,g=b.bbox,h=e.coordinates;if(g&&cN(d,g)===!1){return !1}f==='Polygon'&&(h=[h]);let i=!1;for(let a=0;a<h.length&&!i;a++){if(cM(d,h[a][0],c.ignoreBoundary)){let b=!1,e=1;while(e<h[a].length&&!b)cM(d,h[a][e],!c.ignoreBoundary)&&(b=!0),e++;b||(i=!0)}}return i}function cM(a,b,c){let d=!1;b[0][0]===b[b.length-1][0]&&b[0][1]===b[b.length-1][1]&&(b=b.slice(0,b.length-1));for(let e=0,f=b.length-1;e<b.length;f=e++){let g=b[e][0],h=b[e][1],i=b[f][0],j=b[f][1],k=a[1]*(g-i)+h*(i-a[0])+j*(a[0]-g)===0&&(g-a[0])*(i-a[0])<=0&&(h-a[1])*(j-a[1])<=0;if(k){return!c}let l=h>a[1]!==j>a[1]&&a[0]<(i-g)*(a[1]-h)/(j-h)+g;l&&(d=!d)}return d}function cN(a,b){return b[0]<=a[0]&&b[1]<=a[1]&&b[2]>=a[0]&&b[3]>=a[1]}function cO(a,b){var c=[];av(b,function(b){as(a,function(a){cL(a,b)&&c.push(a)})});return N(c)}function cP(a,b,c){c=af(c);var d=aJ(a),e=aJ(b),f=Y((e[1]-d[1])),g=Y((e[0]-d[0])),h=Y(d[1]),i=Y(e[1]),j=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(h)*Math.cos(i);return T(2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)),c.units)}function cQ(a,b){let c=!1;return N(cU(a.features.map(function(a){let d={x:a.geometry.coordinates[0],y:a.geometry.coordinates[1]};b?(d.z=a.properties[b]):a.geometry.coordinates.length===3&&(c=!0,d.z=a.geometry.coordinates[2]);return d})).map(function(a){let b=[a.a.x,a.a.y],d=[a.b.x,a.b.y],e=[a.c.x,a.c.y],f={};c?(b.push(a.a.z),d.push(a.b.z),e.push(a.c.z)):(f={a:a.a.z,b:a.b.z,c:a.c.z});return I([[b,d,e,b]],f)}))}function cR(a,b,c){this.a=a;this.b=b;this.c=c;var d=b.x-a.x,e=b.y-a.y,f=c.x-a.x,g=c.y-a.y,h=d*(a.x+b.x)+e*(a.y+b.y),i=f*(a.x+c.x)+g*(a.y+c.y),j=2*(d*(c.y-b.y)-e*(c.x-b.x)),k,l;this.x=(g*h-e*i)/j;this.y=(d*i-f*h)/j;k=this.x-a.x;l=this.y-a.y;this.r=k*k+l*l}function cS(a,b){return b.x-a.x}function cT(a){let b=a.length,c,d,e,f,g;outer:
        while(b){d=a[--b];c=a[--b];e=b;while(e){g=a[--e];f=a[--e];if(c===f&&d===g||c===g&&d===f){a.splice(b,2);a.splice(e,2);b-=2;continue outer}}}}function cU(a){if(a.length<3){return[]}a.sort(cS);let b=a.length-1,c=a[b].x,d=a[0].x,e=a[b].y,f=e,g=1e-12,h,i,j,k,l,m;while(b--)a[b].y<e&&(e=a[b].y),a[b].y>f&&(f=a[b].y);let n=d-c,o=f-e,p=n>o?n:o,q=(d+c)*0.5,r=(f+e)*0.5,s=[new cR({__sentinel:!0,x:q-20*p,y:r-p},{__sentinel:!0,x:q,y:r+20*p},{__sentinel:!0,x:q+20*p,y:r-p})],t=[],u=[],v;b=a.length;while(b--){u.length=0;v=s.length;while(v--){n=a[b].x-s[v].x;if(n>0&&n*n>s[v].r){t.push(s[v]);s.splice(v,1);continue}o=a[b].y-s[v].y;if(n*n+o*o>s[v].r){continue}u.push(s[v].a,s[v].b,s[v].b,s[v].c,s[v].c,s[v].a);s.splice(v,1)}cT(u);v=u.length;while(v)i=u[--v],h=u[--v],j=a[b],k=i.x-h.x,l=i.y-h.y,m=2*(k*(j.y-i.y)-l*(j.x-i.x)),Math.abs(m)>g&&s.push(new cR(h,i,j))}Array.prototype.push.apply(t,s);b=t.length;while(b--)(t[b].a.__sentinel||t[b].b.__sentinel||t[b].c.__sentinel)&&t.splice(b,1);return t}var cV=cX;function cW(a,b){return a<b}function cX(c){c=c||{};typeof c==='function'&&(c={compar:c});c.compar?(this._isBefore=function(a,b){return c.compar(a,b)<0}):c.comparBefore?(this._isBefore=c.comparBefore):(this._isBefore=cW);this.length=0;this._freeSpace=c.freeSpace?this._trimArraySize:!1;this._list=new Array(c.size||100)}cX.prototype._list=null;cX.prototype._compar=null;cX.prototype._isBefore=null;cX.prototype._freeSpace=null;cX.prototype.length=0;cX.prototype.insert=function b(a){var c=++this.length,d=this._list;d[c]=a;while(c>1){var e=c>>1,f=d[e];if(!(this._isBefore(a,f)))break;d[c]=f;c=e}d[c]=a};cX.prototype.append=cX.prototype.insert;cX.prototype.push=cX.prototype.insert;cX.prototype.unshift=cX.prototype.insert;cX.prototype.enqueue=cX.prototype.insert;cX.prototype.peek=function a(){return this.length>0?this._list[1]:undefined};cX.prototype.size=function a(){return this.length};cX.prototype.remove=function a(){if(this.length<1)return undefined;var b=this._list[1],c=this._list[this.length],d=1,e=2,f,g=this.length;while(e<g){f=this._list[e];this._isBefore(this._list[e+1],f)&&(f=this._list[e+1] ,e+=1);if(!(this._isBefore(f,c)))break;this._list[d]=f;d=e;e<<=1}this._list[g]=0;this.length=--g;g&&(this._list[d]=c);this._freeSpace&&this._freeSpace(this._list,g);return b};cX.prototype.shift=cX.prototype.remove;cX.prototype.pop=cX.prototype.remove;cX.prototype.dequeue=cX.prototype.remove;cX.prototype.gc=function b(a){a||(a={});var c=a.minLength;c===undefined&&(c=0);var d=a.minFull;d===undefined&&(d=1.00);this._list.length>=c&&this.length<this._list.length*d&&this._list.splice(this.length+1,this._list.length)};cX.prototype._trimArraySize=function c(a,b){b>10000&&a.length>4*b&&a.splice(b+1,a.length)};cX.prototype._check=function c(){var d=this._isBefore,e=function(a,b){return d(a,b)?-1:1},f,g,h=0;for(f=this.length;f>1;f--)g=f>>>1,e(this._list[g],this._list[f])>0&&e(this._list[f],this._list[g])<0&&(h=f);h&&console.log("failed at",(h>>>1),h);return!h};cX.prototype=cX.prototype;var cY=Object.freeze({default:cV,__moduleExports:cV}),cZ=cY&&cV||cY,c_=cZ;Number.EPSILON===undefined&&(Number.EPSILON=Math.pow(2,-52));let c$=Number.EPSILON*Number.EPSILON,da=(a,b)=>{if(-Number.EPSILON<a&&a<Number.EPSILON){if(-Number.EPSILON<b&&b<Number.EPSILON){return 0}}if((a-b)*(a-b)<c$*a*b){return 0}return a<b?-1:1},db=(a,b)=>{let c=a.x,d=b.x;if(c<=-Number.EPSILON||Number.EPSILON<=c||d<=-Number.EPSILON||Number.EPSILON<=d){let a=c-d;if(a*a>=c$*c*d){return c<d?-1:1}}c=a.y;d=b.y;if(c<=-Number.EPSILON||Number.EPSILON<=c||d<=-Number.EPSILON||Number.EPSILON<=d){let a=c-d;if(a*a>=c$*c*d){return c<d?-1:1}}return 0},dc=(a,b)=>a.x*b.y-a.y*b.x,df=(a,b)=>a.x*b.x+a.y*b.y,dg=(a,b,c)=>{let d={x:b.x-a.x,y:b.y-a.y},e={x:c.x-a.x,y:c.y-a.y},f=dc(d,e);return da(f,0)},dh=a=>Math.sqrt(df(a,a)),di=(a,b,c)=>{let d={x:b.x-a.x,y:b.y-a.y},e={x:c.x-a.x,y:c.y-a.y};return dc(e,d)/dh(e)/dh(d)},dj=(a,b,c)=>{let d={x:b.x-a.x,y:b.y-a.y},e={x:c.x-a.x,y:c.y-a.y};return df(e,d)/dh(e)/dh(d)},dk=a=>{let b=[];if(!Array.isArray(a)){throw new Error('Input is not a Polygon or MultiPolygon')}for(let c=0,d=a.length;c<d;c++){if(!Array.isArray(a[c])){throw new Error('Input is not a Polygon or MultiPolygon')}b.push([]);for(let d=0,e=a[c].length;d<e;d++){if(!Array.isArray(a[c][d])){throw new Error('Input is not a Polygon or MultiPolygon')}if(a[c][d].length===2){b[c].push({x:a[c][d][0],y:a[c][d][1]});continue}b[c].push([]);for(let e=0,f=a[c][d].length;e<f;e++){if(!Array.isArray(a[c][d][e])||a[c][d][e].length!==2){throw new Error('Input is not a Polygon or MultiPolygon')}b[c][d].push({x:a[c][d][e][0],y:a[c][d][e][1]})}}}return b},dl=a=>{if(Array.isArray(a)){if(a.length===0)return;if(Array.isArray(a[0])){if(Array.isArray(a[0][0])){if(typeof a[0][0][0].x==='number'&&typeof a[0][0][0].y==='number'){return}}if(typeof a[0][0].x==='number'&&typeof a[0][0].y==='number'){a.unshift(a.splice(0));return}}}throw new Error('Unrecognized input - not a polygon nor multipolygon')},dm=a=>{let b=0;while(b<a.length){let c=a[b];if(c.length===0){a.splice(b,1);continue}let d=c[0];dn(d);if(d.length===0){a.splice(b,1);continue}let e=1;while(e<c.length){let a=c[e];dn(a);a.length===0?c.splice(e,1):e++}b++}},dn=a=>{if(a.length===0)return;db(a[0],a[a.length-1])!==0&&a.push({x:a[0].x,y:a[0].y});let b=(a,b,c)=>db(a,b)===0||db(b,c)===0||dg(b,a,c)===0,c=1;while(c<a.length-1)b(a[c-1],a[c],a[c+1])?a.splice(c,1):c++;while(a.length>2){if(!b(a[a.length-2],a[0],a[1]))break;a.splice(0,1);a.splice(a.length-1,1);a.push(a[0])}while(a.length<4&&a.length>0)a.pop()},dp=a=>{for(let b=0,c=a.length;b<c;b++){let d=a[b],e=d.flowIntoSE;if(e.linkedEvents.length>2){let a=e.linkedEvents.filter(a=>a.segment.ringIn===d.ringIn);if(a.length>2){a.sort(e.getLeftmostComparator(e.otherSE));let b=a[1],c=a[a.length-1];if(b.segment.flowIntoSE===b||c.segment.flowIntoSE===c){throw new Error("Self-intersecting, crossing input ring found at "+`[${e.point.x}, ${e.point.y}]`)}}}}};class dq{constructor(){this.types={INTERSECTION:0,UNION:1,XOR:2,DIFFERENCE:3}}register(a,b){this.type=a;this.numMultiPolys=b}}let dr=new dq();class ds{static compareBefore(a,b){let c=da(a.point.x,b.point.x);if(c!==0)return c<0;let d=da(a.point.y,b.point.y);if(d!==0)return d<0;if(a.isLeft!==b.isLeft)return!a.isLeft;let e=a.segment.comparePoint(b.otherSE.point);if(e!==0)return e>0;let f=a.segment.ringIn.id,g=b.segment.ringIn.id;if(f!==g)return f<g;if(a===b)return !1;throw new Error(`SweepEvent comparison failed at [${a.point.x}, ${a.point.y}]... `+"equal but not identical?")}constructor(a,b){this.point=a;this.segment=b;this.linkedEvents=[this]}link(a){let b=a.linkedEvents;for(let a=0,c=b.length;a<c;a++){let d=b[a];this.linkedEvents.push(d);d.linkedEvents=this.linkedEvents}}getAvailableLinkedEvents(){let a=[];for(let b=0,c=this.linkedEvents.length;b<c;b++){let d=this.linkedEvents[b];d!==this&&!d.segment.ringOut&&d.segment.isInResult&&a.push(d)}return a}getLeftmostComparator(a){let b=new Map(),c=c=>{let d=c.otherSE;b.set(c,{sine:di(this.point,a.point,d.point),cosine:dj(this.point,a.point,d.point)})};return(a,d)=>{b.has(a)||c(a);b.has(d)||c(d);let{sine: e,cosine: f}=b.get(a),{sine: g,cosine: h}=b.get(d),i=da(e,0),j=da(g,0);if(i>=0&&j>=0)return da(h,f);if(i<0&&j<0)return da(f,h);return da(g,e)}}get isLeft(){return this===this.segment.leftSE}get isRight(){return this===this.segment.rightSE}get otherSE(){return this.segment.getOtherSE(this)}}let dt=(a,b)=>{let c=a.ll.x,d=a.ll.y,e=a.ur.x,f=a.ur.y,g=b.x,h=b.y;return da(c,g)<=0&&da(g,e)<=0&&da(d,h)<=0&&da(h,f)<=0},du=(a,b)=>!(da(b.ur.x,a.ll.x)<0||da(a.ur.x,b.ll.x)<0||da(b.ur.y,a.ll.y)<0||da(a.ur.y,b.ll.y)<0),dv=(a,b)=>{if(!du(a,b))return null;let c=a.ll.x<b.ll.x?b.ll.x:a.ll.x,d=a.ur.x<b.ur.x?a.ur.x:b.ur.x,e=a.ll.y<b.ll.y?b.ll.y:a.ll.y,f=a.ur.y<b.ur.y?a.ur.y:b.ur.y;return{ll:{x:c,y:e},ur:{x:d,y:f}}},dw=a=>{let b=a.ll.x,c=a.ll.y,d=a.ur.x,e=a.ur.y,f=da(b,d)===0,g=da(c,e)===0;if(f&&g)return[{x:b,y:c}];if(f)return[{x:b,y:c},{x:b,y:e}];if(g)return[{x:b,y:c},{x:d,y:c}];return[{x:b,y:c},{x:b,y:e},{x:d,y:c},{x:d,y:e}]};class dx{static compare(a,b){if(a===b)return 0;let c=a.leftSE.point.x,d=a.leftSE.point.y,e=b.leftSE.point.x,f=b.leftSE.point.y,g=a.rightSE.point.x,h=b.rightSE.point.x;if(da(h,c)<0)return 1;if(da(g,e)<0)return-1;let i=a.comparePoint(b.leftSE.point),j=da(c,e);if(i===0&&a.comparePoint(b.rightSE.point)===0&&b.comparePoint(a.leftSE.point)===0&&b.comparePoint(a.rightSE.point)===0){if(j!==0)return j;if(a.ringIn.id!==b.ringIn.id){return a.ringIn.id<b.ringIn.id?-1:1}}else{if(j<0)return i===1?-1:1;if(j>0)return b.comparePoint(a.leftSE.point)===1?1:-1;if(j===0&&da(a.leftSE.point.y,b.leftSE.point.y)===0){return a.comparePoint(b.rightSE.point)>0?-1:1}return da(d,f)}throw new Error(`Segment comparison (from [${a.leftSE.point.x}, ${a.leftSR.point.y}])`+` -> to [${a.rightSE.point.x}, ${a.rightSE.point.y}]) failed... `+" segments equal but not identical?")}constructor(a,b,c){this.ringIn=c;this.ringOut=null;let d=db(a,b),e,f;if(d<0)e=a,f=b,this.flowL2R=!0;else if(d>0)e=b,f=a,this.flowL2R=!1;else{throw new Error(`Tried to create degenerate segment at [${a.x}, ${a.y}]`)};this.leftSE=new ds(e,this);this.rightSE=new ds(f,this);this._clearCache()}clone(){let a=new dx(this.leftSE.point,this.rightSE.point,this.ringIn);a.flowL2R=this.flowL2R;return a}get bbox(){let a=this.leftSE.point.y,b=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a<b?a:b},ur:{x:this.rightSE.point.x,y:a>b?a:b}}}get vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}get isVertical(){return da(this.leftSE.point.x,this.rightSE.point.x)===0}get flowIntoSE(){return this.flowL2R?this.rightSE:this.leftSE}getOtherSE(a){if(a===this.leftSE)return this.rightSE;if(a===this.rightSE)return this.leftSE;throw new Error('may only be called by own sweep events')}isAnEndpoint(a){return db(a,this.leftSE.point)===0||db(a,this.rightSE.point)===0}isPointOn(a){return dt(this.bbox,a)&&this.comparePoint(a)===0}comparePoint(a){if(this.isAnEndpoint(a))return 0;return dg(a,this.leftSE.point,this.rightSE.point)}getIntersections(a){let b=dv(this.bbox,a.bbox);if(b===null)return[];let c=[],d=dw(b);for(let b=0,e=d.length;b<e;b++){let f=d[b];(this.isAnEndpoint(f)&&a.isPointOn(f)||a.isAnEndpoint(f)&&this.isPointOn(f))&&c.push(f)}if(c.length>0)return c;let e=this.leftSE.point,f=a.leftSE.point,g=this.vector,h=a.vector,i={x:f.x-e.x,y:f.y-e.y},j=dc(g,h),k=dc(i,h)/j;if(da(k,0)<0||da(1,k)<0)return[];let l=dc(i,g)/j;if(da(l,0)<0||da(1,l)<0)return[];let m=(e.x+k*g.x+f.x+l*h.x)/2,n=(e.y+k*g.y+f.y+l*h.y)/2;m<b.ll.x&&(m=b.ll.x);m>b.ur.x&&(m=b.ur.x);n<b.ll.y&&(n=b.ll.y);n>b.ur.y&&(n=b.ur.y);return[{x:m,y:n}]}split(a){a.sort(db);a=a.filter((a,b,c)=>b===0||db(c[b-1],a)!==0);for(let b=0,c=a.length;b<c;b++){let d=a[b];if(this.isAnEndpoint(d)){throw new Error(`Cannot split segment upon endpoint at [${d.x}, ${d.y}]`)}}let b=a.shift(),c=this.clone();c.leftSE=new ds(b,c);c.rightSE=this.rightSE;this.rightSE.segment=c;this.rightSE=new ds(b,this);let d=[this.rightSE,c.leftSE];if(a.length>0){let b=c.split(a);for(let a=0,c=b.length;a<c;a++)d.push(b[a])}return d}registerPrev(a){this.prev=a;this._clearCache()}registerRingOut(a){this.ringOut=a}get prevInResult(){let a='prevInResult';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_prevInResult(){let a=this.prev;while(a&&!a.isInResult)a=a.prev;return a}get coincidents(){let a='coincidents';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_coincidents(){let a=[],b=this.leftSE.linkedEvents,c=this.rightSE.linkedEvents;for(let d=0,e=b.length;d<e;d++){let f=b[d];if(!f.isLeft)continue;if(f.segment.rightSE.linkedEvents!==c)continue;a.push(f.segment)}if(a.length>0){a.sort((a,b)=>a.ringIn.id-b.ringIn.id);for(let b=0,c=a.length;b<c;b++)a[b]._cache.coincidents=a}return a}get prevNotCoincident(){let a='prevNotCoincident';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_prevNotCoincident(){let a=this,b=this.prev;while(b&&a.coincidents===b.coincidents)a=b,b=b.prev;return b}get sweepLineEntersRing(){let a='sweepLineEntersRing';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_sweepLineEntersRing(){let a=this.prevNotCoincident;while(a){for(let b=0,c=a.coincidents.length;b<c;b++){let d=a.coincidents[b];if(d.ringIn===this.ringIn)return!d.sweepLineEntersRing}a=a.prevNotCoincident}return !0}get sweepLineEntersPoly(){if(!this.isValidEdgeForPoly)return !1;return this.ringIn.isExterior===this.sweepLineEntersRing}get sweepLineExitsPoly(){if(!this.isValidEdgeForPoly)return !1;return this.ringIn.isExterior!==this.sweepLineEntersRing}get ringsInsideOf(){let a='ringsInsideOf';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_ringsInsideOf(){if(!this.prev)return[];if(this.coincidents===this.prev.coincidents){return this.prev.ringsInsideOf}let a=[],b=this.prev.ringsInsideOf,c=this.prev.getRingsEntering(),d=this.getRingsExiting();for(let c=0,e=b.length;c<e;c++){let f=b[c];d.includes(f)||a.push(f)}for(let b=0,e=c.length;b<e;b++){let f=c[b];d.includes(f)||a.push(f)}return a}getRingsOnEdgeOf(){let a=[];for(let b=0,c=this.coincidents.length;b<c;b++)a.push(this.coincidents[b].ringIn);return a}getRingsEntering(){let a=[];for(let b=0,c=this.coincidents.length;b<c;b++){let d=this.coincidents[b];if(!d.sweepLineEntersRing)continue;a.push(d.ringIn)}return a}getRingsExiting(){let a=[];for(let b=0,c=this.coincidents.length;b<c;b++){let d=this.coincidents[b];if(d.sweepLineEntersRing)continue;a.push(d.ringIn)}return a}get isValidEdgeForPoly(){let a='isValidEdgeForPoly';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_isValidEdgeForPoly(){let a,b;this.sweepLineEntersRing?(a=this.getRingsEntering(),b=this.getRingsExiting()):(b=this.getRingsEntering(),a=this.getRingsExiting());return this.ringIn.isValid(a,b,this.ringsInsideOf)}getMultiPolysInsideOf(){let a=[];for(let b=0,c=this.ringsInsideOf.length;b<c;b++){let d=this.ringsInsideOf[b].poly;if(a.includes(d.multiPoly))continue;if(!d.isInside(this.getRingsOnEdgeOf(),this.ringsInsideOf))continue;a.push(d.multiPoly)}return a}getMultiPolysSLPEnters(a){let b=a.slice();for(let a=0,c=this.coincidents.length;a<c;a++){let d=this.coincidents[a];if(!d.sweepLineEntersPoly)continue;let e=d.ringIn.poly.multiPoly;b.includes(e)||b.push(e)}return b}getMultiPolysSLPExits(a){let b=a.slice();for(let a=0,c=this.coincidents.length;a<c;a++){let d=this.coincidents[a];if(!d.sweepLineExitsPoly)continue;let e=d.ringIn.poly.multiPoly;b.includes(e)||b.push(e)}return b}get isInResult(){let a='isInResult';this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`]());return this._cache[a]}_isInResult(){if(this!==this.coincidents[0])return !1;let a=this.getMultiPolysInsideOf(),b=this.getMultiPolysSLPEnters(a),c=this.getMultiPolysSLPExits(a);switch(dr.type){case dr.types.UNION:const i=b.length===0;const h=c.length===0;return i!==h;case dr.types.INTERSECTION:let g;let f;b.length<c.length?(g=b.length,f=c.length):(g=c.length,f=b.length);return f===dr.numMultiPolys&&g<f;case dr.types.XOR:const e=Math.abs(b.length-c.length);return e%2===1;case dr.types.DIFFERENCE:const d=a=>a.length===1&&a[0].isSubject;return d(b)!==d(c);default:throw new Error(`Unrecognized operation type found ${dr.type}`)}}_clearCache(){this._cache={}}}let dy=0;class dz{constructor(a,b){this.id=dy++;this.poly=b;this.segments=[];for(let b=1,c=a.length;b<c;b++)this.segments.push(new dx(a[b-1],a[b],this))}getSweepEvents(){let a=[];for(let b=0,c=this.segments.length;b<c;b++){let d=this.segments[b];a.push(d.leftSE);a.push(d.rightSE)}return a}get isExterior(){return this.poly.exteriorRing===this}get isInterior(){return this.poly.exteriorRing!==this}isValid(a,b,c){let d=this.poly.exteriorRing,e=this.poly.interiorRings;if(this===d){for(let a=0,b=c.length;a<b;a++){if(e.includes(c[a]))return !1}for(let b=0,c=a.length;b<c;b++){if(e.includes(a[b]))return !1}return !0}if(!c.includes(d)){if(!b.includes(d))return !1}for(let a=0,b=c.length;a<b;a++){if(e.includes(c[a]))return !1}for(let a=0,c=b.length;a<c;a++){if(e.includes(b[a]))return !1}return !0}}class dA{constructor(a,b){this.exteriorRing=new dz(a[0],this);this.interiorRings=[];for(let b=1,c=a.length;b<c;b++)this.interiorRings.push(new dz(a[b],this));this.multiPoly=b}getSweepEvents(){let a=this.exteriorRing.getSweepEvents();for(let b=0,c=this.interiorRings.length;b<c;b++){let d=this.interiorRings[b].getSweepEvents();for(let b=0,c=d.length;b<c;b++)a.push(d[b])}return a}isInside(a,b){for(let b=0,c=a.length;b<c;b++){if(a[b].poly===this)return !1}let c=!1;for(let a=0,d=b.length;a<d;a++){let e=b[a];if(e.poly!==this)continue;if(e.isInterior)return !1;c=!0}return c}}class dB{constructor(a){this.polys=[];for(let b=0,c=a.length;b<c;b++)this.polys.push(new dA(a[b],this));this.isSubject=!1}markAsSubject(){this.isSubject=!0}getSweepEvents(){let a=[];for(let b=0,c=this.polys.length;b<c;b++){let d=this.polys[b].getSweepEvents();for(let b=0,c=d.length;b<c;b++)a.push(d[b])}return a}}class dC{static factory(a){let b=[];for(let c=0,d=a.length;c<d;c++){let e=a[c];if(!e.isInResult||e.ringOut)continue;let f=null,g=e.leftSE,h=e.rightSE,i=[g],j=g.linkedEvents,k=[];while(!0){f=g;g=h;i.push(g);if(g.linkedEvents===j)break;while(!0){let a=g.getAvailableLinkedEvents();if(a.length===0){let a=i[0].point,b=i[i.length-1].point;throw new Error(`Unable to complete output ring starting at [${a.x},`+` ${a.y}]. Last matching segment found ends at `+` [${b.x}, ${b.y}].`)}if(a.length===1){h=a[0].otherSE;break}let c=null;for(let a=0,b=k.length;a<b;a++){if(k[a].linkedEvents===g.linkedEvents){c=a;break}}if(c!==null){let a=k.splice(c)[0],d=i.splice(a.index);d.unshift(d[0].otherSE);b.push(new dC(d.reverse()));continue}k.push({index:i.length,linkedEvents:g.linkedEvents});let d=g.getLeftmostComparator(f);h=a.sort(d)[0].otherSE;break}}b.push(new dC(i))}return b}constructor(a){this.events=a;for(let b=0,c=a.length;b<c;b++)a[b].segment.registerRingOut(this);this.poly=null;this._clearCache()}registerPoly(a){this.poly=a}getGeom(){let a=[[this.events[0].point.x,this.events[0].point.y]];for(let b=1,c=this.events.length-1;b<c;b++){let d=this.events[b-1].point,e=this.events[b].point,f=this.events[b+1].point;if(dg(e,d,f)===0)continue;a.push([e.x,e.y])}let b=this.events[this.events.length-2].point,c=this.events[0].point,d=this.events[1].point;dg(c,b,d)===0&&a.shift();if(a.length===0)return null;a.push(a[0]);return this.isExteriorRing?a:a.reverse()}get enclosingRing(){return this._getCached('enclosingRing')}get isExteriorRing(){return this._getCached('isExteriorRing')}_clearCache(){this._cache={}}_getCached(a,b){this._cache[a]===undefined&&(this._cache[a]=this[`_${a}`].bind(this)());return this._cache[a]}_isExteriorRing(){if(!this.enclosingRing)return !0;if(!this.enclosingRing.enclosingRing)return !1;return this.enclosingRing.enclosingRing.isExteriorRing}_enclosingRing(){let a=this.events[0].segment.prevInResult;while(a&&a.ringOut===this)a=a.prevInResult;let b=a?a.prevInResult:null;while(!0){if(!a)return null;if(!b)return a.ringOut;if(b.ringOut!==a.ringOut){if(b.ringOut.enclosingRing!==a.ringOut){return a.ringOut}else return a.ringOut.enclosingRing}a=b.prevInResult;b=a?a.prevInResult:null}}}class dD{constructor(a){this.exteriorRing=a;a.registerPoly(this);this.interiorRings=[]}addInterior(a){this.interiorRings.push(a);a.registerPoly(this)}getGeom(){let a=[this.exteriorRing.getGeom()];if(a[0]===null)return null;for(let b=0,c=this.interiorRings.length;b<c;b++){let d=this.interiorRings[b].getGeom();if(d===null)continue;a.push(d)}return a}}class dE{constructor(a){this.rings=a;this.polys=this._composePolys(a)}getGeom(){let a=[];for(let b=0,c=this.polys.length;b<c;b++){let d=this.polys[b].getGeom();if(d===null)continue;a.push(d)}return a}_composePolys(a){let b=[];for(let c=0,d=a.length;c<d;c++){let e=a[c];if(e.poly)continue;e.isExteriorRing?b.push(new dD(e)):(e.enclosingRing.poly||b.push(new dD(e.enclosingRing)),e.enclosingRing.poly.addInterior(e))}return b}}class dF{constructor(a,b){this.key=a;this.data=b;this.left=null;this.right=null}}function dG(a,b){return a>b?1:a<b?-1:0}function dH(a,b,c){if(b===null)return b;let d,e,f,g=new dF();d=e=g;while(!0){let g=c(a,b.key);if(g<0){if(b.left===null)break;if(c(a,b.left.key)<0){f=b.left;b.left=f.right;f.right=b;b=f;if(b.left===null)break}e.left=b;e=b;b=b.left}else if(g>0){if(b.right===null)break;if(c(a,b.right.key)>0){f=b.right;b.right=f.left;f.left=b;b=f;if(b.right===null)break}d.right=b;d=b;b=b.right}else{break}}d.right=b.left;e.left=b.right;b.left=g.right;b.right=g.left;return b}function dI(a,b,c,d,e){let f=new dF(a,b);e._size++;if(c===null){f.left=f.right=null;return f}c=dH(a,c,d);let g=d(a,c.key);g<0?(f.left=c.left,f.right=c,c.left=null):g>=0&&(f.right=c.right,f.left=c,c.right=null);return f}function dJ(a,b,c,d,e){let f=new dF(a,b);if(c===null){f.left=f.right=null;e._size++;return f}c=dH(a,c,d);let g=d(a,c.key);if(g===0)return c;else{g<0?(f.left=c.left,f.right=c,c.left=null):g>0&&(f.right=c.right,f.left=c,c.right=null);e._size++;return f}}function dK(a,b,c,d){let e;if(b===null)return null;b=dH(a,b,c);if(a===b.key){b.left===null?(e=b.right):(e=dH(a,b.left,c),e.right=b.right);d._size--;return e}return b}function dL(a,b,c){let d,e;if(b===null)d=e=null;else{b=dH(a,b,c);let f=c(b.key,a);f===0?(d=b.left,e=b.right):f<0?(e=b.right,b.right=null,d=b):(d=b.left,b.left=null,e=b)}return{left:d,right:e}}function dM(a,b,c){if(b===null)return a;if(a===null)return b;b=dH(a.key,b,c);b.left=a;return b}function dN(a,b,c,d,e){if(a){d(`${b}${c?' ':' '}${e(a)}\n`);let f=b+(c?'    ':'   ');a.left&&dN(a.left,f,!1,d,e);a.right&&dN(a.right,f,!0,d,e)}}class dO{constructor(a = dG){this._comparator=a;this._root=null;this._size=0}insert(a,b){return this._root=dI(a,b,this._root,this._comparator,this)}add(a,b){return this._root=dJ(a,b,this._root,this._comparator,this)}remove(a){this._root=dK(a,this._root,this._comparator,this)}pop(){let a=this._root;if(a){while(a.left)a=a.left;this._root=dH(a.key,this._root,this._comparator);this._root=dK(a.key,this._root,this._comparator,this);return{key:a.key,data:a.data}}return null}findStatic(a){let b=this._root,c=this._comparator;while(b){let d=c(a,b.key);if(d===0)return b;else d<0?(b=b.left):(b=b.right)}return null}find(a){if(this._root){this._root=dH(a,this._root,this._comparator);if(this._comparator(a,this._root.key)!==0)return null}return this._root}contains(a){let b=this._root,c=this._comparator;while(b){let d=c(a,b.key);if(d===0)return !0;else d<0?(b=b.left):(b=b.right)}return !1}forEach(a,b){let c=this._root,d=[],e=!1;while(!e)c!==null?(d.push(c),c=c.left):d.length!==0?(c=d.pop(),a.call(b,c),c=c.right):(e=!0);return this}range(a,b,c,d){let e=[],f=this._comparator,g=this._root,h;while(e.length!==0||g){if(g)e.push(g),g=g.left;else{g=e.pop();h=f(g.key,b);if(h>0){break}else if(f(g.key,a)>=0){if(c.call(d,g))return this};g=g.right}}return this}keys(){let a=[];this.forEach(({key:b})=>a.push(b));return a}values(){let a=[];this.forEach(({data:b})=>a.push(b));return a}min(){if(this._root)return this.minNode(this._root).key;return null}max(){if(this._root)return this.maxNode(this._root).key;return null}minNode(a = this._root){if(a)while(a.left)a=a.left;return a}maxNode(a = this._root){if(a)while(a.right)a=a.right;return a}at(a){let b=this._root,c=!1,d=0,e=[];while(!c){if(b)e.push(b),b=b.left;else{if(e.length>0){b=e.pop();if(d===a)return b;d++;b=b.right}else c=!0}}return null}next(a){let b=this._root,c=null;if(a.right){c=a.right;while(c.left)c=c.left;return c}let d=this._comparator;while(b){let e=d(a.key,b.key);if(e===0)break;else e<0?(c=b,b=b.left):(b=b.right)}return c}prev(a){let b=this._root,c=null;if(a.left!==null){c=a.left;while(c.right)c=c.right;return c}let d=this._comparator;while(b){let e=d(a.key,b.key);if(e===0)break;else e<0?(b=b.left):(c=b,b=b.right)}return c}clear(){this._root=null;this._size=0;return this}toList(){return dR(this._root)}load(a = [],b = [],c = !1){let d=a.length,e=this._comparator;c&&dU(a,b,0,d-1,e);if(this._root===null)this._root=dP(this._root,a,b,0,d),this._size=d;else{let c=dT(this.toList(),dQ(a,b),e);d=this._size+d;this._root=dS({head:c},0,d)}return this}isEmpty(){return this._root===null}get size(){return this._size}toString(a = a=>a.key){let b=[];dN(this._root,'',!0,a=>b.push(a),a);return b.join('')}update(a,b,c){let d=this._comparator,{left:e,right:f}=dL(a,this._root,d);this._size--;d(a,b)<0?(f=dI(b,c,f,d,this)):(e=dI(b,c,e,d,this));this._root=dM(e,f,d)}split(a){return dL(a,this._root,this._comparator)}}function dP(a,b,c,d,e){let f=e-d;if(f>0){let g=d+Math.floor(f/2),h=b[g],i=c[g],j={key:h,data:i,parent:a};j.left=dP(j,b,c,d,g);j.right=dP(j,b,c,g+1,e);return j}return null}function dQ(a,b){let c={next:null},d=c;for(let c=0;c<a.length;c++)d=d.next={key:a[c],data:b[c]};d.next=null;return c.next}function dR(a){var b=a,c=[],d=!1;let e={next:null},f=e;while(!d)b?(c.push(b),b=b.left):c.length>0?(b=f=f.next=c.pop(),b=b.right):(d=!0);f.next=null;return e.next}function dS(a,b,c){let d=c-b;if(d>0){let e=b+Math.floor(d/2),f=dS(a,b,e),g=a.head;g.left=f;a.head=a.head.next;g.right=dS(a,e+1,c);return g}return null}function dT(a,b,c = (a,b)=>a-b){let d={},e=d,f=a,g=b;while(f!==null&&g!==null)c(f.key,g.key)<0?(e.next=f,f=f.next):(e.next=g,g=g.next),e=e.next;f!==null?(e.next=f):g!==null&&(e.next=g);return d.next}function dU(a,b,c,d,e){if(c>=d)return;let f=a[c+d>>1],g=c-1,h=d+1;while(!0){do{g++}while(e(a[g],f)<0);do{h--}while(e(a[h],f)>0);if(g>=h)break;let c=a[g];a[g]=a[h];a[h]=c;c=b[g];b[g]=b[h];b[h]=c}dU(a,b,c,h,e);dU(a,b,h+1,d,e)}class dV{constructor(a = dx.compare){this.tree=new dO(a);this.segments=[];this.prevEvent=null}process(a){let b=a.segment,c=[],d=a.isLeft?this.tree.insert(b):this.tree.find(b),e=this.tree.prev(d),f=e?e.key:null,g=this.tree.next(d),h=g?g.key:null;if(a.isLeft){let d=[];if(f){let a=f.getIntersections(b);if(a.length>0){let e=this._possibleSplit(f,a);for(let a=0,b=e.length;a<b;a++)c.push(e[a]);for(let c=0,e=a.length;c<e;c++){let f=a[c];b.isAnEndpoint(f)||d.push(f)}}}if(h){let a=h.getIntersections(b);if(a.length>0){let e=this._possibleSplit(h,a);for(let a=0,b=e.length;a<b;a++)c.push(e[a]);for(let c=0,e=a.length;c<e;c++){let f=a[c];b.isAnEndpoint(f)||d.push(f)}}}if(c.length>0||d.length>0){this.tree.remove(b);if(d.length>0){let a=b.split(d);for(let b=0,d=a.length;b<d;b++)c.push(a[b])}c.push(a);return c}this.segments.push(b);b.registerPrev(f)}else{if(f&&h){let a=f.getIntersections(h);if(a.length>0){let b=this._possibleSplit(f,a);for(let a=0,d=b.length;a<d;a++)c.push(b[a]);b=this._possibleSplit(h,a);for(let a=0,d=b.length;a<d;a++)c.push(b[a])}}this.tree.remove(b)}this.prevEvent&&db(this.prevEvent.point,a.point)===0&&this.prevEvent.link(a);this.prevEvent=a;return c}_possibleSplit(a,b){let c=[];for(let d=0,e=b.length;d<e;d++){let f=b[d];a.isAnEndpoint(f)||c.push(f)}let d;c.length>0?(this.tree.remove(a),d=a.split(c),this.tree.insert(a)):(d=[]);return d}}function dW(a,b,c){let d=[dk(b)];for(let a=0,b=c.length;a<b;a++)d.push(dk(c[a]));for(let a=0,b=d.length;a<b;a++)dl(d[a]),dm(d[a]);let e=[];for(let a=0,b=d.length;a<b;a++)e.push(new dB(d[a]));e[0].markAsSubject();dr.register(a,e.length);let f=new c_({comparBefore:ds.compareBefore});for(let a=0,b=e.length;a<b;a++){let c=e[a].getSweepEvents();for(let a=0,b=c.length;a<b;a++)f.insert(c[a])}let g=new dV();while(f.length){let a=g.process(f.remove());for(let b=0,c=a.length;b<c;b++)f.insert(a[b])}dp(g.segments);let h=dC.factory(g.segments),i=new dE(h);return i.getGeom()}let dX=(a,...b)=>{return dW(dr.types.UNION,a,b)},dY=(a,...b)=>{return dW(dr.types.INTERSECTION,a,b)},dZ=(a,...b)=>{return dW(dr.types.DIFFERENCE,a,b)};function d_(a){let b=[];av(a,function(a){a.type==='Polygon'?b.push(a.coordinates):a.coordinates.forEach(function(a){b.push(a)})});var c=dX(b);if(c.length===0)return null;else return Q(c)}function d$(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.propertyName;aO(a,'Polygon','dissolve');let d=[];if(b.propertyName===null){return d_(a)}else{let b={};as(a,function(a){b.hasOwnProperty(a.properties[c])||(b[a.properties[c]]=[]);b[a.properties[c]].push(a)});var e=Object.keys(b);for(var f=0;f<e.length;f++)d.push(d_(N(b[e[f]])))}return N(d)}function ea(a,b){b=af(b);let c=b.maxEdge||Infinity,d=eb(a),e=cQ(d);e.features=e.features.filter(a=>{let d=a.geometry.coordinates[0][0],e=a.geometry.coordinates[0][1],f=a.geometry.coordinates[0][2],g=cP(d,e,b),h=cP(e,f,b),i=cP(d,f,b);return g<=c&&h<=c&&i<=c});if(e.features.length<1){return null}return d$(e)}function eb(a){let b=[],c={};as(a,a=>{if(!a.geometry){return}let d=a.geometry.coordinates.join("-");c.hasOwnProperty(d)||(b.push(a),c[d]=!0)});return N(b)}function ec(a,b,c,d){var e=bm(6),f=b.features.map(function(a){return{minX:a.geometry.coordinates[0],minY:a.geometry.coordinates[1],maxX:a.geometry.coordinates[0],maxY:a.geometry.coordinates[1],property:a.properties[c]}});e.load(f);a.features.forEach(function(a){a.properties||(a.properties={});var b=aI(a),c=e.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]}),f=[];c.forEach(function(b){cL([b.minX,b.minY],a)&&f.push(b.property)});a.properties[d]=f});return a}function ed(a){if(!a){throw new Error('geojson is required')}switch(a.type){case 'Feature':return ef(a);case 'FeatureCollection':return eh(a);case 'Point':;case 'LineString':;case 'Polygon':;case 'MultiPoint':;case 'MultiLineString':;case 'MultiPolygon':;case 'GeometryCollection':return ei(a);default:throw new Error('unknown GeoJSON type')}}function ef(a){let b={type:'Feature'};Object.keys(a).forEach(function(c){switch(c){case 'type':;case 'properties':;case 'geometry':return;default:b[c]=a[c]}});b.properties=eg(a.properties);b.geometry=ei(a.geometry);return b}function eg(a){let b={};if(!a){return b}Object.keys(a).forEach(function(c){let d=a[c];typeof d==='object'?(d===null?(b[c]=null):Array.isArray(d)?(b[c]=d.map(function(a){return a})):(b[c]=eg(d))):(b[c]=d)});return b}function eh(a){let b={type:'FeatureCollection'};Object.keys(a).forEach(function(c){switch(c){case 'type':;case 'features':return;default:b[c]=a[c]}});b.features=a.features.map(function(a){return ef(a)});return b}function ei(a){let b={type:a.type};a.bbox&&(b.bbox=a.bbox);if(a.type==='GeometryCollection'){b.geometries=a.geometries.map(function(a){return ei(a)});return b}b.coordinates=ej(a.coordinates);return b}function ej(a){let b=a;if(typeof b[0]!=='object'){return b.slice()}return b.map(function(a){return ej(a)})}function ek(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.mutate;if(!a)throw new Error('geojson is required');(c===!1||c===undefined)&&(a=ed(a));ao(a,function(a){var b=a[0],c=a[1];a[0]=c;a[1]=b});return a}function el(a,b){b=af(b);var c=typeof b==='object'?b.mutate:b;if(!a)throw new Error('geojson is required');var d=aQ(a),e=[];switch(d){case 'LineString':e=em(a);break;case 'MultiLineString':;case 'Polygon':aK(a).forEach(function(a){e.push(em(a))});break;case 'MultiPolygon':aK(a).forEach(function(a){var b=[];a.forEach(function(a){b.push(em(a))});e.push(b)});break;case 'Point':return a;case 'MultiPoint':var f={};aK(a).forEach(function(a){var b=a.join('-');f.hasOwnProperty(b)||(e.push(a),f[b]=!0)});break;default:throw new Error(d+' geometry not supported')};if(a.coordinates){if(c===!0){a.coordinates=e;return a}return{type:d,coordinates:e}}else{if(c===!0){a.geometry.coordinates=e;return a}return E({type:d,coordinates:e},a.properties,{bbox:a.bbox,id:a.id})}}function em(a){var b=aK(a);if(b.length===2&&!en(b[0],b[1]))return b;var c=[],d=b.length-1,e=c.length;c.push(b[0]);for(var f=1;f<d;f++){var g=c[c.length-1];if(b[f][0]===g[0]&&b[f][1]===g[1])continue;else c.push(b[f]),e=c.length,e>2&&(eo(c[e-3],c[e-1],c[e-2])&&c.splice(c.length-2,1))}c.push(b[b.length-1]);e=c.length;if(en(b[0],b[b.length-1])&&e<4)throw new Error('invalid polygon');eo(c[e-3],c[e-1],c[e-2])&&c.splice(c.length-2,1);return c}function en(a,b){return a[0]===b[0]&&a[1]===b[1]}function eo(a,b,c){var d=c[0],e=c[1],f=a[0],g=a[1],h=b[0],i=b[1],j=d-f,k=e-g,l=h-f,m=i-g,n=j*m-k*l;if(n!==0)return !1;else if(Math.abs(l)>=Math.abs(m))return l>0?f<=d&&d<=h:h<=d&&d<=f;else return m>0?g<=e&&e<=i:i<=e&&e<=g}function ep(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d}function eq(a,b,c){var d=b.x,e=b.y,f=c.x-d,g=c.y-e;if(f!==0||g!==0){var h=((a.x-d)*f+(a.y-e)*g)/(f*f+g*g);h>1?(d=c.x,e=c.y):h>0&&(d+=f*h,e+=g*h)}f=a.x-d;g=a.y-e;return f*f+g*g}function es(a,b){var c=a[0],d=[c],e;for(var f=1,g=a.length;f<g;f++)e=a[f],ep(e,c)>b&&(d.push(e),c=e);c!==e&&d.push(e);return d}function et(a,b,c,d,e){var f=d,g;for(var h=b+1;h<c;h++){var i=eq(a[h],a[b],a[c]);i>f&&(g=h,f=i)}f>d&&(g-b>1&&et(a,b,g,d,e),e.push(a[g]),c-g>1&&et(a,g,c,d,e))}function eu(a,b){var c=a.length-1,d=[a[0]];et(a,0,c,b,d);d.push(a[c]);return d}function ew(a,b,c){if(a.length<=2)return a;var d=b!==undefined?b*b:1;a=c?a:es(a,d);a=eu(a,d);return a}function ey(a,b){b=af(b);var c=b.tolerance!==undefined?b.tolerance:1,d=b.highQuality||!1,e=b.mutate||!1;if(!a)throw new Error('geojson is required');if(c&&c<0)throw new Error('invalid tolerance');e!==!0&&(a=ed(a));av(a,function(a){ez(a,c,d)});return a}function ez(a,b,c){var d=a.type;if(d==='Point'||d==='MultiPoint')return a;el(a,{mutate:!0});var e=a.coordinates;switch(d){case 'LineString':a.coordinates=eA(e,b,c);break;case 'MultiLineString':a.coordinates=e.map(function(a){return eA(a,b,c)});break;case 'Polygon':a.coordinates=eB(e,b,c);break;case 'MultiPolygon':a.coordinates=e.map(function(a){return eB(a,b,c)})};return a}function eA(a,b,c){return ew(a.map(function(a){return{x:a[0],y:a[1],z:a[2]}}),b,c).map(function(a){return a.z?[a.x,a.y,a.z]:[a.x,a.y]})}function eB(a,b,c){return a.map(function(a){var d=a.map(function(a){return{x:a[0],y:a[1]}});if(d.length<4){throw new Error('invalid polygon')}var e=ew(d,b,c).map(function(a){return[a.x,a.y]});while(!eC(e))b-=b*0.01,e=ew(d,b,c).map(function(a){return[a.x,a.y]});(e[e.length-1][0]!==e[0][0]||e[e.length-1][1]!==e[0][1])&&e.push(e[0]);return e})}function eC(a){if(a.length<3)return !1;return!(a.length===3&&(a[2][0]===a[0][0]&&a[2][1]===a[0][1]))}var eD=bi(function(a,b){b.__esModule=!0;var c=function(){function a(a){this.points=a.points||[];this.duration=a.duration||10000;this.sharpness=a.sharpness||0.85;this.centers=[];this.controls=[];this.stepLength=a.stepLength||60;this.length=this.points.length;this.delay=0;for(var b=0;b<this.length;b++)this.points[b].z=this.points[b].z||0;for(b=0;b<this.length-1;b++){var c=this.points[b],d=this.points[b+1];this.centers.push({x:(c.x+d.x)/2,y:(c.y+d.y)/2,z:(c.z+d.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(b=0;b<this.centers.length-1;b++){c=this.centers[b],d=this.centers[b+1],e=this.points[b+1].x-(this.centers[b].x+this.centers[b+1].x)/2,f=this.points[b+1].y-(this.centers[b].y+this.centers[b+1].y)/2,g=this.points[b+1].z-(this.centers[b].y+this.centers[b+1].z)/2;this.controls.push([{x:(1.0-this.sharpness)*this.points[b+1].x+this.sharpness*(this.centers[b].x+e),y:(1.0-this.sharpness)*this.points[b+1].y+this.sharpness*(this.centers[b].y+f),z:(1.0-this.sharpness)*this.points[b+1].z+this.sharpness*(this.centers[b].z+g)},{x:(1.0-this.sharpness)*this.points[b+1].x+this.sharpness*(this.centers[b+1].x+e),y:(1.0-this.sharpness)*this.points[b+1].y+this.sharpness*(this.centers[b+1].y+f),z:(1.0-this.sharpness)*this.points[b+1].z+this.sharpness*(this.centers[b+1].z+g)}])}this.controls.push([this.points[this.length-1],this.points[this.length-1]]);this.steps=this.cacheSteps(this.stepLength);return this}a.prototype.cacheSteps=function(a){var b=[],c=this.pos(0);b.push(0);for(var d=0;d<this.duration;d+=10){var e=this.pos(d),f=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y)+(e.z-c.z)*(e.z-c.z));f>a&&(b.push(d),c=e)}return b};a.prototype.vector=function(a){var b=this.pos(a+10),c=this.pos(a-10);return{angle:180*Math.atan2(b.y-c.y,b.x-c.x)/3.14,speed:Math.sqrt((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y)+(c.z-b.z)*(c.z-b.z))}};a.prototype.pos=function(a){var b=a-this.delay;b<0&&(b=0);b>this.duration&&(b=this.duration-1);var c=b/this.duration;if(c>=1){return this.points[this.length-1]}var e=Math.floor((this.points.length-1)*c),f=(this.length-1)*c-e;return d(f,this.points[e],this.controls[e][1],this.controls[e+1][0],this.points[e+1])};return a}();b["default"]=c;function d(a,b,c,d,f){var g=e(a),h={x:f.x*g[0]+d.x*g[1]+c.x*g[2]+b.x*g[3],y:f.y*g[0]+d.y*g[1]+c.y*g[2]+b.y*g[3],z:f.z*g[0]+d.z*g[1]+c.z*g[2]+b.z*g[3]};return h}function e(a){var b=a*a,c=b*a;return[c,3*b*(1-a),3*a*(1-a)*(1-a),(1-a)*(1-a)*(1-a)]}}),eE=bh(eD);function eF(a,b){b=af(b);let c=b.resolution||10000,d=b.sharpness||0.85,e=[],f=aP(a).coordinates.map(a=>{return{x:a[0],y:a[1]}}),g=new eE({duration:c,points:f,sharpness:d});for(let a=0;a<g.duration;a+=10){let b=g.pos(a);Math.floor(a/100)%2===0&&e.push([b.x,b.y])}return K(e,b.properties)}function eG(a,b,c,d){a=ed(a);b=ed(b);as(a,function(a){a.properties||(a.properties={});as(b,function(b){a.properties[d]===undefined&&(cL(a,b)&&(a.properties[d]=b.properties[c]))})});return a}function eH(a,b){if(!a)throw new Error('featurecollection is required');if(b===null||b===undefined)throw new Error('num is required');if(typeof b!=='number')throw new Error('num must be a number');var c=N(eI(a.features,b));return c}function eI(a,b){var c=a.slice(0),d=a.length,e=d-b,f,g;while(d-->e)g=Math.floor((d+1)*Math.random()),f=c[g],c[g]=c[d],c[d]=f;return c.slice(e)}function eJ(a,b){b=af(b);let c=Number(a[0]),d=Number(a[1]),e=Number(a[2]),f=Number(a[3]);if(a.length===6){throw new Error('@turf/bbox-polygon does not support BBox with 6 positions')}let g=[c,d],h=[c,f],i=[e,f],j=[e,d];return I([[g,j,i,h,g]],b.properties,{bbox:a,id:b.id})}function eK(a){return eJ(aI(a))}function eL(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=cP(a.slice(0,2),[d,c]),g=cP(a.slice(0,2),[b,e]);if(f>=g){var h=(c+e)/2;return[b,h-(d-b)/2,d,h+(d-b)/2]}else{var i=(b+d)/2;return[i-(e-c)/2,c,i+(e-c)/2,e]}}function eM(a,b,c,d){d=af(d);let e=aJ(a),f=Y(e[0]),g=Y(e[1]),h=Y(c),i=U(b,d.units),j=Math.asin(Math.sin(g)*Math.cos(i)+Math.cos(g)*Math.sin(i)*Math.cos(h)),k=f+Math.atan2(Math.sin(h)*Math.sin(i)*Math.cos(g),Math.cos(i)-Math.sin(g)*Math.sin(j)),l=X(k),m=X(j);return G([l,m],d.properties)}function eN(a,b,c){c=af(c);let d=c.steps||64,e=c.properties?c.properties:!Array.isArray(a)&&a.type==='Feature'&&a.properties?a.properties:{},f=[];for(let e=0;e<d;e++)f.push(eM(a,b,e*-360/d,c).geometry.coordinates);f.push(f[0]);return I([f],e)}function eO(a,b,c){c=af(c);if(c.final===!0){return eP(a,b)}let d=aJ(a),e=aJ(b),f=Y(d[0]),g=Y(e[0]),h=Y(d[1]),i=Y(e[1]),j=Math.sin(g-f)*Math.cos(i),k=Math.cos(h)*Math.sin(i)-Math.sin(h)*Math.cos(i)*Math.cos(g-f);return X(Math.atan2(j,k))}function eP(a,b){let c=eO(b,a);c=(c+180)%360;return c}function eQ(a,b){var c=cP(a,b),d=eO(a,b),e=eM(a,c/2,d);return e}function eR(a,b){b=af(b);let c=aI(a),d=(c[0]+c[2])/2,e=(c[1]+c[3])/2;return G([d,e],b.properties,b)}function eS(a,b){b=af(b);let c=0,d=0,e=0;ao(a,function(a){c+=a[0];d+=a[1];e++});return G([c/e,d/e],b.properties)}function eT(a,b){b=af(b);switch(aQ(a)){case 'Point':return G(aJ(a),b.properties);case 'Polygon':var t=[];ao(a,function(a){t.push(a)});var s=eS(a,{properties:b.properties});var r=s.geometry.coordinates;var q=0;var p=0;var o=0;var g,h,i,j,k,l,m,n;var f=t.map(function(a){return[a[0]-r[0],a[1]-r[1]]});for(g=0;g<t.length-1;g++)h=f[g],j=h[0],l=h[1],i=f[g+1],k=i[0],m=i[1],n=j*m-k*l,o+=n,q+=(j+k)*n,p+=(l+m)*n;if(o===0){return s}else{var d=o*0.5,e=1/(6*d);return G([r[0]+e*q,r[1]+e*p],b.properties)};default:var c=cK(a);if(c)return eT(c,{properties:b.properties});else return eS(a,{properties:b.properties})}}function eU(a){var b={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},c=Object.keys(b).reduce(function(a,b){a[b.replace('Multi','')]=b;return a},{});function d(a,c,d){d?(b[c].coordinates=b[c].coordinates.concat(a.geometry.coordinates)):b[c].coordinates.push(a.geometry.coordinates);b[c].properties.push(a.properties)}as(a,function(a){if(!a.geometry)return;b[a.geometry.type]?d(a,a.geometry.type,!0):c[a.geometry.type]&&d(a,c[a.geometry.type],!1)});return N(Object.keys(b).filter(function(a){return b[a].coordinates.length}).sort().map(function(a){var c={type:a,coordinates:b[a].coordinates},d={collectedProperties:b[a].properties};return E(c,d)}))}function eV(a){var b=[];a.type==='FeatureCollection'?as(a,function(a){ao(a,function(c){b.push(G(c,a.properties))})}):ao(a,function(c){b.push(G(c,a.properties))});return N(b)}var eW=eY,eX=eY;function eY(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=eZ(a,0,e,c,!0),g=[];if(!f)return g;var h,i,j,k,l,m,n;d&&(f=ff(a,b,f,c));if(a.length>80*c){h=j=a[0];i=k=a[1];for(var o=c;o<e;o+=c)l=a[o],m=a[o+1],l<h&&(h=l),m<i&&(i=m),l>j&&(j=l),m>k&&(k=m);n=Math.max(j-h,k-i);n=n!==0?1/n:0}e$(f,g,c,h,i,n);return g}function eZ(a,b,c,d,e){var f,g;if(e===fA(a,b,c,d)>0){for(f=b;f<c;f+=d)g=fx(f,a[f],a[f+1],g)}else{for(f=c-d;f>=b;f-=d)g=fx(f,a[f],a[f+1],g)}g&&fr(g,g.next)&&(fy(g),g=g.next);return g}function e_(a,b){if(!a)return a;b||(b=a);var c=a,d;do{d=!1;if(!c.steiner&&(fr(c,c.next)||fq(c.prev,c,c.next)===0)){fy(c);c=b=c.prev;if(c===c.next)break;d=!0}else c=c.next}while(d||c!==b);return b}function e$(a,b,c,d,e,f,g){if(!a)return;!g&&f&&fj(a,d,e,f);var h=a,i,j;while(a.prev!==a.next){i=a.prev;j=a.next;if(f?fb(a,d,e,f):fa(a)){b.push(i.i/c);b.push(a.i/c);b.push(j.i/c);fy(a);a=j.next;h=j.next;continue}a=j;if(a===h){g?g===1?(a=fd(a,b,c),e$(a,b,c,d,e,f,2)):g===2&&fe(a,b,c,d,e,f):e$(e_(a),b,c,d,e,f,1);break}}}function fa(a){var b=a.prev,c=a,d=a.next;if(fq(b,c,d)>=0)return !1;var e=a.next.next;while(e!==a.prev){if(fo(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&fq(e.prev,e,e.next)>=0)return !1;e=e.next}return !0}function fb(a,b,c,d){var e=a.prev,f=a,g=a.next;if(fq(e,f,g)>=0)return !1;var h=e.x<f.x?(e.x<g.x?e.x:g.x):(f.x<g.x?f.x:g.x),i=e.y<f.y?(e.y<g.y?e.y:g.y):(f.y<g.y?f.y:g.y),j=e.x>f.x?(e.x>g.x?e.x:g.x):(f.x>g.x?f.x:g.x),k=e.y>f.y?(e.y>g.y?e.y:g.y):(f.y>g.y?f.y:g.y),l=fl(h,i,b,c,d),m=fl(j,k,b,c,d),n=a.prevZ,o=a.nextZ;while(n&&n.z>=l&&o&&o.z<=m){if(n!==a.prev&&n!==a.next&&fo(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&fq(n.prev,n,n.next)>=0)return !1;n=n.prevZ;if(o!==a.prev&&o!==a.next&&fo(e.x,e.y,f.x,f.y,g.x,g.y,o.x,o.y)&&fq(o.prev,o,o.next)>=0)return !1;o=o.nextZ}while(n&&n.z>=l){if(n!==a.prev&&n!==a.next&&fo(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&fq(n.prev,n,n.next)>=0)return !1;n=n.prevZ}while(o&&o.z<=m){if(o!==a.prev&&o!==a.next&&fo(e.x,e.y,f.x,f.y,g.x,g.y,o.x,o.y)&&fq(o.prev,o,o.next)>=0)return !1;o=o.nextZ}return !0}function fd(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!fr(e,f)&&fs(e,d,d.next,f)&&fu(e,f)&&fu(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),fy(d),fy(d.next),d=a=f);d=d.next}while(d!==a);return d}function fe(a,b,c,d,e,f){var g=a;do{var h=g.next.next;while(h!==g.prev){if(g.i!==h.i&&fp(g,h)){var i=fw(g,h);g=e_(g,g.next);i=e_(i,i.next);e$(g,b,c,d,e,f);e$(i,b,c,d,e,f);return}h=h.next}g=g.next}while(g!==a)}function ff(a,b,c,d){var e=[],f,g,h,i,j;for(f=0, g=b.length;f<g;f++)h=b[f]*d,i=f<g-1?b[f+1]*d:a.length,j=eZ(a,h,i,d,!1),j===j.next&&(j.steiner=!0),e.push(fm(j));e.sort(fg);for(f=0;f<e.length;f++)fh(e[f],c),c=e_(c,c.next);return c}function fg(a,b){return a.x-b.x}function fh(a,b){b=fi(a,b);if(b){var c=fw(b,a);e_(c,c.next)}}function fi(a,b){var c=b,d=a.x,e=a.y,f=-Infinity,g;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var h=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=d&&h>f){f=h;if(h===d){if(e===c.y)return c;if(e===c.next.y)return c.next}g=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!g)return null;if(d===f)return g.prev;var i=g,j=g.x,k=g.y,l=Infinity,m;c=g.next;while(c!==i)d>=c.x&&c.x>=j&&d!==c.x&&fo(e<k?d:f,e,j,k,e<k?f:d,e,c.x,c.y)&&(m=Math.abs(e-c.y)/(d-c.x),(m<l||m===l&&c.x>g.x)&&fu(c,a)&&(g=c,l=m)),c=c.next;return g}function fj(a,b,c,d){var e=a;do{e.z===null&&(e.z=fl(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next}while(e!==a);e.prevZ.nextZ=null;e.prevZ=null;fk(e)}function fk(a){var b,c,d,e,f,g,h,i,j=1;do{c=a;a=null;f=null;g=0;while(c){g++;d=c;h=0;for(b=0;b<j;b++){h++;d=d.nextZ;if(!d)break}i=j;while(h>0||i>0&&d)h!==0&&(i===0||!d||c.z<=d.z)?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--),f?(f.nextZ=e):(a=e),e.prevZ=f,f=e;c=d}f.nextZ=null;j*=2}while(g>1);return a}function fl(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&0x00FF00FF;a=(a|a<<4)&0x0F0F0F0F;a=(a|a<<2)&0x33333333;a=(a|a<<1)&0x55555555;b=(b|b<<8)&0x00FF00FF;b=(b|b<<4)&0x0F0F0F0F;b=(b|b<<2)&0x33333333;b=(b|b<<1)&0x55555555;return a|b<<1}function fm(a){var b=a,c=a;do{b.x<c.x&&(c=b),b=b.next}while(b!==a);return c}function fo(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function fp(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!ft(a,b)&&fu(a,b)&&fu(b,a)&&fv(a,b)}function fq(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function fr(a,b){return a.x===b.x&&a.y===b.y}function fs(a,b,c,d){if(fr(a,b)&&fr(c,d)||fr(a,d)&&fr(c,b))return !0;return fq(a,b,c)>0!==fq(a,b,d)>0&&fq(c,d,a)>0!==fq(c,d,b)>0}function ft(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&fs(c,c.next,a,b))return !0;c=c.next}while(c!==a);return !1}function fu(a,b){return fq(a.prev,a,a.next)<0?fq(a,b,a.next)>=0&&fq(a,a.prev,b)>=0:fq(a,b,a.prev)<0||fq(a,a.next,b)<0}function fv(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do{c.y>f!==c.next.y>f&&c.next.y!==c.y&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next}while(c!==a);return d}function fw(a,b){var c=new fz(a.i,a.x,a.y),d=new fz(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function fx(a,b,c,d){var e=new fz(a,b,c);d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e);return e}function fy(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function fz(a,b,c){this.i=a;this.x=b;this.y=c;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=!1}eY.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(fA(a,0,f,c));if(e){for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(fA(a,j,k,c))}}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return g===0&&l===0?0:Math.abs((l-g)/g)};function fA(a,b,c,d){var e=0;for(var f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}eY.flatten=function(a){var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0;for(var e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++){for(var g=0;g<b;g++)c.vertices.push(a[e][f][g])}e>0&&(d+=a[e-1].length,c.holes.push(d))}return c};eW.default=eX;function fB(a){if(!a.geometry||a.geometry.type!=='Polygon'&&a.geometry.type!=='MultiPolygon'){throw new Error('input must be a Polygon or MultiPolygon')}var b={type:'FeatureCollection',features:[]};a.geometry.type==='Polygon'?(b.features=fC(a.geometry.coordinates)):a.geometry.coordinates.forEach(function(a){b.features=b.features.concat(fC(a))});return b}function fC(a){var b=fD(a),c=2,d=eW(b.vertices,b.holes,c),e=[],f=[];d.forEach(function(a,e){var g=d[e];f.push([b.vertices[g*c],b.vertices[g*c+1]])});for(var g=0;g<f.length;g+=3){var h=f.slice(g,g+3);h.push(f[g]);e.push(I([h]))}return e}function fD(a){var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0;for(var e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++){for(var g=0;g<b;g++)c.vertices.push(a[e][f][g])}e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}function fE(a,b){if(!a)throw new Error('targetPoint is required');if(!b)throw new Error('points is required');let c=null,d=Infinity,e=0;as(b,function(b,c){let f=cP(a,b);f<d&&(e=c,d=f)});c=ed(b.features[e]);c.properties.featureIndex=e;c.properties.distanceToPoint=d;return c}function fF(a){if(!a){throw new Error('geojson is required')}let b=[];az(a,function(a){fG(a,b)});return N(b)}function fG(a,b){let c=[],d=a.geometry;if(d!==null){switch(d.type){case 'Polygon':c=aK(d);break;case 'LineString':c=[aK(d)]};c.forEach(function(c){let d=fH(c,a.properties);d.forEach(function(a){a.id=b.length;b.push(a)})})}}function fH(a,b){let c=[];a.reduce(function(a,d){let e=K([a,d],b);e.bbox=fI(a,d);c.push(e);return d});return c}function fI(a,b){let c=a[0],d=a[1],e=b[0],f=b[1],g=c<e?c:e,h=d<f?d:f,i=c>e?c:e,j=d>f?d:f;return[g,h,i,j]}var fJ=bi(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.earthRadius=6371008.8;b.factors={centimeters:b.earthRadius*100,centimetres:b.earthRadius*100,degrees:b.earthRadius/111325,feet:b.earthRadius*3.28084,inches:b.earthRadius*39.370,kilometers:b.earthRadius/1000,kilometres:b.earthRadius/1000,meters:b.earthRadius,metres:b.earthRadius,miles:b.earthRadius/1609.344,millimeters:b.earthRadius*1000,millimetres:b.earthRadius*1000,nauticalmiles:b.earthRadius/1852,radians:1,yards:b.earthRadius/1.0936};b.unitsFactors={centimeters:100,centimetres:100,degrees:0.000008982708286548395,feet:3.28084,inches:39.370,kilometers:0.001,kilometres:0.001,meters:1,metres:1,miles:0.0006213711922373339,millimeters:1000,millimetres:1000,nauticalmiles:0.0005399568034557236,radians:1/b.earthRadius,yards:0.91441111923921};b.areaFactors={acres:0.000247105,centimeters:10000,centimetres:10000,feet:10.763910417,inches:1550.003100006,kilometers:0.000001,kilometres:0.000001,meters:1,metres:1,miles:3.86e-7,millimeters:1000000,millimetres:1000000,yards:1.195990046};function c(a,b,c){c===void 0&&(c={});var d={type:"Feature"};(c.id===0||c.id)&&(d.id=c.id);c.bbox&&(d.bbox=c.bbox);d.properties=b||{};d.geometry=a;return d}b.feature=c;function d(a,b,c){c===void 0&&(c={});switch(a){case "Point":return e(b).geometry;case "LineString":return i(b).geometry;case "Polygon":return g(b).geometry;case "MultiPoint":return m(b).geometry;case "MultiLineString":return l(b).geometry;case "MultiPolygon":return n(b).geometry;default:throw new Error(a+" is invalid")}}b.geometry=d;function e(a,b,d){d===void 0&&(d={});var e={type:"Point",coordinates:a};return c(e,b,d)}b.point=e;function f(a,b,c){c===void 0&&(c={});return k(a.map(function(a){return e(a,b)}),c)}b.points=f;function g(a,b,d){d===void 0&&(d={});for(var e=0,f=a;e<f.length;e++){var g=f[e];if(g.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var h=0;h<g[g.length-1].length;h++){if(g[g.length-1][h]!==g[0][h]){throw new Error("First and last Position are not equivalent.")}}}var i={type:"Polygon",coordinates:a};return c(i,b,d)}b.polygon=g;function h(a,b,c){c===void 0&&(c={});return k(a.map(function(a){return g(a,b)}),c)}b.polygons=h;function i(a,b,d){d===void 0&&(d={});if(a.length<2){throw new Error("coordinates must be an array of two or more positions")}var e={type:"LineString",coordinates:a};return c(e,b,d)}b.lineString=i;function j(a,b,c){c===void 0&&(c={});return k(a.map(function(a){return i(a,b)}),c)}b.lineStrings=j;function k(a,b){b===void 0&&(b={});var c={type:"FeatureCollection"};b.id&&(c.id=b.id);b.bbox&&(c.bbox=b.bbox);c.features=a;return c}b.featureCollection=k;function l(a,b,d){d===void 0&&(d={});var e={type:"MultiLineString",coordinates:a};return c(e,b,d)}b.multiLineString=l;function m(a,b,d){d===void 0&&(d={});var e={type:"MultiPoint",coordinates:a};return c(e,b,d)}b.multiPoint=m;function n(a,b,d){d===void 0&&(d={});var e={type:"MultiPolygon",coordinates:a};return c(e,b,d)}b.multiPolygon=n;function o(a,b,d){d===void 0&&(d={});var e={type:"GeometryCollection",geometries:a};return c(e,b,d)}b.geometryCollection=o;function p(a,b){b===void 0&&(b=0);if(b&&!(b>=0)){throw new Error("precision must be a positive number")}var c=Math.pow(10,b||0);return Math.round(a*c)/c}b.round=p;function q(a,c){c===void 0&&(c="kilometers");var d=b.factors[c];if(!d){throw new Error(c+" units is invalid")}return a*d}b.radiansToLength=q;function r(a,c){c===void 0&&(c="kilometers");var d=b.factors[c];if(!d){throw new Error(c+" units is invalid")}return a/d}b.lengthToRadians=r;function s(a,b){return u(r(a,b))}b.lengthToDegrees=s;function t(a){var b=a%360;b<0&&(b+=360);return b}b.bearingToAzimuth=t;function u(a){var b=a%(2*Math.PI);return b*180/Math.PI}b.radiansToDegrees=u;function v(a){var b=a%360;return b*Math.PI/180}b.degreesToRadians=v;function w(a,b,c){b===void 0&&(b="kilometers");c===void 0&&(c="kilometers");if(!(a>=0)){throw new Error("length must be a positive number")}return q(r(a,b),c)}b.convertLength=w;function x(a,c,d){c===void 0&&(c="meters");d===void 0&&(d="kilometers");if(!(a>=0)){throw new Error("area must be a positive number")}var e=b.areaFactors[c];if(!e){throw new Error("invalid original units")}var f=b.areaFactors[d];if(!f){throw new Error("invalid final units")}return a/e*f}b.convertArea=x;function y(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}b.isNumber=y;function z(a){return!!a&&a.constructor===Object}b.isObject=z;function A(a){if(!a){throw new Error("bbox is required")}if(!Array.isArray(a)){throw new Error("bbox must be an Array")}if(a.length!==4&&a.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}a.forEach(function(a){if(!y(a)){throw new Error("bbox must only contain numbers")}})}b.validateBBox=A;function B(a){if(!a){throw new Error("id is required")}if(["string","number"].indexOf(typeof a)===-1){throw new Error("id must be a number or a string")}}b.validateId=B;function C(){throw new Error("method has been renamed to `radiansToDegrees`")}b.radians2degrees=C;function D(){throw new Error("method has been renamed to `degreesToRadians`")}b.degrees2radians=D;function E(){throw new Error("method has been renamed to `lengthToDegrees`")}b.distanceToDegrees=E;function F(){throw new Error("method has been renamed to `lengthToRadians`")}b.distanceToRadians=F;function G(){throw new Error("method has been renamed to `radiansToLength`")}b.radiansToDistance=G;function H(){throw new Error("method has been renamed to `bearingToAzimuth`")}b.bearingToAngle=H;function I(){throw new Error("method has been renamed to `convertLength`")}b.convertDistance=I});bh(fJ);var ge=fJ.bearingToAzimuth,gw=bi(function(a,b){Object.defineProperty(b,'__esModule',{value:!0});function c(a,b,d){if(a===null)return;var e,f,g,h,i,j,k,l=0,m=0,n,o=a.type,p=o==='FeatureCollection',q=o==='Feature',r=p?a.features.length:1;for(var s=0;s<r;s++){k=p?a.features[s].geometry:(q?a.geometry:a);n=k?k.type==='GeometryCollection':!1;i=n?k.geometries.length:1;for(var t=0;t<i;t++){var u=0,v=0;h=n?k.geometries[t]:k;if(h===null)continue;j=h.coordinates;var w=h.type;l=d&&(w==='Polygon'||w==='MultiPolygon')?1:0;switch(w){case null:break;case 'Point':if(b(j,m,s,u,v)===!1)return !1;m++;u++;break;case 'LineString':;case 'MultiPoint':for(e=0;e<j.length;e++){if(b(j[e],m,s,u,v)===!1)return !1;m++;w==='MultiPoint'&&u++};w==='LineString'&&u++;break;case 'Polygon':;case 'MultiLineString':for(e=0;e<j.length;e++){for(f=0;f<j[e].length-l;f++){if(b(j[e][f],m,s,u,v)===!1)return !1;m++}w==='MultiLineString'&&u++;w==='Polygon'&&v++};w==='Polygon'&&u++;break;case 'MultiPolygon':for(e=0;e<j.length;e++){v=0;for(f=0;f<j[e].length;f++){for(g=0;g<j[e][f].length-l;g++){if(b(j[e][f][g],m,s,u,v)===!1)return !1;m++}v++}u++};break;case 'GeometryCollection':for(e=0;e<h.geometries.length;e++)if(c(h.geometries[e],b,d)===!1)return !1;break;default:throw new Error('Unknown Geometry Type')}}}}function d(a,b,d,e){var f=d;c(a,function(a,c,e,g,h){c===0&&d===undefined?(f=a):(f=b(f,a,c,e,g,h))},e);return f}function e(a,b){var c;switch(a.type){case 'FeatureCollection':for(c=0;c<a.features.length;c++){if(b(a.features[c].properties,c)===!1)break};break;case 'Feature':b(a.properties,0);break}}function f(a,b,c){var d=c;e(a,function(a,e){e===0&&c===undefined?(d=a):(d=b(d,a,e))});return d}function g(a,b){if(a.type==='Feature')b(a,0);else if(a.type==='FeatureCollection'){for(var c=0;c<a.features.length;c++){if(b(a.features[c],c)===!1)break}}}function h(a,b,c){var d=c;g(a,function(a,e){e===0&&c===undefined?(d=a):(d=b(d,a,e))});return d}function i(a){var b=[];c(a,function(a){b.push(a)});return b}function j(a,b){var c,d,e,f,g,h,i,j,k,l,m=0,n=a.type==='FeatureCollection',o=a.type==='Feature',p=n?a.features.length:1;for(c=0;c<p;c++){h=n?a.features[c].geometry:(o?a.geometry:a);j=n?a.features[c].properties:(o?a.properties:{});k=n?a.features[c].bbox:(o?a.bbox:undefined);l=n?a.features[c].id:(o?a.id:undefined);i=h?h.type==='GeometryCollection':!1;g=i?h.geometries.length:1;for(e=0;e<g;e++){f=i?h.geometries[e]:h;if(f===null){if(b(null,m,j,k,l)===!1)return !1;continue}switch(f.type){case 'Point':;case 'LineString':;case 'MultiPoint':;case 'Polygon':;case 'MultiLineString':;case 'MultiPolygon':{if(b(f,m,j,k,l)===!1)return !1;break};case 'GeometryCollection':{for(d=0;d<f.geometries.length;d++){if(b(f.geometries[d],m,j,k,l)===!1)return !1}break};default:throw new Error('Unknown Geometry Type')}}m++}}function k(a,b,c){var d=c;j(a,function(a,e,f,g,h){e===0&&c===undefined?(d=a):(d=b(d,a,e,f,g,h))});return d}function l(a,b){j(a,function(a,c,d,e,f){var g=a===null?null:a.type;switch(g){case null:;case 'Point':;case 'LineString':;case 'Polygon':if(b(fJ.feature(a,d,{bbox:e,id:f}),c,0)===!1)return !1;return};var h;switch(g){case 'MultiPoint':h='Point';break;case 'MultiLineString':h='LineString';break;case 'MultiPolygon':h='Polygon';break};for(var i=0;i<a.coordinates.length;i++){var j=a.coordinates[i],k={type:h,coordinates:j};if(b(fJ.feature(k,d),c,i)===!1)return !1}})}function m(a,b,c){var d=c;l(a,function(a,e,f){e===0&&f===0&&c===undefined?(d=a):(d=b(d,a,e,f))});return d}function n(a,b){l(a,function(a,d,e){var f=0;if(!a.geometry)return;var g=a.geometry.type;if(g==='Point'||g==='MultiPoint')return;var h,i=0,j=0,k=0;if(c(a,function(c,g,l,m,n){if(h===undefined||d>i||m>j||n>k){h=c;i=d;j=m;k=n;f=0;return}var o=fJ.lineString([h,c],a.properties);if(b(o,d,e,n,f)===!1)return !1;f++;h=c})===!1)return !1})}function o(a,b,c){var d=c,e=!1;n(a,function(a,f,g,h,i){e===!1&&c===undefined?(d=a):(d=b(d,a,f,g,h,i));e=!0});return d}function p(a,b){if(!a)throw new Error('geojson is required');l(a,function(a,c,d){if(a.geometry===null)return;var e=a.geometry.type,f=a.geometry.coordinates;switch(e){case 'LineString':if(b(a,c,d,0,0)===!1)return !1;break;case 'Polygon':for(var g=0;g<f.length;g++){if(b(fJ.lineString(f[g],a.properties),c,d,g)===!1)return !1};break}})}function q(a,b,c){var d=c;p(a,function(a,e,f,g){e===0&&c===undefined?(d=a):(d=b(d,a,e,f,g))});return d}function r(a,b){b=b||{};if(!fJ.isObject(b))throw new Error('options is invalid');var c=b.featureIndex||0,d=b.multiFeatureIndex||0,e=b.geometryIndex||0,f=b.segmentIndex||0,g=b.properties,h;switch(a.type){case 'FeatureCollection':c<0&&(c=a.features.length+c);g=g||a.features[c].properties;h=a.features[c].geometry;break;case 'Feature':g=g||a.properties;h=a.geometry;break;case 'Point':;case 'MultiPoint':return null;case 'LineString':;case 'Polygon':;case 'MultiLineString':;case 'MultiPolygon':h=a;break;default:throw new Error('geojson is invalid')};if(h===null)return null;var i=h.coordinates;switch(h.type){case 'Point':;case 'MultiPoint':return null;case 'LineString':f<0&&(f=i.length+f-1);return fJ.lineString([i[f],i[f+1]],g,b);case 'Polygon':e<0&&(e=i.length+e);f<0&&(f=i[e].length+f-1);return fJ.lineString([i[e][f],i[e][f+1]],g,b);case 'MultiLineString':d<0&&(d=i.length+d);f<0&&(f=i[d].length+f-1);return fJ.lineString([i[d][f],i[d][f+1]],g,b);case 'MultiPolygon':d<0&&(d=i.length+d);e<0&&(e=i[d].length+e);f<0&&(f=i[d][e].length-f-1);return fJ.lineString([i[d][e][f],i[d][e][f+1]],g,b)};throw new Error('geojson is invalid')}function s(a,b){b=b||{};if(!fJ.isObject(b))throw new Error('options is invalid');var c=b.featureIndex||0,d=b.multiFeatureIndex||0,e=b.geometryIndex||0,f=b.coordIndex||0,g=b.properties,h;switch(a.type){case 'FeatureCollection':c<0&&(c=a.features.length+c);g=g||a.features[c].properties;h=a.features[c].geometry;break;case 'Feature':g=g||a.properties;h=a.geometry;break;case 'Point':;case 'MultiPoint':return null;case 'LineString':;case 'Polygon':;case 'MultiLineString':;case 'MultiPolygon':h=a;break;default:throw new Error('geojson is invalid')};if(h===null)return null;var i=h.coordinates;switch(h.type){case 'Point':return fJ.point(i,g,b);case 'MultiPoint':d<0&&(d=i.length+d);return fJ.point(i[d],g,b);case 'LineString':f<0&&(f=i.length+f);return fJ.point(i[f],g,b);case 'Polygon':e<0&&(e=i.length+e);f<0&&(f=i[e].length+f);return fJ.point(i[e][f],g,b);case 'MultiLineString':d<0&&(d=i.length+d);f<0&&(f=i[d].length+f);return fJ.point(i[d][f],g,b);case 'MultiPolygon':d<0&&(d=i.length+d);e<0&&(e=i[d].length+e);f<0&&(f=i[d][e].length-f);return fJ.point(i[d][e][f],g,b)};throw new Error('geojson is invalid')}b.coordEach=c;b.coordReduce=d;b.propEach=e;b.propReduce=f;b.featureEach=g;b.featureReduce=h;b.coordAll=i;b.geomEach=j;b.geomReduce=k;b.flattenEach=l;b.flattenReduce=m;b.segmentEach=n;b.segmentReduce=o;b.lineEach=p;b.lineReduce=q;b.findSegment=r;b.findPoint=s}),gx=bh(gw),gy=gw.coordEach,gz=gw.coordReduce,gA=gw.propEach,gB=gw.propReduce,gC=gw.featureEach,gD=gw.featureReduce,gE=gw.coordAll,gF=gw.geomEach,gG=gw.geomReduce,gH=gw.flattenEach,gI=gw.flattenReduce,gJ=gw.segmentEach,gK=gw.segmentReduce,gL=gw.lineEach,gM=gw.lineReduce,gN=gw.findSegment,gO=gw.findPoint,gP=Object.freeze({default:gx,__moduleExports:gw,coordEach:gy,coordReduce:gz,propEach:gA,propReduce:gB,featureEach:gC,featureReduce:gD,coordAll:gE,geomEach:gF,geomReduce:gG,flattenEach:gH,flattenReduce:gI,segmentEach:gJ,segmentReduce:gK,lineEach:gL,lineReduce:gM,findSegment:gN,findPoint:gO}),gQ=gP&&gx||gP,gR=bi(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});function c(a){var b=[Infinity,Infinity,-Infinity,-Infinity];gQ.coordEach(a,function(a){b[0]>a[0]&&(b[0]=a[0]);b[1]>a[1]&&(b[1]=a[1]);b[2]<a[0]&&(b[2]=a[0]);b[3]<a[1]&&(b[3]=a[1])});return b}b.default=c}),gS=bh(gR),gT=Object.freeze({default:gS,__moduleExports:gR}),gU=gT&&gS||gT,gV=gU.default,gW=gQ.featureEach,gY=fJ.polygon,gZ=fJ.featureCollection;function g_(a){var b=bm(a);b.insert=function(a){if(a.type!=='Feature')throw new Error('invalid feature');a.bbox=a.bbox?a.bbox:gV(a);return bm.prototype.insert.call(this,a)};b.load=function(a){var b=[];Array.isArray(a)?a.forEach(function(a){if(a.type!=='Feature')throw new Error('invalid features');a.bbox=a.bbox?a.bbox:gV(a);b.push(a)}):gW(a,function(a){if(a.type!=='Feature')throw new Error('invalid features');a.bbox=a.bbox?a.bbox:gV(a);b.push(a)});return bm.prototype.load.call(this,b)};b.remove=function(a,b){if(a.type!=='Feature')throw new Error('invalid feature');a.bbox=a.bbox?a.bbox:gV(a);return bm.prototype.remove.call(this,a,b)};b.clear=function(){return bm.prototype.clear.call(this)};b.search=function(a){var b=bm.prototype.search.call(this,this.toBBox(a));return gZ(b)};b.collides=function(a){return bm.prototype.collides.call(this,this.toBBox(a))};b.all=function(){var a=bm.prototype.all.call(this);return gZ(a)};b.toJSON=function(){return bm.prototype.toJSON.call(this)};b.fromJSON=function(a){return bm.prototype.fromJSON.call(this,a)};b.toBBox=function(a){var b;if(a.bbox)b=a.bbox;else if(Array.isArray(a)&&a.length===4)b=a;else if(Array.isArray(a)&&a.length===6)b=[a[0],a[1],a[3],a[4]];else if(a.type==='Feature')b=gV(a);else if(a.type==='FeatureCollection')b=gV(a);else throw new Error('invalid geojson');return{minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]}};return b}var g$=g_,ha=g_;g$.default=ha;function hb(a,b){let c={},d=[];a.type==='LineString'&&(a=E(a));b.type==='LineString'&&(b=E(b));if(a.type==='Feature'&&b.type==='Feature'&&a.geometry!==null&&b.geometry!==null&&a.geometry.type==='LineString'&&b.geometry.type==='LineString'&&a.geometry.coordinates.length===2&&b.geometry.coordinates.length===2){let c=hc(a,b);c&&d.push(c);return N(d)}let e=g$();e.load(fF(b));as(fF(a),function(a){as(e.search(a),function(b){let e=hc(a,b);if(e){let a=aK(e).join(',');c[a]||(c[a]=!0,d.push(e))}})});return N(d)}function hc(a,b){let c=aK(a),d=aK(b);if(c.length!==2){throw new Error('<intersects> line1 must only contain 2 coordinates')}if(d.length!==2){throw new Error('<intersects> line2 must only contain 2 coordinates')}let e=c[0][0],f=c[0][1],g=c[1][0],h=c[1][1],i=d[0][0],j=d[0][1],k=d[1][0],l=d[1][1],m=(l-j)*(g-e)-(k-i)*(h-f),n=(k-i)*(f-j)-(l-j)*(e-i),o=(g-e)*(f-j)-(h-f)*(e-i);if(m===0){if(n===0&&o===0){return null}return null}let p=n/m,q=o/m;if(p>=0&&p<=1&&q>=0&&q<=1){let a=e+p*(g-e),b=f+p*(h-f);return G([a,b])}return null}function hd(a,b,c){let d=G([Infinity,Infinity],{dist:Infinity}),e=0.0;az(a,function(a){let f=aK(a);for(let a=0;a<f.length-1;a++){let g=G(f[a]);g.properties.dist=cP(b,g,c);let h=G(f[a+1]);h.properties.dist=cP(b,h,c);let i=cP(g,h,c),j=Math.max(g.properties.dist,h.properties.dist),k=eO(g,h),l=eM(b,j,k+90,c),m=eM(b,j,k-90,c),n=hb(K([l.geometry.coordinates,m.geometry.coordinates]),K([g.geometry.coordinates,h.geometry.coordinates])),o=null;n.features.length>0&&(o=n.features[0],o.properties.dist=cP(b,o,c),o.properties.location=e+cP(g,o,c));g.properties.dist<d.properties.dist&&(d=g,d.properties.index=a,d.properties.location=e);h.properties.dist<d.properties.dist&&(d=h,d.properties.index=a+1,d.properties.location=e+i);o&&o.properties.dist<d.properties.dist&&(d=o,d.properties.index=a);e+=i}});return d}function he(a,b,c){c=af(c);let d=aJ(a),e=aJ(b);e[0]+=e[0]-d[0]>180?-360:d[0]-e[0]>180?360:0;let f=hf(d,e),g=Z(f,"meters",c.units);return g}function hf(a,b,c){c=c===undefined?w:Number(c);let d=c,e=a[1]*Math.PI/180,f=b[1]*Math.PI/180,g=f-e,h=Math.abs(b[0]-a[0])*Math.PI/180;h>Math.PI&&(h-=2*Math.PI);let i=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(e/2+Math.PI/4)),j=Math.abs(i)>10e-12?g/i:Math.cos(e),k=Math.sqrt(g*g+j*j*h*h),l=k*d;return l}function hg(a,b,c){c=af(c);c.method||(c.method='geodesic');c.units||(c.units='kilometers');if(!a){throw new Error('pt is required')}Array.isArray(a)?(a=G(a)):a.type==='Point'?(a=E(a)):aN(a,'Point','point');if(!b){throw new Error('line is required')}Array.isArray(b)?(b=K(b)):b.type==='LineString'?(b=E(b)):aN(b,'LineString','line');let d=Infinity,e=a.geometry.coordinates;aB(b,function(a){let b=a.geometry.coordinates[0],f=a.geometry.coordinates[1],g=hh(e,b,f,c);g<d&&(d=g)});return Z(d,'degrees',c.units)}function hh(a,b,c,d){let e=[c[0]-b[0],c[1]-b[1]],f=[a[0]-b[0],a[1]-b[1]],g=hi(f,e);if(g<=0){return hj(a,b,{method:d.method,units:'degrees'})}let h=hi(e,e);if(h<=g){return hj(a,c,{method:d.method,units:'degrees'})}let i=g/h,j=[b[0]+i*e[0],b[1]+i*e[1]];return hj(a,j,{method:d.method,units:'degrees'})}function hi(a,b){return a[0]*b[0]+a[1]*b[1]}function hj(a,b,c){return c.method==='planar'?he(a,b,c):cP(a,b,c)}var hk=Object.getOwnPropertySymbols,hl=Object.prototype.hasOwnProperty,hm=Object.prototype.propertyIsEnumerable;function hn(a){if(a===null||a===undefined){throw new TypeError('Object.assign cannot be called with null or undefined')}return Object(a)}function ho(){try{if(!Object.assign){return !1}var a=new String('abc');a[5]='de';if(Object.getOwnPropertyNames(a)[0]==='5'){return !1}var b={};for(var c=0;c<10;c++)b['_'+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if(d.join('')!=='0123456789'){return !1}var e={};'abcdefghijklmnopqrst'.split('').forEach(function(a){e[a]=a});if(Object.keys(Object.assign({},e)).join('')!=='abcdefghijklmnopqrst'){return !1}return !0}catch(a){return !1}}var hp=ho()?Object.assign:function(a,b){var c,d=hn(a),e;for(var f=1;f<arguments.length;f++){c=Object(arguments[f]);for(var g in c)hl.call(c,g)&&(d[g]=c[g]);if(hk){e=hk(c);for(var h=0;h<e.length;h++)hm.call(c,e[h])&&(d[e[h]]=c[e[h]])}}return d};function hq(a,b,c){c=af(c);let d=c.units,e=c.properties||{},f=hr(a);if(!f.features.length){throw new Error('points must contain features')}if(!b){throw new Error('line is required')}if(aQ(b)!=='LineString'){throw new Error('line must be a LineString')}let g=Infinity,h=null;as(f,function(a){let c=hg(a,b,{units:d});c<g&&(g=c,h=a)});h&&(h.properties=hp({dist:g},h.properties,e));return h}function hr(a){let b=[],c=a.geometry?a.geometry.type:a.type;switch(c){case 'GeometryCollection':av(a,function(a){a.type==='Point'&&b.push({type:'Feature',properties:{},geometry:a})});return{type:'FeatureCollection',features:b};case 'FeatureCollection':a.features=a.features.filter(function(a){return a.geometry.type==='Point'});return a;default:throw new Error('points must be a Point Collection')}}function hs(a,b){var c=aJ(a),d=aP(b),e=d.coordinates,f=e[0];if(f.length<4)throw new Error('OuterRing of a Polygon must have 4 or more Positions.');var g=b.properties||{},h=g.a,i=g.b,j=g.c,k=c[0],l=c[1],m=f[0][0],n=f[0][1],o=h!==undefined?h:f[0][2],p=f[1][0],q=f[1][1],r=i!==undefined?i:f[1][2],s=f[2][0],t=f[2][1],u=j!==undefined?j:f[2][2],v=(u*(k-m)*(l-q)+o*(k-p)*(l-t)+r*(k-s)*(l-n)-r*(k-m)*(l-t)-u*(k-p)*(l-n)-o*(k-s)*(l-q))/((k-m)*(l-q)+(k-p)*(l-t)+(k-s)*(l-n)-(k-m)*(l-t)-(k-p)*(l-n)-(k-s)*(l-q));return v}function ht(a){let b=null,c=null,d={type:'FeatureCollection',features:[]};a.type==='Feature'?(c=a.geometry):(c=a);if(c.type==='LineString')b=[c.coordinates];else if(c.type==='MultiLineString')b=c.coordinates;else if(c.type==='MultiPolygon')b=[].concat.apply([],c.coordinates);else if(c.type==='Polygon')b=c.coordinates;else{throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry")};b.forEach(function(a){b.forEach(function(b){for(let c=0;c<a.length-1;c++){for(let e=c;e<b.length-1;e++){if(a===b){if(Math.abs(c-e)===1){continue}if(c===0&&e===a.length-2&&a[c][0]===a[a.length-1][0]&&a[c][1]===a[a.length-1][1]){continue}}let f=hu(a[c][0],a[c][1],a[c+1][0],a[c+1][1],b[e][0],b[e][1],b[e+1][0],b[e+1][1]);f&&d.features.push(G([f[0],f[1]]))}}})});return d}function hu(a,b,c,d,e,f,g,h){let i,j,k,l,m,n={x:null,y:null,onLine1:!1,onLine2:!1};i=(h-f)*(c-a)-(g-e)*(d-b);if(i===0){if(n.x!==null&&n.y!==null){return n}else{return !1}}j=b-f;k=a-e;l=(g-e)*j-(h-f)*k;m=(c-a)*j-(d-b)*k;j=l/i;k=m/i;n.x=a+j*(c-a);n.y=b+j*(d-b);j>=0&&j<=1&&(n.onLine1=!0);k>=0&&k<=1&&(n.onLine2=!0);if(n.onLine1&&n.onLine2){return[n.x,n.y]}else{return !1}}function hv(a){var b=hw(a),c=eR(b),d=!1,e=0;while(!d&&e<b.features.length){var f=b.features[e].geometry,g,h,i,j,k,l,m,n=!1;if(f.type==='Point')c.geometry.coordinates[0]===f.coordinates[0]&&c.geometry.coordinates[1]===f.coordinates[1]&&(d=!0);else if(f.type==='MultiPoint'){var o=!1;m=0;while(!o&&m<f.coordinates.length)c.geometry.coordinates[0]===f.coordinates[m][0]&&c.geometry.coordinates[1]===f.coordinates[m][1]&&(d=!0,o=!0),m++}else if(f.type==='LineString'){m=0;while(!n&&m<f.coordinates.length-1)g=c.geometry.coordinates[0],h=c.geometry.coordinates[1],i=f.coordinates[m][0],j=f.coordinates[m][1],k=f.coordinates[m+1][0],l=f.coordinates[m+1][1],hx(g,h,i,j,k,l)&&(n=!0,d=!0),m++}else if(f.type==='MultiLineString'){var p=0;while(p<f.coordinates.length){n=!1;m=0;var q=f.coordinates[p];while(!n&&m<q.length-1)g=c.geometry.coordinates[0],h=c.geometry.coordinates[1],i=q[m][0],j=q[m][1],k=q[m+1][0],l=q[m+1][1],hx(g,h,i,j,k,l)&&(n=!0,d=!0),m++;p++}}else (f.type==='Polygon'||f.type==='MultiPolygon')&&(cL(c,f)&&(d=!0));e++}if(d){return c}else{var r=N([]);for(e=0;e<b.features.length;e++)r.features=r.features.concat(eV(b.features[e]).features);return G(fE(c,r).geometry.coordinates)}}function hw(a){if(a.type!=='FeatureCollection'){if(a.type!=='Feature'){return N([E(a)])}return N([a])}return a}function hx(a,b,c,d,e,f){var g=Math.sqrt((e-c)*(e-c)+(f-d)*(f-d)),h=Math.sqrt((a-c)*(a-c)+(b-d)*(b-d)),i=Math.sqrt((e-a)*(e-a)+(f-b)*(f-b));return g===h+i}function hy(a){return aw(a,(a,b)=>{return a+hz(b)},0)}function hz(a){let b=0,c;switch(a.type){case 'Polygon':return hA(a.coordinates);case 'MultiPolygon':for(c=0;c<a.coordinates.length;c++)b+=hA(a.coordinates[c]);return b;case 'Point':;case 'MultiPoint':;case 'LineString':;case 'MultiLineString':return 0};return 0}function hA(a){let b=0;if(a&&a.length>0){b+=Math.abs(hB(a[0]));for(let c=1;c<a.length;c++)b-=Math.abs(hB(a[c]))}return b}function hB(a){let b,c,d,e,f,g,h,i=0,j=a.length;if(j>2){for(h=0;h<j;h++)h===j-2?(e=j-2,f=j-1,g=0):h===j-1?(e=j-1,f=0,g=1):(e=h,f=h+1,g=h+2),b=a[e],c=a[f],d=a[g],i+=(hC(d[0])-hC(b[0]))*Math.sin(hC(c[1]));i=i*w*w/2}return i}function hC(a){return a*Math.PI/180}function hD(a,b,c){c=af(c);let d;c.final?(d=hE(aJ(b),aJ(a))):(d=hE(aJ(a),aJ(b)));let e=d>180?-(360-d):d;return e}function hE(a,b){let c=Y(a[1]),d=Y(b[1]),e=Y((b[0]-a[0]));e>Math.PI&&(e-=2*Math.PI);e<-Math.PI&&(e+=2*Math.PI);let f=Math.log(Math.tan(d/2+Math.PI/4)/Math.tan(c/2+Math.PI/4)),g=Math.atan2(e,f);return(X(g)+360)%360}function hF(a,b,c,d){d=af(d);let e=b<0,f=Z(Math.abs(b),d.units,"meters");e&&(f=-Math.abs(f));let g=aJ(a),h=hG(g,f,c);h[0]+=h[0]-g[0]>180?-360:g[0]-h[0]>180?360:0;return G(h,d.properties)}function hG(a,b,c,d){d=d===undefined?w:Number(d);let e=b/d,f=a[0]*Math.PI/180,g=Y(a[1]),h=Y(c),i=e*Math.cos(h),j=g+i;Math.abs(j)>Math.PI/2&&(j=j>0?Math.PI-j:-Math.PI-j);let k=Math.log(Math.tan(j/2+Math.PI/4)/Math.tan(g/2+Math.PI/4)),l=Math.abs(k)>10e-12?i/k:Math.cos(g),m=e*Math.sin(h)/l,n=f+m;return[(n*180/Math.PI+540)%360-180,j*180/Math.PI]}function hH(a,b,c){c=af(c);let d=aP(a),e=d.coordinates,f=0;for(let a=0;a<e.length;a++){if(b>=f&&a===e.length-1){break}else if(f>=b){let d=b-f;if(!d){return G(e[a])}else{let b=hD(e[a],e[a-1])-180,f=hF(e[a],d,b,c);return f}}else f+=he(e[a],e[a+1],c)}return G(e[e.length-1])}function hI(a,b){return aC(a,function(a,c){let d=c.geometry.coordinates;return a+cP(d[0],d[1],b)},0)}function hJ(a,b,c){var d=aK(c);if(aQ(c)!=='LineString')throw new Error('line must be a LineString');var e=hd(c,a),f=hd(c,b),g;e.properties.index<=f.properties.index?(g=[e,f]):(g=[f,e]);var h=[g[0].geometry.coordinates];for(var i=g[0].properties.index+1;i<g[1].properties.index+1;i++)h.push(d[i]);h.push(g[1].geometry.coordinates);return K(h,c.properties)}function hK(a,b,c,d){d=d||{};if(!ac(d))throw new Error('options is invalid');var e,f=[];if(a.type==='Feature')e=a.geometry.coordinates;else if(a.type==='LineString')e=a.coordinates;else throw new Error('input must be a LineString Feature or Geometry');var g=0,h,i,j;for(var k=0;k<e.length;k++){if(b>=g&&k===e.length-1)throw new Error('Start distance is beyond length of line');else if(g>b&&f.length===0){h=b-g;if(!h){f.push(e[k]);return K(f)}i=hD(e[k],e[k-1])-180;j=hF(e[k],h,i,d);f.push(j.geometry.coordinates)};if(g>=c){h=c-g;if(!h){f.push(e[k]);return K(f)}i=hD(e[k],e[k-1])-180;j=hF(e[k],h,i,d);f.push(j.geometry.coordinates);return K(f)}g>=b&&f.push(e[k]);if(k===e.length-1){return K(f)}g+=he(e[k],e[k+1],d)}return K(e[e.length-1])}function hL(a,b,c){c=af(c);let d=aJ(a),e=aK(b);for(let a=0;a<e.length-1;a++){let b=!1;c.ignoreEndVertices&&(a===0&&(b='start'),a===e.length-2&&(b='end'),a===0&&a+1===e.length-1&&(b='both'));if(hM(e[a],e[a+1],d,b)){return !0}}return !1}function hM(a,b,c,d){let e=c[0],f=c[1],g=a[0],h=a[1],i=b[0],j=b[1],k=c[0]-g,l=c[1]-h,m=i-g,n=j-h,o=k*n-l*m;if(o!==0){return !1}if(!d){if(Math.abs(m)>=Math.abs(n)){return m>0?g<=e&&e<=i:i<=e&&e<=g}return n>0?h<=f&&f<=j:j<=f&&f<=h}else if(d==='start'){if(Math.abs(m)>=Math.abs(n)){return m>0?g<e&&e<=i:i<=e&&e<g}return n>0?h<f&&f<=j:j<=f&&f<h}else if(d==='end'){if(Math.abs(m)>=Math.abs(n)){return m>0?g<=e&&e<i:i<e&&e<=g}return n>0?h<=f&&f<j:j<f&&f<=h}else if(d==='both'){if(Math.abs(m)>=Math.abs(n)){return m>0?g<e&&e<i:i<e&&e<g}return n>0?h<f&&f<j:j<f&&f<h};return !1}function hN(a,b){var c=aP(a),d=aP(b),e=c.type,f=d.type;switch(e){case 'Point':switch(f){case 'MultiPoint':return hO(c,d);case 'LineString':return hL(c,d,{ignoreEndVertices:!0});case 'Polygon':;case 'MultiPolygon':return cL(c,d,{ignoreBoundary:!0});default:throw new Error('feature2 '+f+' geometry not supported')};case 'MultiPoint':switch(f){case 'MultiPoint':return hP(c,d);case 'LineString':return hQ(c,d);case 'Polygon':;case 'MultiPolygon':return hR(c,d);default:throw new Error('feature2 '+f+' geometry not supported')};case 'LineString':switch(f){case 'LineString':return hS(c,d);case 'Polygon':;case 'MultiPolygon':return hT(c,d);default:throw new Error('feature2 '+f+' geometry not supported')};case 'Polygon':switch(f){case 'Polygon':;case 'MultiPolygon':return hU(c,d);default:throw new Error('feature2 '+f+' geometry not supported')};default:throw new Error('feature1 '+e+' geometry not supported')}}function hO(a,b){var c,d=!1;for(c=0;c<b.coordinates.length;c++){if(hW(b.coordinates[c],a.coordinates)){d=!0;break}}return d}function hP(a,b){for(var c=0;c<a.coordinates.length;c++){var d=!1;for(var e=0;e<b.coordinates.length;e++)hW(a.coordinates[c],b.coordinates[e])&&(d=!0);if(!d){return !1}}return !0}function hQ(a,b){var c=!1;for(var d=0;d<a.coordinates.length;d++){if(!hL(a.coordinates[d],b)){return !1}c||(c=hL(a.coordinates[d],b,{ignoreEndVertices:!0}))}return c}function hR(a,b){var c=!0;for(var d=0;d<a.coordinates.length;d++){var e=cL(a.coordinates[1],b);if(!e){c=!1;break}{e=cL(a.coordinates[1],b,{ignoreBoundary:!0})}}return c&&e}function hS(a,b){for(var c=0;c<a.coordinates.length;c++){if(!hL(a.coordinates[c],b)){return !1}}return !0}function hT(a,b){var c=aI(b),d=aI(a);if(!hV(c,d)){return !1}var e=!1;for(var f=0;f<a.coordinates.length-1;f++){if(!cL(a.coordinates[f],b)){return !1}e||(e=cL(a.coordinates[f],b,{ignoreBoundary:!0}));if(!e){var g=hX(a.coordinates[f],a.coordinates[f+1]);e=cL(g,b,{ignoreBoundary:!0})}}return e}function hU(a,b){var c=aI(a),d=aI(b);if(!hV(d,c)){return !1}for(var e=0;e<a.coordinates[0].length;e++){if(!cL(a.coordinates[0][e],b)){return !1}}return !0}function hV(a,b){if(a[0]>b[0])return !1;if(a[2]<b[2])return !1;if(a[1]>b[1])return !1;if(a[3]<b[3])return !1;return !0}function hW(a,b){return a[0]===b[0]&&a[1]===b[1]}function hX(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2]}function hY(a,b,c){c=af(c);c.mask&&!c.units&&(c.units='kilometers');var d=[],e=a[0],f=a[1],g=a[2],h=a[3],i=b/(cP([e,f],[g,f],c)),j=i*(g-e),k=b/(cP([e,f],[e,h],c)),l=k*(h-f),m=g-e,n=h-f,o=Math.floor(m/j),p=Math.floor(n/l),q=(m-o*j)/2,r=(n-p*l)/2,s=e+q;while(s<=g){var t=f+r;while(t<=h){var u=G([s,t],c.properties);c.mask?(hN(u,c.mask)&&d.push(u)):d.push(u);t+=l}s+=j}return N(d)}function hZ(a,b){b=af(b);var c=b.precision,d=b.coordinates,e=b.mutate;c=c===undefined||c===null||isNaN(c)?6:c;d=d===undefined||d===null||isNaN(d)?3:d;if(!a)throw new Error('<geojson> is required');if(typeof c!=='number')throw new Error('<precision> must be a number');if(typeof d!=='number')throw new Error('<coordinates> must be a number');(e===!1||e===undefined)&&(a=JSON.parse(JSON.stringify(a)));var f=Math.pow(10,c);ao(a,function(a){h_(a,f,d)});return a}function h_(a,b,c){a.length>c&&a.splice(c,a.length);for(var d=0;d<a.length;d++)a[d]=Math.round(a[d]*b)/b;return a}function h$(a){if(!a)throw new Error('geojson is required');var b=[];az(a,function(a){b.push(a)});return N(b)}function ia(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.units,e=c.reverse;if(!a)throw new Error('geojson is required');if(b<=0)throw new Error('segmentLength must be greater than 0');var f=[];az(a,function(a){e&&(a.geometry.coordinates=a.geometry.coordinates.reverse());ib(a,b,d,function(a){f.push(a)})});return N(f)}function ib(a,b,c,d){var e=hI(a,{units:c});if(e<=b)return d(a);var f=e/b;Number.isInteger(f)||(f=Math.floor(f)+1);for(var g=0;g<f;g++){var h=hK(a,b*g,b*(g+1),{units:c});d(h,g)}}function ic(a,b,c){if(a.geometry.type!=='Polygon')throw new Error('The input feature must be a Polygon');c===undefined&&(c=1);var d=a.geometry.coordinates,e=[],f={};if(c){var g=[];for(var h=0;h<d.length;h++){for(var i=0;i<d[h].length-1;i++)g.push(q(h,i))}var j=bm();j.load(g)}for(var k=0;k<d.length;k++){for(var l=0;l<d[k].length-1;l++){if(c){var m=j.search(q(k,l));m.forEach(function(a){var b=a.ring,c=a.edge;p(k,l,b,c)})}else{for(var n=0;n<d.length;n++){for(var o=0;o<d[n].length-1;o++)p(k,l,n,o)}}}}b||(e={type:'Feature',geometry:{type:'MultiPoint',coordinates:e}});return e;function p(a,c,g,h){var i=d[a][c],j=d[a][c+1],k=d[g][h],l=d[g][h+1],m=ie(i,j,k,l);if(m===null)return;var n,o;j[0]!==i[0]?(n=(m[0]-i[0])/(j[0]-i[0])):(n=(m[1]-i[1])/(j[1]-i[1]));l[0]!==k[0]?(o=(m[0]-k[0])/(l[0]-k[0])):(o=(m[1]-k[1])/(l[1]-k[1]));if(n>=1||n<=0||o>=1||o<=0)return;var p=m,q=!f[p];q&&(f[p]=!0);b?e.push(b(m,a,c,i,j,n,g,h,k,l,o,q)):e.push(m)}function q(a,b){var c=d[a][b],e=d[a][b+1],f,g,h,i;c[0]<e[0]?(f=c[0],g=e[0]):(f=e[0],g=c[0]);c[1]<e[1]?(h=c[1],i=e[1]):(h=e[1],i=c[1]);return{minX:f,minY:h,maxX:g,maxY:i,ring:a,edge:b}}}function ie(a,b,c,d){if(ig(a,c)||ig(a,d)||ig(b,c)||ig(d,c))return null;var e=a[0],f=a[1],g=b[0],h=b[1],i=c[0],j=c[1],k=d[0],l=d[1],m=(e-g)*(j-l)-(f-h)*(i-k);if(m===0)return null;var n=((e*h-f*g)*(i-k)-(e-g)*(i*l-j*k))/m,o=((e*h-f*g)*(j-l)-(f-h)*(i*l-j*k))/m;return[n,o]}function ig(a,b){if(!a||!b)return !1;if(a.length!==b.length)return !1;for(var c=0,d=a.length;c<d;c++){if(a[c] instanceof Array&&b[c] instanceof Array){if(!ig(a[c],b[c]))return !1}else if(a[c]!==b[c]){return !1}}return !0}function ih(c){if(c.type!='Feature')throw new Error('The input must a geojson object of type Feature');if(c.geometry===undefined||c.geometry==null)throw new Error('The input must a geojson object with a non-empty geometry');if(c.geometry.type!='Polygon')throw new Error('The input must be a geojson Polygon');var d=c.geometry.coordinates.length,e=[];for(var f=0;f<d;f++){var g=c.geometry.coordinates[f];io(g[0],g[g.length-1])||g.push(g[0]);e.push.apply(e,g.slice(0,g.length-1))}if(!ip(e))throw new Error('The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)');var h=e.length,i=ic(c,function m(a,b,c,d,e,f,g,h,i,j,k,l){return[a,b,c,d,e,f,g,h,i,j,k,l]}),j=i.length;if(j==0){var k=[];for(f=0;f<d;f++)k.push(I([c.geometry.coordinates[f]],{parent:-1,winding:il(c.geometry.coordinates[f])}));var l=N(k);O();P();return l}var m=[],n=[];for(f=0;f<d;f++){m.push([]);for(var o=0;o<c.geometry.coordinates[f].length-1;o++)m[f].push([new ii(c.geometry.coordinates[f][(o+1).modulo(c.geometry.coordinates[f].length-1)],1,[f,o],[f,(o+1).modulo(c.geometry.coordinates[f].length-1)],undefined)]),n.push(new ij(c.geometry.coordinates[f][o],[f,(o-1).modulo(c.geometry.coordinates[f].length-1)],[f,o],undefined,undefined,!1,!0))}for(f=0;f<j;f++)m[i[f][1]][i[f][2]].push(new ii(i[f][0],i[f][5],[i[f][1],i[f][2]],[i[f][6],i[f][7]],undefined)),i[f][11]&&n.push(new ij(i[f][0],[i[f][1],i[f][2]],[i[f][6],i[f][7]],undefined,undefined,!0,!0));var p=n.length;for(f=0;f<m.length;f++){for(o=0;o<m[f].length;o++)m[f][o].sort(function(a,b){return a.param<b.param?-1:1})}var q=[];for(f=0;f<p;f++)q.push({minX:n[f].coord[0],minY:n[f].coord[1],maxX:n[f].coord[0],maxY:n[f].coord[1],index:f});var r=bm();r.load(q);for(f=0;f<m.length;f++){for(o=0;o<m[f].length;o++){for(var s=0;s<m[f][o].length;s++){var t;s==m[f][o].length-1?(t=m[f][(o+1).modulo(c.geometry.coordinates[f].length-1)][0].coord):(t=m[f][o][s+1].coord);var u=r.search({minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]})[0];m[f][o][s].nxtIsectAlongEdgeIn=u.index}}}for(f=0;f<m.length;f++){for(o=0;o<m[f].length;o++){for(s=0;s<m[f][o].length;s++){t=m[f][o][s].coord,u=r.search({minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]})[0],v=u.index;v<h?(n[v].nxtIsectAlongRingAndEdge2=m[f][o][s].nxtIsectAlongEdgeIn):io(n[v].ringAndEdge1,m[f][o][s].ringAndEdgeIn)?(n[v].nxtIsectAlongRingAndEdge1=m[f][o][s].nxtIsectAlongEdgeIn):(n[v].nxtIsectAlongRingAndEdge2=m[f][o][s].nxtIsectAlongEdgeIn)}}}var w=[],f=0;for(o=0;o<d;o++){var x=f;for(s=0;s<c.geometry.coordinates[o].length-1;s++)n[f].coord[0]<n[x].coord[0]&&(x=f),f++;var y=n[x].nxtIsectAlongRingAndEdge2;for(s=0;s<n.length;s++){if(n[s].nxtIsectAlongRingAndEdge1==x||n[s].nxtIsectAlongRingAndEdge2==x){var z=s;break}}var A=ik([n[z].coord,n[x].coord,n[y].coord],!0)?1:-1;w.push({isect:x,parent:-1,winding:A})}w.sort(function(a,b){return n[a.isect].coord>n[b.isect].coord?-1:1});k=[];while(w.length>0){var B=w.pop(),C=B.isect,D=B.parent,E=B.winding,F=k.length,G=[n[C].coord],H=C;if(n[C].ringAndEdge1Walkable)var J=n[C].ringAndEdge1,K=n[C].nxtIsectAlongRingAndEdge1;else J=n[C].ringAndEdge2,K=n[C].nxtIsectAlongRingAndEdge2;while(!io(n[C].coord,n[K].coord)){G.push(n[K].coord);var L=undefined;for(f=0;f<w.length;f++){if(w[f].isect==K){L=f;break}}L!=undefined&&w.splice(L,1);if(io(J,n[K].ringAndEdge1)){J=n[K].ringAndEdge2;n[K].ringAndEdge2Walkable=!1;if(n[K].ringAndEdge1Walkable){var M={isect:K};ik([n[H].coord,n[K].coord,n[n[K].nxtIsectAlongRingAndEdge2].coord],E==1)?(M.parent=D,M.winding=-E):(M.parent=F,M.winding=E);w.push(M)}H=K;K=n[K].nxtIsectAlongRingAndEdge2}else{J=n[K].ringAndEdge1;n[K].ringAndEdge1Walkable=!1;if(n[K].ringAndEdge2Walkable){M={isect:K};ik([n[H].coord,n[K].coord,n[n[K].nxtIsectAlongRingAndEdge1].coord],E==1)?(M.parent=D,M.winding=-E):(M.parent=F,M.winding=E);w.push(M)}H=K;K=n[K].nxtIsectAlongRingAndEdge1}}G.push(n[K].coord);k.push(I([G],{index:F,parent:D,winding:E,netWinding:undefined}))}l=N(k);O();P();function O(){var a=[];for(var b=0;b<l.features.length;b++)l.features[b].properties.parent==-1&&a.push(b);if(a.length>1){for(b=0;b<a.length;b++){var c=-1,d=Infinity;for(var e=0;e<l.features.length;e++){if(a[b]==e)continue;cL(l.features[a[b]].geometry.coordinates[0][0],l.features[e],{ignoreBoundary:!0})&&(hy(l.features[e])<d&&(c=e))}l.features[a[b]].properties.parent=c}}}function P(){for(var a=0;a<l.features.length;a++){if(l.features[a].properties.parent==-1){var b=l.features[a].properties.winding;l.features[a].properties.netWinding=b;Q(a,b)}}}function Q(a,b){for(var c=0;c<l.features.length;c++){if(l.features[c].properties.parent==a){var d=b+l.features[c].properties.winding;l.features[c].properties.netWinding=d;Q(c,d)}}}return l}var ii=function(a,b,c,d,e){this.coord=a;this.param=b;this.ringAndEdgeIn=c;this.ringAndEdgeOut=d;this.nxtIsectAlongEdgeIn=e},ij=function(a,b,c,d,e,f,g){this.coord=a;this.ringAndEdge1=b;this.ringAndEdge2=c;this.nxtIsectAlongRingAndEdge1=d;this.nxtIsectAlongRingAndEdge2=e;this.ringAndEdge1Walkable=f;this.ringAndEdge2Walkable=g};function ik(a,b){typeof b==='undefined'&&(b=!0);if(a.length!=3)throw new Error('This function requires an array of three points [x,y]');var c=(a[1][0]-a[0][0])*(a[2][1]-a[0][1])-(a[1][1]-a[0][1])*(a[2][0]-a[0][0]);return c>=0==b}function il(a){var b=0;for(var c=0;c<a.length-1;c++)a[c][0]<a[b][0]&&(b=c);if(ik([a[(b-1).modulo(a.length-1)],a[b],a[(b+1).modulo(a.length-1)]],!0))var d=1;else d=-1;return d}function io(a,b){if(!a||!b)return !1;if(a.length!=b.length)return !1;for(var c=0,d=a.length;c<d;c++){if(a[c] instanceof Array&&b[c] instanceof Array){if(!io(a[c],b[c]))return !1}else if(a[c]!=b[c]){return !1}}return !0}Number.prototype.modulo=function(a){return(this%a+a)%a};function ip(a){var b={},c=1;for(var d=0,e=a.length;d<e;++d){if(b.hasOwnProperty(a[d])){c=0;break}b[a[d]]=1}return c}function iq(a){var b=[];az(a,function(a){if(a.geometry.type!=='Polygon')return;as(ih(a),function(c){b.push(I(c.geometry.coordinates,a.properties))})});return N(b)}var ir=Math.PI/180,is=180/Math.PI,iu=function(a,b){this.lon=a;this.lat=b;this.x=ir*a;this.y=ir*b};iu.prototype.view=function(){return String(this.lon).slice(0,4)+','+String(this.lat).slice(0,4)};iu.prototype.antipode=function(){var a=-1*this.lat,b=this.lon<0?180+this.lon:(180-this.lon)*-1;return new iu(b,a)};var iv=function(){this.coords=[];this.length=0};iv.prototype.move_to=function(a){this.length++;this.coords.push(a)};var iw=function(a){this.properties=a||{};this.geometries=[]};iw.prototype.json=function(){if(this.geometries.length<=0){return{'geometry':{'type':'LineString','coordinates':null},'type':'Feature','properties':this.properties}}else if(this.geometries.length===1){return{'geometry':{'type':'LineString','coordinates':this.geometries[0].coords},'type':'Feature','properties':this.properties}}else{var a=[];for(var b=0;b<this.geometries.length;b++)a.push(this.geometries[b].coords);return{'geometry':{'type':'MultiLineString','coordinates':a},'type':'Feature','properties':this.properties}}};iw.prototype.wkt=function(){var a='',b='LINESTRING(',d=function(a){b+=a[0]+' '+a[1]+','};for(var e=0;e<this.geometries.length;e++){if(this.geometries[e].coords.length===0){return'LINESTRING(empty)'}else{var f=this.geometries[e].coords;f.forEach(d);a+=b.substring(0,b.length-1)+')'}}return a};var ix=function(a,b,c){if(!a||a.x===undefined||a.y===undefined){throw new Error('GreatCircle constructor expects two args: start and end objects with x and y properties')}if(!b||b.x===undefined||b.y===undefined){throw new Error('GreatCircle constructor expects two args: start and end objects with x and y properties')}this.start=new iu(a.x,a.y);this.end=new iu(b.x,b.y);this.properties=c||{};var d=this.start.x-this.end.x,e=this.start.y-this.end.y,f=Math.pow(Math.sin(e/2.0),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(d/2.0),2);this.g=2.0*Math.asin(Math.sqrt(f));if(this.g===Math.PI){throw new Error('it appears '+a.view()+' and '+b.view()+' are \'antipodal\', e.g diametrically opposite, thus there is no single route but rather infinite')}else if(isNaN(this.g)){throw new Error('could not calculate great circle between '+a+' and '+b)}};ix.prototype.interpolate=function(a){var b=Math.sin((1-a)*this.g)/Math.sin(this.g),c=Math.sin(a*this.g)/Math.sin(this.g),d=b*Math.cos(this.start.y)*Math.cos(this.start.x)+c*Math.cos(this.end.y)*Math.cos(this.end.x),e=b*Math.cos(this.start.y)*Math.sin(this.start.x)+c*Math.cos(this.end.y)*Math.sin(this.end.x),f=b*Math.sin(this.start.y)+c*Math.sin(this.end.y),g=is*Math.atan2(f,Math.sqrt(Math.pow(d,2)+Math.pow(e,2))),h=is*Math.atan2(e,d);return[h,g]};ix.prototype.Arc=function(a,b){var c=[];if(!a||a<=2)c.push([this.start.lon,this.start.lat]),c.push([this.end.lon,this.end.lat]);else{var d=1.0/(a-1);for(var e=0;e<a;++e){var f=d*e,g=this.interpolate(f);c.push(g)}}var h=!1,i=0,j=b&&b.offset?b.offset:10,k=180-j,l=-180+j,m=360-j;for(var n=1;n<c.length;++n){var o=c[n-1][0],p=c[n][0],q=Math.abs(p-o);q>m&&(p>k&&o<l||o>k&&p<l)?(h=!0):q>i&&(i=q)}var r=[];if(h&&i<j){var s=[];r.push(s);for(var t=0;t<c.length;++t){var u=parseFloat(c[t][0]);if(t>0&&Math.abs(u-c[t-1][0])>m){var v=parseFloat(c[t-1][0]),w=parseFloat(c[t-1][1]),x=parseFloat(c[t][0]),y=parseFloat(c[t][1]);if(v>-180&&v<l&&x===180&&t+1<c.length&&c[t-1][0]>-180&&c[t-1][0]<l){s.push([-180,c[t][1]]);t++;s.push([c[t][0],c[t][1]]);continue}else if(v>k&&v<180&&x===-180&&t+1<c.length&&c[t-1][0]>k&&c[t-1][0]<180){s.push([180,c[t][1]]);t++;s.push([c[t][0],c[t][1]]);continue};if(v<l&&x>k){var z=v;v=x;x=z;var A=w;w=y;y=A}v>k&&x<l&&(x+=360);if(v<=180&&x>=180&&v<x){var B=(180-v)/(x-v),C=B*y+(1-B)*w;s.push([c[t-1][0]>k?180:-180,C]);s=[];s.push([c[t-1][0]>k?-180:180,C]);r.push(s)}else s=[],r.push(s);s.push([u,c[t][1]])}else s.push([c[t][0],c[t][1]])}}else{var D=[];r.push(D);for(var E=0;E<c.length;++E)D.push([c[E][0],c[E][1]])}var F=new iw(this.properties);for(var G=0;G<r.length;++G){var H=new iv();F.geometries.push(H);var I=r[G];for(var J=0;J<I.length;++J)H.move_to(I[J])}return F};function iy(a,b,c){c=c||{};if(typeof c!=='object')throw new Error('options is invalid');var d=c.properties,e=c.npoints,f=c.offset;a=aJ(a);b=aJ(b);d=d||{};e=e||100;f=f||10;var g=new ix({x:a[0],y:a[1]},{x:b[0],y:b[1]},d),h=g.Arc(e,{offset:f});return h.json()}function iz(a,b){if(!a)throw new Error('line is required');if(!b)throw new Error('splitter is required');var c=aQ(a),d=aQ(b);if(c!=='LineString')throw new Error('line must be LineString');if(d==='FeatureCollection')throw new Error('splitter cannot be a FeatureCollection');if(d==='GeometryCollection')throw new Error('splitter cannot be a GeometryCollection');var e=hZ(b,{precision:7});switch(d){case 'Point':return iB(a,e);case 'MultiPoint':return iA(a,e);case 'LineString':;case 'MultiLineString':;case 'Polygon':;case 'MultiPolygon':return iA(a,hb(a,e))}}function iA(a,b){var c=[],d=g$();az(b,function(b){c.forEach(function(a,b){a.id=b});if(!c.length)c=iB(a,b).features,c.forEach(function(a){a.bbox||(a.bbox=eL(aI(a)))}),d.load(N(c));else{var e=d.search(b);if(e.features.length){var f=iC(b,e);c=c.filter(function(a){return a.id!==f.id});d.remove(f);as(iB(f,b),function(a){c.push(a);d.insert(a)})}}});return N(c)}function iB(a,b){var c=[],d=aK(a)[0],e=aK(a)[a.geometry.coordinates.length-1];if(iD(d,aJ(b))||iD(e,aJ(b)))return N([a]);var f=g$(),g=fF(a);f.load(g);var h=f.search(b);if(!h.features.length)return N([a]);var i=iC(b,h),j=[d],k=at(g,function(a,d,e){var f=aK(d)[1],g=aJ(b);if(e===i.id){a.push(g);c.push(K(a));if(iD(g,f))return[g];return[g,f]}else{a.push(f);return a}},j);k.length>1&&c.push(K(k));return N(c)}function iC(a,b){if(!b.features.length)throw new Error('lines must contain features');if(b.features.length===1)return b.features[0];var c,d=Infinity;as(b,function(b){var e=hd(b,a),f=e.properties.dist;f<d&&(c=b,d=f)});return c}function iD(a,b){return a[0]===b[0]&&a[1]===b[1]}function iE(a,b,c,d,e){e=af(e);let f=e.steps||64,g=iF(c),h=iF(d),i=!Array.isArray(a)&&a.type==="Feature"?a.properties:{};if(g===h){return K(eN(a,b,e).geometry.coordinates[0],i)}let j=g,k=g<h?h:h+360,l=j,m=[],n=0;while(l<k)m.push(eM(a,b,l,e).geometry.coordinates),n++,l=j+n*360/f;l>k&&m.push(eM(a,b,k,e).geometry.coordinates);return K(m,i)}function iF(a){let b=a%360;b<0&&(b+=360);return b}function iG(a,b){b=af(b);let c=aP(a);!b.properties&&a.type==="Feature"&&(b.properties=a.properties);switch(c.type){case "Polygon":return iH(c,b);case "MultiPolygon":return iI(c,b);default:throw new Error("invalid poly")}}function iH(a,b){b=af(b);let c=aP(a),e=c.coordinates,f=b.properties?b.properties:a.type==="Feature"?a.properties:{};return iJ(e,f)}function iI(a,b){b=af(b);let c=aP(a),e=c.coordinates,f=b.properties?b.properties:a.type==="Feature"?a.properties:{},g=[];e.forEach(function(a){g.push(iJ(a,f))});return N(g)}function iJ(a,b){if(a.length>1){return O(a,b)}return K(a[0],b)}function iK(a,b){var c=b.properties,d=b.autoComplete,e=b.orderCoords;d=d!==undefined?d:!0;e=e!==undefined?e:!0;switch(a.type){case 'FeatureCollection':var f=[];a.features.forEach(function(a){f.push(aK(iL(a,{},d,e)))});return Q(f,c);default:return iL(a,c,d,e)}}function iL(a,b,c,d){b=b?b:a.type==='Feature'?a.properties:{};var e=aP(a),f=e.coordinates,g=e.type;if(!f.length)throw new Error('line must contain coordinates');switch(g){case 'LineString':c&&(f=iM(f));return I([f],b);case 'MultiLineString':var i=[];var h=0;f.forEach(function(a){c&&(a=iM(a));if(d){var b=iN(aI(K(a)));b>h?(i.unshift(a),h=b):i.push(a)}else i.push(a)});return I(i,b);default:throw new Error('geometry type '+g+' is not supported')}}function iM(a){var b=a[0],c=b[0],d=b[1],e=a[a.length-1],f=e[0],g=e[1];(c!==f||d!==g)&&a.push(b);return a}function iN(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.abs(b-d)*Math.abs(c-e)}function iO(a,b,c){var d=a.length,e=iR(a[0],b),f=[],g,h,i,j,k;c||(c=[]);for(g=1;g<d;g++){h=a[g-1];i=a[g];j=k=iR(i,b);while(!0){if(!(e|j)){f.push(h);j!==k?(f.push(i),g<d-1&&(c.push(f),f=[])):g===d-1&&f.push(i);break}else if(e&j){break}else e?(h=iQ(h,i,e,b),e=iR(h,b)):(i=iQ(h,i,j,b),j=iR(i,b))}e=k}f.length&&c.push(f);return c}function iP(a,b){var c,d,e,f,g,h,i;for(d=1;d<=8;d*=2){c=[];e=a[a.length-1];f=!(iR(e,b)&d);for(g=0;g<a.length;g++)h=a[g],i=!(iR(h,b)&d),i!==f&&c.push(iQ(e,h,d,b)),i&&c.push(h),e=h,f=i;a=c;if(!a.length)break}return c}function iQ(a,b,c,d){return c&8?[a[0]+(b[0]-a[0])*(d[3]-a[1])/(b[1]-a[1]),d[3]]:c&4?[a[0]+(b[0]-a[0])*(d[1]-a[1])/(b[1]-a[1]),d[1]]:c&2?[d[2],a[1]+(b[1]-a[1])*(d[2]-a[0])/(b[0]-a[0])]:c&1?[d[0],a[1]+(b[1]-a[1])*(d[0]-a[0])/(b[0]-a[0])]:null}function iR(a,b){var c=0;a[0]<b[0]?(c|=1):a[0]>b[2]&&(c|=2);a[1]<b[1]?(c|=4):a[1]>b[3]&&(c|=8);return c}function iS(a,b){let c=aP(a),d=c.type,e=a.type==='Feature'?a.properties:{},f=c.coordinates;switch(d){case 'LineString':;case 'MultiLineString':const g=[];d==='LineString'&&(f=[f]);f.forEach(a=>{iO(a,b,g)});if(g.length===1){return K(g[0],e)};return O(g,e);case 'Polygon':return I(iT(f,b),e);case 'MultiPolygon':return Q(f.map(a=>{return iT(a,b)}),e);default:throw new Error('geometry '+d+' not supported')}}function iT(a,b){let c=[];for(const d of a){let e=iP(d,b);e.length>0&&((e[0][0]!==e[e.length-1][0]||e[0][1]!==e[e.length-1][1])&&e.push(e[0]),e.length>=4&&c.push(e))}return c}var iU=bi(function(a,b){b=a.exports=typeof Object.keys==='function'?Object.keys:c;b.shim=c;function c(a){var b=[];for(var c in a)b.push(c);return b}}),jb=bi(function(a){});let jc=jb;function jd(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.tolerance||0,e=[],f=g$();let g=fF(a);f.load(g);var h;aB(b,function(a){var b=!1;as(f.search(a),function(c){if(b===!1){var e=aK(a).sort(),f=aK(c).sort();jc(e,f)?(b=!0,h?(h=je(h,a)):(h=a)):d===0?hL(e[0],c)&&hL(e[1],c):hd(c,e[0]).properties.dist<=d&&hd(c,e[1]).properties.dist<=d?(b=!0,h?(h=je(h,a)):(h=a)):(d===0?hL(f[0],a)&&hL(f[1],a):hd(a,f[0]).properties.dist<=d&&hd(a,f[1]).properties.dist<=d)&&(h?(h=je(h,c)):(h=c))}});b===!1&&h&&(e.push(h),h=undefined)});h&&e.push(h);return N(e)}function je(a,b){var c=aK(b),d=aK(a),e=d[0],f=d[d.length-1],g=a.geometry.coordinates;jc(c[0],e)?g.unshift(c[1]):jc(c[0],f)?g.push(c[1]):jc(c[1],e)?g.unshift(c[0]):jc(c[1],f)&&g.push(c[0]);return a}function jf(a,b,c,d,e){e=af(e);if(!a)throw new Error('center is required');if(c===undefined||c===null)throw new Error('bearing1 is required');if(d===undefined||d===null)throw new Error('bearing2 is required');if(!b)throw new Error('radius is required');if(typeof e!=='object')throw new Error('options must be an object');if(jg(c)===jg(d)){return eN(a,b,e)}var f=aK(a),g=iE(a,b,c,d,e),h=[[f]];ao(g,function(a){h[0].push(a)});h[0].push(f);return I(h,e.properties)}function jg(a){var b=a%360;b<0&&(b+=360);return b}function jh(a,b){var c=aK(a),d=aK(b),e,f,g,h,i=aQ(b);switch(i){case 'Polygon':e=d[0][0];f=d[0][0];h=jl(d[0][0],d[0][d[0].length-1],c);var j=ji(d[0],c,h,g,e,f);e=j[0];f=j[1];break;case 'MultiPolygon':e=d[0][0][0];f=d[0][0][0];h=jl(d[0][0][0],d[0][0][d[0][0].length-1],c);d.forEach(function(a){var b=ji(a[0],c,h,g,e,f);e=b[0];f=b[1]});break};return N([G(e),G(f)])}function ji(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=a[g],i=a[g+1];g===a.length-1&&(i=a[0]);d=jl(h,i,b);c<=0&&d>0?(jk(b,h,e)||(e=h)):c>0&&d<=0&&(jj(b,h,f)||(f=h));c=d}return[e,f]}function jj(a,b,c){return jl(a,b,c)>0}function jk(a,b,c){return jl(a,b,c)<0}function jl(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function jm(a){let b=aK(a),c=0,d=1,e,f;while(d<b.length)e=f||b[0],f=b[d],c+=(f[0]-e[0])*(f[1]+e[1]),d++;return c>0}function jn(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.reverse||!1,d=b.mutate||!1;if(!a)throw new Error('<geojson> is required');if(typeof c!=='boolean')throw new Error('<reverse> must be a boolean');if(typeof d!=='boolean')throw new Error('<mutate> must be a boolean');d===!1&&(a=ed(a));var e=[];switch(a.type){case 'GeometryCollection':av(a,function(a){jo(a,c)});return a;case 'FeatureCollection':as(a,function(a){as(jo(a,c),function(a){e.push(a)})});return N(e)};return jo(a,c)}function jo(a,b){var c=a.type==='Feature'?a.geometry.type:a.type;switch(c){case 'GeometryCollection':av(a,function(a){jo(a,b)});return a;case 'LineString':jp(aK(a),b);return a;case 'Polygon':jq(aK(a),b);return a;case 'MultiLineString':aK(a).forEach(function(a){jp(a,b)});return a;case 'MultiPolygon':aK(a).forEach(function(a){jq(a,b)});return a;case 'Point':;case 'MultiPoint':return a}}function jp(a,b){jm(a)===b&&a.reverse()}function jq(a,b){jm(a[0])!==b&&a[0].reverse();for(var c=1;c<a.length;c++)jm(a[c])===b&&a[c].reverse()}function jr(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.zProperty||'elevation',d=b.flip,e=b.flags;aO(a,'Point','input must contain Points');var f=js(a,d),g=[];for(var h=0;h<f.length;h++){var i=f[h],j=[];for(var k=0;k<i.length;k++){var l=i[k];l.properties[c]?j.push(l.properties[c]):j.push(0);e===!0&&(l.properties.matrixPosition=[h,k])}g.push(j)}return g}function js(c,d){var e={};as(c,function(a){var b=aK(a)[1];e[b]||(e[b]=[]);e[b].push(a)});var f=Object.keys(e).map(function(c){var d=e[c],f=d.sort(function(a,b){return aK(a)[0]-aK(b)[0]});return f}),g=f.sort(function(a,b){if(d)return aK(a[0])[1]-aK(b[0])[1];else return aK(b[0])[1]-aK(a[0])[1]});return g}var jt={successCallback:null,verbose:!1,polygons:!1},ju={};function jv(a,b,c,d){d=d?d:{};var e=Object.keys(jt);for(var f=0;f<e.length;f++){var g=e[f],h=d[g];h=typeof h!=='undefined'&&h!==null?h:jt[g];ju[g]=h}ju.verbose&&console.log('MarchingSquaresJS-isoBands: computing isobands for ['+b+':'+(b+c)+']');var i=kV(a,b,c),j;ju.polygons?(ju.verbose&&console.log('MarchingSquaresJS-isoBands: returning single polygons for each grid cell'),j=k$(i)):(ju.verbose&&console.log('MarchingSquaresJS-isoBands: returning polygon paths for entire data grid'),j=kW(i));typeof ju.successCallback==='function'&&ju.successCallback(j);return j}var jw=64,jx=16,jy=4,jz=1,jA=[],jB=[],jC=[],jD=[],jE=[],jF=[],jG=[],jH=[],jI=[],jJ=[],jK=[],jL=[],jM=[],jN=[],jO=[],jP=[],jQ=[],jR=[],jS=[],jT=[],jU=[],jV=[],jW=[],jX=[];jG[85]=jJ[85]=-1;jH[85]=jK[85]=0;jI[85]=jL[85]=1;jS[85]=jV[85]=1;jT[85]=jW[85]=0;jU[85]=jX[85]=1;jA[85]=jD[85]=0;jB[85]=jE[85]=-1;jC[85]=jO[85]=0;jP[85]=jM[85]=0;jQ[85]=jN[85]=1;jF[85]=jR[85]=1;jV[1]=jV[169]=0;jW[1]=jW[169]=-1;jX[1]=jX[169]=0;jM[1]=jM[169]=-1;jN[1]=jN[169]=0;jO[1]=jO[169]=0;jJ[4]=jJ[166]=0;jK[4]=jK[166]=-1;jL[4]=jL[166]=1;jP[4]=jP[166]=1;jQ[4]=jQ[166]=0;jR[4]=jR[166]=0;jG[16]=jG[154]=0;jH[16]=jH[154]=1;jI[16]=jI[154]=1;jD[16]=jD[154]=1;jE[16]=jE[154]=0;jF[16]=jF[154]=1;jS[64]=jS[106]=0;jT[64]=jT[106]=1;jU[64]=jU[106]=0;jA[64]=jA[106]=-1;jB[64]=jB[106]=0;jC[64]=jC[106]=1;jS[2]=jS[168]=0;jT[2]=jT[168]=-1;jU[2]=jU[168]=1;jV[2]=jV[168]=0;jW[2]=jW[168]=-1;jX[2]=jX[168]=0;jM[2]=jM[168]=-1;jN[2]=jN[168]=0;jO[2]=jO[168]=0;jP[2]=jP[168]=-1;jQ[2]=jQ[168]=0;jR[2]=jR[168]=1;jG[8]=jG[162]=0;jH[8]=jH[162]=-1;jI[8]=jI[162]=0;jJ[8]=jJ[162]=0;jK[8]=jK[162]=-1;jL[8]=jL[162]=1;jM[8]=jM[162]=1;jN[8]=jN[162]=0;jO[8]=jO[162]=1;jP[8]=jP[162]=1;jQ[8]=jQ[162]=0;jR[8]=jR[162]=0;jG[32]=jG[138]=0;jH[32]=jH[138]=1;jI[32]=jI[138]=1;jJ[32]=jJ[138]=0;jK[32]=jK[138]=1;jL[32]=jL[138]=0;jA[32]=jA[138]=1;jB[32]=jB[138]=0;jC[32]=jC[138]=0;jD[32]=jD[138]=1;jE[32]=jE[138]=0;jF[32]=jF[138]=1;jV[128]=jV[42]=0;jW[128]=jW[42]=1;jX[128]=jX[42]=1;jS[128]=jS[42]=0;jT[128]=jT[42]=1;jU[128]=jU[42]=0;jA[128]=jA[42]=-1;jB[128]=jB[42]=0;jC[128]=jC[42]=1;jD[128]=jD[42]=-1;jE[128]=jE[42]=0;jF[128]=jF[42]=0;jJ[5]=jJ[165]=-1;jK[5]=jK[165]=0;jL[5]=jL[165]=0;jV[5]=jV[165]=1;jW[5]=jW[165]=0;jX[5]=jX[165]=0;jP[20]=jP[150]=0;jQ[20]=jQ[150]=1;jR[20]=jR[150]=1;jD[20]=jD[150]=0;jE[20]=jE[150]=-1;jF[20]=jF[150]=1;jG[80]=jG[90]=-1;jH[80]=jH[90]=0;jI[80]=jI[90]=1;jS[80]=jS[90]=1;jT[80]=jT[90]=0;jU[80]=jU[90]=1;jM[65]=jM[105]=0;jN[65]=jN[105]=1;jO[65]=jO[105]=0;jA[65]=jA[105]=0;jB[65]=jB[105]=-1;jC[65]=jC[105]=0;jG[160]=jG[10]=-1;jH[160]=jH[10]=0;jI[160]=jI[10]=1;jJ[160]=jJ[10]=-1;jK[160]=jK[10]=0;jL[160]=jL[10]=0;jV[160]=jV[10]=1;jW[160]=jW[10]=0;jX[160]=jX[10]=0;jS[160]=jS[10]=1;jT[160]=jT[10]=0;jU[160]=jU[10]=1;jP[130]=jP[40]=0;jQ[130]=jQ[40]=1;jR[130]=jR[40]=1;jM[130]=jM[40]=0;jN[130]=jN[40]=1;jO[130]=jO[40]=0;jA[130]=jA[40]=0;jB[130]=jB[40]=-1;jC[130]=jC[40]=0;jD[130]=jD[40]=0;jE[130]=jE[40]=-1;jF[130]=jF[40]=1;jJ[37]=jJ[133]=0;jK[37]=jK[133]=1;jL[37]=jL[133]=1;jV[37]=jV[133]=0;jW[37]=jW[133]=1;jX[37]=jX[133]=0;jA[37]=jA[133]=-1;jB[37]=jB[133]=0;jC[37]=jC[133]=0;jD[37]=jD[133]=1;jE[37]=jE[133]=0;jF[37]=jF[133]=0;jP[148]=jP[22]=-1;jQ[148]=jQ[22]=0;jR[148]=jR[22]=0;jV[148]=jV[22]=0;jW[148]=jW[22]=-1;jX[148]=jX[22]=1;jS[148]=jS[22]=0;jT[148]=jT[22]=1;jU[148]=jU[22]=1;jD[148]=jD[22]=-1;jE[148]=jE[22]=0;jF[148]=jF[22]=1;jG[82]=jG[88]=0;jH[82]=jH[88]=-1;jI[82]=jI[88]=1;jP[82]=jP[88]=1;jQ[82]=jQ[88]=0;jR[82]=jR[88]=1;jM[82]=jM[88]=-1;jN[82]=jN[88]=0;jO[82]=jO[88]=1;jS[82]=jS[88]=0;jT[82]=jT[88]=-1;jU[82]=jU[88]=0;jG[73]=jG[97]=0;jH[73]=jH[97]=1;jI[73]=jI[97]=0;jJ[73]=jJ[97]=0;jK[73]=jK[97]=-1;jL[73]=jL[97]=0;jM[73]=jM[97]=1;jN[73]=jN[97]=0;jO[73]=jO[97]=0;jA[73]=jA[97]=1;jB[73]=jB[97]=0;jC[73]=jC[97]=1;jG[145]=jG[25]=0;jH[145]=jH[25]=-1;jI[145]=jI[25]=0;jM[145]=jM[25]=1;jN[145]=jN[25]=0;jO[145]=jO[25]=1;jV[145]=jV[25]=0;jW[145]=jW[25]=1;jX[145]=jX[25]=1;jD[145]=jD[25]=-1;jE[145]=jE[25]=0;jF[145]=jF[25]=0;jJ[70]=jJ[100]=0;jK[70]=jK[100]=1;jL[70]=jL[100]=0;jP[70]=jP[100]=-1;jQ[70]=jQ[100]=0;jR[70]=jR[100]=1;jS[70]=jS[100]=0;jT[70]=jT[100]=-1;jU[70]=jU[100]=1;jA[70]=jA[100]=1;jB[70]=jB[100]=0;jC[70]=jC[100]=0;jJ[101]=jJ[69]=0;jK[101]=jK[69]=1;jL[101]=jL[69]=0;jA[101]=jA[69]=1;jB[101]=jB[69]=0;jC[101]=jC[69]=0;jV[149]=jV[21]=0;jW[149]=jW[21]=1;jX[149]=jX[21]=1;jD[149]=jD[21]=-1;jE[149]=jE[21]=0;jF[149]=jF[21]=0;jP[86]=jP[84]=-1;jQ[86]=jQ[84]=0;jR[86]=jR[84]=1;jS[86]=jS[84]=0;jT[86]=jT[84]=-1;jU[86]=jU[84]=1;jG[89]=jG[81]=0;jH[89]=jH[81]=-1;jI[89]=jI[81]=0;jM[89]=jM[81]=1;jN[89]=jN[81]=0;jO[89]=jO[81]=1;jG[96]=jG[74]=0;jH[96]=jH[74]=1;jI[96]=jI[74]=0;jJ[96]=jJ[74]=-1;jK[96]=jK[74]=0;jL[96]=jL[74]=1;jS[96]=jS[74]=1;jT[96]=jT[74]=0;jU[96]=jU[74]=0;jA[96]=jA[74]=1;jB[96]=jB[74]=0;jC[96]=jC[74]=1;jG[24]=jG[146]=0;jH[24]=jH[146]=-1;jI[24]=jI[146]=1;jP[24]=jP[146]=1;jQ[24]=jQ[146]=0;jR[24]=jR[146]=1;jM[24]=jM[146]=0;jN[24]=jN[146]=1;jO[24]=jO[146]=1;jD[24]=jD[146]=0;jE[24]=jE[146]=-1;jF[24]=jF[146]=0;jJ[6]=jJ[164]=-1;jK[6]=jK[164]=0;jL[6]=jL[164]=1;jP[6]=jP[164]=-1;jQ[6]=jQ[164]=0;jR[6]=jR[164]=0;jV[6]=jV[164]=0;jW[6]=jW[164]=-1;jX[6]=jX[164]=1;jS[6]=jS[164]=1;jT[6]=jT[164]=0;jU[6]=jU[164]=0;jM[129]=jM[41]=0;jN[129]=jN[41]=1;jO[129]=jO[41]=1;jV[129]=jV[41]=0;jW[129]=jW[41]=1;jX[129]=jX[41]=0;jA[129]=jA[41]=-1;jB[129]=jB[41]=0;jC[129]=jC[41]=0;jD[129]=jD[41]=0;jE[129]=jE[41]=-1;jF[129]=jF[41]=0;jP[66]=jP[104]=0;jQ[66]=jQ[104]=1;jR[66]=jR[104]=0;jM[66]=jM[104]=-1;jN[66]=jN[104]=0;jO[66]=jO[104]=1;jS[66]=jS[104]=0;jT[66]=jT[104]=-1;jU[66]=jU[104]=0;jA[66]=jA[104]=0;jB[66]=jB[104]=-1;jC[66]=jC[104]=1;jG[144]=jG[26]=-1;jH[144]=jH[26]=0;jI[144]=jI[26]=0;jV[144]=jV[26]=1;jW[144]=jW[26]=0;jX[144]=jX[26]=1;jS[144]=jS[26]=0;jT[144]=jT[26]=1;jU[144]=jU[26]=1;jD[144]=jD[26]=-1;jE[144]=jE[26]=0;jF[144]=jF[26]=1;jJ[36]=jJ[134]=0;jK[36]=jK[134]=1;jL[36]=jL[134]=1;jP[36]=jP[134]=0;jQ[36]=jQ[134]=1;jR[36]=jR[134]=0;jA[36]=jA[134]=0;jB[36]=jB[134]=-1;jC[36]=jC[134]=1;jD[36]=jD[134]=1;jE[36]=jE[134]=0;jF[36]=jF[134]=0;jG[9]=jG[161]=-1;jH[9]=jH[161]=0;jI[9]=jI[161]=0;jJ[9]=jJ[161]=0;jK[9]=jK[161]=-1;jL[9]=jL[161]=0;jM[9]=jM[161]=1;jN[9]=jN[161]=0;jO[9]=jO[161]=0;jV[9]=jV[161]=1;jW[9]=jW[161]=0;jX[9]=jX[161]=1;jG[136]=0;jH[136]=1;jI[136]=1;jJ[136]=0;jK[136]=1;jL[136]=0;jP[136]=-1;jQ[136]=0;jR[136]=1;jM[136]=-1;jN[136]=0;jO[136]=0;jV[136]=0;jW[136]=-1;jX[136]=0;jS[136]=0;jT[136]=-1;jU[136]=1;jA[136]=1;jB[136]=0;jC[136]=0;jD[136]=1;jE[136]=0;jF[136]=1;jG[34]=0;jH[34]=-1;jI[34]=0;jJ[34]=0;jK[34]=-1;jL[34]=1;jP[34]=1;jQ[34]=0;jR[34]=0;jM[34]=1;jN[34]=0;jO[34]=1;jV[34]=0;jW[34]=1;jX[34]=1;jS[34]=0;jT[34]=1;jU[34]=0;jA[34]=-1;jB[34]=0;jC[34]=1;jD[34]=-1;jE[34]=0;jF[34]=0;jG[35]=0;jH[35]=1;jI[35]=1;jJ[35]=0;jK[35]=-1;jL[35]=1;jP[35]=1;jQ[35]=0;jR[35]=0;jM[35]=-1;jN[35]=0;jO[35]=0;jV[35]=0;jW[35]=-1;jX[35]=0;jS[35]=0;jT[35]=1;jU[35]=0;jA[35]=-1;jB[35]=0;jC[35]=1;jD[35]=1;jE[35]=0;jF[35]=1;jG[153]=0;jH[153]=1;jI[153]=1;jM[153]=-1;jN[153]=0;jO[153]=0;jV[153]=0;jW[153]=-1;jX[153]=0;jD[153]=1;jE[153]=0;jF[153]=1;jJ[102]=0;jK[102]=-1;jL[102]=1;jP[102]=1;jQ[102]=0;jR[102]=0;jS[102]=0;jT[102]=1;jU[102]=0;jA[102]=-1;jB[102]=0;jC[102]=1;jG[155]=0;jH[155]=-1;jI[155]=0;jM[155]=1;jN[155]=0;jO[155]=1;jV[155]=0;jW[155]=1;jX[155]=1;jD[155]=-1;jE[155]=0;jF[155]=0;jJ[103]=0;jK[103]=1;jL[103]=0;jP[103]=-1;jQ[103]=0;jR[103]=1;jS[103]=0;jT[103]=-1;jU[103]=1;jA[103]=1;jB[103]=0;jC[103]=0;jG[152]=0;jH[152]=1;jI[152]=1;jP[152]=-1;jQ[152]=0;jR[152]=1;jM[152]=-1;jN[152]=0;jO[152]=0;jV[152]=0;jW[152]=-1;jX[152]=0;jS[152]=0;jT[152]=-1;jU[152]=1;jD[152]=1;jE[152]=0;jF[152]=1;jG[156]=0;jH[156]=-1;jI[156]=1;jP[156]=1;jQ[156]=0;jR[156]=1;jM[156]=-1;jN[156]=0;jO[156]=0;jV[156]=0;jW[156]=-1;jX[156]=0;jS[156]=0;jT[156]=1;jU[156]=1;jD[156]=-1;jE[156]=0;jF[156]=1;jG[137]=0;jH[137]=1;jI[137]=1;jJ[137]=0;jK[137]=1;jL[137]=0;jM[137]=-1;jN[137]=0;jO[137]=0;jV[137]=0;jW[137]=-1;jX[137]=0;jA[137]=1;jB[137]=0;jC[137]=0;jD[137]=1;jE[137]=0;jF[137]=1;jG[139]=0;jH[139]=1;jI[139]=1;jJ[139]=0;jK[139]=-1;jL[139]=0;jM[139]=1;jN[139]=0;jO[139]=0;jV[139]=0;jW[139]=1;jX[139]=0;jA[139]=-1;jB[139]=0;jC[139]=0;jD[139]=1;jE[139]=0;jF[139]=1;jG[98]=0;jH[98]=-1;jI[98]=0;jJ[98]=0;jK[98]=-1;jL[98]=1;jP[98]=1;jQ[98]=0;jR[98]=0;jM[98]=1;jN[98]=0;jO[98]=1;jS[98]=0;jT[98]=1;jU[98]=0;jA[98]=-1;jB[98]=0;jC[98]=1;jG[99]=0;jH[99]=1;jI[99]=0;jJ[99]=0;jK[99]=-1;jL[99]=1;jP[99]=1;jQ[99]=0;jR[99]=0;jM[99]=-1;jN[99]=0;jO[99]=1;jS[99]=0;jT[99]=-1;jU[99]=0;jA[99]=1;jB[99]=0;jC[99]=1;jJ[38]=0;jK[38]=-1;jL[38]=1;jP[38]=1;jQ[38]=0;jR[38]=0;jV[38]=0;jW[38]=1;jX[38]=1;jS[38]=0;jT[38]=1;jU[38]=0;jA[38]=-1;jB[38]=0;jC[38]=1;jD[38]=-1;jE[38]=0;jF[38]=0;jJ[39]=0;jK[39]=1;jL[39]=1;jP[39]=-1;jQ[39]=0;jR[39]=0;jV[39]=0;jW[39]=-1;jX[39]=1;jS[39]=0;jT[39]=1;jU[39]=0;jA[39]=-1;jB[39]=0;jC[39]=1;jD[39]=1;jE[39]=0;jF[39]=0;var jY=function(a){return[[a.bottomleft,0],[0,0],[0,a.leftbottom]]},jZ=function(a){return[[1,a.rightbottom],[1,0],[a.bottomright,0]]},j_=function(a){return[[a.topright,1],[1,1],[1,a.righttop]]},j$=function(a){return[[0,a.lefttop],[0,1],[a.topleft,1]]},ka=function(a){return[[a.bottomright,0],[a.bottomleft,0],[0,a.leftbottom],[0,a.lefttop]]},kb=function(a){return[[a.bottomright,0],[a.bottomleft,0],[1,a.righttop],[1,a.rightbottom]]},kc=function(a){return[[1,a.righttop],[1,a.rightbottom],[a.topleft,1],[a.topright,1]]},kd=function(a){return[[0,a.leftbottom],[0,a.lefttop],[a.topleft,1],[a.topright,1]]},ke=function(a){return[[0,0],[0,a.leftbottom],[1,a.rightbottom],[1,0]]},kf=function(a){return[[1,0],[a.bottomright,0],[a.topright,1],[1,1]]},kg=function(a){return[[1,1],[1,a.righttop],[0,a.lefttop],[0,1]]},kh=function(a){return[[a.bottomleft,0],[0,0],[0,1],[a.topleft,1]]},ki=function(a){return[[1,a.righttop],[1,a.rightbottom],[0,a.leftbottom],[0,a.lefttop]]},kj=function(a){return[[a.topleft,1],[a.topright,1],[a.bottomright,0],[a.bottomleft,0]]},kk=function(){return[[0,0],[0,1],[1,1],[1,0]]},kl=function(a){return[[1,a.rightbottom],[1,0],[0,0],[0,1],[a.topleft,1]]},km=function(a){return[[a.topright,1],[1,1],[1,0],[0,0],[0,a.leftbottom]]},kn=function(a){return[[1,0],[a.bottomright,0],[0,a.lefttop],[0,1],[1,1]]},ko=function(a){return[[1,1],[1,a.righttop],[a.bottomleft,0],[0,0],[0,1]]},kp=function(a){return[[1,a.righttop],[1,a.rightbottom],[0,a.lefttop],[0,1],[a.topleft,1]]},kq=function(a){return[[1,1],[1,a.righttop],[a.bottomright,0],[a.bottomleft,0],[a.topright,1]]},kr=function(a){return[[1,a.rightbottom],[1,0],[a.bottomright,0],[0,a.leftbottom],[0,a.lefttop]]},ks=function(a){return[[a.topright,1],[a.bottomleft,0],[0,0],[0,a.leftbottom],[a.topleft,1]]},kt=function(a){return[[a.bottomright,0],[a.bottomleft,0],[0,a.lefttop],[0,1],[a.topleft,1]]},ku=function(a){return[[1,1],[1,a.righttop],[0,a.leftbottom],[0,a.lefttop],[a.topright,1]]},kv=function(a){return[[1,a.rightbottom],[1,0],[a.bottomright,0],[a.topleft,1],[a.topright,1]]},kw=function(a){return[[1,a.righttop],[1,a.rightbottom],[a.bottomleft,0],[0,0],[0,a.leftbottom]]},kx=function(a){return[[1,a.rightbottom],[1,0],[0,0],[0,a.leftbottom],[a.topleft,1],[a.topright,1]]},ky=function(a){return[[1,1],[1,0],[a.bottomright,0],[0,a.leftbottom],[0,a.lefttop],[a.topright,1]]},kz=function(a){return[[1,1],[1,a.righttop],[a.bottomright,0],[a.bottomleft,0],[0,a.lefttop],[0,1]]},kA=function(a){return[[1,a.righttop],[1,a.rightbottom],[a.bottomleft,0],[0,0],[0,1],[a.topleft,1]]},kB=function(a){return[[1,1],[1,a.righttop],[a.bottomleft,0],[0,0],[0,a.leftbottom],[a.topright,1]]},kC=function(a){return[[1,a.rightbottom],[1,0],[a.bottomright,0],[0,a.lefttop],[0,1],[a.topleft,1]]},kD=function(a){return[[1,a.righttop],[1,a.rightbottom],[a.bottomright,0],[a.bottomleft,0],[0,a.leftbottom],[0,a.lefttop],[a.topleft,1],[a.topright,1]]},kE=function(a){return[[1,1],[1,a.righttop],[a.bottomleft,0],[0,0],[0,a.leftbottom],[a.topright,1]]},kF=function(a){return[[1,a.rightbottom],[1,0],[a.bottomright,0],[0,a.lefttop],[0,1],[a.topleft,1]]},kG=function(a){return[[1,1],[1,a.righttop],[a.bottomright,0],[a.bottomleft,0],[0,a.leftbottom],[0,a.lefttop],[a.topright,1]]},kH=function(a){return[[1,a.righttop],[1,a.rightbottom],[a.bottomleft,0],[0,0],[0,a.leftbottom],[a.topleft,1],[a.topright,1]]},kI=function(a){return[[1,a.righttop],[1,a.rightbottom],[a.bottomright,0],[a.bottomleft,0],[0,a.lefttop],[0,1],[a.topleft,1]]},kJ=function(a){return[[1,a.rightbottom],[1,0],[a.bottomright,0],[0,a.leftbottom],[0,a.lefttop],[a.topleft,1],[a.topright,1]]},kK=[],kL=[],kM=[],kN=[],kO=[],kP=[],kQ=[],kR=[];kN[1]=kO[1]=18;kN[169]=kO[169]=18;kM[4]=kL[4]=12;kM[166]=kL[166]=12;kK[16]=kR[16]=4;kK[154]=kR[154]=4;kP[64]=kQ[64]=22;kP[106]=kQ[106]=22;kM[2]=kP[2]=17;kN[2]=kO[2]=18;kM[168]=kP[168]=17;kN[168]=kO[168]=18;kK[8]=kN[8]=9;kL[8]=kM[8]=12;kK[162]=kN[162]=9;kL[162]=kM[162]=12;kK[32]=kR[32]=4;kL[32]=kQ[32]=1;kK[138]=kR[138]=4;kL[138]=kQ[138]=1;kO[128]=kR[128]=21;kP[128]=kQ[128]=22;kO[42]=kR[42]=21;kP[42]=kQ[42]=22;kL[5]=kO[5]=14;kL[165]=kO[165]=14;kM[20]=kR[20]=6;kM[150]=kR[150]=6;kK[80]=kP[80]=11;kK[90]=kP[90]=11;kN[65]=kQ[65]=3;kN[105]=kQ[105]=3;kK[160]=kP[160]=11;kL[160]=kO[160]=14;kK[10]=kP[10]=11;kL[10]=kO[10]=14;kM[130]=kR[130]=6;kN[130]=kQ[130]=3;kM[40]=kR[40]=6;kN[40]=kQ[40]=3;kL[101]=kQ[101]=1;kL[69]=kQ[69]=1;kO[149]=kR[149]=21;kO[21]=kR[21]=21;kM[86]=kP[86]=17;kM[84]=kP[84]=17;kK[89]=kN[89]=9;kK[81]=kN[81]=9;kK[96]=kQ[96]=0;kL[96]=kP[96]=15;kK[74]=kQ[74]=0;kL[74]=kP[74]=15;kK[24]=kM[24]=8;kN[24]=kR[24]=7;kK[146]=kM[146]=8;kN[146]=kR[146]=7;kL[6]=kP[6]=15;kM[6]=kO[6]=16;kL[164]=kP[164]=15;kM[164]=kO[164]=16;kN[129]=kR[129]=7;kO[129]=kQ[129]=20;kN[41]=kR[41]=7;kO[41]=kQ[41]=20;kM[66]=kQ[66]=2;kN[66]=kP[66]=19;kM[104]=kQ[104]=2;kN[104]=kP[104]=19;kK[144]=kO[144]=10;kP[144]=kR[144]=23;kK[26]=kO[26]=10;kP[26]=kR[26]=23;kL[36]=kR[36]=5;kM[36]=kQ[36]=2;kL[134]=kR[134]=5;kM[134]=kQ[134]=2;kK[9]=kO[9]=10;kL[9]=kN[9]=13;kK[161]=kO[161]=10;kL[161]=kN[161]=13;kL[37]=kR[37]=5;kO[37]=kQ[37]=20;kL[133]=kR[133]=5;kO[133]=kQ[133]=20;kM[148]=kO[148]=16;kP[148]=kR[148]=23;kM[22]=kO[22]=16;kP[22]=kR[22]=23;kK[82]=kM[82]=8;kN[82]=kP[82]=19;kK[88]=kM[88]=8;kN[88]=kP[88]=19;kK[73]=kQ[73]=0;kL[73]=kN[73]=13;kK[97]=kQ[97]=0;kL[97]=kN[97]=13;kK[145]=kN[145]=9;kO[145]=kR[145]=21;kK[25]=kN[25]=9;kO[25]=kR[25]=21;kL[70]=kQ[70]=1;kM[70]=kP[70]=17;kL[100]=kQ[100]=1;kM[100]=kP[100]=17;kK[34]=kN[34]=9;kL[34]=kM[34]=12;kO[34]=kR[34]=21;kP[34]=kQ[34]=22;kK[136]=kR[136]=4;kL[136]=kQ[136]=1;kM[136]=kP[136]=17;kN[136]=kO[136]=18;kK[35]=kR[35]=4;kL[35]=kM[35]=12;kN[35]=kO[35]=18;kP[35]=kQ[35]=22;kK[153]=kR[153]=4;kN[153]=kO[153]=18;kL[102]=kM[102]=12;kP[102]=kQ[102]=22;kK[155]=kN[155]=9;kO[155]=kR[155]=23;kL[103]=kQ[103]=1;kM[103]=kP[103]=17;kK[152]=kR[152]=4;kM[152]=kP[152]=17;kN[152]=kO[152]=18;kK[156]=kM[156]=8;kN[156]=kO[156]=18;kP[156]=kR[156]=23;kK[137]=kR[137]=4;kL[137]=kQ[137]=1;kN[137]=kO[137]=18;kK[139]=kR[139]=4;kL[139]=kN[139]=13;kO[139]=kQ[139]=20;kK[98]=kN[98]=9;kL[98]=kM[98]=12;kP[98]=kQ[98]=22;kK[99]=kQ[99]=0;kL[99]=kM[99]=12;kN[99]=kP[99]=19;kL[38]=kM[38]=12;kO[38]=kR[38]=21;kP[38]=kQ[38]=22;kL[39]=kR[39]=5;kM[39]=kO[39]=16;kP[39]=kQ[39]=22;var kS=[];kS[1]=kS[169]=jY;kS[4]=kS[166]=jZ;kS[16]=kS[154]=j_;kS[64]=kS[106]=j$;kS[168]=kS[2]=ka;kS[162]=kS[8]=kb;kS[138]=kS[32]=kc;kS[42]=kS[128]=kd;kS[5]=kS[165]=ke;kS[20]=kS[150]=kf;kS[80]=kS[90]=kg;kS[65]=kS[105]=kh;kS[160]=kS[10]=ki;kS[130]=kS[40]=kj;kS[85]=kk;kS[101]=kS[69]=kl;kS[149]=kS[21]=km;kS[86]=kS[84]=kn;kS[89]=kS[81]=ko;kS[96]=kS[74]=kp;kS[24]=kS[146]=kq;kS[6]=kS[164]=kr;kS[129]=kS[41]=ks;kS[66]=kS[104]=kt;kS[144]=kS[26]=ku;kS[36]=kS[134]=kv;kS[9]=kS[161]=kw;kS[37]=kS[133]=kx;kS[148]=kS[22]=ky;kS[82]=kS[88]=kz;kS[73]=kS[97]=kA;kS[145]=kS[25]=kB;kS[70]=kS[100]=kC;kS[34]=function(a){return[kd(a),kb(a)]};kS[35]=kD;kS[136]=function(a){return[kc(a),ka(a)]};kS[153]=function(a){return[j_(a),jY(a)]};kS[102]=function(a){return[jZ(a),j$(a)]};kS[155]=kE;kS[103]=kF;kS[152]=function(a){return[j_(a),ka(a)]};kS[156]=kG;kS[137]=function(a){return[kc(a),jY(a)]};kS[139]=kH;kS[98]=function(a){return[kb(a),j$(a)]};kS[99]=kI;kS[38]=function(a){return[jZ(a),kd(a)]};kS[39]=kJ;function kT(a,b,c){return(a-b)/(c-b)}function kU(a){return a.constructor.toString().indexOf('Array')>-1}function kV(a,b,c){var d=a.length-1,e=a[0].length-1,f={rows:d,cols:e,cells:[]},g=b+Math.abs(c);for(var h=0;h<d;++h){f.cells[h]=[];for(var i=0;i<e;++i){var j=0,k=a[h+1][i],l=a[h+1][i+1],m=a[h][i+1],n=a[h][i];if(isNaN(k)||isNaN(l)||isNaN(m)||isNaN(n)){continue}j|=k<b?0:k>g?128:64;j|=l<b?0:l>g?32:16;j|=m<b?0:m>g?8:4;j|=n<b?0:n>g?2:1;var o=+j,p=0;if(j===17||j===18||j===33||j===34||j===38||j===68||j===72||j===98||j===102||j===132||j===136||j===137||j===152||j===153){var q=(k+l+m+n)/4;p=q>g?2:q<b?0:1;j===34?(p===1?(j=35):p===0&&(j=136)):j===136?(p===1?(j=35,p=4):p===0&&(j=34)):j===17?(p===1?(j=155,p=4):p===0&&(j=153)):j===68?(p===1?(j=103,p=4):p===0&&(j=102)):j===153?(p===1&&(j=155)):j===102?(p===1&&(j=103)):j===152?(p<2&&(j=156,p=1)):j===137?(p<2&&(j=139,p=1)):j===98?(p<2&&(j=99,p=1)):j===38?(p<2&&(j=39,p=1)):j===18?(p>0?(j=156,p=4):(j=152)):j===33?(p>0?(j=139,p=4):(j=137)):j===72?(p>0?(j=99,p=4):(j=98)):j===132&&(p>0?(j=39,p=4):(j=38))}if(j!=0&&j!=170){var r,s,t,u,v,w,x,y;r=s=t=u=v=w=x=y=0.5;var z=[];j===1?(t=1-kT(b,m,n),y=1-kT(b,k,n),z.push(kN[j])):j===169?(t=kT(g,n,m),y=kT(g,n,k),z.push(kN[j])):j===4?(w=1-kT(b,l,m),u=kT(b,n,m),z.push(kL[j])):j===166?(w=kT(g,m,l),u=1-kT(g,m,n),z.push(kL[j])):j===16?(v=kT(b,m,l),s=kT(b,k,l),z.push(kK[j])):j===154?(v=1-kT(g,l,m),s=1-kT(g,l,k),z.push(kK[j])):j===64?(x=kT(b,n,k),r=1-kT(b,l,k),z.push(kP[j])):j===106?(x=1-kT(g,k,n),r=kT(g,k,l),z.push(kP[j])):j===168?(u=kT(g,n,m),t=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),z.push(kM[j]),z.push(kN[j])):j===2?(u=1-kT(b,m,n),t=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),z.push(kM[j]),z.push(kN[j])):j===162?(v=kT(g,m,l),w=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),z.push(kM[j]),z.push(kN[j])):j===8?(v=1-kT(b,l,m),w=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),z.push(kK[j]),z.push(kL[j])):j===138?(v=1-kT(b,l,m),w=1-kT(g,l,m),r=1-kT(g,l,k),s=1-kT(b,l,k),z.push(kK[j]),z.push(kL[j])):j===32?(v=kT(g,m,l),w=kT(b,m,l),r=kT(b,k,l),s=kT(g,k,l),z.push(kK[j]),z.push(kL[j])):j===42?(y=1-kT(g,k,n),x=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l),z.push(kO[j]),z.push(kP[j])):j===128&&(y=kT(b,n,k),x=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k),z.push(kO[j]),z.push(kP[j]));j===5?(w=1-kT(b,l,m),y=1-kT(b,k,n),z.push(kL[j])):j===165?(w=kT(g,m,l),y=kT(g,n,k),z.push(kL[j])):j===20?(u=kT(b,n,m),s=kT(b,k,l),z.push(kM[j])):j===150?(u=1-kT(g,m,n),s=1-kT(g,l,k),z.push(kM[j])):j===80?(v=kT(b,m,l),x=kT(b,n,k),z.push(kK[j])):j===90?(v=1-kT(g,l,m),x=1-kT(g,k,n),z.push(kK[j])):j===65?(t=1-kT(b,m,n),r=1-kT(b,l,k),z.push(kN[j])):j===105?(t=kT(g,n,m),r=kT(g,k,l),z.push(kN[j])):j===160?(v=kT(g,m,l),w=kT(b,m,l),y=kT(b,n,k),x=kT(g,n,k),z.push(kK[j]),z.push(kL[j])):j===10?(v=1-kT(b,l,m),w=1-kT(g,l,m),y=1-kT(g,k,n),x=1-kT(b,k,n),z.push(kK[j]),z.push(kL[j])):j===130?(u=1-kT(b,m,n),t=1-kT(g,m,n),r=1-kT(g,l,k),s=1-kT(b,l,k),z.push(kM[j]),z.push(kN[j])):j===40?(u=kT(g,n,m),t=kT(b,n,m),r=kT(b,k,l),s=kT(g,k,l),z.push(kM[j]),z.push(kN[j])):j===101?(w=kT(g,m,l),r=kT(g,k,l),z.push(kL[j])):j===69?(w=1-kT(b,l,m),r=1-kT(b,l,k),z.push(kL[j])):j===149?(y=kT(g,n,k),s=1-kT(g,l,k),z.push(kO[j])):j===21?(y=1-kT(b,k,n),s=kT(b,k,l),z.push(kO[j])):j===86?(u=1-kT(g,m,n),x=1-kT(g,k,n),z.push(kM[j])):j===84?(u=kT(b,n,m),x=kT(b,n,k),z.push(kM[j])):j===89?(v=1-kT(g,l,m),t=kT(g,n,m),z.push(kN[j])):j===81?(v=kT(b,m,l),t=1-kT(b,m,n),z.push(kN[j])):j===96?(v=kT(g,m,l),w=kT(b,m,l),x=kT(b,n,k),r=kT(g,k,l),z.push(kK[j]),z.push(kL[j])):j===74?(v=1-kT(b,l,m),w=1-kT(g,l,m),x=1-kT(g,k,n),r=1-kT(b,l,k),z.push(kK[j]),z.push(kL[j])):j===24?(v=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),s=kT(b,k,l),z.push(kK[j]),z.push(kN[j])):j===146?(v=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),s=1-kT(g,l,k),z.push(kK[j]),z.push(kN[j])):j===6?(w=1-kT(b,l,m),u=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),z.push(kL[j]),z.push(kM[j])):j===164?(w=kT(g,m,l),u=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),z.push(kL[j]),z.push(kM[j])):j===129?(t=1-kT(b,m,n),y=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k),z.push(kN[j]),z.push(kO[j])):j===41?(t=kT(g,n,m),y=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l),z.push(kN[j]),z.push(kO[j])):j===66?(u=1-kT(b,m,n),t=1-kT(g,m,n),x=1-kT(g,k,n),r=1-kT(b,l,k),z.push(kM[j]),z.push(kN[j])):j===104?(u=kT(g,n,m),t=kT(b,n,m),x=kT(b,n,k),r=kT(g,k,l),z.push(kN[j]),z.push(kQ[j])):j===144?(v=kT(b,m,l),y=kT(b,n,k),x=kT(g,n,k),s=1-kT(g,l,k),z.push(kK[j]),z.push(kP[j])):j===26?(v=1-kT(g,l,m),y=1-kT(g,k,n),x=1-kT(b,k,n),s=kT(b,k,l),z.push(kK[j]),z.push(kP[j])):j===36?(w=kT(g,m,l),u=kT(b,n,m),r=kT(b,k,l),s=kT(g,k,l),z.push(kL[j]),z.push(kM[j])):j===134?(w=1-kT(b,l,m),u=1-kT(g,m,n),r=1-kT(g,l,k),s=1-kT(b,l,k),z.push(kL[j]),z.push(kM[j])):j===9?(v=1-kT(b,l,m),w=1-kT(g,l,m),t=kT(g,n,m),y=1-kT(b,k,n),z.push(kK[j]),z.push(kL[j])):j===161?(v=kT(g,m,l),w=kT(b,m,l),t=1-kT(b,m,n),y=kT(g,n,k),z.push(kK[j]),z.push(kL[j])):j===37?(w=kT(g,m,l),y=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l),z.push(kL[j]),z.push(kO[j])):j===133?(w=1-kT(b,l,m),y=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k),z.push(kL[j]),z.push(kO[j])):j===148?(u=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),s=1-kT(g,l,k),z.push(kM[j]),z.push(kP[j])):j===22?(u=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),s=kT(b,k,l),z.push(kM[j]),z.push(kP[j])):j===82?(v=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),x=1-kT(g,k,n),z.push(kK[j]),z.push(kN[j])):j===88?(v=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),x=kT(b,n,k),z.push(kK[j]),z.push(kN[j])):j===73?(v=1-kT(b,l,m),w=1-kT(g,l,m),t=kT(g,n,m),r=1-kT(b,l,k),z.push(kK[j]),z.push(kL[j])):j===97?(v=kT(g,m,l),w=kT(b,m,l),t=1-kT(b,m,n),r=kT(g,k,l),z.push(kK[j]),z.push(kL[j])):j===145?(v=kT(b,m,l),t=1-kT(b,m,n),y=kT(g,n,k),s=1-kT(g,l,k),z.push(kK[j]),z.push(kO[j])):j===25?(v=1-kT(g,l,m),t=kT(g,n,m),y=1-kT(b,k,n),s=kT(b,k,l),z.push(kK[j]),z.push(kO[j])):j===70?(w=1-kT(b,l,m),u=1-kT(g,m,n),x=1-kT(g,k,n),r=1-kT(b,l,k),z.push(kL[j]),z.push(kM[j])):j===100?(w=kT(g,m,l),u=kT(b,n,m),x=kT(b,n,k),r=kT(g,k,l),z.push(kL[j]),z.push(kM[j])):j===34?(p===0?(v=1-kT(b,l,m),w=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)):(v=kT(g,m,l),w=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)),z.push(kK[j]),z.push(kL[j]),z.push(kO[j]),z.push(kP[j])):j===35?(p===4?(v=1-kT(b,l,m),w=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)):(v=kT(g,m,l),w=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)),z.push(kK[j]),z.push(kL[j]),z.push(kN[j]),z.push(kP[j])):j===136?(p===0?(v=kT(g,m,l),w=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)):(v=1-kT(b,l,m),w=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)),z.push(kK[j]),z.push(kL[j]),z.push(kO[j]),z.push(kP[j])):j===153?(p===0?(v=kT(b,m,l),t=1-kT(b,m,n),y=1-kT(b,k,n),s=kT(b,k,l)):(v=1-kT(g,l,m),t=kT(g,n,m),y=kT(g,n,k),s=1-kT(g,l,k)),z.push(kK[j]),z.push(kN[j])):j===102?(p===0?(w=1-kT(b,l,m),u=kT(b,n,m),x=kT(b,n,k),r=1-kT(b,l,k)):(w=kT(g,m,l),u=1-kT(g,m,n),x=1-kT(g,k,n),r=kT(g,k,l)),z.push(kL[j]),z.push(kP[j])):j===155?(p===4?(v=kT(b,m,l),t=1-kT(b,m,n),y=1-kT(b,k,n),s=kT(b,k,l)):(v=1-kT(g,l,m),t=kT(g,n,m),y=kT(g,n,k),s=1-kT(g,l,k)),z.push(kK[j]),z.push(kO[j])):j===103?(p===4?(w=1-kT(b,l,m),u=kT(b,n,m),x=kT(b,n,k),r=1-kT(b,l,k)):(w=kT(g,m,l),u=1-kT(g,m,n),x=1-kT(g,k,n),r=kT(g,k,l)),z.push(kL[j]),z.push(kM[j])):j===152?(p===0?(v=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),s=kT(b,k,l)):(v=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),s=1-kT(g,l,k)),z.push(kK[j]),z.push(kM[j]),z.push(kN[j])):j===156?(p===4?(v=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),s=kT(b,k,l)):(v=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),s=1-kT(g,l,k)),z.push(kK[j]),z.push(kN[j]),z.push(kP[j])):j===137?(p===0?(v=kT(g,m,l),w=kT(b,m,l),t=1-kT(b,m,n),y=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)):(v=1-kT(b,l,m),w=1-kT(g,l,m),t=kT(g,n,m),y=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)),z.push(kK[j]),z.push(kL[j]),z.push(kN[j])):j===139?(p===4?(v=kT(g,m,l),w=kT(b,m,l),t=1-kT(b,m,n),y=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)):(v=1-kT(b,l,m),w=1-kT(g,l,m),t=kT(g,n,m),y=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)),z.push(kK[j]),z.push(kL[j]),z.push(kO[j])):j===98?(p===0?(v=1-kT(b,l,m),w=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),x=kT(b,n,k),r=1-kT(b,l,k)):(v=kT(g,m,l),w=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),x=1-kT(g,k,n),r=kT(g,k,l)),z.push(kK[j]),z.push(kL[j]),z.push(kP[j])):j===99?(p===4?(v=1-kT(b,l,m),w=1-kT(g,l,m),u=kT(g,n,m),t=kT(b,n,m),x=kT(b,n,k),r=1-kT(b,l,k)):(v=kT(g,m,l),w=kT(b,m,l),u=1-kT(b,m,n),t=1-kT(g,m,n),x=1-kT(g,k,n),r=kT(g,k,l)),z.push(kK[j]),z.push(kL[j]),z.push(kN[j])):j===38?(p===0?(w=1-kT(b,l,m),u=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)):(w=kT(g,m,l),u=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)),z.push(kL[j]),z.push(kO[j]),z.push(kP[j])):j===39?(p===4?(w=1-kT(b,l,m),u=kT(b,n,m),y=kT(b,n,k),x=kT(g,n,k),r=1-kT(g,l,k),s=1-kT(b,l,k)):(w=kT(g,m,l),u=1-kT(g,m,n),y=1-kT(g,k,n),x=1-kT(b,k,n),r=kT(b,k,l),s=kT(g,k,l)),z.push(kL[j]),z.push(kM[j]),z.push(kP[j])):j===85&&(v=1,w=0,u=1,t=0,y=0,x=1,r=0,s=1);(r<0||r>1||s<0||s>1||v<0||v>1||u<0||u>1||y<0||y>1||x<0||x>1)&&console.log('MarchingSquaresJS-isoBands: '+j+' '+o+' '+k+','+l+','+m+','+n+' '+p+' '+r+' '+s+' '+v+' '+w+' '+u+' '+t+' '+y+' '+x);f.cells[h][i]={cval:j,cval_real:o,flipped:p,topleft:r,topright:s,righttop:v,rightbottom:w,bottomright:u,bottomleft:t,leftbottom:y,lefttop:x,edges:z}}}}return f}function kW(a){var b=[],c=a.rows,d=a.cols,e=[];for(var f=0;f<c;f++){for(var g=0;g<d;g++){if(typeof a.cells[f][g]!=='undefined'&&a.cells[f][g].edges.length>0){var h=a.cells[f][g],i=kZ(h),j=null,k=g,l=f;i!==null&&e.push([i.p[0]+k,i.p[1]+l]);do{j=k_(a.cells[l][k],i.x,i.y,i.o);if(j!==null)e.push([j.p[0]+k,j.p[1]+l]),k+=j.x,l+=j.y,i=j;else{break}if(l<0||l>=c||k<0||k>=d||typeof a.cells[l][k]==='undefined'){k-=j.x;l-=j.y;var m=kX(a,k,l,j.x,j.y,j.o);if(m!==null)m.path.forEach(function(a){e.push(a)}),k=m.i,l=m.j,i=m;else{break}}}while(typeof a.cells[l][k]!=='undefined'&&a.cells[l][k].edges.length>0);b.push(e);e=[];a.cells[f][g].edges.length>0&&g--}}}return b}function kX(a,b,c,d,e,f){var g=a.cells[c][b],h=g.cval_real,i=b+d,j=c+e,k=[],l=!1;while(!l){if(typeof a.cells[j]==='undefined'||typeof a.cells[j][i]==='undefined'){j-=e;i-=d;g=a.cells[j][i];h=g.cval_real;if(e===-1){if(f===0){if(h&jz)k.push([i,j]),d=-1,e=0,f=0;else if(h&jy)k.push([i+1,j]),d=1,e=0,f=0;else{k.push([i+g.bottomright,j]);d=0;e=1;f=1;l=!0;break}}else if(h&jz)k.push([i,j]),d=-1,e=0,f=0;else if(h&jy){k.push([i+g.bottomright,j]);d=0;e=1;f=1;l=!0;break}else{k.push([i+g.bottomleft,j]);d=0;e=1;f=0;l=!0;break}}else if(e===1){if(f===0){if(h&jx)k.push([i+1,j+1]),d=1,e=0,f=1;else if(!(h&jw)){k.push([i+g.topright,j+1]);d=0;e=-1;f=1;l=!0;break}else{k.push([i+g.topleft,j+1]);d=0;e=-1;f=0;l=!0;break}}else h&jx?(k.push([i+1,j+1]),d=1,e=0,f=1):(k.push([i+1,j+1]),d=1,e=0,f=1)}else if(d===-1){if(f===0){if(h&jw)k.push([i,j+1]),d=0,e=1,f=0;else if(!(h&jz)){k.push([i,j+g.lefttop]);d=1;e=0;f=1;l=!0;break}else{k.push([i,j+g.leftbottom]);d=1;e=0;f=0;l=!0;break}}else{if(h&jw)k.push([i,j+1]),d=0,e=1,f=0;else{console.log('MarchingSquaresJS-isoBands: wtf');break}}}else if(d===1){if(f===0){if(h&jy)k.push([i+1,j]),d=0,e=-1,f=1;else{k.push([i+1,j+g.rightbottom]);d=-1;e=0;f=0;l=!0;break}}else{if(h&jy)k.push([i+1,j]),d=0,e=-1,f=1;else if(!(h&jx)){k.push([i+1,j+g.rightbottom]);d=-1;e=0;f=0;l=!0;break}else{k.push([i+1,j+g.righttop]);d=-1;e=0;f=1;break}}}else{console.log('MarchingSquaresJS-isoBands: we came from nowhere!');break}}else{g=a.cells[j][i];h=g.cval_real;if(d===-1){if(f===0){if(typeof a.cells[j-1]!=='undefined'&&typeof a.cells[j-1][i]!=='undefined')d=0,e=-1,f=1;else if(h&jz)k.push([i,j]);else{k.push([i+g.bottomright,j]);d=0;e=1;f=1;l=!0;break}}else if(h&jw)console.log('MarchingSquaresJS-isoBands: proceeding in x-direction!');else{console.log('MarchingSquaresJS-isoBands: found entry from top at '+i+','+j);break}}else if(d===1){if(f===0){console.log('MarchingSquaresJS-isoBands: wtf');break}else{if(typeof a.cells[j+1]!=='undefined'&&typeof a.cells[j+1][i]!=='undefined')d=0,e=1,f=0;else if(h&jx)k.push([i+1,j+1]),d=1,e=0,f=1;else{k.push([i+g.topleft,j+1]);d=0;e=-1;f=0;l=!0;break}}}else if(e===-1){if(f===1){if(typeof a.cells[j][i+1]!=='undefined')d=1,e=0,f=1;else if(h&jy)k.push([i+1,j]),d=0,e=-1,f=1;else{k.push([i+1,j+g.righttop]);d=-1;e=0;f=1;l=!0;break}}else{console.log('MarchingSquaresJS-isoBands: wtf');break}}else if(e===1){if(f===0){if(typeof a.cells[j][i-1]!=='undefined')d=-1,e=0,f=0;else if(h&jw)k.push([i,j+1]),d=0,e=1,f=0;else{k.push([i,j+g.leftbottom]);d=1;e=0;f=0;l=!0;break}}else{console.log('MarchingSquaresJS-isoBands: wtf');break}}else{console.log('MarchingSquaresJS-isoBands: where did we came from???');break}}i+=d;j+=e;if(i===b&&j===c){break}}return{path:k,i:i,j:j,x:d,y:e,o:f}}function kY(a,b){delete a.edges[b];for(var c=b+1;c<a.edges.length;c++)a.edges[c-1]=a.edges[c];a.edges.pop()}function kZ(a){if(a.edges.length>0){var b=a.edges[a.edges.length-1],c=a.cval_real;switch(b){case 0:if(c&jx){return{p:[1,a.righttop],x:-1,y:0,o:1}}else{return{p:[a.topleft,1],x:0,y:-1,o:0}};case 1:if(c&jy){return{p:[a.topleft,1],x:0,y:-1,o:0}}else{return{p:[1,a.rightbottom],x:-1,y:0,o:0}};case 2:if(c&jy){return{p:[a.bottomright,0],x:0,y:1,o:1}}else{return{p:[a.topleft,1],x:0,y:-1,o:0}};case 3:if(c&jz){return{p:[a.topleft,1],x:0,y:-1,o:0}}else{return{p:[a.bottomleft,0],x:0,y:1,o:0}};case 4:if(c&jx){return{p:[1,a.righttop],x:-1,y:0,o:1}}else{return{p:[a.topright,1],x:0,y:-1,o:1}};case 5:if(c&jy){return{p:[a.topright,1],x:0,y:-1,o:1}}else{return{p:[1,a.rightbottom],x:-1,y:0,o:0}};case 6:if(c&jy){return{p:[a.bottomright,0],x:0,y:1,o:1}}else{return{p:[a.topright,1],x:0,y:-1,o:1}};case 7:if(c&jz){return{p:[a.topright,1],x:0,y:-1,o:1}}else{return{p:[a.bottomleft,0],x:0,y:1,o:0}};case 8:if(c&jy){return{p:[a.bottomright,0],x:0,y:1,o:1}}else{return{p:[1,a.righttop],x:-1,y:0,o:1}};case 9:if(c&jz){return{p:[1,a.righttop],x:-1,y:0,o:1}}else{return{p:[a.bottomleft,0],x:0,y:1,o:0}};case 10:if(c&jz){return{p:[0,a.leftbottom],x:1,y:0,o:0}}else{return{p:[1,a.righttop],x:-1,y:0,o:1}};case 11:if(c&jw){return{p:[1,a.righttop],x:-1,y:0,o:1}}else{return{p:[0,a.lefttop],x:1,y:0,o:1}};case 12:if(c&jy){return{p:[a.bottomright,0],x:0,y:1,o:1}}else{return{p:[1,a.rightbottom],x:-1,y:0,o:0}};case 13:if(c&jz){return{p:[1,a.rightbottom],x:-1,y:0,o:0}}else{return{p:[a.bottomleft,0],x:0,y:1,o:0}};case 14:if(c&jz){return{p:[0,a.leftbottom],x:1,y:0,o:0}}else{return{p:[1,a.rightbottom],x:-1,y:0,o:0}};case 15:if(c&jw){return{p:[1,a.rightbottom],x:-1,y:0,o:0}}else{return{p:[0,a.lefttop],x:1,y:0,o:1}};case 16:if(c&jy){return{p:[a.bottomright,0],x:0,y:1,o:1}}else{return{p:[0,a.leftbottom],x:1,y:0,o:0}};case 17:if(c&jw){return{p:[a.bottomright,0],x:0,y:1,o:1}}else{return{p:[0,a.lefttop],x:1,y:0,o:1}};case 18:if(c&jz){return{p:[0,a.leftbottom],x:1,y:0,o:0}}else{return{p:[a.bottomleft,0],x:0,y:1,o:0}};case 19:if(c&jw){return{p:[a.bottomleft,0],x:0,y:1,o:0}}else{return{p:[0,a.lefttop],x:1,y:0,o:1}};case 20:if(c&jw){return{p:[a.topleft,1],x:0,y:-1,o:0}}else{return{p:[0,a.leftbottom],x:1,y:0,o:0}};case 21:if(c&jx){return{p:[0,a.leftbottom],x:1,y:0,o:0}}else{return{p:[a.topright,1],x:0,y:-1,o:1}};case 22:if(c&jw){return{p:[a.topleft,1],x:0,y:-1,o:0}}else{return{p:[0,a.lefttop],x:1,y:0,o:1}};case 23:if(c&jx){return{p:[0,a.lefttop],x:1,y:0,o:1}}else{return{p:[a.topright,1],x:0,y:-1,o:1}};default:console.log('MarchingSquaresJS-isoBands: edge index out of range!');console.log(a);break}}return null}function k_(a,b,c,d){var e,f,g,h,i=a.cval,j;switch(b){case -1:switch(d){case 0:e=kL[i];g=jJ[i];h=jK[i];j=jL[i];break;default:e=kK[i];g=jG[i];h=jH[i];j=jI[i];break};break;case 1:switch(d){case 0:e=kO[i];g=jV[i];h=jW[i];j=jX[i];break;default:e=kP[i];g=jS[i];h=jT[i];j=jU[i];break};break;default:switch(c){case -1:switch(d){case 0:e=kQ[i];g=jA[i];h=jB[i];j=jC[i];break;default:e=kR[i];g=jD[i];h=jE[i];j=jF[i];break};break;case 1:switch(d){case 0:e=kN[i];g=jM[i];h=jN[i];j=jO[i];break;default:e=kM[i];g=jP[i];h=jQ[i];j=jR[i];break};break;default:break};break};f=a.edges.indexOf(e);if(typeof a.edges[f]!=='undefined')kY(a,f);else{return null}i=a.cval_real;switch(e){case 0:i&jx?(b=a.topleft,c=1):(b=1,c=a.righttop);break;case 1:i&jy?(b=1,c=a.rightbottom):(b=a.topleft,c=1);break;case 2:i&jy?(b=a.topleft,c=1):(b=a.bottomright,c=0);break;case 3:i&jz?(b=a.bottomleft,c=0):(b=a.topleft,c=1);break;case 4:i&jx?(b=a.topright,c=1):(b=1,c=a.righttop);break;case 5:i&jy?(b=1,c=a.rightbottom):(b=a.topright,c=1);break;case 6:i&jy?(b=a.topright,c=1):(b=a.bottomright,c=0);break;case 7:i&jz?(b=a.bottomleft,c=0):(b=a.topright,c=1);break;case 8:i&jy?(b=1,c=a.righttop):(b=a.bottomright,c=0);break;case 9:i&jz?(b=a.bottomleft,c=0):(b=1,c=a.righttop);break;case 10:i&jz?(b=1,c=a.righttop):(b=0,c=a.leftbottom);break;case 11:i&jw?(b=0,c=a.lefttop):(b=1,c=a.righttop);break;case 12:i&jy?(b=1,c=a.rightbottom):(b=a.bottomright,c=0);break;case 13:i&jz?(b=a.bottomleft,c=0):(b=1,c=a.rightbottom);break;case 14:i&jz?(b=1,c=a.rightbottom):(b=0,c=a.leftbottom);break;case 15:i&jw?(b=0,c=a.lefttop):(b=1,c=a.rightbottom);break;case 16:i&jy?(b=0,c=a.leftbottom):(b=a.bottomright,c=0);break;case 17:i&jw?(b=0,c=a.lefttop):(b=a.bottomright,c=0);break;case 18:i&jz?(b=a.bottomleft,c=0):(b=0,c=a.leftbottom);break;case 19:i&jw?(b=0,c=a.lefttop):(b=a.bottomleft,c=0);break;case 20:i&jw?(b=0,c=a.leftbottom):(b=a.topleft,c=1);break;case 21:i&jx?(b=a.topright,c=1):(b=0,c=a.leftbottom);break;case 22:i&jw?(b=0,c=a.lefttop):(b=a.topleft,c=1);break;case 23:i&jx?(b=a.topright,c=1):(b=0,c=a.lefttop);break;default:console.log('MarchingSquaresJS-isoBands: edge index out of range!');console.log(a);return null};(typeof b==='undefined'||typeof c==='undefined'||typeof g==='undefined'||typeof h==='undefined'||typeof j==='undefined')&&(console.log('MarchingSquaresJS-isoBands: undefined value!'),console.log(a),console.log(b+' '+c+' '+g+' '+h+' '+j));return{p:[b,c],x:g,y:h,o:j}}function k$(a){var b=[],c=0;a.cells.forEach(function(a,d){a.forEach(function(a,e){if(typeof a!=='undefined'){var f=kS[a.cval](a);typeof f==='object'&&kU(f)?(typeof f[0]==='object'&&kU(f[0])?(typeof f[0][0]==='object'&&kU(f[0][0])?f.forEach(function(a){a.forEach(function(a){a[0]+=e;a[1]+=d});b[c++]=a}):(f.forEach(function(a){a[0]+=e;a[1]+=d}),b[c++]=f)):console.log('MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates')):console.log('MarchingSquaresJS-isoBands: bandcell polygon with null coordinates')}})});return b}function la(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.zProperty||'elevation',e=c.commonProperties||{},f=c.breaksProperties||[];aO(a,'Point','Input must contain Points');if(!b)throw new Error('breaks is required');if(!Array.isArray(b))throw new Error('breaks is not an Array');if(!ac(e))throw new Error('commonProperties is not an Object');if(!Array.isArray(f))throw new Error('breaksProperties is not an Array');var g=jr(a,{zProperty:d,flip:!0}),h=lb(g,b,d);h=lc(h,g,a);var i=h.map(function(a,b){if(f[b]&&!ac(f[b])){throw new Error('Each mappedProperty is required to be an Object')}var c=Object.assign({},e,f[b]);c[d]=a[d];var g=Q(a.groupedRings,c);return g});return N(i)}function lb(a,b,c){var d=[];for(var e=1;e<b.length;e++){var f=+b[e-1],g=+b[e],h=jv(a,f,g-f),i=ld(h),j=lf(i),k={};k.groupedRings=j;k[c]=f+'-'+g;d.push(k)}return d}function lc(a,b,c){var d=aI(c),e=d[2]-d[0],f=d[3]-d[1],g=d[0],h=d[1],i=b[0].length-1,j=b.length-1,k=e/i,l=f/j,m=function(a){a[0]=a[0]*k+g;a[1]=a[1]*l+h};a.forEach(function(a){a.groupedRings.forEach(function(a){a.forEach(function(a){a.forEach(m)})})});return a}function ld(c){var d=[],e=[];c.forEach(function(a){var b=hy(I([a]));e.push(b);d.push({ring:a,area:b})});e.sort(function(a,b){return b-a});var f=[];e.forEach(function(a){for(var b=0;b<d.length;b++){if(d[b].area===a){f.push(d[b].ring);d.splice(b,1);break}}});return f}function lf(a){var b=a.map(function(a){return{lrCoordinates:a,grouped:!1}}),c=[];while(!lh(b)){for(var d=0;d<b.length;d++){if(!b[d].grouped){var e=[];e.push(b[d].lrCoordinates);b[d].grouped=!0;var f=I([b[d].lrCoordinates]);for(var g=d+1;g<b.length;g++){if(!b[g].grouped){var h=I([b[g].lrCoordinates]);lg(h,f)&&(e.push(b[g].lrCoordinates),b[g].grouped=!0)}}c.push(e)}}}return c}function lg(a,b){var c=eV(a);for(var d=0;d<c.features.length;d++){if(!cL(c.features[d],b)){return !1}}return !0}function lh(a){for(var b=0;b<a.length;b++){if(a[b].grouped===!1){return !1}}return !0}function lj(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.pivot,e=c.mutate;if(!a)throw new Error('geojson is required');if(b===undefined||b===null||isNaN(b))throw new Error('angle is required');if(b===0)return a;d||(d=eS(a));(e===!1||e===undefined)&&(a=ed(a));ao(a,function(a){var c=hD(d,a),e=c+b,f=he(d,a),g=aK(hF(d,f,e));a[0]=g[0];a[1]=g[1]});return a}function lk(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.origin,e=c.mutate;if(!a)throw new Error('geojson required');if(typeof b!=='number'||b===0)throw new Error('invalid factor');var f=Array.isArray(d)||typeof d==='object';e!==!0&&(a=ed(a));if(a.type==='FeatureCollection'&&!f){as(a,function(c,e){a.features[e]=ll(c,b,d)});return a}return ll(a,b,d)}function ll(a,b,c){var d=aQ(a)==='Point';c=lm(a,c);if(b===1||d)return a;ao(a,function(a){var d=he(c,a),e=hD(c,a),f=d*b,g=aK(hF(c,f,e));a[0]=g[0];a[1]=g[1];a.length===3&&(a[2]*=b)});return a}function lm(a,b){(b===undefined||b===null)&&(b='centroid');if(Array.isArray(b)||typeof b==='object')return aJ(b);var c=a.bbox?a.bbox:aI(a),d=c[0],e=c[1],f=c[2],g=c[3];switch(b){case 'sw':;case 'southwest':;case 'westsouth':;case 'bottomleft':return G([d,e]);case 'se':;case 'southeast':;case 'eastsouth':;case 'bottomright':return G([f,e]);case 'nw':;case 'northwest':;case 'westnorth':;case 'topleft':return G([d,g]);case 'ne':;case 'northeast':;case 'eastnorth':;case 'topright':return G([f,g]);case 'center':return eR(a);case undefined:;case null:;case 'centroid':return eS(a);default:throw new Error('invalid origin')}}function ln(a,b,c,d){d=d||{};if(!ac(d))throw new Error('options is invalid');var e=d.units,f=d.zTranslation,g=d.mutate;if(!a)throw new Error('geojson is required');if(b===undefined||b===null||isNaN(b))throw new Error('distance is required');if(f&&typeof f!=='number'&&isNaN(f))throw new Error('zTranslation is not a number');f=f!==undefined?f:0;if(b===0&&f===0)return a;if(c===undefined||c===null||isNaN(c))throw new Error('direction is required');b<0&&(b=-b,c+=180);(g===!1||g===undefined)&&(a=ed(a));ao(a,function(a){var d=aK(hF(a,b,c,{units:e}));a[0]=d[0];a[1]=d[1];f&&a.length===3&&(a[2]+=f)});return a}function lo(a){var b=a[0],c=a[1];return[c[0]-b[0],c[1]-b[1]]}function lp(a,b){return a[0]*b[1]-b[0]*a[1]}function lq(a,b){return[a[0]+b[0],a[1]+b[1]]}function lt(a,b){return[a[0]-b[0],a[1]-b[1]]}function lu(a,b){return[a*b[0],a*b[1]]}function lv(a,b){var c=a[0],d=lo(a),e=b[0],f=lo(b),g=lp(d,f),h=lt(e,c),i=lp(h,f),j=i/g,k=lq(c,lu(j,d));return k}function lw(a,b){var c=lo(a),d=lo(b),e=Math.abs(lp(c,d));return e<0.0000001}function lx(a,b){if(lw(a,b))return !1;return lv(a,b)}function ly(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.units?c.units:'kilometers';if(!a)throw new Error('geojson is required');if(b===undefined||b===null||isNaN(b))throw new Error('distance is required');let e=Z(b,d,'meters');var f=aQ(a),g=a.properties;a=JSON.parse(JSON.stringify(a));switch(f){case 'LineString':return lz(a,e);case 'MultiLineString':var h=[];az(a,function(a){h.push(lz(a,e).geometry.coordinates)});return O(h,g);default:throw new Error('geometry '+f+' is not supported')}}function lz(a,b){var c=eT(a),d=lC(c.geometry);lB(a,d,!0);var e=[],f=aK(a),g=[];f.forEach(function(a,c){if(c!==f.length-1){var d=lA(a,f[c+1],b);e.push(d);if(c>0){var h=e[c-1],i=lx(d,h);i!==!1&&(h[1]=i,d[0]=i);g.push(h[0]);c===f.length-2&&(g.push(d[0]),g.push(d[1]))}f.length===2&&(g.push(d[0]),g.push(d[1]))}});var h=K(g,a.properties);lB(h,d,!1);return h}function lA(a,b,c){var d=Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])),e=a[0]+c*(b[1]-a[1])/d,f=b[0]+c*(b[1]-a[1])/d,g=a[1]+c*(a[0]-b[0])/d,h=b[1]+c*(a[0]-b[0])/d;return[[e,g],[f,h]]}function lB(a,b,c){ao(a,function(a,d){var e=c?lD(a[0],a[1],b):lE(a[0],a[1],b);a.length=0;a.push(e[0],e[1])},!1)}function lC(a){let b=a.coordinates[1],c=a.coordinates[0],d=Math.floor((c+180)/6)+1,e='N';c===180&&(d=60);b<0.0&&(e='S');b>=56.0&&b<64.0&&c>=3.0&&c<12.0&&(d=32);return{zoneNumber:d,hemisphere:e}}function lD(a,b,c){let d=500e3,e=10000e3,f=Y(((c.zoneNumber-1)*6-180+3)),g='CDEFGHJKLMNPQRSTUVWXX',h=g.charAt(Math.floor(b/8+10));c===31&&h==='V'&&a>=3&&(c++,Y(f+=6));c===32&&h==='X'&&a<9&&(c--,Y(f-=6));c===32&&h==='X'&&a>=9&&(c++,Y(f+=6));c===34&&h==='X'&&a<21&&(c--,Y(f-=6));c===34&&h==='X'&&a>=21&&(c++,Y(f+=6));c===36&&h==='X'&&a<33&&(c--,Y(f-=6));c===36&&h==='X'&&a>=33&&(c++,Y(f+=6));var i=Y(b),j=Y(a)-f;let k=6378137,l=0.0033528106647474805,m=0.9996,n=Math.sqrt(l*(2-l)),o=l/(2-l),p=o*o,q=o*p,r=o*q,s=o*r,t=o*s,u=Math.cos(j),v=Math.sin(j),w=Math.tan(i),x=Math.sinh(n*Math.atanh(n*w/Math.sqrt(1+w*w))),y=w*Math.sqrt(1+x*x)-x*Math.sqrt(1+w*w),z=Math.atan2(y,u),A=Math.asinh(v/Math.sqrt(y*y+u*u)),B=k/(1+o)*(1+0.25*p+0.015625*r+0.00390625*t),C=[null,0.5*o-0.6666666666666666*p+0.3125*q+0.22777777777777777*r-0.4409722222222222*s+0.20875661375661375*t,0.2708333333333333*p-0.6*q+0.38680555555555557*r+0.44603174603174606*s-1.0248393063822752*t,0.25416666666666665*q-0.7357142857142858*r+0.5603050595238095*s+0.9237378747795415*t,0.30729786706349205*r-1.0654761904761905*s+0.9096203979276896*t,0.4306671626984127*s-1.713007555715889*t,0.6650675310896665*t],D=z;for(let a=1;a<=6;a++)D+=C[a]*Math.sin(2*a*z)*Math.cosh(2*a*A);let E=A;for(let a=1;a<=6;a++)E+=C[a]*Math.cos(2*a*z)*Math.sinh(2*a*A);let F=m*B*E,G=m*B*D;F+=d;G<0&&(G+=e);return[G,F]}function lE(a,b,c){var d=c.zoneNumber,e=c.hemisphere,f=500e3,g=10000e3,h=6378137,i=0.0033528106647474805,j=0.9996;b-=f;a=e==='S'?a-g:a;var k=Math.sqrt(i*(2-i)),l=i/(2-i),m=l*l,n=l*m,o=l*n,p=l*o,q=l*p,r=h/(1+l)*(1+0.25*m+0.015625*o+0.00390625*q),s=b/(j*r),t=a/(j*r),u=[null,0.5*l-0.6666666666666666*m+0.3854166666666667*n-0.002777777777777778*o-0.158203125*p+0.15905919312169312*q,0.020833333333333332*m+0.06666666666666667*n-0.3034722222222222*o+0.4380952380952381*p-0.2890188388723545*q,0.035416666666666666*n-0.04404761904761905*o-0.046651785714285715*p+0.06138668430335097*q,0.02726314484126984*o-0.021825396825396824*p-0.11439745921516754*q,0.02841641865079365*p-0.027268468414301746*q,0.03233083094085698*q],v=t;for(var w=1;w<=6;w++)v-=u[w]*Math.sin(2*w*t)*Math.cosh(2*w*s);var x=s;for(w=1;w<=6;w++)x-=u[w]*Math.cos(2*w*t)*Math.sinh(2*w*s);var y=Math.sinh(x),z=Math.sin(v),A=Math.cos(v),B=z/Math.sqrt(y*y+A*A),C=B;do{var D=Math.sinh(k*Math.atanh(k*C/Math.sqrt(1+C*C))),E=C*Math.sqrt(1+D*D)-D*Math.sqrt(1+C*C),F=(B-E)/Math.sqrt(1+E*E)*(1+(1-k*k)*C*C)/((1-k*k)*Math.sqrt(1+C*C));C+=F}while(Math.abs(F)>1e-12);var G=C,H=Math.atan(G),I=Math.atan2(y,A),J=1;for(w=1;w<=6;w++)J-=2*w*u[w]*Math.cos(2*w*t)*Math.cosh(2*w*s);var K=0;for(w=1;w<=6;w++)K+=2*w*u[w]*Math.sin(2*w*t)*Math.sinh(2*w*s);var L=Y((d-1)*6-180+3);I+=L;var M=X(H),N=X(I);return[N,M]}function lF(a,b,c){var d=b[0]-a[0],e=b[1]-a[1],f=c[0]-b[0],g=c[1]-b[1];return Math.sign(d*g-f*e)}function lG(a,b){var d=a.geometry.coordinates.map(function(a){return a[0]}),e=a.geometry.coordinates.map(function(a){return a[1]}),f=b.geometry.coordinates.map(function(a){return a[0]}),g=b.geometry.coordinates.map(function(a){return a[1]});return Math.max(null,d)===Math.max(null,f)&&Math.max(null,e)===Math.max(null,g)&&Math.min(null,d)===Math.min(null,f)&&Math.min(null,e)===Math.min(null,g)}function lH(a,b){return b.geometry.coordinates[0].every(function(b){return cL(G(b),a)})}function lI(a,b){return a[0]===b[0]&&a[1]===b[1]}var lJ=function b(a){this.id=b.buildId(a);this.coordinates=a;this.innerEdges=[];this.outerEdges=[];this.outerEdgesSorted=!1};lJ.buildId=function b(a){return a.join(',')};lJ.prototype.removeInnerEdge=function b(a){this.innerEdges=this.innerEdges.filter(function(b){return b.from.id!==a.from.id})};lJ.prototype.removeOuterEdge=function b(a){this.outerEdges=this.outerEdges.filter(function(b){return b.to.id!==a.to.id})};lJ.prototype.addOuterEdge=function b(a){this.outerEdges.push(a);this.outerEdgesSorted=!1};lJ.prototype.sortOuterEdges=function c(){var d=this;this.outerEdgesSorted||(this.outerEdges.sort(function(a,b){var c=a.to,e=b.to;if(c.coordinates[0]-d.coordinates[0]>=0&&e.coordinates[0]-d.coordinates[0]<0){return 1}if(c.coordinates[0]-d.coordinates[0]<0&&e.coordinates[0]-d.coordinates[0]>=0){return-1}if(c.coordinates[0]-d.coordinates[0]===0&&e.coordinates[0]-d.coordinates[0]===0){if(c.coordinates[1]-d.coordinates[1]>=0||e.coordinates[1]-d.coordinates[1]>=0){return c.coordinates[1]-e.coordinates[1]}return e.coordinates[1]-c.coordinates[1]}var f=lF(d.coordinates,c.coordinates,e.coordinates);if(f<0){return 1}if(f>0){return-1}var g=Math.pow(c.coordinates[0]-d.coordinates[0],2)+Math.pow(c.coordinates[1]-d.coordinates[1],2),h=Math.pow(e.coordinates[0]-d.coordinates[0],2)+Math.pow(e.coordinates[1]-d.coordinates[1],2);return g-h}),this.outerEdgesSorted=!0)};lJ.prototype.getOuterEdges=function a(){this.sortOuterEdges();return this.outerEdges};lJ.prototype.getOuterEdge=function b(a){this.sortOuterEdges();return this.outerEdges[a]};lJ.prototype.addInnerEdge=function b(a){this.innerEdges.push(a)};var lK=function c(a,b){this.from=a;this.to=b;this.next=undefined;this.label=undefined;this.symetric=undefined;this.ring=undefined;this.from.addOuterEdge(this);this.to.addInnerEdge(this)};lK.prototype.getSymetric=function a(){this.symetric||(this.symetric=new lK(this.to,this.from),this.symetric.symetric=this);return this.symetric};lK.prototype.deleteEdge=function a(){this.from.removeOuterEdge(this);this.to.removeInnerEdge(this)};lK.prototype.isEqual=function b(a){return this.from.id===a.from.id&&this.to.id===a.to.id};lK.prototype.toString=function a(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"};lK.prototype.toLineString=function a(){return K([this.from.coordinates,this.to.coordinates])};lK.prototype.compareTo=function b(a){return lF(a.from.coordinates,a.to.coordinates,this.to.coordinates)};var lL=function a(){this.edges=[];this.polygon=undefined;this.envelope=undefined},lM={length:{configurable:!0}};lL.prototype.push=function b(a){this[this.edges.length]=a;this.edges.push(a);this.polygon=this.envelope=undefined};lL.prototype.get=function b(a){return this.edges[a]};lM.length.get=function(){return this.edges.length};lL.prototype.forEach=function b(a){this.edges.forEach(a)};lL.prototype.map=function b(a){return this.edges.map(a)};lL.prototype.some=function b(a){return this.edges.some(a)};lL.prototype.isValid=function a(){return !0};lL.prototype.isHole=function a(){var b=this,c=this.edges.reduce(function(a,c,d){c.from.coordinates[1]>b.edges[a].from.coordinates[1]&&(a=d);return a},0),d=(c===0?this.length:c)-1,e=(c+1)%this.length,f=lF(this.edges[d].from.coordinates,this.edges[c].from.coordinates,this.edges[e].from.coordinates);if(f===0){return this.edges[d].from.coordinates[0]>this.edges[e].from.coordinates[0]}return f>0};lL.prototype.toMultiPoint=function a(){return P(this.edges.map(function(a){return a.from.coordinates}))};lL.prototype.toPolygon=function a(){if(this.polygon){return this.polygon}var b=this.edges.map(function(a){return a.from.coordinates});b.push(this.edges[0].from.coordinates);return this.polygon=I([b])};lL.prototype.getEnvelope=function a(){if(this.envelope){return this.envelope}return this.envelope=eK(this.toPolygon())};lL.findEdgeRingContaining=function c(a,b){var d=a.getEnvelope(),e,f;b.forEach(function(b){var c=b.getEnvelope();f&&(e=f.getEnvelope());if(lG(c,d)){return}if(lH(c,d)){var g=a.map(function(a){return a.from.coordinates}).find(function(a){return!b.some(function(b){return lI(a,b.from.coordinates)})});g&&b.inside(G(g))&&((!f||lH(e,c))&&(f=b))}});return f};lL.prototype.inside=function b(a){return cL(a,this.toPolygon())};Object.defineProperties(lL.prototype,lM);function lN(a){if(!a){throw new Error('No geojson passed')}if(a.type!=='FeatureCollection'&&a.type!=='GeometryCollection'&&a.type!=='MultiLineString'&&a.type!=='LineString'&&a.type!=='Feature'){throw new Error(("Invalid input type '"+a.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}}var lO=function a(){this.edges=[];this.nodes={}};lO.fromGeoJson=function b(a){lN(a);var c=new lO();az(a,function(a){aN(a,'LineString','Graph::fromGeoJson');ap(a,function(a,b){if(a){var d=c.getNode(a),e=c.getNode(b);c.addEdge(d,e)}return b})});return c};lO.prototype.getNode=function b(a){var c=lJ.buildId(a),d=this.nodes[c];d||(d=this.nodes[c]=new lJ(a));return d};lO.prototype.addEdge=function c(a,b){var d=new lK(a,b),e=d.getSymetric();this.edges.push(d);this.edges.push(e)};lO.prototype.deleteDangles=function a(){var b=this;Object.keys(this.nodes).map(function(a){return b.nodes[a]}).forEach(function(a){return b._removeIfDangle(a)})};lO.prototype._removeIfDangle=function b(a){var c=this;if(a.innerEdges.length<=1){var d=a.getOuterEdges().map(function(a){return a.to});this.removeNode(a);d.forEach(function(a){return c._removeIfDangle(a)})}};lO.prototype.deleteCutEdges=function a(){var b=this;this._computeNextCWEdges();this._findLabeledEdgeRings();this.edges.forEach(function(a){a.label===a.symetric.label&&(b.removeEdge(a.symetric),b.removeEdge(a))})};lO.prototype._computeNextCWEdges=function b(a){var c=this;typeof a==='undefined'?Object.keys(this.nodes).forEach(function(a){return c._computeNextCWEdges(c.nodes[a])}):a.getOuterEdges().forEach(function(b,c){a.getOuterEdge((c===0?a.getOuterEdges().length:c)-1).symetric.next=b})};lO.prototype._computeNextCCWEdges=function c(a,b){var d=a.getOuterEdges(),e,f;for(var g=d.length-1;g>=0;--g){var h=d[g],i=h.symetric,j=void 0,k=void 0;h.label===b&&(j=h);i.label===b&&(k=i);if(!j||!k){continue}k&&(f=k);j&&(f&&(f.next=j,f=undefined),e||(e=j))}f&&(f.next=e)};lO.prototype._findLabeledEdgeRings=function a(){var b=[],c=0;this.edges.forEach(function(a){if(a.label>=0){return}b.push(a);var d=a;do{d.label=c,d=d.next}while(!a.isEqual(d));c++});return b};lO.prototype.getEdgeRings=function a(){var b=this;this._computeNextCWEdges();this.edges.forEach(function(a){a.label=undefined});this._findLabeledEdgeRings().forEach(function(a){b._findIntersectionNodes(a).forEach(function(c){b._computeNextCCWEdges(c,a.label)})});var c=[];this.edges.forEach(function(a){if(a.ring){return}c.push(b._findEdgeRing(a))});return c};lO.prototype._findIntersectionNodes=function b(a){var c=[],d=a,f=function(){var b=0;d.from.getOuterEdges().forEach(function(c){c.label===a.label&&++b});b>1&&c.push(d.from);d=d.next};do{f()}while(!a.isEqual(d));return c};lO.prototype._findEdgeRing=function b(a){var c=a,d=new lL();do{d.push(c),c.ring=d,c=c.next}while(!a.isEqual(c));return d};lO.prototype.removeNode=function b(a){var c=this;a.getOuterEdges().forEach(function(a){return c.removeEdge(a)});a.innerEdges.forEach(function(a){return c.removeEdge(a)});delete this.nodes[a.id]};lO.prototype.removeEdge=function b(a){this.edges=this.edges.filter(function(b){return!b.isEqual(a)});a.deleteEdge()};function lP(a){var b=lO.fromGeoJson(a);b.deleteDangles();b.deleteCutEdges();var c=[],d=[];b.getEdgeRings().filter(function(a){return a.isValid()}).forEach(function(a){a.isHole()?c.push(a):d.push(a)});c.forEach(function(a){lL.findEdgeRingContaining(a,d)&&d.push(a)});return N(d.map(function(a){return a.toPolygon()}))}function lQ(a,b){let c=!0;az(a,a=>{az(b,b=>{if(c===!1){return !1}c=lR(a.geometry,b.geometry)})});return c}function lR(a,b){switch(a.type){case 'Point':switch(b.type){case 'Point':return!lX(a.coordinates,b.coordinates);case 'LineString':return!lS(b,a);case 'Polygon':return!cL(a,b)};break;case 'LineString':switch(b.type){case 'Point':return!lS(a,b);case 'LineString':return!lT(a,b);case 'Polygon':return!lU(b,a)};break;case 'Polygon':switch(b.type){case 'Point':return!cL(b,a);case 'LineString':return!lU(a,b);case 'Polygon':return!lV(b,a)}};return !1}function lS(a,b){for(let c=0;c<a.coordinates.length-1;c++){if(lW(a.coordinates[c],a.coordinates[c+1],b.coordinates)){return !0}}return !1}function lT(a,b){let c=hb(a,b);if(c.features.length>0){return !0}return !1}function lU(a,b){for(const c of b.coordinates){if(cL(c,a)){return !0}}let c=hb(b,iG(a));if(c.features.length>0){return !0}return !1}function lV(a,b){for(const c of a.coordinates[0]){if(cL(c,b)){return !0}}for(const c of b.coordinates[0]){if(cL(c,a)){return !0}}let c=hb(iG(a),iG(b));if(c.features.length>0){return !0}return !1}function lW(a,b,c){let d=c[0]-a[0],e=c[1]-a[1],f=b[0]-a[0],g=b[1]-a[1],h=d*g-e*f;if(h!==0){return !1}if(Math.abs(f)>=Math.abs(g)){if(f>0){return a[0]<=c[0]&&c[0]<=b[0]}else{return b[0]<=c[0]&&c[0]<=a[0]}}else if(g>0){return a[1]<=c[1]&&c[1]<=b[1]}else{return b[1]<=c[1]&&c[1]<=a[1]}}function lX(a,b){return a[0]===b[0]&&a[1]===b[1]}function lY(a,b){let c=aP(a),d=aP(b),e=c.type,f=d.type,g=c.coordinates,h=d.coordinates;switch(e){case "Point":switch(f){case "Point":return mg(g,h);default:throw new Error("feature2 "+f+" geometry not supported")};case "MultiPoint":switch(f){case "Point":return lZ(c,d);case "MultiPoint":return l_(c,d);default:throw new Error("feature2 "+f+" geometry not supported")};case "LineString":switch(f){case "Point":return hL(d,c,{ignoreEndVertices:!0});case "LineString":return mb(c,d);case "MultiPoint":return l$(c,d);default:throw new Error("feature2 "+f+" geometry not supported")};case "Polygon":switch(f){case "Point":return cL(d,c,{ignoreBoundary:!0});case "LineString":return md(c,d);case "Polygon":return me(c,d);case "MultiPoint":return ma(c,d);default:throw new Error("feature2 "+f+" geometry not supported")};default:throw new Error("feature1 "+e+" geometry not supported")}}function lZ(a,b){let c,d=!1;for(c=0;c<a.coordinates.length;c++){if(mg(a.coordinates[c],b.coordinates)){d=!0;break}}return d}function l_(a,b){for(const c of b.coordinates){let d=!1;for(const b of a.coordinates){if(mg(c,b)){d=!0;break}}if(!d){return !1}}return !0}function l$(a,b){let c=!1;for(const d of b.coordinates){hL(d,a,{ignoreEndVertices:!0})&&(c=!0);if(!hL(d,a)){return !1}}if(c){return !0}return !1}function ma(a,b){for(const c of b.coordinates){if(!cL(c,a,{ignoreBoundary:!0})){return !1}}return !0}function mb(a,b){let c=!1;for(const d of b.coordinates){hL({type:'Point',coordinates:d},a,{ignoreEndVertices:!0})&&(c=!0);if(!hL({type:'Point',coordinates:d},a,{ignoreEndVertices:!1})){return !1}}return c}function md(a,b){let c=0,d=!1,e=!1,f=aI(a),g=aI(b);if(!mf(f,g)){return !1}for(c;c<b.coordinates.length;c++){if(!cL({type:'Point',coordinates:b.coordinates[c]},a,{ignoreBoundary:!1})){e=!0;break}if(!d){cL({type:'Point',coordinates:b.coordinates[c]},a,{ignoreBoundary:!0})&&(d=!0);if(!d&&c<b.coordinates.length-1){let e=mh(b.coordinates[c],b.coordinates[c+1]);cL({type:"Point",coordinates:e},a,{ignoreBoundary:!0})&&(d=!0)}}}if(e)return !1;return d}function me(a,b){if(a.type==="Feature"&&a.geometry===null){return !1}if(b.type==="Feature"&&b.geometry===null){return !1}let c=aI(a),d=aI(b);if(!mf(c,d)){return !1}let e=aP(b).coordinates;for(const b of e){for(const c of b){if(!cL(c,a)){return !1}}}return !0}function mf(a,b){if(a[0]>b[0]){return !1}if(a[2]<b[2]){return !1}if(a[1]>b[1]){return !1}if(a[3]<b[3]){return !1}return !0}function mg(a,b){return a[0]===b[0]&&a[1]===b[1]}function mh(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2]}function mi(a,b){var c=aP(a),d=aP(b),e=c.type,f=d.type;switch(e){case 'MultiPoint':switch(f){case 'LineString':return mj(c,d);case 'Polygon':return mm(c,d);default:throw new Error('feature2 '+f+' geometry not supported')};case 'LineString':switch(f){case 'MultiPoint':return mj(d,c);case 'LineString':return mk(c,d);case 'Polygon':return ml(c,d);default:throw new Error('feature2 '+f+' geometry not supported')};case 'Polygon':switch(f){case 'MultiPoint':return mm(d,c);case 'LineString':return ml(d,c);default:throw new Error('feature2 '+f+' geometry not supported')};default:throw new Error('feature1 '+e+' geometry not supported')}}function mj(a,b){var c=!1,d=!1,e=a.coordinates.length,f=0;while(f<e&&!c&&!d){for(var g=0;g<b.coordinates.length-1;g++){var h=!0;(g===0||g===b.coordinates.length-2)&&(h=!1);mn(b.coordinates[g],b.coordinates[g+1],a.coordinates[f],h)?(c=!0):(d=!0)}f++}return c&&d}function mk(a,b){let c=hb(a,b),d=[a.coordinates[0],a.coordinates[a.coordinates.length-1],b.coordinates[0],b.coordinates[b.coordinates.length-1]],e=c.features.some(function(a){return!d.some(mo.bind(this,a.geometry.coordinates))});return e}function ml(a,b){let c=iH(b),d=hb(a,c);if(d.features.length>0){return !0}return !1}function mm(a,b){var c=!1,d=!1,e=a.coordinates[0].length,f=0;while(f<e&&c&&d)cL(G(a.coordinates[0][f]),b)?(c=!0):(d=!0),f++;return d&&d}function mn(a,b,c,d){var e=c[0]-a[0],f=c[1]-a[1],g=b[0]-a[0],h=b[1]-a[1],i=e*h-f*g;if(i!==0){return !1}if(d){if(Math.abs(g)>=Math.abs(h)){return g>0?a[0]<=c[0]&&c[0]<=b[0]:b[0]<=c[0]&&c[0]<=a[0]}return h>0?a[1]<=c[1]&&c[1]<=b[1]:b[1]<=c[1]&&c[1]<=a[1]}else{if(Math.abs(g)>=Math.abs(h)){return g>0?a[0]<c[0]&&c[0]<b[0]:b[0]<c[0]&&c[0]<a[0]}return h>0?a[1]<c[1]&&c[1]<b[1]:b[1]<c[1]&&c[1]<a[1]}}function mo(a,b){return a[0]===b[0]&&a[1]===b[1]}var mp=function(a){this.precision=a&&a.precision?a.precision:17;this.direction=a&&a.direction?a.direction:!1;this.pseudoNode=a&&a.pseudoNode?a.pseudoNode:!1;this.objectComparator=a&&a.objectComparator?a.objectComparator:ms};mp.prototype.compare=function(a,b){if(a.type!==b.type||!mr(a,b))return !1;switch(a.type){case 'Point':return this.compareCoord(a.coordinates,b.coordinates);break;case 'LineString':return this.compareLine(a.coordinates,b.coordinates,0,!1);break;case 'Polygon':return this.comparePolygon(a,b);break;case 'GeometryCollection':return this.compareGeometryCollection(a,b);case 'Feature':return this.compareFeature(a,b);case 'FeatureCollection':return this.compareFeatureCollection(a,b);default:if(a.type.indexOf('Multi')===0){var c=this,d=mq(a),e=mq(b);return d.every(function(a){return this.some(function(b){return c.compare(a,b)})},e)}};return !1};function mq(a){return a.coordinates.map(function(b){return{type:a.type.replace('Multi',''),coordinates:b}})}function mr(a,b){return a.hasOwnProperty('coordinates')?a.coordinates.length===b.coordinates.length:a.length===b.length}mp.prototype.compareCoord=function(a,b){if(a.length!==b.length){return !1}for(var c=0;c<a.length;c++){if(a[c].toFixed(this.precision)!==b[c].toFixed(this.precision)){return !1}}return !0};mp.prototype.compareLine=function(a,b,c,d){if(!mr(a,b))return !1;var e=this.pseudoNode?a:this.removePseudo(a),f=this.pseudoNode?b:this.removePseudo(b);if(d&&!this.compareCoord(e[0],f[0])){f=this.fixStartIndex(f,e);if(!f)return}var g=this.compareCoord(e[c],f[c]);if(this.direction||g){return this.comparePath(e,f)}else{if(this.compareCoord(e[c],f[f.length-(1+c)])){return this.comparePath(e.slice().reverse(),f)}return !1}};mp.prototype.fixStartIndex=function(a,b){var c,d=-1;for(var e=0;e<a.length;e++){if(this.compareCoord(a[e],b[0])){d=e;break}}d>=0&&(c=[].concat(a.slice(d,a.length),a.slice(1,d+1)));return c};mp.prototype.comparePath=function(a,b){var d=this;return a.every(function(a,b){return d.compareCoord(a,this[b])},b)};mp.prototype.comparePolygon=function(a,b){if(this.compareLine(a.coordinates[0],b.coordinates[0],1,!0)){var c=a.coordinates.slice(1,a.coordinates.length),d=b.coordinates.slice(1,b.coordinates.length),e=this;return c.every(function(a){return this.some(function(b){return e.compareLine(a,b,1,!0)})},d)}else{return !1}};mp.prototype.compareGeometryCollection=function(a,b){if(!mr(a.geometries,b.geometries)||!this.compareBBox(a,b)){return !1}for(var c=0;c<a.geometries.length;c++){if(!this.compare(a.geometries[c],b.geometries[c])){return !1}}return !0};mp.prototype.compareFeature=function(a,b){if(a.id!==b.id||!this.objectComparator(a.properties,b.properties)||!this.compareBBox(a,b)){return !1}return this.compare(a.geometry,b.geometry)};mp.prototype.compareFeatureCollection=function(a,b){if(!mr(a.features,b.features)||!this.compareBBox(a,b)){return !1}for(var c=0;c<a.features.length;c++){if(!this.compare(a.features[c],b.features[c])){return !1}}return !0};mp.prototype.compareBBox=function(a,b){if(!a.bbox&&!b.bbox||a.bbox&&b.bbox&&this.compareCoord(a.bbox,b.bbox)){return !0}return !1};mp.prototype.removePseudo=function(a){return a};function ms(a,b){return jb(a,b,{strict:!0})}var mt=mp;let mu=mt;function mv(a,b){let c=aP(a),e=c.type;if(e==='Point')throw new Error('Point geometry not supported');let g=new mu({precision:6});if(g.compare(a,b))return !1;let h=0;switch(e){case 'MultiPoint':const j=au(a);const i=au(b);j.forEach(a=>{i.forEach(b=>{a[0]===b[0]&&a[1]===b[1]&&h++})});break;case 'LineString':;case 'MultiLineString':aB(a,a=>{aB(b,b=>{jd(a,b).features.length&&h++})});break;case 'Polygon':;case 'MultiPolygon':aB(a,a=>{aB(b,b=>{hb(a,b).features.length&&h++})});break};return h>0}let mw=mt;function mx(a,b){let c=aP(a).type,d=aP(b).type;if(c!==d)return !1;let e=new mw({precision:6});return e.compare(el(a),el(b))}var my=bi(function(c){function d(a,b,c,d){this.dataset=[];this.epsilon=1;this.minPts=2;this.distance=this._euclideanDistance;this.clusters=[];this.noise=[];this._visited=[];this._assigned=[];this._datasetLength=0;this._init(a,b,c,d)}d.prototype.run=function(a,b,c,d){this._init(a,b,c,d);for(var e=0;e<this._datasetLength;e++){if(this._visited[e]!==1){this._visited[e]=1;var f=this._regionQuery(e);if(f.length<this.minPts)this.noise.push(e);else{var g=this.clusters.length;this.clusters.push([]);this._addToCluster(e,g);this._expandCluster(g,f)}}}return this.clusters};d.prototype._init=function(a,b,c,d){if(a){if(!(a instanceof Array)){throw Error('Dataset must be of type array, '+typeof a+' given')}this.dataset=a;this.clusters=[];this.noise=[];this._datasetLength=a.length;this._visited=new Array(this._datasetLength);this._assigned=new Array(this._datasetLength)}b&&(this.epsilon=b);c&&(this.minPts=c);d&&(this.distance=d)};d.prototype._expandCluster=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(this._visited[d]!==1){this._visited[d]=1;var e=this._regionQuery(d);e.length>=this.minPts&&(b=this._mergeArrays(b,e))}this._assigned[d]!==1&&this._addToCluster(d,a)}};d.prototype._addToCluster=function(a,b){this.clusters[b].push(a);this._assigned[a]=1};d.prototype._regionQuery=function(a){var b=[];for(var c=0;c<this._datasetLength;c++){var d=this.distance(this.dataset[a],this.dataset[c]);d<this.epsilon&&b.push(c)}return b};d.prototype._mergeArrays=function(a,b){var c=b.length;for(var d=0;d<c;d++){var e=b[d];a.indexOf(e)<0&&a.push(e)}return a};d.prototype._euclideanDistance=function(a,b){var c=0,d=Math.min(a.length,b.length);while(d--)c+=(a[d]-b[d])*(a[d]-b[d]);return Math.sqrt(c)};c.exports&&(c.exports=d)}),mz=Object.freeze({default:my,__moduleExports:my}),mA=bi(function(a){function b(a,b,c){this.k=3;this.dataset=[];this.assignments=[];this.centroids=[];this.init(a,b,c)}b.prototype.init=function(a,b,c){this.assignments=[];this.centroids=[];typeof a!=='undefined'&&(this.dataset=a);typeof b!=='undefined'&&(this.k=b);typeof c!=='undefined'&&(this.distance=c)};b.prototype.run=function(a,b){this.init(a,b);var c=this.dataset.length;for(var d=0;d<this.k;d++)this.centroids[d]=this.randomCentroid();var e=!0;while(e){e=this.assign();for(var f=0;f<this.k;f++){var g=new Array(k),h=0;for(var i=0;i<k;i++)g[i]=0;for(var j=0;j<c;j++){var k=this.dataset[j].length;if(f===this.assignments[j]){for(i=0;i<k;i++)g[i]+=this.dataset[j][i];h++}}if(h>0){for(i=0;i<k;i++)g[i]/=h;this.centroids[f]=g}else this.centroids[f]=this.randomCentroid(),e=!0}}return this.getClusters()};b.prototype.randomCentroid=function(){var a=this.dataset.length-1,b,c;do{c=Math.round(Math.random()*a),b=this.dataset[c]}while(this.centroids.indexOf(b)>=0);return b};b.prototype.assign=function(){var a=!1,b=this.dataset.length,c;for(var d=0;d<b;d++)c=this.argmin(this.dataset[d],this.centroids,this.distance),c!=this.assignments[d]&&(this.assignments[d]=c,a=!0);return a};b.prototype.getClusters=function(){var a=new Array(this.k),b;for(var c=0;c<this.assignments.length;c++)b=this.assignments[c],typeof a[b]==='undefined'&&(a[b]=[]),a[b].push(c);return a};b.prototype.argmin=function(a,b,c){var d=Number.MAX_VALUE,e=0,f=b.length,g;for(var h=0;h<f;h++)g=c(a,b[h]),g<d&&(d=g,e=h);return e};b.prototype.distance=function(a,b){var c=0,d=Math.min(a.length,b.length);while(d--){var e=a[d]-b[d];c+=e*e}return Math.sqrt(c)};a.exports&&(a.exports=b)}),mB=Object.freeze({default:mA,__moduleExports:mA}),mC=bi(function(a){function b(a,b,c){this._queue=[];this._priorities=[];this._sorting='desc';this._init(a,b,c)}b.prototype.insert=function(a,b){var c=this._queue.length,d=c;while(d--){var e=this._priorities[d];this._sorting==='desc'?(b>e&&(c=d)):b<e&&(c=d)}this._insertAt(a,b,c)};b.prototype.remove=function(a){var b=this._queue.length;while(b--){var c=this._queue[b];if(a===c){this._queue.splice(b,1);this._priorities.splice(b,1);break}}};b.prototype.forEach=function(a){this._queue.forEach(a)};b.prototype.getElements=function(){return this._queue};b.prototype.getElementPriority=function(a){return this._priorities[a]};b.prototype.getPriorities=function(){return this._priorities};b.prototype.getElementsWithPriorities=function(){var a=[];for(var b=0,c=this._queue.length;b<c;b++)a.push([this._queue[b],this._priorities[b]]);return a};b.prototype._init=function(a,b,c){if(a&&b){this._queue=[];this._priorities=[];if(a.length!==b.length){throw new Error('Arrays must have the same length')}for(var d=0;d<a.length;d++)this.insert(a[d],b[d])}c&&(this._sorting=c)};b.prototype._insertAt=function(a,b,c){this._queue.length===c?(this._queue.push(a),this._priorities.push(b)):(this._queue.splice(c,0,a),this._priorities.splice(c,0,b))};a.exports&&(a.exports=b)}),mD=Object.freeze({default:mC,__moduleExports:mC}),mE=mD&&mC||mD,mF=bi(function(a){if(a.exports)var b=mE;function c(a,b,c,d){this.epsilon=1;this.minPts=1;this.distance=this._euclideanDistance;this._reachability=[];this._processed=[];this._coreDistance=0;this._orderedList=[];this._init(a,b,c,d)}c.prototype.run=function(a,c,d,e){this._init(a,c,d,e);for(var f=0,g=this.dataset.length;f<g;f++){if(this._processed[f]!==1){this._processed[f]=1;this.clusters.push([f]);var h=this.clusters.length-1;this._orderedList.push(f);var i=new b(null,null,'asc'),j=this._regionQuery(f);this._distanceToCore(f)!==undefined&&(this._updateQueue(f,j,i),this._expandCluster(h,i))}}return this.clusters};c.prototype.getReachabilityPlot=function(){var a=[];for(var b=0,c=this._orderedList.length;b<c;b++){var d=this._orderedList[b],e=this._reachability[d];a.push([d,e])}return a};c.prototype._init=function(a,b,c,d){if(a){if(!(a instanceof Array)){throw Error('Dataset must be of type array, '+typeof a+' given')}this.dataset=a;this.clusters=[];this._reachability=new Array(this.dataset.length);this._processed=new Array(this.dataset.length);this._coreDistance=0;this._orderedList=[]}b&&(this.epsilon=b);c&&(this.minPts=c);d&&(this.distance=d)};c.prototype._updateQueue=function(a,b,c){var d=this;this._coreDistance=this._distanceToCore(a);b.forEach(function(b){if(d._processed[b]===undefined){var e=d.distance(d.dataset[a],d.dataset[b]),f=Math.max(d._coreDistance,e);d._reachability[b]===undefined?(d._reachability[b]=f,c.insert(b,f)):f<d._reachability[b]&&(d._reachability[b]=f,c.remove(b),c.insert(b,f))}})};c.prototype._expandCluster=function(a,b){var c=b.getElements();for(var d=0,e=c.length;d<e;d++){var f=c[d];if(this._processed[f]===undefined){var g=this._regionQuery(f);this._processed[f]=1;this.clusters[a].push(f);this._orderedList.push(f);this._distanceToCore(f)!==undefined&&(this._updateQueue(f,g,b),this._expandCluster(a,b))}}};c.prototype._distanceToCore=function(a){var b=this.epsilon;for(var c=0;c<b;c++){var d=this._regionQuery(a,c);if(d.length>=this.minPts){return c}}};c.prototype._regionQuery=function(a,b){b=b||this.epsilon;var c=[];for(var d=0,e=this.dataset.length;d<e;d++)this.distance(this.dataset[a],this.dataset[d])<b&&c.push(d);return c};c.prototype._euclideanDistance=function(a,b){var c=0,d=Math.min(a.length,b.length);while(d--)c+=(a[d]-b[d])*(a[d]-b[d]);return Math.sqrt(c)};a.exports&&(a.exports=c)}),mG=Object.freeze({default:mF,__moduleExports:mF}),mH=mz&&my||mz,mI=mB&&mA||mB,mJ=mG&&mF||mG,mK=bi(function(a){a.exports&&(a.exports={DBSCAN:mH,KMEANS:mI,OPTICS:mJ,PriorityQueue:mE})});function mP(a,b,c){c=af(c);var d=c.minPoints,e=c.units;aO(a,'Point','Input must contain Points');if(b===null||b===undefined)throw new Error('maxDistance is required');if(!(Math.sign(b)>0))throw new Error('Invalid maxDistance');if(!(d===undefined||d===null||Math.sign(d)>0))throw new Error('Invalid minPoints');c.mutate||(a=ed(a,!0));d=d||3;var f=new mK.DBSCAN(),g=f.run(au(a),Z(b,e),d,cP),h=-1;g.forEach(function(b){h++;b.forEach(function(b){var c=a.features[b];c.properties||(c.properties={});c.properties.cluster=h;c.properties.dbscan='core'})});f.noise.forEach(function(b){var c=a.features[b];c.properties||(c.properties={});c.properties.cluster?(c.properties.dbscan='edge'):(c.properties.dbscan='noise')});return a}var mQ={eudist:function d(a,b,c){var e=a.length,f=0;for(var g=0;g<e;g++){var h=(a[g]||0)-(b[g]||0);f+=h*h}return c?Math.sqrt(f):f},mandist:function d(a,b,c){var e=a.length,f=0;for(var g=0;g<e;g++)f+=Math.abs((a[g]||0)-(b[g]||0));return c?Math.sqrt(f):f},dist:function d(a,b,c){var e=Math.abs(a-b);return c?e:e*e}},mR=mQ.eudist,mS=mQ.mandist,mT=mQ.dist,mU=Object.freeze({default:mQ,__moduleExports:mQ,eudist:mR,mandist:mS,dist:mT}),mV=mU&&mQ||mU,mW=mV.eudist,mX=mV.dist,mY={kmrand:function c(a,b){var d={},e=[],f=b<<2,g=a.length,h=a[0].length>0;while(e.length<b&&f-->0){var i=a[Math.floor(Math.random()*g)],j=h?i.join("_"):""+i;d[j]||(d[j]=!0,e.push(i))}if(e.length<b)throw new Error("Error initializating clusters");else return e},kmpp:function e(c,d){var f=c[0].length?mW:mX,g=[],h=c.length,j=c[Math.floor(Math.random()*h)];g.push(j);while(g.length<d){var l=[],m=g.length,n=0,o=[];for(var p=0;p<h;p++){var q=Infinity;for(var r=0;r<m;r++){var s=f(c[p],g[r]);s<=q&&(q=s)}l[p]=q}for(var t=0;t<h;t++)n+=l[t];for(var u=0;u<h;u++)o[u]={i:u,v:c[u],pr:l[u]/n,cs:0};o.sort(function(a,b){return a.pr-b.pr});o[0].cs=o[0].pr;for(var v=1;v<h;v++)o[v].cs=o[v-1].cs+o[v].pr;var w=Math.random(),x=0;while(x<h-1&&o[x++].cs<w);g.push(o[x-1].v)}return g}},mZ=mY.kmrand,m_=mY.kmpp,m$=Object.freeze({default:mY,__moduleExports:mY,kmrand:mZ,kmpp:m_}),na=m$&&mY||m$,nb=mV.eudist,ne=na.kmrand,nf=na.kmpp,ng=10000;function nh(a,b,c){c=c||[];for(var d=0;d<a;d++)c[d]=b;return c}function ni(a,b,c,d){var e=[],f=[],g=[],h=[],i=!1,j=d||ng,k=a.length,l=a[0].length,m=l>0,n=[];if(!c){var o={};while(e.length<b){var p=Math.floor(Math.random()*k);o[p]||(o[p]=!0,e.push(a[p]))}}else c=="kmrand"?(e=ne(a,b)):c=="kmpp"?(e=nf(a,b)):(e=c);do{nh(b,0,n);for(var q=0;q<k;q++){var r=Infinity,s=0;for(var t=0;t<b;t++){h=m?nb(a[q],e[t]):Math.abs(a[q]-e[t]);h<=r&&(r=h,s=t)}g[q]=s;n[s]++}var u=[],f=[];for(var v=0;v<b;v++)u[v]=m?nh(l,0,u[v]):0,f[v]=e[v];if(m){for(var w=0;w<b;w++)e[w]=[];for(var x=0;x<k;x++){var y=g[x],z=u[y],A=a[x];for(var B=0;B<l;B++)z[B]+=A[B]}i=!0;for(var C=0;C<b;C++){var D=e[C],E=u[C],F=f[C],G=n[C];for(var H=0;H<l;H++)D[H]=E[H]/G||0;if(i){for(var I=0;I<l;I++){if(F[I]!=D[I]){i=!1;break}}}}}else{for(var J=0;J<k;J++){var K=g[J];u[K]+=a[J]}for(var L=0;L<b;L++)e[L]=u[L]/n[L]||0;i=!0;for(var M=0;M<b;M++){if(f[M]!=e[M]){i=!1;break}}}i=i||--j<=0}while(!i);return{it:ng-j,k:b,idxs:g,centroids:e}}var nj=ni;function nk(a,b){b=b||{};if(typeof b!=='object')throw new Error('options is invalid');var c=b.numberOfClusters,d=b.mutate;aO(a,'Point','Input must contain Points');var e=a.features.length;c=c||Math.round(Math.sqrt(e/2));c>e&&(c=e);(d===!1||d===undefined)&&(a=ed(a,!0));var f=au(a),g=f.slice(0,c),h=nj(f,c,g),i={};h.centroids.forEach(function(a,b){i[b]=a});as(a,function(a,b){var c=h.idxs[b];a.properties.cluster=c;a.properties.centroid=i[c]});return a}function nl(a,b){if(!a)throw new Error('line1 is required');if(!b)throw new Error('line2 is required');var c=nn(a,'line1');if(c!=='LineString')throw new Error('line1 must be a LineString');var d=nn(b,'line2');if(d!=='LineString')throw new Error('line2 must be a LineString');var e=fF(el(a)).features,f=fF(el(b)).features;for(var g=0;g<e.length;g++){var h=e[g].geometry.coordinates;if(!f[g])break;var i=f[g].geometry.coordinates;if(!nm(h,i))return !1}return !0}function nm(a,b){var c=ge(hD(a[0],a[1])),d=ge(hD(b[0],b[1]));return c===d}function nn(a,b){if(a.geometry&&a.geometry.type)return a.geometry.type;if(a.type)return a.type;throw new Error('Invalid GeoJSON object for '+b)}function no(a){var b=a,c=[];while(b.parent)c.unshift(b),b=b.parent;return c}function np(){return new nt(function(a){return a.f})}var nq={search:function(a,b,c,d){a.cleanDirty();d=d||{};var e=d.heuristic||nq.heuristics.manhattan,f=d.closest||!1,g=np(),h=b;b.h=e(b,c);g.push(b);while(g.size()>0){var i=g.pop();if(i===c){return no(i)}i.closed=!0;var j=a.neighbors(i);for(var k=0,l=j.length;k<l;++k){var m=j[k];if(m.closed||m.isWall()){continue}var n=i.g+m.getCost(i),o=m.visited;(!o||n<m.g)&&(m.visited=!0,m.parent=i,m.h=m.h||e(m,c),m.g=n,m.f=m.g+m.h,a.markDirty(m),f&&((m.h<h.h||m.h===h.h&&m.g<h.g)&&(h=m)),o?g.rescoreElement(m):g.push(m))}}if(f){return no(h)}return[]},heuristics:{manhattan:function(a,b){var c=Math.abs(b.x-a.x),d=Math.abs(b.y-a.y);return c+d},diagonal:function(a,b){var c=1,d=Math.sqrt(2),e=Math.abs(b.x-a.x),f=Math.abs(b.y-a.y);return c*(e+f)+(d-2*c)*Math.min(e,f)}},cleanNode:function(a){a.f=0;a.g=0;a.h=0;a.visited=!1;a.closed=!1;a.parent=null}};function nr(a,b){b=b||{};this.nodes=[];this.diagonal=!!b.diagonal;this.grid=[];for(var c=0;c<a.length;c++){this.grid[c]=[];for(var d=0,e=a[c];d<e.length;d++){var f=new ns(c,d,e[d]);this.grid[c][d]=f;this.nodes.push(f)}}this.init()}nr.prototype.init=function(){this.dirtyNodes=[];for(var a=0;a<this.nodes.length;a++)nq.cleanNode(this.nodes[a])};nr.prototype.cleanDirty=function(){for(var a=0;a<this.dirtyNodes.length;a++)nq.cleanNode(this.dirtyNodes[a]);this.dirtyNodes=[]};nr.prototype.markDirty=function(a){this.dirtyNodes.push(a)};nr.prototype.neighbors=function(a){var b=[],c=a.x,d=a.y,e=this.grid;e[c-1]&&e[c-1][d]&&b.push(e[c-1][d]);e[c+1]&&e[c+1][d]&&b.push(e[c+1][d]);e[c]&&e[c][d-1]&&b.push(e[c][d-1]);e[c]&&e[c][d+1]&&b.push(e[c][d+1]);this.diagonal&&(e[c-1]&&e[c-1][d-1]&&b.push(e[c-1][d-1]),e[c+1]&&e[c+1][d-1]&&b.push(e[c+1][d-1]),e[c-1]&&e[c-1][d+1]&&b.push(e[c-1][d+1]),e[c+1]&&e[c+1][d+1]&&b.push(e[c+1][d+1]));return b};nr.prototype.toString=function(){var a=[],b=this.grid,c,d,e,f;for(var g=0,h=b.length;g<h;g++){c=[];d=b[g];for(e=0, f=d.length;e<f;e++)c.push(d[e].weight);a.push(c.join(' '))}return a.join('\n')};function ns(a,b,c){this.x=a;this.y=b;this.weight=c}ns.prototype.toString=function(){return'['+this.x+' '+this.y+']'};ns.prototype.getCost=function(a){if(a&&a.x!==this.x&&a.y!==this.y){return this.weight*1.41421}return this.weight};ns.prototype.isWall=function(){return this.weight===0};function nt(a){this.content=[];this.scoreFunction=a}nt.prototype={push:function(a){this.content.push(a);this.sinkDown(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();this.content.length>0&&(this.content[0]=b,this.bubbleUp(0));return a},remove:function(a){var b=this.content.indexOf(a),c=this.content.pop();b!==this.content.length-1&&(this.content[b]=c,this.scoreFunction(c)<this.scoreFunction(a)?this.sinkDown(b):this.bubbleUp(b))},size:function(){return this.content.length},rescoreElement:function(a){this.sinkDown(this.content.indexOf(a))},sinkDown:function(a){var b=this.content[a];while(a>0){var c=(a+1>>1)-1,d=this.content[c];if(this.scoreFunction(b)<this.scoreFunction(d))this.content[c]=b,this.content[a]=d,a=c;else{break}}},bubbleUp:function(a){var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);while(!0){var e=a+1<<1,f=e-1,g=null,h;if(f<b){var i=this.content[f];h=this.scoreFunction(i);h<d&&(g=f)}if(e<b){var j=this.content[e],k=this.scoreFunction(j);k<(g===null?d:h)&&(g=e)}if(g!==null)this.content[a]=this.content[g],this.content[g]=c,a=g;else{break}}}};function nu(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.resolution,e=c.minDistance,f=c.obstacles||N([]);if(!a)throw new Error('start is required');if(!b)throw new Error('end is required');if(d&&!ab(d)||d<=0)throw new Error('options.resolution must be a number, greater than 0');if(e)throw new Error('options.minDistance is not yet implemented');var g=aJ(a),h=aJ(b);a=G(g);b=G(h);switch(aQ(f)){case 'FeatureCollection':if(f.features.length===0)return K([g,h]);break;case 'Polygon':f=N([E(aP(f))]);break;default:throw new Error('invalid obstacles')};var i=f;i.features.push(a);i.features.push(b);var j=aI(lk(eJ(aI(i)),1.15));if(!d){var k=cP([j[0],j[1]],[j[2],j[1]],c);d=k/100}i.features.pop();i.features.pop();var l=j[0],m=j[1],n=j[2],o=j[3],p=d/(cP([l,m],[n,m],c)),q=p*(n-l),r=d/(cP([l,m],[l,o],c)),s=r*(o-m),t=n-l,u=o-m,v=Math.floor(t/q),w=Math.floor(u/s),x=(t-v*q)/2,y=(u-w*s)/2,z=[],A=[],B=[],C=[],D=Infinity,F=Infinity,H=o-y,I=0;while(H>=m){var J=[],L=[],M=l+x,O=0;while(M<=n){var P=G([M,H]),Q=nv(P,f);J.push(Q?0:1);L.push(M+'|'+H);var R=cP(P,a);!Q&&R<D&&(D=R,B={x:O,y:I});var S=cP(P,b);!Q&&S<F&&(F=S,C={x:O,y:I});M+=q;O++}A.push(J);z.push(L);H-=s;I++}var T=new nr(A,{diagonal:!0}),U=T.grid[B.y][B.x],V=T.grid[C.y][C.x],W=nq.search(T,U,V),X=[g];W.forEach(function(a){var b=z[a.x][a.y].split('|');X.push([+b[0],+b[1]])});X.push(h);return el(K(X))}function nv(a,b){for(var c=0;c<b.features.length;c++){if(cL(a,b.features[c])){return !0}}return !1}function nw(a){return function(){return a}}function nx(a){return a[0]}function ny(a){return a[1]}function nz(){this._=null}function nA(a){a.U=a.C=a.L=a.R=a.P=a.N=null}nz.prototype={constructor:nz,insert:function(a,b){var c,d,e;if(a){b.P=a;b.N=a.N;a.N&&(a.N.P=b);a.N=b;if(a.R){a=a.R;while(a.L)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=nD(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;a=b;while(c&&c.C)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(nB(this,c),a=c,c=a.U),c.C=!1,d.C=!0,nC(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(nC(this,c),a=c,c=a.U),c.C=!1,d.C=!0,nB(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c,d=a.L,e=a.R,f,g;d?e?(f=nD(e)):(f=d):(f=e);b?(b.L===a?(b.L=f):(b.R=f)):(this._=f);d&&e?(g=f.C,f.C=a.C,f.L=d,d.U=f,f!==e?(b=f.U,f.U=a.U,a=f.R,b.L=a,f.R=e,e.U=f):(f.U=b,b=f,a=f.R)):(g=a.C,a=f);a&&(a.U=b);if(g)return;if(a&&a.C){a.C=!1;return}do{if(a===this._)break;if(a===b.L){c=b.R;c.C&&(c.C=!1,b.C=!0,nB(this,b),c=b.R);if(c.L&&c.L.C||c.R&&c.R.C){(!c.R||!c.R.C)&&(c.L.C=!1,c.C=!0,nC(this,c),c=b.R);c.C=b.C;b.C=c.R.C=!1;nB(this,b);a=this._;break}}else{c=b.L;c.C&&(c.C=!1,b.C=!0,nC(this,b),c=b.L);if(c.L&&c.L.C||c.R&&c.R.C){(!c.L||!c.L.C)&&(c.R.C=!1,c.C=!0,nB(this,c),c=b.L);c.C=b.C;b.C=c.L.C=!1;nC(this,b);a=this._;break}}c.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}};function nB(a,b){var c=b,d=b.R,e=c.U;e?(e.L===c?(e.L=d):(e.R=d)):(a._=d);d.U=e;c.U=d;c.R=d.L;c.R&&(c.R.U=c);d.L=c}function nC(a,b){var c=b,d=b.L,e=c.U;e?(e.L===c?(e.L=d):(e.R=d)):(a._=d);d.U=e;c.U=d;c.L=d.R;c.L&&(c.L.U=c);d.R=c}function nD(a){while(a.L)a=a.L;return a}function nE(a,b,c,d){var e=[null,null],f=og.push(e)-1;e.left=a;e.right=b;c&&nG(e,a,b,c);d&&nG(e,b,a,d);oe[a.index].halfedges.push(f);oe[b.index].halfedges.push(f);return e}function nF(a,b,c){var d=[b,c];d.left=a;return d}function nG(a,b,c,d){!a[0]&&!a[1]?(a[0]=d,a.left=b,a.right=c):a.left===c?(a[1]=d):(a[0]=d)}function nH(a,b,c,d,e){var f=a[0],g=a[1],h=f[0],i=f[1],j=g[0],k=g[1],l=0,m=1,n=j-h,o=k-i,p;p=b-h;if(!n&&p>0)return;p/=n;if(n<0){if(p<l)return;p<m&&(m=p)}else if(n>0){if(p>m)return;p>l&&(l=p)};p=d-h;if(!n&&p<0)return;p/=n;if(n<0){if(p>m)return;p>l&&(l=p)}else if(n>0){if(p<l)return;p<m&&(m=p)};p=c-i;if(!o&&p>0)return;p/=o;if(o<0){if(p<l)return;p<m&&(m=p)}else if(o>0){if(p>m)return;p>l&&(l=p)};p=e-i;if(!o&&p<0)return;p/=o;if(o<0){if(p>m)return;p>l&&(l=p)}else if(o>0){if(p<l)return;p<m&&(m=p)};if(!(l>0)&&!(m<1))return !0;l>0&&(a[0]=[h+l*n,i+l*o]);m<1&&(a[1]=[h+m*n,i+m*o]);return !0}function nI(a,b,c,d,e){var f=a[1];if(f)return !0;var g=a[0],h=a.left,i=a.right,j=h[0],k=h[1],l=i[0],m=i[1],n=(j+l)/2,o=(k+m)/2,p,q;if(m===k){if(n<b||n>=d)return;if(j>l){if(!g)g=[n,c];else if(g[1]>=e)return;f=[n,e]}else{if(!g)g=[n,e];else if(g[1]<c)return;f=[n,c]}}else{p=(j-l)/(m-k);q=o-p*n;if(p<-1||p>1){if(j>l){if(!g)g=[(c-q)/p,c];else if(g[1]>=e)return;f=[(e-q)/p,e]}else{if(!g)g=[(e-q)/p,e];else if(g[1]<c)return;f=[(c-q)/p,c]}}else{if(k<m){if(!g)g=[b,p*b+q];else if(g[0]>=d)return;f=[d,p*d+q]}else{if(!g)g=[d,p*d+q];else if(g[0]<b)return;f=[b,p*b+q]}}}a[0]=g;a[1]=f;return !0}function nJ(a,b,c,d){var e=og.length,f;while(e--)(!nI(f=og[e],a,b,c,d)||!nH(f,a,b,c,d)||!(Math.abs(f[0][0]-f[1][0])>ob||Math.abs(f[0][1]-f[1][1])>ob))&&delete og[e]}function nK(a){return oe[a.index]={site:a,halfedges:[]}}function nL(a,b){var c=a.site,d=b.left,e=b.right;c===e&&(e=d, d=c);if(e)return Math.atan2(e[1]-d[1],e[0]-d[0]);c===d?(d=b[1], e=b[0]):(d=b[0], e=b[1]);return Math.atan2(d[0]-e[0],e[1]-d[1])}function nM(a,b){return b[+(b.left!==a.site)]}function nN(a,b){return b[+(b.left===a.site)]}function nO(){for(var a=0,b=oe.length,c,d,e,f;a<b;++a){if((c=oe[a])&&(f=(d=c.halfedges).length)){var g=new Array(f),h=new Array(f);for(e=0;e<f;++e)g[e]=e, h[e]=nL(c,og[d[e]]);g.sort(function(a,b){return h[b]-h[a]});for(e=0;e<f;++e)h[e]=d[g[e]];for(e=0;e<f;++e)d[e]=h[e]}}}function nP(a,b,c,d){var e=oe.length,f,g,h,i,j,k,l,m,n,o,p,q,r=!0;for(f=0;f<e;++f){if(g=oe[f]){h=g.site;j=g.halfedges;i=j.length;while(i--)og[j[i]]||j.splice(i,1);i=0, k=j.length;while(i<k)o=nN(g,og[j[i]]), p=o[0], q=o[1],l=nM(g,og[j[++i%k]]), m=l[0], n=l[1],(Math.abs(p-m)>ob||Math.abs(q-n)>ob)&&(j.splice(i,0,og.push(nF(h,o,Math.abs(p-a)<ob&&d-q>ob?[a,Math.abs(m-a)<ob?n:d]:Math.abs(q-d)<ob&&c-p>ob?[Math.abs(n-d)<ob?m:c,d]:Math.abs(p-c)<ob&&q-b>ob?[c,Math.abs(m-c)<ob?n:b]:Math.abs(q-b)<ob&&p-a>ob?[Math.abs(n-b)<ob?m:a,b]:null))-1),++k);k&&(r=!1)}}if(r){var s,t,u,v=Infinity;for(f=0, r=null;f<e;++f)(g=oe[f])&&(h=g.site,s=h[0]-a,t=h[1]-b,u=s*s+t*t,u<v&&(v=u, r=g));if(r){var w=[a,b],x=[a,d],y=[c,d],z=[c,b];r.halfedges.push(og.push(nF(h=r.site,w,x))-1,og.push(nF(h,x,y))-1,og.push(nF(h,y,z))-1,og.push(nF(h,z,w))-1)}}for(f=0;f<e;++f)(g=oe[f])&&(g.halfedges.length||delete oe[f])}var nQ=[],nR;function nS(){nA(this);this.x=this.y=this.arc=this.site=this.cy=null}function nT(a){var b=a.P,c=a.N;if(!b||!c)return;var d=b.site,e=a.site,f=c.site;if(d===f)return;var g=e[0],h=e[1],i=d[0]-g,j=d[1]-h,k=f[0]-g,l=f[1]-h,m=2*(i*l-j*k);if(m>=-oc)return;var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,r=nQ.pop()||new nS;r.arc=a;r.site=e;r.x=p+g;r.y=(r.cy=q+h)+Math.sqrt(p*p+q*q);a.circle=r;var s=null,t=of._;while(t){if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(t.L)t=t.L;else{s=t.P;break}}else{if(t.R)t=t.R;else{s=t;break}}}of.insert(s,r);s||(nR=r)}function nU(a){var b=a.circle;b&&(b.P||(nR=b.N),of.remove(b),nQ.push(b),nA(b),a.circle=null)}var nV=[];function nW(){nA(this);this.edge=this.site=this.circle=null}function nX(a){var b=nV.pop()||new nW;b.site=a;return b}function nY(a){nU(a);od.remove(a);nV.push(a);nA(a)}function nZ(a){var b=a.circle,c=b.x,d=b.cy,e=[c,d],f=a.P,g=a.N,h=[a];nY(a);var i=f;while(i.circle&&Math.abs(c-i.circle.x)<ob&&Math.abs(d-i.circle.cy)<ob)f=i.P,h.unshift(i),nY(i),i=f;h.unshift(i);nU(i);var j=g;while(j.circle&&Math.abs(c-j.circle.x)<ob&&Math.abs(d-j.circle.cy)<ob)g=j.N,h.push(j),nY(j),j=g;h.push(j);nU(j);var k=h.length,l;for(l=1;l<k;++l)j=h[l],i=h[l-1],nG(j.edge,i.site,j.site,e);i=h[0];j=h[k-1];j.edge=nE(i.site,j.site,null,e);nT(i);nT(j)}function n_(a){var b=a[0],c=a[1],d,e,f,g,h=od._;while(h){f=n$(h,c)-b;if(f>ob)h=h.L;else{g=b-oa(h,c);if(g>ob){if(!h.R){d=h;break}h=h.R}else{f>-ob?(d=h.P,e=h):g>-ob?(d=h,e=h.N):(d=e=h);break}}}nK(a);var i=nX(a);od.insert(d,i);if(!d&&!e)return;if(d===e){nU(d);e=nX(d.site);od.insert(i,e);i.edge=e.edge=nE(d.site,i.site);nT(d);nT(e);return}if(!e){i.edge=nE(d.site,i.site);return}nU(d);nU(e);var j=d.site,k=j[0],l=j[1],m=a[0]-k,n=a[1]-l,o=e.site,p=o[0]-k,q=o[1]-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u=[(q*s-n*t)/r+k,(m*t-p*s)/r+l];nG(e.edge,j,o,u);i.edge=nE(j,a,null,u);e.edge=nE(a,o,null,u);nT(d);nT(e)}function n$(a,b){var c=a.site,d=c[0],e=c[1],f=e-b;if(!f)return d;var g=a.P;if(!g)return-Infinity;c=g.site;var h=c[0],i=c[1],j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;if(l)return(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d;return(d+h)/2}function oa(a,b){var c=a.N;if(c)return n$(c,b);var d=a.site;return d[1]===b?d[0]:Infinity}var ob=1e-6,oc=1e-12,od,oe,of,og;function oh(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function oi(a,b){return b[1]-a[1]||b[0]-a[0]}function oj(a,b){var c=a.sort(oi).pop(),d,e,f;og=[];oe=new Array(a.length);od=new nz;of=new nz;while(!0){f=nR;if(c&&(!f||c[1]<f.y||c[1]===f.y&&c[0]<f.x))(c[0]!==d||c[1]!==e)&&(n_(c),d=c[0], e=c[1]),c=a.pop();else if(f)nZ(f.arc);else{break}}nO();if(b){var g=+b[0][0],h=+b[0][1],i=+b[1][0],j=+b[1][1];nJ(g,h,i,j);nP(g,h,i,j)}this.edges=og;this.cells=oe;od=of=og=oe=null}oj.prototype={constructor:oj,polygons:function(){var a=this.edges;return this.cells.map(function(b){var c=b.halfedges.map(function(c){return nM(b,a[c])});c.data=b.site.data;return c})},triangles:function(){var a=[],b=this.edges;this.cells.forEach(function(c,d){if(!(h=(f=c.halfedges).length))return;var e=c.site,f,g=-1,h,i,j=b[f[h-1]],k=j.left===e?j.right:j.left;while(++g<h)i=k,j=b[f[g]],k=j.left===e?j.right:j.left,i&&k&&d<i.index&&d<k.index&&oh(e,i,k)<0&&a.push([e.data,i.data,k.data])});return a},links:function(){return this.edges.filter(function(a){return a.right}).map(function(a){return{source:a.left.data,target:a.right.data}})},find:function(a,b,c){var d=this,f,g=d._found||0,h=d.cells.length,i;while(!(i=d.cells[g]))if(++g>=h)return null;var j=a-i.site[0],k=b-i.site[1],l=j*j+k*k;do{i=d.cells[f=g], g=null,i.halfedges.forEach(function(c){var e=d.edges[c],f=e.left;if((f===i.site||!f)&&!(f=e.right))return;var h=a-f[0],j=b-f[1],k=h*h+j*j;k<l&&(l=k, g=f.index)})}while(g!==null);d._found=f;return c==null||l<=c*c?i.site:null}};function ok(){var a=nx,b=ny,c=null;function e(e){return new oj(e.map(function(c,d){var f=[Math.round(a(c,d,e)/ob)*ob,Math.round(b(c,d,e)/ob)*ob];f.index=d;f.data=c;return f}),c)}e.polygons=function(a){return e(a).polygons()};e.links=function(a){return e(a).links()};e.triangles=function(a){return e(a).triangles()};e.x=function(b){return arguments.length?(a=typeof b==="function"?b:nw(+b), e):a};e.y=function(a){return arguments.length?(b=typeof a==="function"?a:nw(+a), e):b};e.extent=function(a){return arguments.length?(c=a==null?null:[[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]], e):c&&[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]};e.size=function(a){return arguments.length?(c=a==null?null:[[0,0],[+a[0],+a[1]]], e):c&&[c[1][0]-c[0][0],c[1][1]-c[0][1]]};return e}function ol(a){a=a.slice();a.push(a[0]);return I([a])}function om(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.bbox||[-180,-85,180,85];if(!a)throw new Error('points is required');if(!Array.isArray(c))throw new Error('bbox is invalid');aO(a,'Point','points');var d=N(ok().x(function(a){return a.geometry.coordinates[0]}).y(function(a){return a.geometry.coordinates[1]}).extent([[c[0],c[1]],[c[2],c[3]]]).polygons(a.features).map(ol));b.addPropertiesToPolygons&&d.features.forEach(function(b,c){b.properties=JSON.parse(JSON.stringify(a.features[c].properties))});return d}function oo(a,b,c,d){d=d||{};var e=d.steps||64,f=d.units||'kilometers',g=d.angle||0,h=d.pivot||a,i=d.properties||a.properties||{};if(!a)throw new Error('center is required');if(!b)throw new Error('xSemiAxis is required');if(!c)throw new Error('ySemiAxis is required');if(!ac(d))throw new Error('options must be an object');if(!ab(e))throw new Error('steps must be a number');if(!ab(g))throw new Error('angle must be a number');var j=aJ(a);if(f==='degrees')var k=Y(g);else b=hF(a,b,90,{units:f}),c=hF(a,c,0,{units:f}),b=aJ(b)[0]-j[0],c=aJ(c)[1]-j[1];var l=[];for(var m=0;m<e;m+=1){var n=m*-360/e,o=b*c/Math.sqrt(Math.pow(c,2)+Math.pow(b,2)*Math.pow(oq(n),2)),p=b*c/Math.sqrt(Math.pow(b,2)+Math.pow(c,2)/Math.pow(oq(n),2));n<-90&&n>=-270&&(o=-o);n<-180&&n>=-360&&(p=-p);if(f==='degrees'){var q=o*Math.cos(k)+p*Math.sin(k),r=p*Math.cos(k)-o*Math.sin(k);o=q;p=r}l.push([o+j[0],p+j[1]])}l.push(l[0]);if(f==='degrees'){return I([l],i)}else{return lj(I([l],i),g,{pivot:h})}}function oq(a){var b=a*Math.PI/180;return Math.tan(b)}function or(a,b){b=af(b);var c=b.weight;let d=0,e=0,f=0;av(a,function(a,b,g){var h=g[c];h=h===undefined||h===null?1:h;if(!ab(h))throw new Error('weight value must be a number for feature index '+b);h=Number(h);h>0&&ao(a,function(a){d+=a[0]*h;e+=a[1]*h;f+=h})});return G([d/f,e/f],b.properties)}function os(a,b){b=af(b);var c=b.counter||10;if(!ab(c))throw new Error('counter must be a number');var d=b.weight,e=or(a,{weight:b.weight}),f=N([]);as(a,function(a){f.features.push(eS(a,{properties:{weight:a.properties[d]}}))});f.properties={tolerance:b.tolerance,medianCandidates:[]};return ot(e.geometry.coordinates,[0,0],f,c)}function ot(a,b,c,d){var e=c.properties.tolerance||0.001,f=0,g=0,h=0,i=0;as(c,function(b){var c=b.properties.weight,d=c===undefined||c===null?1:c;d=Number(d);if(!ab(d))throw new Error('weight value must be a number');if(d>0){i+=1;var e=d*cP(b,a);e===0&&(e=1);var j=d/e;f+=b.geometry.coordinates[0]*j;g+=b.geometry.coordinates[1]*j;h+=j}});if(i<1)throw new Error('no features to measure');var j=f/h,k=g/h;if(i===1||d===0||Math.abs(j-b[0])<e&&Math.abs(k-b[1])<e){return G([j,k],{medianCandidates:c.properties.medianCandidates})}else{c.properties.medianCandidates.push([j,k]);return ot([j,k],a,c,d-1)}}function ou(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.steps||64,d=b.weight,e=b.properties||{};if(!ab(c))throw new Error('steps must be a number');if(!ac(e))throw new Error('properties must be a number');var f=au(a).length,g=or(a,{weight:d}),h=0,i=0,j=0;as(a,function(a){var b=a.properties[d]||1,c=ov(aK(a),aK(g));h+=Math.pow(c.x,2)*b;i+=Math.pow(c.y,2)*b;j+=c.x*c.y*b});var k=h-i,l=Math.sqrt(Math.pow(k,2)+4*Math.pow(j,2)),m=2*j,n=Math.atan((k+l)/m),o=n*180/Math.PI,p=0,q=0,r=0;as(a,function(a){var b=a.properties[d]||1,c=ov(aK(a),aK(g));p+=Math.pow(c.x*Math.cos(n)-c.y*Math.sin(n),2)*b;q+=Math.pow(c.x*Math.sin(n)+c.y*Math.cos(n),2)*b;r+=b});var s=Math.sqrt(2*p/r),t=Math.sqrt(2*q/r),u=oo(g,s,t,{units:'degrees',angle:o,steps:c,properties:e}),v=cO(a,N([u])),w={meanCenterCoordinates:aK(g),semiMajorAxis:s,semiMinorAxis:t,numberOfFeatures:f,angle:o,percentageWithinEllipse:100*au(v).length/f};u.properties.standardDeviationalEllipse=w;return u}function ov(a,b){return{x:a[0]-b[0],y:a[1]-b[1]}}function ow(a,b,c,d){d=af(d);if(!a){throw new Error("startPoint is required")}if(!b){throw new Error("midPoint is required")}if(!c){throw new Error("endPoint is required")}let e=a,f=b,g=c,h=W(d.mercator!==!0?eO(e,f):hD(e,f)),i=W(d.mercator!==!0?eO(g,f):hD(g,f)),j=Math.abs(h-i);if(d.explementary===!0){return 360-j}return j}function ox(a,b){var c=[],d=b.iterations||1;if(!a)throw new Error('inputPolys is required');av(a,function(a,b,e){var f=a.type==='Polygon'?'Polygon':'MultiPolygon',g=f==='Polygon'?[]:[[]];for(var h=0;h<d;h++){var i=f==='Polygon'?[[]]:[[[]]],j=a;h>0&&(j=f==='Polygon'?I(g).geometry:Q(g).geometry);f==='Polygon'?oy(j,i):oz(j,i);g=i.slice(0)}f==='Polygon'?c.push(I(g,e)):c.push(Q(g,e))});return N(c)}function oy(a,b){var c=0,d=0;ao(a,function(e,f,g,h,i){i>c&&(c=i,d=f,b.push([]));var j=f-d,k=a.coordinates[i][j+1],l=e[0],m=e[1],n=k[0],o=k[1];b[i].push([0.75*l+0.25*n,0.75*m+0.25*o]);b[i].push([0.25*l+0.75*n,0.25*m+0.75*o])},!0);b.forEach(function(a){a.push(a[0])})}function oz(a,b){var c=0,d=0,e=0;ao(a,function(f,g,h,i,j){i>e&&(e=i,d=g,b.push([[]]));j>c&&(c=j,d=g,b[i].push([]));var k=g-d,l=a.coordinates[i][j][k+1],m=f[0],n=f[1],o=l[0],p=l[1];b[i][j].push([0.75*m+0.25*o,0.75*n+0.25*p]);b[i][j].push([0.25*m+0.75*o,0.25*n+0.75*p])},!0);b.forEach(function(a){a.forEach(function(a){a.push(a[0])})})}function oA(a,b,c){let d=aJ(a),e=aJ(b),f=d[0]-e[0],g=d[1]-e[1];if(c===1){return Math.abs(f)+Math.abs(g)}return Math.pow((Math.pow(f,c)+Math.pow(g,c)),1/c)}function oB(a,b){b=b||{};let c=b.threshold||10000,d=b.p||2,e=b.binary||!1,f=b.alpha||-1,g=b.standardization||!1,h=[];as(a,function(a){h.push(eS(a))});let i=[];for(let a=0;a<h.length;a++)i[a]=[];for(let a=0;a<h.length;a++){for(let b=a;b<h.length;b++){a===b&&(i[a][b]=0);let c=oA(h[a],h[b],d);i[a][b]=c;i[b][a]=c}}for(let a=0;a<h.length;a++){for(let b=0;b<h.length;b++){let d=i[a][b];if(d===0){continue}e?(d<=c?(i[a][b]=1.0):(i[a][b]=0.0)):d<=c?(i[a][b]=Math.pow(d,f)):(i[a][b]=0.0)}}if(g){for(let a=0;a<h.length;a++){let b=i[a].reduce(function(a,b){return a+b},0);for(let c=0;c<h.length;c++)i[a][c]=i[a][c]/b}}return i}function oC(a,b){let c=b.inputField,d=b.threshold||100000,e=b.p||2,f=b.binary||!1,g=b.alpha||-1,h=b.standardization||!0,i=oB(a,{alpha:g,binary:f,p:e,standardization:h,threshold:d}),j=[];as(a,function(a){let b=a.properties||{};j.push(b[c])});let k=oD(j),l=oE(j),m=0,n=0,o=0,p=0,q=i.length;for(let a=0;a<q;a++){let b=0;for(let c=0;c<q;c++)m+=i[a][c]*(j[a]-k)*(j[c]-k),n+=i[a][c],o+=Math.pow((i[a][c]+i[c][a]),2),b+=i[a][c]+i[c][a];p+=Math.pow(b,2)}o*=0.5;let r=m/n/l,s=-1/(q-1),t=q*q*o-q*p+3*(n*n),u=(q-1)*(q+1)*(n*n),v=t/u-s*s,w=Math.sqrt(v),x=(r-s)/w;return{expectedMoranIndex:s,moranIndex:r,stdNorm:w,zNorm:x}}function oD(a){let b=0;for(const c of a)b+=c;return b/a.length}function oE(a){let b=oD(a),c=0;for(const d of a)c+=Math.pow(d-b,2);return c/a.length}function oF(a,b){return oH(a,'mercator',b)}function oG(a,b){return oH(a,'wgs84',b)}function oH(a,b,c){c=c||{};var d=c.mutate;if(!a)throw new Error('geojson is required');Array.isArray(a)&&ab(a[0])?(a=b==='mercator'?oI(a):oJ(a)):(d!==!0&&(a=ed(a)),ao(a,function(a){var c=b==='mercator'?oI(a):oJ(a);a[0]=c[0];a[1]=c[1]}));return a}function oI(a){var b=Math.PI/180,c=6378137.0,d=20037508.342789244,e=Math.abs(a[0])<=180?a[0]:a[0]-oK(a[0])*360,f=[c*e*b,c*Math.log(Math.tan(Math.PI*0.25+0.5*a[1]*b))];f[0]>d&&(f[0]=d);f[0]<-d&&(f[0]=-d);f[1]>d&&(f[1]=d);f[1]<-d&&(f[1]=-d);return f}function oJ(a){var b=180/Math.PI,c=6378137.0;return[a[0]*b/c,(Math.PI*0.5-2.0*Math.atan(Math.exp(-a[1]/c)))*b]}function oK(a){return a<0?-1:a>0?1:0}var oL=Object.freeze({toMercator:oF,toWgs84:oG});function oM(a){ac(a)&&(a=a.bbox);if(a&&!Array.isArray(a))throw new Error('bbox is invalid');if(a)return oU(a);else return[oS(),oT()]}function oN(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.bbox;(a===undefined||a===null)&&(a=1);var d=[];for(var e=0;e<a;e++)d.push(G(oM(c)));return N(d)}function oO(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.bbox,d=b.num_vertices,e=b.max_radial_length;(a===undefined||a===null)&&(a=1);ab(d)||(d=10);ab(e)||(e=10);var f=[];for(var g=0;g<a;g++){var h=[],i=Array.apply(null,new Array(d+1)).map(Math.random);i.forEach(j);i.forEach(k);h[h.length-1]=h[0];h=h.map(oQ(oM(c)));f.push(I([h]))}function j(a,b,c){c[b]=b>0?a+c[b-1]:a}function k(a){a=a*2*Math.PI/i[i.length-1];var b=Math.random();h.push([b*e*Math.sin(a),b*e*Math.cos(a)])}return N(f)}function oP(a,b){b=b||{};if(!ac(b))throw new Error('options is invalid');var c=b.bbox,d=b.num_vertices,e=b.max_length,f=b.max_rotation;(a===undefined||a===null)&&(a=1);(!ab(d)||d<2)&&(d=10);ab(e)||(e=0.0001);ab(f)||(f=Math.PI/8);var g=[];for(var h=0;h<a;h++){var i=oM(c),j=[i];for(var k=0;k<d-1;k++){var l=k===0?Math.random()*2*Math.PI:Math.tan((j[k][1]-j[k-1][1])/(j[k][0]-j[k-1][0])),m=l+(Math.random()-0.5)*f*2,n=Math.random()*e;j.push([j[k][0]+n*Math.cos(m),j[k][1]+n*Math.sin(m)])}g.push(K(j))}return N(g)}function oQ(a){return function(b){return[b[0]+a[0],b[1]+a[1]]}}function oR(){return Math.random()-0.5}function oS(){return oR()*360}function oT(){return oR()*180}function oU(a){return[Math.random()*(a[2]-a[0])+a[0],Math.random()*(a[3]-a[1])+a[1]]}var oV=Object.freeze({randomPosition:oM,randomPoint:oN,randomPolygon:oO,randomLineString:oP});function oW(a,b){if(!a)throw new Error('geojson is required');if(a.type!=='FeatureCollection')throw new Error('geojson must be a FeatureCollection');if(b===undefined||b===null)throw new Error('filter is required');var c=[];as(a,function(a){o_(a.properties,b)&&c.push(a)});return N(c)}function oX(a,b,c){if(!a)throw new Error('geojson is required');if(a.type!=='FeatureCollection')throw new Error('geojson must be a FeatureCollection');if(b===undefined||b===null)throw new Error('property is required');var d=oZ(a,b),e=Object.keys(d);for(var f=0;f<e.length;f++){var g=e[f],h=d[g],i=[];for(var j=0;j<h.length;j++)i.push(a.features[h[j]]);c(N(i),g,f)}}function oY(a,b,c,d){var e=d;oX(a,b,function(a,b,f){f===0&&d===undefined?(e=a):(e=c(e,a,b,f))});return e}function oZ(a,b){var c={};as(a,function(a,d){var e=a.properties||{};if(e.hasOwnProperty(b)){var f=e[b];c.hasOwnProperty(f)?c[f].push(d):(c[f]=[d])}});return c}function o_(a,b){if(a===undefined)return !1;var c=typeof b;if(c==='number'||c==='string')return a.hasOwnProperty(b);else if(Array.isArray(b)){for(var d=0;d<b.length;d++){if(!o_(a,b[d]))return !1}return !0}else{return o$(a,b)}}function o$(a,b){var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d];if(a[e]!==b[e])return !1}return !0}function pd(a,b){if(!b)return{};if(!b.length)return{};var c={};for(var d=0;d<b.length;d++){var e=b[d];a.hasOwnProperty(e)&&(c[e]=a[e])}return c}var pe=Object.freeze({getCluster:oW,clusterEach:oX,clusterReduce:oY,createBins:oZ,applyFilter:o_,propertiesContainsFilter:o$,filterProperties:pd});function pf(a,b){var c=aP(a),d=aP(b),e=a.properties||{},f=dZ(c.coordinates,d.coordinates);if(f.length===0)return null;return Q(f,e)}function pg(a,b,c){c=af(c);var d=c.properties||{};let e=aP(a),f=aP(b),g=dY(e.coordinates,f.coordinates);if(g.length===0)return null;return Q(g,d)}function ph(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');let d=JSON.stringify(c.properties||{});var e=c.triangles,f=c.mask;if(b===null||b===undefined)throw new Error('cellSide is required');if(!ab(b))throw new Error('cellSide is invalid');if(!a)throw new Error('bbox is required');if(!Array.isArray(a))throw new Error('bbox must be array');if(a.length!==4)throw new Error('bbox must contain 4 numbers');if(f&&['Polygon','MultiPolygon'].indexOf(aQ(f))===-1)throw new Error('options.mask must be a (Multi)Polygon');var g=a[0],h=a[1],i=a[2],j=a[3],k=(h+j)/2,l=(g+i)/2,m=b*2/(cP([g,k],[i,k],c)),n=m*(i-g),o=b*2/(cP([l,h],[l,j],c)),p=o*(j-h),q=n/2,r=q*2,s=Math.sqrt(3)/2*p,t=i-g,u=j-h,v=0.75*r,w=s,x=(t-r)/(r-q/2),y=Math.floor(x),z=(y*v-q/2-t)/2-q/2+v/2,A=Math.floor((u-s)/s),B=(u-A*s)/2,C=A*s-u>s/2;C&&(B-=s/4);var D=[],E=[];for(var F=0;F<6;F++){var G=2*Math.PI/6*F;D.push(Math.cos(G));E.push(Math.sin(G))}var H=[];for(var I=0;I<=y;I++){for(var J=0;J<=A;J++){var K=I%2===1;if(J===0&&K)continue;if(J===0&&C)continue;var L=I*v+g-z,M=J*w+h+B;K&&(M-=s/2);if(e===!0)pj([L,M],n/2,p/2,JSON.parse(d),D,E).forEach(function(a){f?(pg(f,a)&&H.push(a)):H.push(a)});else{var O=pi([L,M],n/2,p/2,JSON.parse(d),D,E);f?(pg(f,O)&&H.push(O)):H.push(O)}}}return N(H)}function pi(a,b,c,d,e,f){var g=[];for(var h=0;h<6;h++){var i=a[0]+b*e[h],j=a[1]+c*f[h];g.push([i,j])}g.push(g[0].slice());return I([g],d)}function pj(a,b,c,d,e,f){var g=[];for(var h=0;h<6;h++){var i=[];i.push(a);i.push([a[0]+b*e[h],a[1]+c*f[h]]);i.push([a[0]+b*e[(h+1)%6],a[1]+c*f[(h+1)%6]]);i.push(a);g.push(I([i],d))}return g}function pk(a,b){var c=pl(b),d=null;a.type==='FeatureCollection'?(d=d_(a)):(d=d_(N([a])));d.geometry.coordinates.forEach(function(a){c.geometry.coordinates.push(a[0])});return c}function pl(a){var b=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],c=a&&a.geometry.coordinates||b;return I(c)}function pn(a,b){let c=!1;az(a,a=>{az(b,b=>{if(c===!0){return !0}c=!lQ(a.geometry,b.geometry)})});return c}function po(a,b,c,d){let e=[],f=a[0],g=a[1],h=a[2],i=a[3],j=b/(cP([f,g],[h,g],d)),k=j*(h-f),l=c/(cP([f,g],[f,i],d)),m=l*(i-g),n=h-f,o=i-g,p=Math.floor(n/k),q=Math.floor(o/m),r=(n-p*k)/2,s=(o-q*m)/2,t=f+r;for(let a=0;a<p;a++){let b=g+s;for(let a=0;a<q;a++){let c=I([[[t,b],[t,b+m],[t+k,b+m],[t+k,b],[t,b]]],d.properties);d.mask?(pn(d.mask,c)&&e.push(c)):e.push(c);b+=m}t+=k}return N(e)}function pq(a,b,c){return po(a,b,b,c)}function pr(a,b,c){c=c||{};if(!ac(c))throw new Error('options is invalid');var d=c.properties,e=c.mask,f=[];if(b===null||b===undefined)throw new Error('cellSide is required');if(!ab(b))throw new Error('cellSide is invalid');if(!a)throw new Error('bbox is required');if(!Array.isArray(a))throw new Error('bbox must be array');if(a.length!==4)throw new Error('bbox must contain 4 numbers');if(e&&['Polygon','MultiPolygon'].indexOf(aQ(e))===-1)throw new Error('options.mask must be a (Multi)Polygon');var g=b/(cP([a[0],a[1]],[a[2],a[1]],c)),h=g*(a[2]-a[0]),i=b/(cP([a[0],a[1]],[a[0],a[3]],c)),j=i*(a[3]-a[1]),k=0,l=a[0];while(l<=a[2]){var m=0,n=a[1];while(n<=a[3]){var o=null,p=null;k%2===0&&m%2===0?(o=I([[[l,n],[l,n+j],[l+h,n],[l,n]]],d),p=I([[[l,n+j],[l+h,n+j],[l+h,n],[l,n+j]]],d)):k%2===0&&m%2===1?(o=I([[[l,n],[l+h,n+j],[l+h,n],[l,n]]],d),p=I([[[l,n],[l,n+j],[l+h,n+j],[l,n]]],d)):m%2===0&&k%2===1?(o=I([[[l,n],[l,n+j],[l+h,n+j],[l,n]]],d),p=I([[[l,n],[l+h,n+j],[l+h,n],[l,n]]],d)):m%2===1&&k%2===1&&(o=I([[[l,n],[l,n+j],[l+h,n],[l,n]]],d),p=I([[[l,n+j],[l+h,n+j],[l+h,n],[l,n+j]]],d));e?(pg(e,o)&&f.push(o),pg(e,p)&&f.push(p)):(f.push(o),f.push(p));n+=j;m++}k++;l+=h}return N(f)}function ps(a,b,c){c=c||{};if(typeof c!=='object')throw new Error('options is invalid');var d=c.gridType,e=c.property,f=c.weight;if(!a)throw new Error('points is required');aO(a,'Point','input must contain Points');if(!b)throw new Error('cellSize is required');if(f!==undefined&&typeof f!=='number')throw new Error('weight must be a number');e=e||'elevation';d=d||'square';f=f||1;var g=aI(a),h;switch(d){case 'point':;case 'points':h=hY(g,b,c);break;case 'square':;case 'squares':h=pq(g,b,c);break;case 'hex':;case 'hexes':h=ph(g,b,c);break;case 'triangle':;case 'triangles':h=pr(g,b,c);break;default:throw new Error('invalid gridType')};var i=[];as(h,function(b){var g=0,h=0;as(a,function(a){var i=d==='point'?b:eS(b),j=cP(i,a,c),k;e!==undefined&&(k=a.properties[e]);k===undefined&&(k=a.geometry.coordinates[2]);if(k===undefined)throw new Error('zValue is missing');j===0&&(g=k);var l=1.0/Math.pow(j,f);h+=l;g+=l*k});var j=ed(b);j.properties[e]=g/h;i.push(j)});return N(i)}('fill' in Array.prototype)||Object.defineProperty(Array.prototype,'fill',{configurable:!0,value:function b(a){if(this===undefined||this===null){throw new TypeError(this+' is not an object')}var c=Object(this),d=Math.max(Math.min(c.length,9007199254740991),0)||0,e=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;e=e<0?Math.max(d+e,0):Math.min(e,d);var f=2 in arguments&&arguments[2]!==undefined?parseInt(Number(arguments[2]),10)||0:d;f=f<0?Math.max(d+arguments[2],0):Math.min(f,d);while(e<f)c[e]=a,++e;return c},writable:!0});Number.isFinite=Number.isFinite||function(a){return typeof a==='number'&&isFinite(a)};Number.isInteger=Number.isInteger||function(a){return typeof a==='number'&&isFinite(a)&&Math.floor(a)===a};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(a){return a!==a};Math.trunc=Math.trunc||function(a){return a<0?Math.ceil(a):Math.floor(a)};var pu=function a(){};pu.prototype.interfaces_=function a(){return[]};pu.prototype.getClass=function a(){return pu};pu.prototype.equalsWithTolerance=function d(a,b,c){return Math.abs(a-b)<=c};var pv=function(a){function b(b){a.call(this,b);this.name='IllegalArgumentException';this.message=b;this.stack=(new a()).stack}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;return b}(Error),pw=function a(){},pz={MAX_VALUE:{configurable:!0}};pw.isNaN=function b(a){return Number.isNaN(a)};pw.doubleToLongBits=function b(a){return a};pw.longBitsToDouble=function b(a){return a};pw.isInfinite=function b(a){return!Number.isFinite(a)};pz.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(pw,pz);var pA=function a(){},pB=function a(){},pC=function a(){};function pD(){}var pE=function a(){this.x=null;this.y=null;this.z=null;if(arguments.length===0)this.x=0.0,this.y=0.0,this.z=a.NULL_ORDINATE;else if(arguments.length===1){var b=arguments[0];this.x=b.x;this.y=b.y;this.z=b.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=a.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},pF={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};pE.prototype.setOrdinate=function c(a,b){switch(a){case pE.X:this.x=b;break;case pE.Y:this.y=b;break;case pE.Z:this.z=b;break;default:throw new pv('Invalid ordinate index: '+a)}};pE.prototype.equals2D=function a(){if(arguments.length===1){var b=arguments[0];if(this.x!==b.x){return !1}if(this.y!==b.y){return !1}return !0}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(!pu.equalsWithTolerance(this.x,c.x,d)){return !1}if(!pu.equalsWithTolerance(this.y,c.y,d)){return !1}return !0}};pE.prototype.getOrdinate=function b(a){switch(a){case pE.X:return this.x;case pE.Y:return this.y;case pE.Z:return this.z;default:};throw new pv('Invalid ordinate index: '+a)};pE.prototype.equals3D=function b(a){return this.x===a.x&&this.y===a.y&&((this.z===a.z||pw.isNaN(this.z))&&pw.isNaN(a.z))};pE.prototype.equals=function b(a){if(!(a instanceof pE)){return !1}return this.equals2D(a)};pE.prototype.equalInZ=function c(a,b){return pu.equalsWithTolerance(this.z,a.z,b)};pE.prototype.compareTo=function b(a){var c=a;if(this.x<c.x){return-1}if(this.x>c.x){return 1}if(this.y<c.y){return-1}if(this.y>c.y){return 1}return 0};pE.prototype.clone=function a(){};pE.prototype.copy=function a(){return new pE(this)};pE.prototype.toString=function a(){return'('+this.x+', '+this.y+', '+this.z+')'};pE.prototype.distance3D=function b(a){var c=this.x-a.x,d=this.y-a.y,e=this.z-a.z;return Math.sqrt(c*c+d*d+e*e)};pE.prototype.distance=function b(a){var c=this.x-a.x,d=this.y-a.y;return Math.sqrt(c*c+d*d)};pE.prototype.hashCode=function a(){var b=17;b=37*b+pE.hashCode(this.x);b=37*b+pE.hashCode(this.y);return b};pE.prototype.setCoordinate=function b(a){this.x=a.x;this.y=a.y;this.z=a.z};pE.prototype.interfaces_=function a(){return[pA,pB,pD]};pE.prototype.getClass=function a(){return pE};pE.hashCode=function a(){if(arguments.length===1){var b=arguments[0],c=pw.doubleToLongBits(b);return Math.trunc((c^c)>>>32)}};pF.DimensionalComparator.get=function(){return pG};pF.serialVersionUID.get=function(){return 6683108902428366910};pF.NULL_ORDINATE.get=function(){return pw.NaN};pF.X.get=function(){return 0};pF.Y.get=function(){return 1};pF.Z.get=function(){return 2};Object.defineProperties(pE,pF);var pG=function b(a){this._dimensionsToTest=2;if(arguments.length===0);else if(arguments.length===1){var c=arguments[0];if(c!==2&&c!==3){throw new pv('only 2 or 3 dimensions may be specified')}this._dimensionsToTest=c}};pG.prototype.compare=function c(a,b){var d=a,e=b,f=pG.compare(d.x,e.x);if(f!==0){return f}var g=pG.compare(d.y,e.y);if(g!==0){return g}if(this._dimensionsToTest<=2){return 0}var h=pG.compare(d.z,e.z);return h};pG.prototype.interfaces_=function a(){return[pC]};pG.prototype.getClass=function a(){return pG};pG.compare=function c(a,b){if(a<b){return-1}if(a>b){return 1}if(pw.isNaN(a)){if(pw.isNaN(b)){return 0}return-1}if(pw.isNaN(b)){return 1}return 0};var pH=function a(){};pH.prototype.create=function a(){};pH.prototype.interfaces_=function a(){return[]};pH.prototype.getClass=function a(){return pH};var pI=function a(){},pJ={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};pI.prototype.interfaces_=function a(){return[]};pI.prototype.getClass=function a(){return pI};pI.toLocationSymbol=function b(a){switch(a){case pI.EXTERIOR:return'e';case pI.BOUNDARY:return'b';case pI.INTERIOR:return'i';case pI.NONE:return'-';default:};throw new pv('Unknown location value: '+a)};pJ.INTERIOR.get=function(){return 0};pJ.BOUNDARY.get=function(){return 1};pJ.EXTERIOR.get=function(){return 2};pJ.NONE.get=function(){return-1};Object.defineProperties(pI,pJ);var pK=function(a,b){return a.interfaces_&&a.interfaces_().indexOf(b)>-1},pL=function a(){},pM={LOG_10:{configurable:!0}};pL.prototype.interfaces_=function a(){return[]};pL.prototype.getClass=function a(){return pL};pL.log10=function b(a){var c=Math.log(a);if(pw.isInfinite(c)){return c}if(pw.isNaN(c)){return c}return c/pL.LOG_10};pL.min=function(a,b,c,d){var e=a;b<e&&(e=b);c<e&&(e=c);d<e&&(e=d);return e};pL.clamp=function a(){if(typeof arguments[2]==='number'&&(typeof arguments[0]==='number'&&typeof arguments[1]==='number')){var b=arguments[0],c=arguments[1],d=arguments[2];if(b<c){return c}if(b>d){return d}return b}else if(Number.isInteger(arguments[2])&&(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1]))){var e=arguments[0],f=arguments[1],g=arguments[2];if(e<f){return f}if(e>g){return g}return e}};pL.wrap=function c(a,b){if(a<0){return b- -a%b}return a%b};pL.max=function(){if(arguments.length===3){var b=arguments[0],c=arguments[1],d=arguments[2],a=b;c>a&&(a=c);d>a&&(a=d);return a}else if(arguments.length===4){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3],i=e;f>i&&(i=f);g>i&&(i=g);h>i&&(i=h);return i}};pL.average=function c(a,b){return(a+b)/2.0};pM.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(pL,pM);var pN=function b(a){this.str=a};pN.prototype.append=function b(a){this.str+=a};pN.prototype.setCharAt=function c(a,b){this.str=this.str.substr(0,a)+b+this.str.substr(a+1)};pN.prototype.toString=function b(a){return this.str};var pO=function b(a){this.value=a};pO.prototype.intValue=function a(){return this.value};pO.prototype.compareTo=function b(a){if(this.value<a){return-1}if(this.value>a){return 1}return 0};pO.isNaN=function b(a){return Number.isNaN(a)};var pP=function a(){};pP.isWhitespace=function b(a){return a<=32&&a>=0||a===127};pP.toUpperCase=function b(a){return a.toUpperCase()};var pQ=function a(){this._hi=0.0;this._lo=0.0;if(arguments.length===0)this.init(0.0);else if(arguments.length===1){if(typeof arguments[0]==='number'){var b=arguments[0];this.init(b)}else if(arguments[0] instanceof a){var c=arguments[0];this.init(c)}else if(typeof arguments[0]==='string'){var d=arguments[0];a.call(this,a.parse(d))}}else if(arguments.length===2){var e=arguments[0],f=arguments[1];this.init(e,f)}},pR={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};pQ.prototype.le=function b(a){return(this._hi<a._hi||this._hi===a._hi)&&this._lo<=a._lo};pQ.prototype.extractSignificantDigits=function c(a,b){var d=this.abs(),e=pQ.magnitude(d._hi),f=pQ.TEN.pow(e);d=d.divide(f);d.gt(pQ.TEN)?(d=d.divide(pQ.TEN),e+=1):d.lt(pQ.ONE)&&(d=d.multiply(pQ.TEN),e-=1);var g=e+1,h=new pN(),i=pQ.MAX_PRINT_DIGITS-1;for(var j=0;j<=i;j++){a&&j===g&&h.append('.');var k=Math.trunc(d._hi);if(k<0){break}var l=!1,m=0;k>9?(l=!0,m='9'):(m='0'+k);h.append(m);d=d.subtract(pQ.valueOf(k)).multiply(pQ.TEN);l&&d.selfAdd(pQ.TEN);var n=!0,o=pQ.magnitude(d._hi);o<0&&Math.abs(o)>=i-j&&(n=!1);if(!n){break}}b[0]=e;return h.toString()};pQ.prototype.sqr=function a(){return this.multiply(this)};pQ.prototype.doubleValue=function a(){return this._hi+this._lo};pQ.prototype.subtract=function a(){if(arguments[0] instanceof pQ){var b=arguments[0];return this.add(b.negate())}else if(typeof arguments[0]==='number'){var c=arguments[0];return this.add(-c)}};pQ.prototype.equals=function a(){if(arguments.length===1){var b=arguments[0];return this._hi===b._hi&&this._lo===b._lo}};pQ.prototype.isZero=function a(){return this._hi===0.0&&this._lo===0.0};pQ.prototype.selfSubtract=function a(){if(arguments[0] instanceof pQ){var b=arguments[0];if(this.isNaN()){return this}return this.selfAdd(-b._hi,-b._lo)}else if(typeof arguments[0]==='number'){var c=arguments[0];if(this.isNaN()){return this}return this.selfAdd(-c,0.0)}};pQ.prototype.getSpecialNumberString=function a(){if(this.isZero()){return'0.0'}if(this.isNaN()){return'NaN '}return null};pQ.prototype.min=function b(a){if(this.le(a)){return this}else{return a}};pQ.prototype.selfDivide=function a(){if(arguments.length===1){if(arguments[0] instanceof pQ){var b=arguments[0];return this.selfDivide(b._hi,b._lo)}else if(typeof arguments[0]==='number'){var c=arguments[0];return this.selfDivide(c,0.0)}}else if(arguments.length===2){var d=arguments[0],e=arguments[1],f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null;j=this._hi/d;k=pQ.SPLIT*j;f=k-j;m=pQ.SPLIT*d;f=k-f;g=j-f;h=m-d;l=j*d;h=m-h;i=d-h;m=f*h-l+f*i+g*h+g*i;k=(this._hi-l-m+this._lo-j*e)/d;m=j+k;this._hi=m;this._lo=j-m+k;return this}};pQ.prototype.dump=function a(){return'DD<'+this._hi+', '+this._lo+'>'};pQ.prototype.divide=function a(){if(arguments[0] instanceof pQ){var b=arguments[0],c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null;g=this._hi/b._hi;h=pQ.SPLIT*g;c=h-g;j=pQ.SPLIT*b._hi;c=h-c;d=g-c;e=j-b._hi;i=g*b._hi;e=j-e;f=b._hi-e;j=c*e-i+c*f+d*e+d*f;h=(this._hi-i-j+this._lo-g*b._lo)/b._hi;j=g+h;var k=j,l=g-j+h;return new pQ(k,l)}else if(typeof arguments[0]==='number'){var m=arguments[0];if(pw.isNaN(m)){return pQ.createNaN()}return pQ.copy(this).selfDivide(m,0.0)}};pQ.prototype.ge=function b(a){return(this._hi>a._hi||this._hi===a._hi)&&this._lo>=a._lo};pQ.prototype.pow=function b(a){if(a===0.0){return pQ.valueOf(1.0)}var c=new pQ(this),d=pQ.valueOf(1.0),e=Math.abs(a);if(e>1){while(e>0)e%2===1&&d.selfMultiply(c),e/=2,e>0&&(c=c.sqr())}else d=c;if(a<0){return d.reciprocal()}return d};pQ.prototype.ceil=function a(){if(this.isNaN()){return pQ.NaN}var b=Math.ceil(this._hi),c=0.0;b===this._hi&&(c=Math.ceil(this._lo));return new pQ(b,c)};pQ.prototype.compareTo=function b(a){var c=a;if(this._hi<c._hi){return-1}if(this._hi>c._hi){return 1}if(this._lo<c._lo){return-1}if(this._lo>c._lo){return 1}return 0};pQ.prototype.rint=function a(){if(this.isNaN()){return this}var b=this.add(0.5);return b.floor()};pQ.prototype.setValue=function a(){if(arguments[0] instanceof pQ){var b=arguments[0];this.init(b);return this}else if(typeof arguments[0]==='number'){var c=arguments[0];this.init(c);return this}};pQ.prototype.max=function b(a){if(this.ge(a)){return this}else{return a}};pQ.prototype.sqrt=function a(){if(this.isZero()){return pQ.valueOf(0.0)}if(this.isNegative()){return pQ.NaN}var b=1.0/Math.sqrt(this._hi),c=this._hi*b,d=pQ.valueOf(c),e=this.subtract(d.sqr()),f=e._hi*(b*0.5);return d.add(f)};pQ.prototype.selfAdd=function a(){if(arguments.length===1){if(arguments[0] instanceof pQ){var b=arguments[0];return this.selfAdd(b._hi,b._lo)}else if(typeof arguments[0]==='number'){var c=arguments[0],d=null,e=null,f=null,g=null,h=null,i=null;f=this._hi+c;h=f-this._hi;g=f-h;g=c-h+(this._hi-g);i=g+this._lo;d=f+i;e=i+(f-d);this._hi=d+e;this._lo=e+(d-this._hi);return this}}else if(arguments.length===2){var j=arguments[0],k=arguments[1],l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null;p=this._hi+j;n=this._lo+k;r=p-this._hi;s=n-this._lo;q=p-r;o=n-s;q=j-r+(this._hi-q);o=k-s+(this._lo-o);r=q+n;l=p+r;m=r+(p-l);r=o+m;var t=l+r,u=r+(l-t);this._hi=t;this._lo=u;return this}};pQ.prototype.selfMultiply=function a(){if(arguments.length===1){if(arguments[0] instanceof pQ){var b=arguments[0];return this.selfMultiply(b._hi,b._lo)}else if(typeof arguments[0]==='number'){var c=arguments[0];return this.selfMultiply(c,0.0)}}else if(arguments.length===2){var d=arguments[0],e=arguments[1],f=null,g=null,h=null,i=null,j=null,k=null;j=pQ.SPLIT*this._hi;f=j-this._hi;k=pQ.SPLIT*d;f=j-f;g=this._hi-f;h=k-d;j=this._hi*d;h=k-h;i=d-h;k=f*h-j+f*i+g*h+g*i+(this._hi*e+this._lo*d);var l=j+k;f=j-l;var m=k+f;this._hi=l;this._lo=m;return this}};pQ.prototype.selfSqr=function a(){return this.selfMultiply(this)};pQ.prototype.floor=function a(){if(this.isNaN()){return pQ.NaN}var b=Math.floor(this._hi),c=0.0;b===this._hi&&(c=Math.floor(this._lo));return new pQ(b,c)};pQ.prototype.negate=function a(){if(this.isNaN()){return this}return new pQ(-this._hi,-this._lo)};pQ.prototype.clone=function a(){};pQ.prototype.multiply=function a(){if(arguments[0] instanceof pQ){var b=arguments[0];if(b.isNaN()){return pQ.createNaN()}return pQ.copy(this).selfMultiply(b)}else if(typeof arguments[0]==='number'){var c=arguments[0];if(pw.isNaN(c)){return pQ.createNaN()}return pQ.copy(this).selfMultiply(c,0.0)}};pQ.prototype.isNaN=function a(){return pw.isNaN(this._hi)};pQ.prototype.intValue=function a(){return Math.trunc(this._hi)};pQ.prototype.toString=function a(){var b=pQ.magnitude(this._hi);if(b>=-3&&b<=20){return this.toStandardNotation()}return this.toSciNotation()};pQ.prototype.toStandardNotation=function a(){var b=this.getSpecialNumberString();if(b!==null){return b}var c=new Array(1).fill(null),d=this.extractSignificantDigits(!0,c),e=c[0]+1,f=d;if(d.charAt(0)==='.')f='0'+d;else if(e<0)f='0.'+pQ.stringOfChar('0',-e)+d;else if(d.indexOf('.')===-1){var g=e-d.length,h=pQ.stringOfChar('0',g);f=d+h+'.0'};if(this.isNegative()){return'-'+f}return f};pQ.prototype.reciprocal=function a(){var b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null;f=1.0/this._hi;g=pQ.SPLIT*f;b=g-f;i=pQ.SPLIT*this._hi;b=g-b;c=f-b;d=i-this._hi;h=f*this._hi;d=i-d;e=this._hi-d;i=b*d-h+b*e+c*d+c*e;g=(1.0-h-i-f*this._lo)/this._hi;var j=f+g,k=f-j+g;return new pQ(j,k)};pQ.prototype.toSciNotation=function a(){if(this.isZero()){return pQ.SCI_NOT_ZERO}var b=this.getSpecialNumberString();if(b!==null){return b}var c=new Array(1).fill(null),d=this.extractSignificantDigits(!1,c),e=pQ.SCI_NOT_EXPONENT_CHAR+c[0];if(d.charAt(0)==='0'){throw new Error('Found leading zero: '+d)}var f='';d.length>1&&(f=d.substring(1));var g=d.charAt(0)+'.'+f;if(this.isNegative()){return'-'+g+e}return g+e};pQ.prototype.abs=function a(){if(this.isNaN()){return pQ.NaN}if(this.isNegative()){return this.negate()}return new pQ(this)};pQ.prototype.isPositive=function a(){return(this._hi>0.0||this._hi===0.0)&&this._lo>0.0};pQ.prototype.lt=function b(a){return(this._hi<a._hi||this._hi===a._hi)&&this._lo<a._lo};pQ.prototype.add=function a(){if(arguments[0] instanceof pQ){var b=arguments[0];return pQ.copy(this).selfAdd(b)}else if(typeof arguments[0]==='number'){var c=arguments[0];return pQ.copy(this).selfAdd(c)}};pQ.prototype.init=function a(){if(arguments.length===1){if(typeof arguments[0]==='number'){var b=arguments[0];this._hi=b;this._lo=0.0}else if(arguments[0] instanceof pQ){var c=arguments[0];this._hi=c._hi;this._lo=c._lo}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this._hi=d;this._lo=e}};pQ.prototype.gt=function b(a){return(this._hi>a._hi||this._hi===a._hi)&&this._lo>a._lo};pQ.prototype.isNegative=function a(){return(this._hi<0.0||this._hi===0.0)&&this._lo<0.0};pQ.prototype.trunc=function a(){if(this.isNaN()){return pQ.NaN}if(this.isPositive()){return this.floor()}else{return this.ceil()}};pQ.prototype.signum=function a(){if(this._hi>0){return 1}if(this._hi<0){return-1}if(this._lo>0){return 1}if(this._lo<0){return-1}return 0};pQ.prototype.interfaces_=function a(){return[pD,pA,pB]};pQ.prototype.getClass=function a(){return pQ};pQ.sqr=function b(a){return pQ.valueOf(a).selfMultiply(a)};pQ.valueOf=function a(){if(typeof arguments[0]==='string'){var b=arguments[0];return pQ.parse(b)}else if(typeof arguments[0]==='number'){var c=arguments[0];return new pQ(c)}};pQ.sqrt=function b(a){return pQ.valueOf(a).sqrt()};pQ.parse=function b(a){var c=0,d=a.length;while(pP.isWhitespace(a.charAt(c)))c++;var e=!1;if(c<d){var f=a.charAt(c);(f==='-'||f==='+')&&(c++,f==='-'&&(e=!0))}var g=new pQ(),h=0,i=0,j=0;while(!0){if(c>=d){break}var k=a.charAt(c);c++;if(pP.isDigit(k)){var l=k-'0';g.selfMultiply(pQ.TEN);g.selfAdd(l);h++;continue}if(k==='.'){i=h;continue}if(k==='e'||k==='E'){var m=a.substring(c);try{j=pO.parseInt(m)}catch(b){if(b instanceof Error){throw new Error('Invalid exponent '+m+' in string '+a)}else{throw b}}finally{};break}throw new Error("Unexpected character '"+k+"' at position "+c+' in string '+a)}var n=g,o=h-i-j;if(o===0)n=g;else if(o>0){var p=pQ.TEN.pow(o);n=g.divide(p)}else if(o<0){var q=pQ.TEN.pow(-o);n=g.multiply(q)};if(e){return n.negate()}return n};pQ.createNaN=function a(){return new pQ(pw.NaN,pw.NaN)};pQ.copy=function b(a){return new pQ(a)};pQ.magnitude=function b(a){var c=Math.abs(a),d=Math.log(c)/Math.log(10),e=Math.trunc(Math.floor(d)),f=Math.pow(10,e);f*10<=c&&(e+=1);return e};pQ.stringOfChar=function c(a,b){var d=new pN();for(var e=0;e<b;e++)d.append(a);return d.toString()};pR.PI.get=function(){return new pQ(3.141592653589793116e+00,1.224646799147353207e-16)};pR.TWO_PI.get=function(){return new pQ(6.283185307179586232e+00,2.449293598294706414e-16)};pR.PI_2.get=function(){return new pQ(1.570796326794896558e+00,6.123233995736766036e-17)};pR.E.get=function(){return new pQ(2.718281828459045091e+00,1.445646891729250158e-16)};pR.NaN.get=function(){return new pQ(pw.NaN,pw.NaN)};pR.EPS.get=function(){return 1.23259516440783e-32};pR.SPLIT.get=function(){return 134217729.0};pR.MAX_PRINT_DIGITS.get=function(){return 32};pR.TEN.get=function(){return pQ.valueOf(10.0)};pR.ONE.get=function(){return pQ.valueOf(1.0)};pR.SCI_NOT_EXPONENT_CHAR.get=function(){return'E'};pR.SCI_NOT_ZERO.get=function(){return'0.0E0'};Object.defineProperties(pQ,pR);var pS=function a(){},pT={DP_SAFE_EPSILON:{configurable:!0}};pS.prototype.interfaces_=function a(){return[]};pS.prototype.getClass=function a(){return pS};pS.orientationIndex=function d(a,b,c){var e=pS.orientationIndexFilter(a,b,c);if(e<=1){return e}var f=pQ.valueOf(b.x).selfAdd(-a.x),g=pQ.valueOf(b.y).selfAdd(-a.y),h=pQ.valueOf(c.x).selfAdd(-b.x),i=pQ.valueOf(c.y).selfAdd(-b.y);return f.selfMultiply(i).selfSubtract(g.selfMultiply(h)).signum()};pS.signOfDet2x2=function e(a,b,c,d){var f=a.multiply(d).selfSubtract(b.multiply(c));return f.signum()};pS.intersection=function e(a,b,c,d){var f=pQ.valueOf(d.y).selfSubtract(c.y).selfMultiply(pQ.valueOf(b.x).selfSubtract(a.x)),g=pQ.valueOf(d.x).selfSubtract(c.x).selfMultiply(pQ.valueOf(b.y).selfSubtract(a.y)),h=f.subtract(g),i=pQ.valueOf(d.x).selfSubtract(c.x).selfMultiply(pQ.valueOf(a.y).selfSubtract(c.y)),j=pQ.valueOf(d.y).selfSubtract(c.y).selfMultiply(pQ.valueOf(a.x).selfSubtract(c.x)),k=i.subtract(j),l=k.selfDivide(h).doubleValue(),m=pQ.valueOf(a.x).selfAdd(pQ.valueOf(b.x).selfSubtract(a.x).selfMultiply(l)).doubleValue(),n=pQ.valueOf(b.x).selfSubtract(a.x).selfMultiply(pQ.valueOf(a.y).selfSubtract(c.y)),o=pQ.valueOf(b.y).selfSubtract(a.y).selfMultiply(pQ.valueOf(a.x).selfSubtract(c.x)),p=n.subtract(o),q=p.selfDivide(h).doubleValue(),r=pQ.valueOf(c.y).selfAdd(pQ.valueOf(d.y).selfSubtract(c.y).selfMultiply(q)).doubleValue();return new pE(m,r)};pS.orientationIndexFilter=function d(a,b,c){var e=null,f=(a.x-c.x)*(b.y-c.y),g=(a.y-c.y)*(b.x-c.x),h=f-g;if(f>0.0){if(g<=0.0){return pS.signum(h)}else e=f+g}else if(f<0.0){if(g>=0.0){return pS.signum(h)}else e=-f-g}else{return pS.signum(h)};var i=pS.DP_SAFE_EPSILON*e;if(h>=i||-h>=i){return pS.signum(h)}return 2};pS.signum=function b(a){if(a>0){return 1}if(a<0){return-1}return 0};pT.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(pS,pT);var pU=function a(){},pV={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};pV.X.get=function(){return 0};pV.Y.get=function(){return 1};pV.Z.get=function(){return 2};pV.M.get=function(){return 3};pU.prototype.setOrdinate=function d(a,b,c){};pU.prototype.size=function a(){};pU.prototype.getOrdinate=function c(a,b){};pU.prototype.getCoordinate=function a(){};pU.prototype.getCoordinateCopy=function b(a){};pU.prototype.getDimension=function a(){};pU.prototype.getX=function b(a){};pU.prototype.clone=function a(){};pU.prototype.expandEnvelope=function b(a){};pU.prototype.copy=function a(){};pU.prototype.getY=function b(a){};pU.prototype.toCoordinateArray=function a(){};pU.prototype.interfaces_=function a(){return[pB]};pU.prototype.getClass=function a(){return pU};Object.defineProperties(pU,pV);var pW=function a(){},pX=function(a){function b(){a.call(this,'Projective point not representable on the Cartesian plane.')}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(pW),pY=function a(){};pY.arraycopy=function f(a,b,c,d,e){var g=0;for(var h=b;h<b+e;h++)c[d+g]=a[h],g++};pY.getProperty=function b(a){return{'line.separator':'\n'}[a]};var pZ=function a(){this.x=null;this.y=null;this.w=null;if(arguments.length===0)this.x=0.0,this.y=0.0,this.w=1.0;else if(arguments.length===1){var b=arguments[0];this.x=b.x;this.y=b.y;this.w=1.0}else if(arguments.length===2){if(typeof arguments[0]==='number'&&typeof arguments[1]==='number'){var c=arguments[0],d=arguments[1];this.x=c;this.y=d;this.w=1.0}else if(arguments[0] instanceof a&&arguments[1] instanceof a){var e=arguments[0],f=arguments[1];this.x=e.y*f.w-f.y*e.w;this.y=f.x*e.w-e.x*f.w;this.w=e.x*f.y-f.x*e.y}else if(arguments[0] instanceof pE&&arguments[1] instanceof pE){var g=arguments[0],h=arguments[1];this.x=g.y-h.y;this.y=h.x-g.x;this.w=g.x*h.y-h.x*g.y}}else if(arguments.length===3){var i=arguments[0],j=arguments[1],k=arguments[2];this.x=i;this.y=j;this.w=k}else if(arguments.length===4){var l=arguments[0],m=arguments[1],n=arguments[2],o=arguments[3],p=l.y-m.y,q=m.x-l.x,r=l.x*m.y-m.x*l.y,s=n.y-o.y,t=o.x-n.x,u=n.x*o.y-o.x*n.y;this.x=q*u-t*r;this.y=s*r-p*u;this.w=p*t-s*q}};pZ.prototype.getY=function a(){var b=this.y/this.w;if(pw.isNaN(b)||pw.isInfinite(b)){throw new pX()}return b};pZ.prototype.getX=function a(){var b=this.x/this.w;if(pw.isNaN(b)||pw.isInfinite(b)){throw new pX()}return b};pZ.prototype.getCoordinate=function a(){var b=new pE();b.x=this.getX();b.y=this.getY();return b};pZ.prototype.interfaces_=function a(){return[]};pZ.prototype.getClass=function a(){return pZ};pZ.intersection=function e(a,b,c,d){var f=a.y-b.y,g=b.x-a.x,h=a.x*b.y-b.x*a.y,i=c.y-d.y,j=d.x-c.x,k=c.x*d.y-d.x*c.y,l=g*k-j*h,m=i*h-f*k,n=f*j-i*g,o=l/n,p=m/n;if(pw.isNaN(o)||(pw.isInfinite(o)||pw.isNaN(p))||pw.isInfinite(p)){throw new pX()}return new pE(o,p)};var p_=function a(){this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;if(arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0] instanceof pE){var b=arguments[0];this.init(b.x,b.x,b.y,b.y)}else if(arguments[0] instanceof a){var c=arguments[0];this.init(c)}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this.init(d.x,e.x,d.y,e.y)}else if(arguments.length===4){var f=arguments[0],g=arguments[1],h=arguments[2],i=arguments[3];this.init(f,g,h,i)}},p$={serialVersionUID:{configurable:!0}};p_.prototype.getArea=function a(){return this.getWidth()*this.getHeight()};p_.prototype.equals=function b(a){if(!(a instanceof p_)){return !1}var c=a;if(this.isNull()){return c.isNull()}return this._maxx===c.getMaxX()&&this._maxy===c.getMaxY()&&this._minx===c.getMinX()&&this._miny===c.getMinY()};p_.prototype.intersection=function b(a){if(this.isNull()||a.isNull()||!this.intersects(a)){return new p_()}var c=this._minx>a._minx?this._minx:a._minx,d=this._miny>a._miny?this._miny:a._miny,e=this._maxx<a._maxx?this._maxx:a._maxx,f=this._maxy<a._maxy?this._maxy:a._maxy;return new p_(c,e,d,f)};p_.prototype.isNull=function a(){return this._maxx<this._minx};p_.prototype.getMaxX=function a(){return this._maxx};p_.prototype.covers=function a(){if(arguments.length===1){if(arguments[0] instanceof pE){var b=arguments[0];return this.covers(b.x,b.y)}else if(arguments[0] instanceof p_){var c=arguments[0];if(this.isNull()||c.isNull()){return !1}return c.getMinX()>=this._minx&&c.getMaxX()<=this._maxx&&c.getMinY()>=this._miny&&c.getMaxY()<=this._maxy}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];if(this.isNull()){return !1}return d>=this._minx&&d<=this._maxx&&e>=this._miny&&e<=this._maxy}};p_.prototype.intersects=function a(){if(arguments.length===1){if(arguments[0] instanceof p_){var b=arguments[0];if(this.isNull()||b.isNull()){return !1}return!(b._minx>this._maxx||b._maxx<this._minx||b._miny>this._maxy||b._maxy<this._miny)}else if(arguments[0] instanceof pE){var c=arguments[0];return this.intersects(c.x,c.y)}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];if(this.isNull()){return !1}return!(d>this._maxx||d<this._minx||e>this._maxy||e<this._miny)}};p_.prototype.getMinY=function a(){return this._miny};p_.prototype.getMinX=function a(){return this._minx};p_.prototype.expandToInclude=function a(){if(arguments.length===1){if(arguments[0] instanceof pE){var b=arguments[0];this.expandToInclude(b.x,b.y)}else if(arguments[0] instanceof p_){var c=arguments[0];if(c.isNull()){return null}this.isNull()?(this._minx=c.getMinX(),this._maxx=c.getMaxX(),this._miny=c.getMinY(),this._maxy=c.getMaxY()):(c._minx<this._minx&&(this._minx=c._minx),c._maxx>this._maxx&&(this._maxx=c._maxx),c._miny<this._miny&&(this._miny=c._miny),c._maxy>this._maxy&&(this._maxy=c._maxy))}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this.isNull()?(this._minx=d,this._maxx=d,this._miny=e,this._maxy=e):(d<this._minx&&(this._minx=d),d>this._maxx&&(this._maxx=d),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}};p_.prototype.minExtent=function a(){if(this.isNull()){return 0.0}var b=this.getWidth(),c=this.getHeight();if(b<c){return b}return c};p_.prototype.getWidth=function a(){if(this.isNull()){return 0}return this._maxx-this._minx};p_.prototype.compareTo=function b(a){var c=a;if(this.isNull()){if(c.isNull()){return 0}return-1}else{if(c.isNull()){return 1}}if(this._minx<c._minx){return-1}if(this._minx>c._minx){return 1}if(this._miny<c._miny){return-1}if(this._miny>c._miny){return 1}if(this._maxx<c._maxx){return-1}if(this._maxx>c._maxx){return 1}if(this._maxy<c._maxy){return-1}if(this._maxy>c._maxy){return 1}return 0};p_.prototype.translate=function c(a,b){if(this.isNull()){return null}this.init(this.getMinX()+a,this.getMaxX()+a,this.getMinY()+b,this.getMaxY()+b)};p_.prototype.toString=function a(){return'Env['+this._minx+' : '+this._maxx+', '+this._miny+' : '+this._maxy+']'};p_.prototype.setToNull=function a(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1};p_.prototype.getHeight=function a(){if(this.isNull()){return 0}return this._maxy-this._miny};p_.prototype.maxExtent=function a(){if(this.isNull()){return 0.0}var b=this.getWidth(),c=this.getHeight();if(b>c){return b}return c};p_.prototype.expandBy=function a(){if(arguments.length===1){var b=arguments[0];this.expandBy(b,b)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this.isNull()){return null}this._minx-=c;this._maxx+=c;this._miny-=d;this._maxy+=d;(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};p_.prototype.contains=function a(){if(arguments.length===1){if(arguments[0] instanceof p_){var b=arguments[0];return this.covers(b)}else if(arguments[0] instanceof pE){var c=arguments[0];return this.covers(c)}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];return this.covers(d,e)}};p_.prototype.centre=function a(){if(this.isNull()){return null}return new pE((this.getMinX()+this.getMaxX())/2.0,(this.getMinY()+this.getMaxY())/2.0)};p_.prototype.init=function a(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0] instanceof pE){var b=arguments[0];this.init(b.x,b.x,b.y,b.y)}else if(arguments[0] instanceof p_){var c=arguments[0];this._minx=c._minx;this._maxx=c._maxx;this._miny=c._miny;this._maxy=c._maxy}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this.init(d.x,e.x,d.y,e.y)}else if(arguments.length===4){var f=arguments[0],g=arguments[1],h=arguments[2],i=arguments[3];f<g?(this._minx=f,this._maxx=g):(this._minx=g,this._maxx=f);h<i?(this._miny=h,this._maxy=i):(this._miny=i,this._maxy=h)}};p_.prototype.getMaxY=function a(){return this._maxy};p_.prototype.distance=function b(a){if(this.intersects(a)){return 0}var c=0.0;this._maxx<a._minx?(c=a._minx-this._maxx):this._minx>a._maxx&&(c=this._minx-a._maxx);var d=0.0;this._maxy<a._miny?(d=a._miny-this._maxy):this._miny>a._maxy&&(d=this._miny-a._maxy);if(c===0.0){return d}if(d===0.0){return c}return Math.sqrt(c*c+d*d)};p_.prototype.hashCode=function a(){var b=17;b=37*b+pE.hashCode(this._minx);b=37*b+pE.hashCode(this._maxx);b=37*b+pE.hashCode(this._miny);b=37*b+pE.hashCode(this._maxy);return b};p_.prototype.interfaces_=function a(){return[pA,pD]};p_.prototype.getClass=function a(){return p_};p_.intersects=function a(){if(arguments.length===3){var b=arguments[0],c=arguments[1],d=arguments[2];if(d.x>=(b.x<c.x?b.x:c.x)&&d.x<=(b.x>c.x?b.x:c.x)&&(d.y>=(b.y<c.y?b.y:c.y)&&d.y<=(b.y>c.y?b.y:c.y))){return !0}return !1}else if(arguments.length===4){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3],i=Math.min(g.x,h.x),j=Math.max(g.x,h.x),k=Math.min(e.x,f.x),l=Math.max(e.x,f.x);if(k>j){return !1}if(l<i){return !1}i=Math.min(g.y,h.y);j=Math.max(g.y,h.y);k=Math.min(e.y,f.y);l=Math.max(e.y,f.y);if(k>j){return !1}if(l<i){return !1}return !0}};p$.serialVersionUID.get=function(){return 5873921885273102420};Object.defineProperties(p_,p$);var qa={'typeStr':/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,'emptyTypeStr':/^\s*(\w+)\s*EMPTY\s*$/,'spaces':/\s+/,'parenComma':/\)\s*,\s*\(/,'doubleParenComma':/\)\s*\)\s*,\s*\(\s*\(/,'trimParens':/^\s*\(?(.*?)\)?\s*$/},qb=function b(a){this.geometryFactory=a||new rS()};qb.prototype.read=function b(a){var c,d,e;a=a.replace(/[\n\r]/g,' ');var f=qa.typeStr.exec(a);a.search('EMPTY')!==-1&&(f=qa.emptyTypeStr.exec(a),f[2]=undefined);f&&(d=f[1].toLowerCase(),e=f[2],qd[d]&&(c=qd[d].apply(this,[e])));if(c===undefined){throw new Error('Could not parse WKT '+a)}return c};qb.prototype.write=function b(a){return this.extractGeometry(a)};qb.prototype.extractGeometry=function b(a){var c=a.getGeometryType().toLowerCase();if(!qc[c]){return null}var d=c.toUpperCase(),e;a.isEmpty()?(e=d+' EMPTY'):(e=d+'('+qc[c].apply(this,[a])+')');return e};var qc={coordinate:function b(a){return a.x+' '+a.y},point:function b(a){return qc.coordinate.call(this,a._coordinates._coordinates[0])},multipoint:function b(a){var c=this,d=[];for(var e=0,f=a._geometries.length;e<f;++e)d.push('('+qc.point.apply(c,[a._geometries[e]])+')');return d.join(',')},linestring:function b(a){var c=this,d=[];for(var e=0,f=a._points._coordinates.length;e<f;++e)d.push(qc.coordinate.apply(c,[a._points._coordinates[e]]));return d.join(',')},linearring:function b(a){var c=this,d=[];for(var e=0,f=a._points._coordinates.length;e<f;++e)d.push(qc.coordinate.apply(c,[a._points._coordinates[e]]));return d.join(',')},multilinestring:function b(a){var c=this,d=[];for(var e=0,f=a._geometries.length;e<f;++e)d.push('('+qc.linestring.apply(c,[a._geometries[e]])+')');return d.join(',')},polygon:function b(a){var c=this,d=[];d.push('('+qc.linestring.apply(this,[a._shell])+')');for(var e=0,f=a._holes.length;e<f;++e)d.push('('+qc.linestring.apply(c,[a._holes[e]])+')');return d.join(',')},multipolygon:function b(a){var c=this,d=[];for(var e=0,f=a._geometries.length;e<f;++e)d.push('('+qc.polygon.apply(c,[a._geometries[e]])+')');return d.join(',')},geometrycollection:function b(a){var c=this,d=[];for(var e=0,f=a._geometries.length;e<f;++e)d.push(c.extractGeometry(a._geometries[e]));return d.join(',')}},qd={point:function b(a){if(a===undefined){return this.geometryFactory.createPoint()}var c=a.trim().split(qa.spaces);return this.geometryFactory.createPoint(new pE(Number.parseFloat(c[0]),Number.parseFloat(c[1])))},multipoint:function b(a){var c=this;if(a===undefined){return this.geometryFactory.createMultiPoint()}var d,e=a.trim().split(','),f=[];for(var g=0,h=e.length;g<h;++g)d=e[g].replace(qa.trimParens,'$1'),f.push(qd.point.apply(c,[d]));return this.geometryFactory.createMultiPoint(f)},linestring:function b(a){if(a===undefined){return this.geometryFactory.createLineString()}var c=a.trim().split(','),d=[],e;for(var f=0,g=c.length;f<g;++f)e=c[f].trim().split(qa.spaces),d.push(new pE(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(d)},linearring:function b(a){if(a===undefined){return this.geometryFactory.createLinearRing()}var c=a.trim().split(','),d=[],e;for(var f=0,g=c.length;f<g;++f)e=c[f].trim().split(qa.spaces),d.push(new pE(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(d)},multilinestring:function b(a){var c=this;if(a===undefined){return this.geometryFactory.createMultiLineString()}var d,e=a.trim().split(qa.parenComma),f=[];for(var g=0,h=e.length;g<h;++g)d=e[g].replace(qa.trimParens,'$1'),f.push(qd.linestring.apply(c,[d]));return this.geometryFactory.createMultiLineString(f)},polygon:function b(a){var c=this;if(a===undefined){return this.geometryFactory.createPolygon()}var d,e,f,g=a.trim().split(qa.parenComma),h,i=[];for(var j=0,k=g.length;j<k;++j)d=g[j].replace(qa.trimParens,'$1'),e=qd.linestring.apply(c,[d]),f=c.geometryFactory.createLinearRing(e._points),j===0?(h=f):i.push(f);return this.geometryFactory.createPolygon(h,i)},multipolygon:function b(a){var c=this;if(a===undefined){return this.geometryFactory.createMultiPolygon()}var d,e=a.trim().split(qa.doubleParenComma),f=[];for(var g=0,h=e.length;g<h;++g)d=e[g].replace(qa.trimParens,'$1'),f.push(qd.polygon.apply(c,[d]));return this.geometryFactory.createMultiPolygon(f)},geometrycollection:function b(a){var c=this;if(a===undefined){return this.geometryFactory.createGeometryCollection()}a=a.replace(/,\s*([A-Za-z])/g,'|$1');var d=a.trim().split('|'),e=[];for(var f=0,g=d.length;f<g;++f)e.push(c.read(d[f]));return this.geometryFactory.createGeometryCollection(e)}},qe=function b(a){this.parser=new qb(a)};qe.prototype.write=function b(a){return this.parser.write(a)};qe.toLineString=function c(a,b){if(arguments.length!==2){throw new Error('Not implemented')}return'LINESTRING ( '+a.x+' '+a.y+', '+b.x+' '+b.y+' )'};var qf=function(a){function b(b){a.call(this,b);this.name='RuntimeException';this.message=b;this.stack=(new a()).stack}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;return b}(Error),qg=function(a){function b(){a.call(this);if(arguments.length===0)a.call(this);else if(arguments.length===1){var b=arguments[0];a.call(this,b)}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(qf),qh=function a(){};qh.prototype.interfaces_=function a(){return[]};qh.prototype.getClass=function a(){return qh};qh.shouldNeverReachHere=function a(){if(arguments.length===0)qh.shouldNeverReachHere(null);else if(arguments.length===1){var b=arguments[0];throw new qg('Should never reach here'+(b!==null?': '+b:''))}};qh.isTrue=function a(){var b,c;if(arguments.length===1)b=arguments[0],qh.isTrue(b,null);else if(arguments.length===2){b=arguments[0];c=arguments[1];if(!b){if(c===null){throw new qg()}else{throw new qg(c)}}}};qh.equals=function a(){var b,c,d;if(arguments.length===2)b=arguments[0],c=arguments[1],qh.equals(b,c,null);else if(arguments.length===3){b=arguments[0];c=arguments[1];d=arguments[2];if(!c.equals(b)){throw new qg('Expected '+b+' but encountered '+c+(d!==null?': '+d:''))}}};var qi=function a(){this._result=null;this._inputLines=Array(2).fill().map(function(){return Array(2)});this._intPt=new Array(2).fill(null);this._intLineIndex=null;this._isProper=null;this._pa=null;this._pb=null;this._precisionModel=null;this._intPt[0]=new pE();this._intPt[1]=new pE();this._pa=this._intPt[0];this._pb=this._intPt[1];this._result=0},qj={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};qi.prototype.getIndexAlongSegment=function c(a,b){this.computeIntLineIndex();return this._intLineIndex[a][b]};qi.prototype.getTopologySummary=function a(){var b=new pN();this.isEndPoint()&&b.append(' endpoint');this._isProper&&b.append(' proper');this.isCollinear()&&b.append(' collinear');return b.toString()};qi.prototype.computeIntersection=function e(a,b,c,d){this._inputLines[0][0]=a;this._inputLines[0][1]=b;this._inputLines[1][0]=c;this._inputLines[1][1]=d;this._result=this.computeIntersect(a,b,c,d)};qi.prototype.getIntersectionNum=function a(){return this._result};qi.prototype.computeIntLineIndex=function a(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var b=arguments[0],c=this.getEdgeDistance(b,0),d=this.getEdgeDistance(b,1);c>d?(this._intLineIndex[b][0]=0,this._intLineIndex[b][1]=1):(this._intLineIndex[b][0]=1,this._intLineIndex[b][1]=0)}};qi.prototype.isProper=function a(){return this.hasIntersection()&&this._isProper};qi.prototype.setPrecisionModel=function b(a){this._precisionModel=a};qi.prototype.isInteriorIntersection=function a(){var b=this;if(arguments.length===0){if(this.isInteriorIntersection(0)){return !0}if(this.isInteriorIntersection(1)){return !0}return !1}else if(arguments.length===1){var c=arguments[0];for(var d=0;d<this._result;d++){if(!(b._intPt[d].equals2D(b._inputLines[c][0])||b._intPt[d].equals2D(b._inputLines[c][1]))){return !0}}return !1}};qi.prototype.getIntersection=function b(a){return this._intPt[a]};qi.prototype.isEndPoint=function a(){return this.hasIntersection()&&!this._isProper};qi.prototype.hasIntersection=function a(){return this._result!==qi.NO_INTERSECTION};qi.prototype.getEdgeDistance=function c(a,b){var d=qi.computeEdgeDistance(this._intPt[b],this._inputLines[a][0],this._inputLines[a][1]);return d};qi.prototype.isCollinear=function a(){return this._result===qi.COLLINEAR_INTERSECTION};qi.prototype.toString=function a(){return qe.toLineString(this._inputLines[0][0],this._inputLines[0][1])+' - '+qe.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};qi.prototype.getEndpoint=function c(a,b){return this._inputLines[a][b]};qi.prototype.isIntersection=function b(a){var c=this;for(var d=0;d<this._result;d++){if(c._intPt[d].equals2D(a)){return !0}}return !1};qi.prototype.getIntersectionAlongSegment=function c(a,b){this.computeIntLineIndex();return this._intPt[this._intLineIndex[a][b]]};qi.prototype.interfaces_=function a(){return[]};qi.prototype.getClass=function a(){return qi};qi.computeEdgeDistance=function d(a,b,c){var e=Math.abs(c.x-b.x),f=Math.abs(c.y-b.y),g=-1;if(a.equals(b))g=0.0;else if(a.equals(c))e>f?(g=e):(g=f);else{var h=Math.abs(a.x-b.x),i=Math.abs(a.y-b.y);e>f?(g=h):(g=i);g===0.0&&!a.equals(b)&&(g=Math.max(h,i))};qh.isTrue(!(g===0.0&&!a.equals(b)),'Bad distance calculation');return g};qi.nonRobustComputeEdgeDistance=function d(a,b,c){var e=a.x-b.x,f=a.y-b.y,g=Math.sqrt(e*e+f*f);qh.isTrue(!(g===0.0&&!a.equals(b)),'Invalid distance calculation');return g};qj.DONT_INTERSECT.get=function(){return 0};qj.DO_INTERSECT.get=function(){return 1};qj.COLLINEAR.get=function(){return 2};qj.NO_INTERSECTION.get=function(){return 0};qj.POINT_INTERSECTION.get=function(){return 1};qj.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(qi,qj);var qk=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.isInSegmentEnvelopes=function b(a){var c=new p_(this._inputLines[0][0],this._inputLines[0][1]),d=new p_(this._inputLines[1][0],this._inputLines[1][1]);return c.contains(a)&&d.contains(a)};b.prototype.computeIntersection=function b(){if(arguments.length===3){var c=arguments[0],d=arguments[1],e=arguments[2];this._isProper=!1;if(p_.intersects(d,e,c)){if(qn.orientationIndex(d,e,c)===0&&qn.orientationIndex(e,d,c)===0){this._isProper=!0;(c.equals(d)||c.equals(e))&&(this._isProper=!1);this._result=a.POINT_INTERSECTION;return null}}this._result=a.NO_INTERSECTION}else{return a.prototype.computeIntersection.apply(this,arguments)}};b.prototype.normalizeToMinimum=function f(a,b,c,d,e){e.x=this.smallestInAbsValue(a.x,b.x,c.x,d.x);e.y=this.smallestInAbsValue(a.y,b.y,c.y,d.y);a.x-=e.x;a.y-=e.y;b.x-=e.x;b.y-=e.y;c.x-=e.x;c.y-=e.y;d.x-=e.x;d.y-=e.y};b.prototype.safeHCoordinateIntersection=function g(a,c,d,f){var h=null;try{h=pZ.intersection(a,c,d,f)}catch(e){if(e instanceof pX)h=b.nearestEndpoint(a,c,d,f);else{throw e}}finally{};return h};b.prototype.intersection=function f(a,c,d,e){var g=this.intersectionWithNormalization(a,c,d,e);this.isInSegmentEnvelopes(g)||(g=new pE(b.nearestEndpoint(a,c,d,e)));this._precisionModel!==null&&this._precisionModel.makePrecise(g);return g};b.prototype.smallestInAbsValue=function e(a,b,c,d){var f=a,g=Math.abs(f);Math.abs(b)<g&&(f=b,g=Math.abs(b));Math.abs(c)<g&&(f=c,g=Math.abs(c));Math.abs(d)<g&&(f=d);return f};b.prototype.checkDD=function f(a,b,c,d,e){var g=pS.intersection(a,b,c,d),h=this.isInSegmentEnvelopes(g);pY.out.println('DD in env = '+h+'  --------------------- '+g);e.distance(g)>0.0001&&pY.out.println('Distance = '+e.distance(g))};b.prototype.intersectionWithNormalization=function e(a,b,c,d){var f=new pE(a),g=new pE(b),h=new pE(c),i=new pE(d),j=new pE();this.normalizeToEnvCentre(f,g,h,i,j);var k=this.safeHCoordinateIntersection(f,g,h,i);k.x+=j.x;k.y+=j.y;return k};b.prototype.computeCollinearIntersection=function f(b,c,d,e){var g=p_.intersects(b,c,d),h=p_.intersects(b,c,e),i=p_.intersects(d,e,b),j=p_.intersects(d,e,c);if(g&&h){this._intPt[0]=d;this._intPt[1]=e;return a.COLLINEAR_INTERSECTION}if(i&&j){this._intPt[0]=b;this._intPt[1]=c;return a.COLLINEAR_INTERSECTION}if(g&&i){this._intPt[0]=d;this._intPt[1]=b;return d.equals(b)&&!h&&!j?a.POINT_INTERSECTION:a.COLLINEAR_INTERSECTION}if(g&&j){this._intPt[0]=d;this._intPt[1]=c;return d.equals(c)&&!h&&!i?a.POINT_INTERSECTION:a.COLLINEAR_INTERSECTION}if(h&&i){this._intPt[0]=e;this._intPt[1]=b;return e.equals(b)&&!g&&!j?a.POINT_INTERSECTION:a.COLLINEAR_INTERSECTION}if(h&&j){this._intPt[0]=e;this._intPt[1]=c;return e.equals(c)&&!g&&!i?a.POINT_INTERSECTION:a.COLLINEAR_INTERSECTION}return a.NO_INTERSECTION};b.prototype.normalizeToEnvCentre=function f(a,b,c,d,e){var g=a.x<b.x?a.x:b.x,h=a.y<b.y?a.y:b.y,i=a.x>b.x?a.x:b.x,j=a.y>b.y?a.y:b.y,k=c.x<d.x?c.x:d.x,l=c.y<d.y?c.y:d.y,m=c.x>d.x?c.x:d.x,n=c.y>d.y?c.y:d.y,o=g>k?g:k,p=i<m?i:m,q=h>l?h:l,r=j<n?j:n,s=(o+p)/2.0,t=(q+r)/2.0;e.x=s;e.y=t;a.x-=e.x;a.y-=e.y;b.x-=e.x;b.y-=e.y;c.x-=e.x;c.y-=e.y;d.x-=e.x;d.y-=e.y};b.prototype.computeIntersect=function f(b,c,d,e){this._isProper=!1;if(!p_.intersects(b,c,d,e)){return a.NO_INTERSECTION}var g=qn.orientationIndex(b,c,d),h=qn.orientationIndex(b,c,e);if(g>0&&h>0||g<0&&h<0){return a.NO_INTERSECTION}var i=qn.orientationIndex(d,e,b),j=qn.orientationIndex(d,e,c);if(i>0&&j>0||i<0&&j<0){return a.NO_INTERSECTION}var k=g===0&&h===0&&i===0&&j===0;if(k){return this.computeCollinearIntersection(b,c,d,e)}g===0||h===0||i===0||j===0?(this._isProper=!1,b.equals2D(d)||b.equals2D(e)?(this._intPt[0]=b):c.equals2D(d)||c.equals2D(e)?(this._intPt[0]=c):g===0?(this._intPt[0]=new pE(d)):h===0?(this._intPt[0]=new pE(e)):i===0?(this._intPt[0]=new pE(b)):j===0&&(this._intPt[0]=new pE(c))):(this._isProper=!0,this._intPt[0]=this.intersection(b,c,d,e));return a.POINT_INTERSECTION};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};b.nearestEndpoint=function e(a,b,c,d){var f=a,g=qn.distancePointLine(a,c,d),h=qn.distancePointLine(b,c,d);h<g&&(g=h,f=b);h=qn.distancePointLine(c,a,b);h<g&&(g=h,f=c);h=qn.distancePointLine(d,a,b);h<g&&(g=h,f=d);return f};return b}(qi),ql=function a(){};ql.prototype.interfaces_=function a(){return[]};ql.prototype.getClass=function a(){return ql};ql.orientationIndex=function d(a,b,c){var e=b.x-a.x,f=b.y-a.y,g=c.x-b.x,h=c.y-b.y;return ql.signOfDet2x2(e,f,g,h)};ql.signOfDet2x2=function e(a,b,c,d){var f=null,g=null,h=null;f=1;if(a===0.0||d===0.0){if(b===0.0||c===0.0){return 0}else if(b>0){if(c>0){return-f}else{return f}}else{if(c>0){return f}else{return-f}}}if(b===0.0||c===0.0){if(d>0){if(a>0){return f}else{return-f}}else{if(a>0){return-f}else{return f}}}if(b>0.0){if(d>0.0){if(b<=d);else f=-f,g=a,a=c,c=g,g=b,b=d,d=g}else b<=-d?(f=-f,c=-c,d=-d):(g=a,a=-c,c=g,g=b,b=-d,d=g)}else d>0.0?(-b<=d?(f=-f,a=-a,b=-b):(g=-a,a=c,c=g,g=-b,b=d,d=g)):b>=d?(a=-a,b=-b,c=-c,d=-d):(f=-f,g=-a,a=-c,c=g,g=-b,b=-d,d=g);if(a>0.0){if(c>0.0){if(a<=c);else{return f}}else{return f}}else{if(c>0.0){return-f}else{if(a>=c)f=-f,a=-a,c=-c;else{return-f}}}while(!0){h=Math.floor(c/a);c-=h*a;d-=h*b;if(d<0.0){return-f}if(d>b){return f}if(a>c+c){if(b<d+d){return f}}else{if(b>d+d){return-f}else c=a-c,d=b-d,f=-f}if(d===0.0){if(c===0.0){return 0}else{return-f}}if(c===0.0){return f}h=Math.floor(a/c);a-=h*c;b-=h*d;if(b<0.0){return f}if(b>d){return-f}if(c>a+a){if(d<b+b){return-f}}else{if(d>b+b){return f}else a=c-a,b=d-b,f=-f}if(b===0.0){if(a===0.0){return 0}else{return f}}if(a===0.0){return-f}}};var qm=function a(){this._p=null;this._crossingCount=0;this._isPointOnSegment=!1;var b=arguments[0];this._p=b};qm.prototype.countSegment=function c(a,b){if(a.x<this._p.x&&b.x<this._p.x){return null}if(this._p.x===b.x&&this._p.y===b.y){this._isPointOnSegment=!0;return null}if(a.y===this._p.y&&b.y===this._p.y){var d=a.x,e=b.x;d>e&&(d=b.x,e=a.x);this._p.x>=d&&this._p.x<=e&&(this._isPointOnSegment=!0);return null}if(a.y>this._p.y&&b.y<=this._p.y||b.y>this._p.y&&a.y<=this._p.y){var f=a.x-this._p.x,g=a.y-this._p.y,h=b.x-this._p.x,i=b.y-this._p.y,j=ql.signOfDet2x2(f,g,h,i);if(j===0.0){this._isPointOnSegment=!0;return null}i<g&&(j=-j);j>0.0&&this._crossingCount++}};qm.prototype.isPointInPolygon=function a(){return this.getLocation()!==pI.EXTERIOR};qm.prototype.getLocation=function a(){if(this._isPointOnSegment){return pI.BOUNDARY}if(this._crossingCount%2===1){return pI.INTERIOR}return pI.EXTERIOR};qm.prototype.isOnSegment=function a(){return this._isPointOnSegment};qm.prototype.interfaces_=function a(){return[]};qm.prototype.getClass=function a(){return qm};qm.locatePointInRing=function a(){if(arguments[0] instanceof pE&&pK(arguments[1],pU)){var b=arguments[0],c=arguments[1],d=new qm(b),e=new pE(),f=new pE();for(var g=1;g<c.size();g++){c.getCoordinate(g,e);c.getCoordinate(g-1,f);d.countSegment(e,f);if(d.isOnSegment()){return d.getLocation()}}return d.getLocation()}else if(arguments[0] instanceof pE&&arguments[1] instanceof Array){var h=arguments[0],i=arguments[1],j=new qm(h);for(var k=1;k<i.length;k++){var l=i[k],m=i[k-1];j.countSegment(l,m);if(j.isOnSegment()){return j.getLocation()}}return j.getLocation()}};var qn=function a(){},qo={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};qn.prototype.interfaces_=function a(){return[]};qn.prototype.getClass=function a(){return qn};qn.orientationIndex=function d(a,b,c){return pS.orientationIndex(a,b,c)};qn.signedArea=function a(){if(arguments[0] instanceof Array){var b=arguments[0];if(b.length<3){return 0.0}var c=0.0,d=b[0].x;for(var e=1;e<b.length-1;e++){var f=b[e].x-d,g=b[e+1].y,h=b[e-1].y;c+=f*(h-g)}return c/2.0}else if(pK(arguments[0],pU)){var i=arguments[0],j=i.size();if(j<3){return 0.0}var k=new pE(),l=new pE(),m=new pE();i.getCoordinate(0,l);i.getCoordinate(1,m);var n=l.x;m.x-=n;var o=0.0;for(var p=1;p<j-1;p++)k.y=l.y,l.x=m.x,l.y=m.y,i.getCoordinate(p+1,m),m.x-=n,o+=l.x*(k.y-m.y);return o/2.0}};qn.distanceLineLine=function e(a,b,c,d){if(a.equals(b)){return qn.distancePointLine(a,c,d)}if(c.equals(d)){return qn.distancePointLine(d,a,b)}var f=!1;if(!p_.intersects(a,b,c,d))f=!0;else{var g=(b.x-a.x)*(d.y-c.y)-(b.y-a.y)*(d.x-c.x);if(g===0)f=!0;else{var h=(a.y-c.y)*(d.x-c.x)-(a.x-c.x)*(d.y-c.y),i=(a.y-c.y)*(b.x-a.x)-(a.x-c.x)*(b.y-a.y),j=i/g,k=h/g;(k<0||k>1||j<0||j>1)&&(f=!0)}}if(f){return pL.min(qn.distancePointLine(a,c,d),qn.distancePointLine(b,c,d),qn.distancePointLine(c,a,b),qn.distancePointLine(d,a,b))}return 0.0};qn.isPointInRing=function c(a,b){return qn.locatePointInRing(a,b)!==pI.EXTERIOR};qn.computeLength=function b(a){var c=a.size();if(c<=1){return 0.0}var d=0.0,e=new pE();a.getCoordinate(0,e);var f=e.x,g=e.y;for(var h=1;h<c;h++){a.getCoordinate(h,e);var i=e.x,j=e.y,k=i-f,l=j-g;d+=Math.sqrt(k*k+l*l);f=i;g=j}return d};qn.isCCW=function(a){var c=a.length-1;if(c<3){throw new pv('Ring has fewer than 4 points, so orientation cannot be determined')}var d=a[0],e=0;for(var f=1;f<=c;f++){var g=a[f];g.y>d.y&&(d=g,e=f)}var h=e;do{h-=1,h<0&&(h=c)}while(a[h].equals2D(d)&&h!==e);var i=e;do{i=(i+1)%c}while(a[i].equals2D(d)&&i!==e);var j=a[h],k=a[i];if(j.equals2D(d)||k.equals2D(d)||j.equals2D(k)){return !1}var l=qn.computeOrientation(j,d,k),b=!1;l===0?(b=j.x>k.x):(b=l>0);return b};qn.locatePointInRing=function c(a,b){return qm.locatePointInRing(a,b)};qn.distancePointLinePerpendicular=function d(a,b,c){var e=(c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y),f=((b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y))/e;return Math.abs(f)*Math.sqrt(e)};qn.computeOrientation=function d(a,b,c){return qn.orientationIndex(a,b,c)};qn.distancePointLine=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1];if(c.length===0){throw new pv('Line array must contain at least one vertex')}var d=b.distance(c[0]);for(var e=0;e<c.length-1;e++){var f=qn.distancePointLine(b,c[e],c[e+1]);f<d&&(d=f)}return d}else if(arguments.length===3){var g=arguments[0],h=arguments[1],i=arguments[2];if(h.x===i.x&&h.y===i.y){return g.distance(h)}var j=(i.x-h.x)*(i.x-h.x)+(i.y-h.y)*(i.y-h.y),k=((g.x-h.x)*(i.x-h.x)+(g.y-h.y)*(i.y-h.y))/j;if(k<=0.0){return g.distance(h)}if(k>=1.0){return g.distance(i)}var l=((h.y-g.y)*(i.x-h.x)-(h.x-g.x)*(i.y-h.y))/j;return Math.abs(l)*Math.sqrt(j)}};qn.isOnLine=function c(a,b){var d=new qk();for(var e=1;e<b.length;e++){var f=b[e-1],g=b[e];d.computeIntersection(a,f,g);if(d.hasIntersection()){return !0}}return !1};qo.CLOCKWISE.get=function(){return-1};qo.RIGHT.get=function(){return qn.CLOCKWISE};qo.COUNTERCLOCKWISE.get=function(){return 1};qo.LEFT.get=function(){return qn.COUNTERCLOCKWISE};qo.COLLINEAR.get=function(){return 0};qo.STRAIGHT.get=function(){return qn.COLLINEAR};Object.defineProperties(qn,qo);var qp=function a(){};qp.prototype.filter=function b(a){};qp.prototype.interfaces_=function a(){return[]};qp.prototype.getClass=function a(){return qp};var qq=function a(){var b=arguments[0];this._envelope=null;this._factory=null;this._SRID=null;this._userData=null;this._factory=b;this._SRID=b.getSRID()},qr={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};qq.prototype.isGeometryCollection=function a(){return this.getSortIndex()===qq.SORTINDEX_GEOMETRYCOLLECTION};qq.prototype.getFactory=function a(){return this._factory};qq.prototype.getGeometryN=function b(a){return this};qq.prototype.getArea=function a(){return 0.0};qq.prototype.isRectangle=function a(){return !1};qq.prototype.equals=function a(){if(arguments[0] instanceof qq){var b=arguments[0];if(b===null){return !1}return this.equalsTopo(b)}else if(arguments[0] instanceof Object){var c=arguments[0];if(!(c instanceof qq)){return !1}var d=c;return this.equalsExact(d)}};qq.prototype.equalsExact=function b(a){return this===a||this.equalsExact(a,0)};qq.prototype.geometryChanged=function a(){this.apply(qq.geometryChangedFilter)};qq.prototype.geometryChangedAction=function a(){this._envelope=null};qq.prototype.equalsNorm=function b(a){if(a===null){return !1}return this.norm().equalsExact(a.norm())};qq.prototype.getLength=function a(){return 0.0};qq.prototype.getNumGeometries=function a(){return 1};qq.prototype.compareTo=function a(){if(arguments.length===1){var b=arguments[0],c=b;if(this.getSortIndex()!==c.getSortIndex()){return this.getSortIndex()-c.getSortIndex()}if(this.isEmpty()&&c.isEmpty()){return 0}if(this.isEmpty()){return-1}if(c.isEmpty()){return 1}return this.compareToSameClass(b)}else if(arguments.length===2){var d=arguments[0],e=arguments[1];if(this.getSortIndex()!==d.getSortIndex()){return this.getSortIndex()-d.getSortIndex()}if(this.isEmpty()&&d.isEmpty()){return 0}if(this.isEmpty()){return-1}if(d.isEmpty()){return 1}return this.compareToSameClass(d,e)}};qq.prototype.getUserData=function a(){return this._userData};qq.prototype.getSRID=function a(){return this._SRID};qq.prototype.getEnvelope=function a(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};qq.prototype.checkNotGeometryCollection=function b(a){if(a.getSortIndex()===qq.SORTINDEX_GEOMETRYCOLLECTION){throw new pv('This method does not support GeometryCollection arguments')}};qq.prototype.equal=function d(a,b,c){if(c===0){return a.equals(b)}return a.distance(b)<=c};qq.prototype.norm=function a(){var b=this.copy();b.normalize();return b};qq.prototype.getPrecisionModel=function a(){return this._factory.getPrecisionModel()};qq.prototype.getEnvelopeInternal=function a(){this._envelope===null&&(this._envelope=this.computeEnvelopeInternal());return new p_(this._envelope)};qq.prototype.setSRID=function b(a){this._SRID=a};qq.prototype.setUserData=function b(a){this._userData=a};qq.prototype.compare=function c(a,b){var d=a.iterator(),e=b.iterator();while(d.hasNext()&&e.hasNext()){var f=d.next(),g=e.next(),h=f.compareTo(g);if(h!==0){return h}}if(d.hasNext()){return 1}if(e.hasNext()){return-1}return 0};qq.prototype.hashCode=function a(){return this.getEnvelopeInternal().hashCode()};qq.prototype.isGeometryCollectionOrDerived=function a(){if(this.getSortIndex()===qq.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===qq.SORTINDEX_MULTIPOINT||this.getSortIndex()===qq.SORTINDEX_MULTILINESTRING||this.getSortIndex()===qq.SORTINDEX_MULTIPOLYGON){return !0}return !1};qq.prototype.interfaces_=function a(){return[pB,pA,pD]};qq.prototype.getClass=function a(){return qq};qq.hasNonEmptyElements=function b(a){for(var c=0;c<a.length;c++){if(!a[c].isEmpty()){return !0}}return !1};qq.hasNullElements=function b(a){for(var c=0;c<a.length;c++){if(a[c]===null){return !0}}return !1};qr.serialVersionUID.get=function(){return 8763622679187376702};qr.SORTINDEX_POINT.get=function(){return 0};qr.SORTINDEX_MULTIPOINT.get=function(){return 1};qr.SORTINDEX_LINESTRING.get=function(){return 2};qr.SORTINDEX_LINEARRING.get=function(){return 3};qr.SORTINDEX_MULTILINESTRING.get=function(){return 4};qr.SORTINDEX_POLYGON.get=function(){return 5};qr.SORTINDEX_MULTIPOLYGON.get=function(){return 6};qr.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};qr.geometryChangedFilter.get=function(){return qs};Object.defineProperties(qq,qr);var qs=function a(){};qs.interfaces_=function a(){return[qp]};qs.filter=function b(a){a.geometryChangedAction()};var qt=function a(){};qt.prototype.filter=function b(a){};qt.prototype.interfaces_=function a(){return[]};qt.prototype.getClass=function a(){return qt};var qu=function a(){},qv={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};qu.prototype.isInBoundary=function b(a){};qu.prototype.interfaces_=function a(){return[]};qu.prototype.getClass=function a(){return qu};qv.Mod2BoundaryNodeRule.get=function(){return qw};qv.EndPointBoundaryNodeRule.get=function(){return qx};qv.MultiValentEndPointBoundaryNodeRule.get=function(){return qy};qv.MonoValentEndPointBoundaryNodeRule.get=function(){return qz};qv.MOD2_BOUNDARY_RULE.get=function(){return new qw()};qv.ENDPOINT_BOUNDARY_RULE.get=function(){return new qx()};qv.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new qy()};qv.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new qz()};qv.OGC_SFS_BOUNDARY_RULE.get=function(){return qu.MOD2_BOUNDARY_RULE};Object.defineProperties(qu,qv);var qw=function a(){};qw.prototype.isInBoundary=function b(a){return a%2===1};qw.prototype.interfaces_=function a(){return[qu]};qw.prototype.getClass=function a(){return qw};var qx=function a(){};qx.prototype.isInBoundary=function b(a){return a>0};qx.prototype.interfaces_=function a(){return[qu]};qx.prototype.getClass=function a(){return qx};var qy=function a(){};qy.prototype.isInBoundary=function b(a){return a>1};qy.prototype.interfaces_=function a(){return[qu]};qy.prototype.getClass=function a(){return qy};var qz=function a(){};qz.prototype.isInBoundary=function b(a){return a===1};qz.prototype.interfaces_=function a(){return[qu]};qz.prototype.getClass=function a(){return qz};var qA=function a(){};qA.prototype.add=function a(){};qA.prototype.addAll=function a(){};qA.prototype.isEmpty=function a(){};qA.prototype.iterator=function a(){};qA.prototype.size=function a(){};qA.prototype.toArray=function a(){};qA.prototype.remove=function a(){};function qB(a){this.message=a||''}qB.prototype=new Error();qB.prototype.name='IndexOutOfBoundsException';var qC=function a(){};qC.prototype.hasNext=function a(){};qC.prototype.next=function a(){};qC.prototype.remove=function a(){};var qD=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function a(){};b.prototype.set=function a(){};b.prototype.isEmpty=function a(){};return b}(qA);function qE(a){this.message=a||''}qE.prototype=new Error();qE.prototype.name='NoSuchElementException';var qF=function(a){function b(){a.call(this);this.array_=[];arguments[0] instanceof qA&&this.addAll(arguments[0])}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.ensureCapacity=function a(){};b.prototype.interfaces_=function b(){return[a,qA]};b.prototype.add=function b(a){arguments.length===1?this.array_.push(a):this.array_.splice(arguments[0],arguments[1]);return !0};b.prototype.clear=function a(){this.array_=[]};b.prototype.addAll=function b(a){var c=this;for(var d=a.iterator();d.hasNext();)c.add(d.next());return !0};b.prototype.set=function c(a,b){var d=this.array_[a];this.array_[a]=b;return d};b.prototype.iterator=function a(){return new qG(this)};b.prototype.get=function b(a){if(a<0||a>=this.size()){throw new qB()}return this.array_[a]};b.prototype.isEmpty=function a(){return this.array_.length===0};b.prototype.size=function a(){return this.array_.length};b.prototype.toArray=function a(){var b=this,c=[];for(var d=0,e=this.array_.length;d<e;d++)c.push(b.array_[d]);return c};b.prototype.remove=function b(a){var c=this,d=!1;for(var e=0,f=this.array_.length;e<f;e++){if(c.array_[e]===a){c.array_.splice(e,1);d=!0;break}}return d};return b}(qD),qG=function(a){function b(b){a.call(this);this.arrayList_=b;this.position_=0}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.next=function a(){if(this.position_===this.arrayList_.size()){throw new qE()}return this.arrayList_.get(this.position_++)};b.prototype.hasNext=function a(){if(this.position_<this.arrayList_.size()){return !0}else{return !1}};b.prototype.set=function b(a){return this.arrayList_.set(this.position_-1,a)};b.prototype.remove=function a(){this.arrayList_.remove(this.arrayList_.get(this.position_))};return b}(qC),qH=function(a){function b(){a.call(this);if(arguments.length===0);else if(arguments.length===1){var b=arguments[0];this.ensureCapacity(b.length);this.add(b,!0)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.ensureCapacity(c.length);this.add(c,d)}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={coordArrayType:{configurable:!0}};c.coordArrayType.get=function(){return new Array(0).fill(null)};b.prototype.getCoordinate=function b(a){return this.get(a)};b.prototype.addAll=function b(){var c=this;if(arguments.length===2){var d=arguments[0],e=arguments[1],f=!1;for(var g=d.iterator();g.hasNext();)c.add(g.next(),e),f=!0;return f}else{return a.prototype.addAll.apply(this,arguments)}};b.prototype.clone=function(){var c=this,b=a.prototype.clone.call(this);for(var d=0;d<this.size();d++)b.add(d,c.get(d).copy());return b};b.prototype.toCoordinateArray=function a(){return this.toArray(b.coordArrayType)};b.prototype.add=function b(){var c=this;if(arguments.length===1){var d=arguments[0];a.prototype.add.call(this,d)}else if(arguments.length===2){if(arguments[0] instanceof Array&&typeof arguments[1]==='boolean'){var e=arguments[0],f=arguments[1];this.add(e,f,!0);return !0}else if(arguments[0] instanceof pE&&typeof arguments[1]==='boolean'){var g=arguments[0],h=arguments[1];if(!h){if(this.size()>=1){var i=this.get(this.size()-1);if(i.equals2D(g)){return null}}}a.prototype.add.call(this,g)}else if(arguments[0] instanceof Object&&typeof arguments[1]==='boolean'){var j=arguments[0],k=arguments[1];this.add(j,k);return !0}}else if(arguments.length===3){if(typeof arguments[2]==='boolean'&&(arguments[0] instanceof Array&&typeof arguments[1]==='boolean')){var l=arguments[0],m=arguments[1],n=arguments[2];if(n){for(var o=0;o<l.length;o++)c.add(l[o],m)}else{for(var p=l.length-1;p>=0;p--)c.add(l[p],m)}return !0}else if(typeof arguments[2]==='boolean'&&(Number.isInteger(arguments[0])&&arguments[1] instanceof pE)){var q=arguments[0],r=arguments[1],s=arguments[2];if(!s){var t=this.size();if(t>0){if(q>0){var u=this.get(q-1);if(u.equals2D(r)){return null}}if(q<t){var v=this.get(q);if(v.equals2D(r)){return null}}}}a.prototype.add.call(this,q,r)}}else if(arguments.length===4){var w=arguments[0],x=arguments[1],y=arguments[2],z=arguments[3],A=1;y>z&&(A=-1);for(var B=y;B!==z;B+=A)c.add(w[B],x);return !0}};b.prototype.closeRing=function a(){this.size()>0&&this.add(new pE(this.get(0)),!1)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};Object.defineProperties(b,c);return b}(qF),qI=function a(){},qJ={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};qJ.ForwardComparator.get=function(){return qK};qJ.BidirectionalComparator.get=function(){return qL};qJ.coordArrayType.get=function(){return new Array(0).fill(null)};qI.prototype.interfaces_=function a(){return[]};qI.prototype.getClass=function a(){return qI};qI.isRing=function b(a){if(a.length<4){return !1}if(!a[0].equals2D(a[a.length-1])){return !1}return !0};qI.ptNotInList=function c(a,b){for(var d=0;d<a.length;d++){var e=a[d];if(qI.indexOf(e,b)<0){return e}}return null};qI.scroll=function c(a,b){var d=qI.indexOf(b,a);if(d<0){return null}var e=new Array(a.length).fill(null);pY.arraycopy(a,d,e,0,a.length-d);pY.arraycopy(a,0,e,a.length-d,d);pY.arraycopy(e,0,a,0,a.length)};qI.equals=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1];if(b===c){return !0}if(b===null||c===null){return !1}if(b.length!==c.length){return !1}for(var d=0;d<b.length;d++){if(!b[d].equals(c[d])){return !1}}return !0}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2];if(e===f){return !0}if(e===null||f===null){return !1}if(e.length!==f.length){return !1}for(var h=0;h<e.length;h++){if(g.compare(e[h],f[h])!==0){return !1}}return !0}};qI.intersection=function c(a,b){var d=new qH();for(var e=0;e<a.length;e++)b.intersects(a[e])&&d.add(a[e],!0);return d.toCoordinateArray()};qI.hasRepeatedPoints=function b(a){for(var c=1;c<a.length;c++){if(a[c-1].equals(a[c])){return !0}}return !1};qI.removeRepeatedPoints=function b(a){if(!qI.hasRepeatedPoints(a)){return a}var c=new qH(a,!1);return c.toCoordinateArray()};qI.reverse=function b(a){var c=a.length-1,d=Math.trunc(c/2);for(var e=0;e<=d;e++){var f=a[e];a[e]=a[c-e];a[c-e]=f}};qI.removeNull=function b(a){var c=0;for(var d=0;d<a.length;d++)a[d]!==null&&c++;var e=new Array(c).fill(null);if(c===0){return e}var f=0;for(var g=0;g<a.length;g++)a[g]!==null&&(e[f++]=a[g]);return e};qI.copyDeep=function a(){if(arguments.length===1){var b=arguments[0],c=new Array(b.length).fill(null);for(var d=0;d<b.length;d++)c[d]=new pE(b[d]);return c}else if(arguments.length===5){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4];for(var j=0;j<i;j++)g[h+j]=new pE(e[f+j])}};qI.isEqualReversed=function c(a,b){for(var d=0;d<a.length;d++){var e=a[d],f=b[a.length-d-1];if(e.compareTo(f)!==0){return !1}}return !0};qI.envelope=function b(a){var c=new p_();for(var d=0;d<a.length;d++)c.expandToInclude(a[d]);return c};qI.toCoordinateArray=function b(a){return a.toArray(qI.coordArrayType)};qI.atLeastNCoordinatesOrNothing=function c(a,b){return b.length>=a?b:[]};qI.indexOf=function c(a,b){for(var d=0;d<b.length;d++){if(a.equals(b[d])){return d}}return-1};qI.increasingDirection=function b(a){for(var c=0;c<Math.trunc(a.length/2);c++){var d=a.length-1-c,e=a[c].compareTo(a[d]);if(e!==0){return e}}return 1};qI.compare=function(a,b){var d=0;while(d<a.length&&d<b.length){var c=a[d].compareTo(b[d]);if(c!==0){return c}d++}if(d<b.length){return-1}if(d<a.length){return 1}return 0};qI.minCoordinate=function b(a){var c=null;for(var d=0;d<a.length;d++)(c===null||c.compareTo(a[d])>0)&&(c=a[d]);return c};qI.extract=function d(a,b,c){b=pL.clamp(b,0,a.length);c=pL.clamp(c,-1,a.length);var e=c-b+1;c<0&&(e=0);b>=a.length&&(e=0);c<b&&(e=0);var f=new Array(e).fill(null);if(e===0){return f}var g=0;for(var h=b;h<=c;h++)f[g++]=a[h];return f};Object.defineProperties(qI,qJ);var qK=function a(){};qK.prototype.compare=function c(a,b){var d=a,e=b;return qI.compare(d,e)};qK.prototype.interfaces_=function a(){return[pC]};qK.prototype.getClass=function a(){return qK};var qL=function a(){};qL.prototype.compare=function c(a,b){var d=a,e=b;if(d.length<e.length){return-1}if(d.length>e.length){return 1}if(d.length===0){return 0}var f=qI.compare(d,e),g=qI.isEqualReversed(d,e);if(g){return 0}return f};qL.prototype.OLDcompare=function c(a,b){var d=a,e=b;if(d.length<e.length){return-1}if(d.length>e.length){return 1}if(d.length===0){return 0}var f=qI.increasingDirection(d),g=qI.increasingDirection(e),h=f>0?0:d.length-1,i=g>0?0:d.length-1;for(var j=0;j<d.length;j++){var k=d[h].compareTo(e[i]);if(k!==0){return k}h+=f;i+=g}return 0};qL.prototype.interfaces_=function a(){return[pC]};qL.prototype.getClass=function a(){return qL};var qM=function a(){};qM.prototype.get=function a(){};qM.prototype.put=function a(){};qM.prototype.size=function a(){};qM.prototype.values=function a(){};qM.prototype.entrySet=function a(){};var qN=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;return b}(qM);function qO(a){this.message=a||''}qO.prototype=new Error();qO.prototype.name='OperationNotSupported';function qP(){}qP.prototype=new qA();qP.prototype.contains=function(){};var qQ=function(a){function b(){a.call(this);this.array_=[];arguments[0] instanceof qA&&this.addAll(arguments[0])}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.contains=function b(a){var c=this;for(var d=0,e=this.array_.length;d<e;d++){var f=c.array_[d];if(f===a){return !0}}return !1};b.prototype.add=function b(a){if(this.contains(a)){return !1}this.array_.push(a);return !0};b.prototype.addAll=function b(a){var c=this;for(var d=a.iterator();d.hasNext();)c.add(d.next());return !0};b.prototype.remove=function b(a){throw new Error()};b.prototype.size=function a(){return this.array_.length};b.prototype.isEmpty=function a(){return this.array_.length===0};b.prototype.toArray=function a(){var b=this,c=[];for(var d=0,e=this.array_.length;d<e;d++)c.push(b.array_[d]);return c};b.prototype.iterator=function a(){return new qR(this)};return b}(qP),qR=function(a){function b(b){a.call(this);this.hashSet_=b;this.position_=0}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.next=function a(){if(this.position_===this.hashSet_.size()){throw new qE()}return this.hashSet_.array_[this.position_++]};b.prototype.hasNext=function a(){if(this.position_<this.hashSet_.size()){return !0}else{return !1}};b.prototype.remove=function a(){throw new qO()};return b}(qC),qS=0,qT=1;function qU(a){return a===null?qS:a.color}function qV(a){return a===null?null:a.parent}function qW(a,b){a!==null&&(a.color=b)}function qX(a){return a===null?null:a.left}function qY(a){return a===null?null:a.right}function qZ(){this.root_=null;this.size_=0}qZ.prototype=new qN();qZ.prototype.get=function(a){var b=this.root_;while(b!==null){var c=a.compareTo(b.key);if(c<0)b=b.left;else if(c>0)b=b.right;else{return b.value}}return null};qZ.prototype.put=function(a,b){if(this.root_===null){this.root_={key:a,value:b,left:null,right:null,parent:null,color:qS,getValue:function a(){return this.value},getKey:function a(){return this.key}};this.size_=1;return null}var c=this.root_,d,e;do{d=c;e=a.compareTo(c.key);if(e<0)c=c.left;else if(e>0)c=c.right;else{var f=c.value;c.value=b;return f}}while(c!==null);var g={key:a,left:null,right:null,value:b,parent:d,color:qS,getValue:function a(){return this.value},getKey:function a(){return this.key}};e<0?(d.left=g):(d.right=g);this.fixAfterInsertion(g);this.size_++;return null};qZ.prototype.fixAfterInsertion=function(a){var b=this;a.color=qT;while(a!=null&&a!==this.root_&&a.parent.color===qT){if(qV(a)===qX(qV(qV(a)))){var c=qY(qV(qV(a)));qU(c)===qT?(qW(qV(a),qS),qW(c,qS),qW(qV(qV(a)),qT),a=qV(qV(a))):(a===qY(qV(a))&&(a=qV(a),b.rotateLeft(a)),qW(qV(a),qS),qW(qV(qV(a)),qT),b.rotateRight(qV(qV(a))))}else{var d=qX(qV(qV(a)));qU(d)===qT?(qW(qV(a),qS),qW(d,qS),qW(qV(qV(a)),qT),a=qV(qV(a))):(a===qX(qV(a))&&(a=qV(a),b.rotateRight(a)),qW(qV(a),qS),qW(qV(qV(a)),qT),b.rotateLeft(qV(qV(a))))}}this.root_.color=qS};qZ.prototype.values=function(){var a=new qF(),b=this.getFirstEntry();if(b!==null){a.add(b.value);while((b=qZ.successor(b))!==null)a.add(b.value)}return a};qZ.prototype.entrySet=function(){var a=new qQ(),b=this.getFirstEntry();if(b!==null){a.add(b);while((b=qZ.successor(b))!==null)a.add(b)}return a};qZ.prototype.rotateLeft=function(a){if(a!=null){var b=a.right;a.right=b.left;b.left!=null&&(b.left.parent=a);b.parent=a.parent;a.parent===null?(this.root_=b):a.parent.left===a?(a.parent.left=b):(a.parent.right=b);b.left=a;a.parent=b}};qZ.prototype.rotateRight=function(a){if(a!=null){var b=a.left;a.left=b.right;b.right!=null&&(b.right.parent=a);b.parent=a.parent;a.parent===null?(this.root_=b):a.parent.right===a?(a.parent.right=b):(a.parent.left=b);b.right=a;a.parent=b}};qZ.prototype.getFirstEntry=function(){var a=this.root_;if(a!=null){while(a.left!=null)a=a.left}return a};qZ.successor=function(a){if(a===null){return null}else if(a.right!==null){var b=a.right;while(b.left!==null)b=b.left;return b}else{var c=a.parent,d=a;while(c!==null&&d===c.right)d=c,c=c.parent;return c}};qZ.prototype.size=function(){return this.size_};var q_=function a(){};q_.prototype.interfaces_=function a(){return[]};q_.prototype.getClass=function a(){return q_};function q$(){}q$.prototype=new qP();function ra(){this.array_=[];arguments[0] instanceof qA&&this.addAll(arguments[0])}ra.prototype=new q$();ra.prototype.contains=function(a){var b=this;for(var c=0,d=this.array_.length;c<d;c++){var e=b.array_[c];if(e.compareTo(a)===0){return !0}}return !1};ra.prototype.add=function(a){var b=this;if(this.contains(a)){return !1}for(var c=0,d=this.array_.length;c<d;c++){var e=b.array_[c];if(e.compareTo(a)===1){b.array_.splice(c,0,a);return !0}}this.array_.push(a);return !0};ra.prototype.addAll=function(a){var b=this;for(var c=a.iterator();c.hasNext();)b.add(c.next());return !0};ra.prototype.remove=function(a){throw new qO()};ra.prototype.size=function(){return this.array_.length};ra.prototype.isEmpty=function(){return this.array_.length===0};ra.prototype.toArray=function(){var a=this,b=[];for(var c=0,d=this.array_.length;c<d;c++)b.push(a.array_[c]);return b};ra.prototype.iterator=function(){return new rb(this)};var rb=function(a){this.treeSet_=a;this.position_=0};rb.prototype.next=function(){if(this.position_===this.treeSet_.size()){throw new qE()}return this.treeSet_.array_[this.position_++]};rb.prototype.hasNext=function(){if(this.position_<this.treeSet_.size()){return !0}else{return !1}};rb.prototype.remove=function(){throw new qO()};var rc=function a(){};rc.sort=function a(){var c=arguments[0],d,e,f,g;if(arguments.length===1)g=function(a,b){return a.compareTo(b)},c.sort(g);else if(arguments.length===2)f=arguments[1],g=function(a,b){return f.compare(a,b)},c.sort(g);else if(arguments.length===3){e=c.slice(arguments[1],arguments[2]);e.sort();var h=c.slice(0,arguments[1]).concat(e,c.slice(arguments[2],c.length));c.splice(0,c.length);for(d=0;d<h.length;d++)c.push(h[d])}else if(arguments.length===4){e=c.slice(arguments[1],arguments[2]);f=arguments[3];g=function(a,b){return f.compare(a,b)};e.sort(g);h=c.slice(0,arguments[1]).concat(e,c.slice(arguments[2],c.length));c.splice(0,c.length);for(d=0;d<h.length;d++)c.push(h[d])}};rc.asList=function b(a){var c=new qF();for(var d=0,e=a.length;d<e;d++)c.add(a[d]);return c};var rd=function a(){},re={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};re.P.get=function(){return 0};re.L.get=function(){return 1};re.A.get=function(){return 2};re.FALSE.get=function(){return-1};re.TRUE.get=function(){return-2};re.DONTCARE.get=function(){return-3};re.SYM_FALSE.get=function(){return'F'};re.SYM_TRUE.get=function(){return'T'};re.SYM_DONTCARE.get=function(){return'*'};re.SYM_P.get=function(){return'0'};re.SYM_L.get=function(){return'1'};re.SYM_A.get=function(){return'2'};rd.prototype.interfaces_=function a(){return[]};rd.prototype.getClass=function a(){return rd};rd.toDimensionSymbol=function b(a){switch(a){case rd.FALSE:return rd.SYM_FALSE;case rd.TRUE:return rd.SYM_TRUE;case rd.DONTCARE:return rd.SYM_DONTCARE;case rd.P:return rd.SYM_P;case rd.L:return rd.SYM_L;case rd.A:return rd.SYM_A;default:};throw new pv('Unknown dimension value: '+a)};rd.toDimensionValue=function b(a){switch(pP.toUpperCase(a)){case rd.SYM_FALSE:return rd.FALSE;case rd.SYM_TRUE:return rd.TRUE;case rd.SYM_DONTCARE:return rd.DONTCARE;case rd.SYM_P:return rd.P;case rd.SYM_L:return rd.L;case rd.SYM_A:return rd.A;default:};throw new pv('Unknown dimension symbol: '+a)};Object.defineProperties(rd,re);var rf=function a(){};rf.prototype.filter=function b(a){};rf.prototype.interfaces_=function a(){return[]};rf.prototype.getClass=function a(){return rf};var rg=function a(){};rg.prototype.filter=function c(a,b){};rg.prototype.isDone=function a(){};rg.prototype.isGeometryChanged=function a(){};rg.prototype.interfaces_=function a(){return[]};rg.prototype.getClass=function a(){return rg};var rh=function(a){function b(b,c){a.call(this,c);this._geometries=b||[];if(a.hasNullElements(this._geometries)){throw new pv('geometries must not contain null elements')}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.computeEnvelopeInternal=function a(){var b=this,c=new p_();for(var d=0;d<this._geometries.length;d++)c.expandToInclude(b._geometries[d].getEnvelopeInternal());return c};b.prototype.getGeometryN=function b(a){return this._geometries[a]};b.prototype.getSortIndex=function b(){return a.SORTINDEX_GEOMETRYCOLLECTION};b.prototype.getCoordinates=function a(){var b=this,c=new Array(this.getNumPoints()).fill(null),d=-1;for(var e=0;e<this._geometries.length;e++){var f=b._geometries[e].getCoordinates();for(var g=0;g<f.length;g++)d++,c[d]=f[g]}return c};b.prototype.getArea=function a(){var b=this,c=0.0;for(var d=0;d<this._geometries.length;d++)c+=b._geometries[d].getArea();return c};b.prototype.equalsExact=function b(){var c=this;if(arguments.length===2){var d=arguments[0],e=arguments[1];if(!this.isEquivalentClass(d)){return !1}var f=d;if(this._geometries.length!==f._geometries.length){return !1}for(var g=0;g<this._geometries.length;g++){if(!c._geometries[g].equalsExact(f._geometries[g],e)){return !1}}return !0}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.normalize=function a(){var b=this;for(var c=0;c<this._geometries.length;c++)b._geometries[c].normalize();rc.sort(this._geometries)};b.prototype.getCoordinate=function a(){if(this.isEmpty()){return null}return this._geometries[0].getCoordinate()};b.prototype.getBoundaryDimension=function a(){var b=this,c=rd.FALSE;for(var d=0;d<this._geometries.length;d++)c=Math.max(c,b._geometries[d].getBoundaryDimension());return c};b.prototype.getDimension=function a(){var b=this,c=rd.FALSE;for(var d=0;d<this._geometries.length;d++)c=Math.max(c,b._geometries[d].getDimension());return c};b.prototype.getLength=function a(){var b=this,c=0.0;for(var d=0;d<this._geometries.length;d++)c+=b._geometries[d].getLength();return c};b.prototype.getNumPoints=function a(){var b=this,c=0;for(var d=0;d<this._geometries.length;d++)c+=b._geometries[d].getNumPoints();return c};b.prototype.getNumGeometries=function a(){return this._geometries.length};b.prototype.reverse=function a(){var b=this,c=this._geometries.length,d=new Array(c).fill(null);for(var e=0;e<this._geometries.length;e++)d[e]=b._geometries[e].reverse();return this.getFactory().createGeometryCollection(d)};b.prototype.compareToSameClass=function a(){var b=this;if(arguments.length===1){var c=arguments[0],d=new ra(rc.asList(this._geometries)),e=new ra(rc.asList(c._geometries));return this.compare(d,e)}else if(arguments.length===2){var f=arguments[0],g=arguments[1],h=f,i=this.getNumGeometries(),j=h.getNumGeometries(),k=0;while(k<i&&k<j){var l=b.getGeometryN(k),m=h.getGeometryN(k),n=l.compareToSameClass(m,g);if(n!==0){return n}k++}if(k<i){return 1}if(k<j){return-1}return 0}};b.prototype.apply=function a(){var b=this;if(pK(arguments[0],qt)){var c=arguments[0];for(var d=0;d<this._geometries.length;d++)b._geometries[d].apply(c)}else if(pK(arguments[0],rg)){var e=arguments[0];if(this._geometries.length===0){return null}for(var f=0;f<this._geometries.length;f++){b._geometries[f].apply(e);if(e.isDone()){break}}e.isGeometryChanged()&&this.geometryChanged()}else if(pK(arguments[0],rf)){var g=arguments[0];g.filter(this);for(var h=0;h<this._geometries.length;h++)b._geometries[h].apply(g)}else if(pK(arguments[0],qp)){var i=arguments[0];i.filter(this);for(var j=0;j<this._geometries.length;j++)b._geometries[j].apply(i)}};b.prototype.getBoundary=function a(){this.checkNotGeometryCollection(this);qh.shouldNeverReachHere();return null};b.prototype.clone=function b(){var c=this,d=a.prototype.clone.call(this);d._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)d._geometries[e]=c._geometries[e].clone();return d};b.prototype.getGeometryType=function a(){return'GeometryCollection'};b.prototype.copy=function a(){var c=this,d=new Array(this._geometries.length).fill(null);for(var e=0;e<d.length;e++)d[e]=c._geometries[e].copy();return new b(d,this._factory)};b.prototype.isEmpty=function a(){var b=this;for(var c=0;c<this._geometries.length;c++){if(!b._geometries[c].isEmpty()){return !1}}return !0};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return-5694727726395021000};Object.defineProperties(b,c);return b}(qq),ri=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.getSortIndex=function a(){return qq.SORTINDEX_MULTILINESTRING};b.prototype.equalsExact=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1];if(!this.isEquivalentClass(c)){return !1}return a.prototype.equalsExact.call(this,c,d)}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.getBoundaryDimension=function a(){if(this.isClosed()){return rd.FALSE}return 0};b.prototype.isClosed=function a(){var b=this;if(this.isEmpty()){return !1}for(var c=0;c<this._geometries.length;c++){if(!b._geometries[c].isClosed()){return !1}}return !0};b.prototype.getDimension=function a(){return 1};b.prototype.reverse=function a(){var b=this,c=this._geometries.length,d=new Array(c).fill(null);for(var e=0;e<this._geometries.length;e++)d[c-1-e]=b._geometries[e].reverse();return this.getFactory().createMultiLineString(d)};b.prototype.getBoundary=function a(){return new rj(this).getBoundary()};b.prototype.getGeometryType=function a(){return'MultiLineString'};b.prototype.copy=function a(){var c=this,d=new Array(this._geometries.length).fill(null);for(var e=0;e<d.length;e++)d[e]=c._geometries[e].copy();return new b(d,this._factory)};b.prototype.interfaces_=function a(){return[q_]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return 8166665132445433741};Object.defineProperties(b,c);return b}(rh),rj=function a(){this._geom=null;this._geomFact=null;this._bnRule=null;this._endpointMap=null;if(arguments.length===1){var b=arguments[0],c=qu.MOD2_BOUNDARY_RULE;this._geom=b;this._geomFact=b.getFactory();this._bnRule=c}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this._geom=d;this._geomFact=d.getFactory();this._bnRule=e}};rj.prototype.boundaryMultiLineString=function b(a){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}var c=this.computeBoundaryCoordinates(a);if(c.length===1){return this._geomFact.createPoint(c[0])}return this._geomFact.createMultiPointFromCoords(c)};rj.prototype.getBoundary=function a(){if(this._geom instanceof ru){return this.boundaryLineString(this._geom)}if(this._geom instanceof ri){return this.boundaryMultiLineString(this._geom)}return this._geom.getBoundary()};rj.prototype.boundaryLineString=function b(a){if(this._geom.isEmpty()){return this.getEmptyMultiPoint()}if(a.isClosed()){var c=this._bnRule.isInBoundary(2);if(c){return a.getStartPoint()}else{return this._geomFact.createMultiPoint()}}return this._geomFact.createMultiPoint([a.getStartPoint(),a.getEndPoint()])};rj.prototype.getEmptyMultiPoint=function a(){return this._geomFact.createMultiPoint()};rj.prototype.computeBoundaryCoordinates=function b(a){var c=this,d=new qF();this._endpointMap=new qZ();for(var e=0;e<a.getNumGeometries();e++){var f=a.getGeometryN(e);if(f.getNumPoints()===0){continue}c.addEndpoint(f.getCoordinateN(0));c.addEndpoint(f.getCoordinateN(f.getNumPoints()-1))}for(var g=this._endpointMap.entrySet().iterator();g.hasNext();){var h=g.next(),i=h.getValue(),j=i.count;c._bnRule.isInBoundary(j)&&d.add(h.getKey())}return qI.toCoordinateArray(d)};rj.prototype.addEndpoint=function b(a){var c=this._endpointMap.get(a);c===null&&(c=new rk(),this._endpointMap.put(a,c));c.count++};rj.prototype.interfaces_=function a(){return[]};rj.prototype.getClass=function a(){return rj};rj.getBoundary=function a(){if(arguments.length===1){var b=arguments[0],c=new rj(b);return c.getBoundary()}else if(arguments.length===2){var d=arguments[0],e=arguments[1],f=new rj(d,e);return f.getBoundary()}};var rk=function a(){this.count=null};rk.prototype.interfaces_=function a(){return[]};rk.prototype.getClass=function a(){return rk};function rl(){}function rm(){}var rn=function a(){};function ro(){}function rp(){}function rq(){}var rr=function a(){},rs={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};rr.prototype.interfaces_=function a(){return[]};rr.prototype.getClass=function a(){return rr};rr.chars=function c(a,b){var d=new Array(b).fill(null);for(var e=0;e<b;e++)d[e]=a;return String(d)};rr.getStackTrace=function a(){if(arguments.length===1){var b=arguments[0],c=new ro(),d=new rl(c);b.printStackTrace(d);return c.toString()}else if(arguments.length===2){var f=arguments[0],g=arguments[1],h='',i=new rm(rr.getStackTrace(f)),j=new rq(i);for(var k=0;k<g;k++){try{h+=j.readLine()+rr.NEWLINE}catch(a){if(a instanceof rp)qh.shouldNeverReachHere();else{throw a}}finally{}}return h}};rr.split=function c(a,b){var d=b.length,e=new qF(),f=''+a,g=f.indexOf(b);while(g>=0){var h=f.substring(0,g);e.add(h);f=f.substring(g+d);g=f.indexOf(b)}f.length>0&&e.add(f);var i=new Array(e.size()).fill(null);for(var j=0;j<i.length;j++)i[j]=e.get(j);return i};rr.toString=function a(){if(arguments.length===1){var b=arguments[0];return rr.SIMPLE_ORDINATE_FORMAT.format(b)}};rr.spaces=function b(a){return rr.chars(' ',a)};rs.NEWLINE.get=function(){return pY.getProperty('line.separator')};rs.SIMPLE_ORDINATE_FORMAT.get=function(){return new rn('0.#')};Object.defineProperties(rr,rs);var rt=function a(){};rt.prototype.interfaces_=function a(){return[]};rt.prototype.getClass=function a(){return rt};rt.copyCoord=function e(a,b,c,d){var f=Math.min(a.getDimension(),c.getDimension());for(var g=0;g<f;g++)c.setOrdinate(d,g,a.getOrdinate(b,g))};rt.isRing=function b(a){var c=a.size();if(c===0){return !0}if(c<=3){return !1}return a.getOrdinate(0,pU.X)===a.getOrdinate(c-1,pU.X)&&a.getOrdinate(0,pU.Y)===a.getOrdinate(c-1,pU.Y)};rt.isEqual=function c(a,b){var d=a.size(),e=b.size();if(d!==e){return !1}var f=Math.min(a.getDimension(),b.getDimension());for(var g=0;g<d;g++){for(var h=0;h<f;h++){var i=a.getOrdinate(g,h),j=b.getOrdinate(g,h);if(a.getOrdinate(g,h)===b.getOrdinate(g,h)){continue}if(pw.isNaN(i)&&pw.isNaN(j)){continue}return !1}}return !0};rt.extend=function d(a,b,c){var e=a.create(c,b.getDimension()),f=b.size();rt.copy(b,0,e,0,f);if(f>0){for(var g=f;g<c;g++)rt.copy(b,f-1,e,g,1)}return e};rt.reverse=function b(a){var c=a.size()-1,d=Math.trunc(c/2);for(var e=0;e<=d;e++)rt.swap(a,e,c-e)};rt.swap=function d(a,b,c){if(b===c){return null}for(var e=0;e<a.getDimension();e++){var f=a.getOrdinate(b,e);a.setOrdinate(b,e,a.getOrdinate(c,e));a.setOrdinate(c,e,f)}};rt.copy=function f(a,b,c,d,e){for(var g=0;g<e;g++)rt.copyCoord(a,b+g,c,d+g)};rt.toString=function a(){if(arguments.length===1){var b=arguments[0],c=b.size();if(c===0){return'()'}var d=b.getDimension(),e=new pN();e.append('(');for(var f=0;f<c;f++){f>0&&e.append(' ');for(var g=0;g<d;g++)g>0&&e.append(','),e.append(rr.toString(b.getOrdinate(f,g)))}e.append(')');return e.toString()}};rt.ensureValidRing=function c(a,b){var d=b.size();if(d===0){return b}if(d<=3){return rt.createClosedRing(a,b,4)}var e=b.getOrdinate(0,pU.X)===b.getOrdinate(d-1,pU.X)&&b.getOrdinate(0,pU.Y)===b.getOrdinate(d-1,pU.Y);if(e){return b}return rt.createClosedRing(a,b,d+1)};rt.createClosedRing=function d(a,b,c){var e=a.create(c,b.getDimension()),f=b.size();rt.copy(b,0,e,0,f);for(var g=f;g<c;g++)rt.copy(b,0,e,g,1);return e};var ru=function(a){function b(b,c){a.call(this,c);this._points=null;this.init(b)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.computeEnvelopeInternal=function a(){if(this.isEmpty()){return new p_()}return this._points.expandEnvelope(new p_())};b.prototype.isRing=function a(){return this.isClosed()&&this.isSimple()};b.prototype.getSortIndex=function b(){return a.SORTINDEX_LINESTRING};b.prototype.getCoordinates=function a(){return this._points.toCoordinateArray()};b.prototype.equalsExact=function b(){var c=this;if(arguments.length===2){var d=arguments[0],e=arguments[1];if(!this.isEquivalentClass(d)){return !1}var f=d;if(this._points.size()!==f._points.size()){return !1}for(var g=0;g<this._points.size();g++){if(!c.equal(c._points.getCoordinate(g),f._points.getCoordinate(g),e)){return !1}}return !0}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.normalize=function a(){var b=this;for(var c=0;c<Math.trunc(this._points.size()/2);c++){var d=b._points.size()-1-c;if(!b._points.getCoordinate(c).equals(b._points.getCoordinate(d))){b._points.getCoordinate(c).compareTo(b._points.getCoordinate(d))>0&&rt.reverse(b._points);return null}}};b.prototype.getCoordinate=function a(){if(this.isEmpty()){return null}return this._points.getCoordinate(0)};b.prototype.getBoundaryDimension=function a(){if(this.isClosed()){return rd.FALSE}return 0};b.prototype.isClosed=function a(){if(this.isEmpty()){return !1}return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))};b.prototype.getEndPoint=function a(){if(this.isEmpty()){return null}return this.getPointN(this.getNumPoints()-1)};b.prototype.getDimension=function a(){return 1};b.prototype.getLength=function a(){return qn.computeLength(this._points)};b.prototype.getNumPoints=function a(){return this._points.size()};b.prototype.reverse=function a(){var b=this._points.copy();rt.reverse(b);var c=this.getFactory().createLineString(b);return c};b.prototype.compareToSameClass=function a(){var b=this;if(arguments.length===1){var c=arguments[0],d=c,e=0,f=0;while(e<this._points.size()&&f<d._points.size()){var g=b._points.getCoordinate(e).compareTo(d._points.getCoordinate(f));if(g!==0){return g}e++;f++}if(e<this._points.size()){return 1}if(f<d._points.size()){return-1}return 0}else if(arguments.length===2){var h=arguments[0],i=arguments[1],j=h;return i.compare(this._points,j._points)}};b.prototype.apply=function a(){var b=this;if(pK(arguments[0],qt)){var c=arguments[0];for(var d=0;d<this._points.size();d++)c.filter(b._points.getCoordinate(d))}else if(pK(arguments[0],rg)){var e=arguments[0];if(this._points.size()===0){return null}for(var f=0;f<this._points.size();f++){e.filter(b._points,f);if(e.isDone()){break}}e.isGeometryChanged()&&this.geometryChanged()}else if(pK(arguments[0],rf)){var g=arguments[0];g.filter(this)}else if(pK(arguments[0],qp)){var h=arguments[0];h.filter(this)}};b.prototype.getBoundary=function a(){return new rj(this).getBoundary()};b.prototype.isEquivalentClass=function c(a){return a instanceof b};b.prototype.clone=function b(){var c=a.prototype.clone.call(this);c._points=this._points.clone();return c};b.prototype.getCoordinateN=function b(a){return this._points.getCoordinate(a)};b.prototype.getGeometryType=function a(){return'LineString'};b.prototype.copy=function a(){return new b(this._points.copy(),this._factory)};b.prototype.getCoordinateSequence=function a(){return this._points};b.prototype.isEmpty=function a(){return this._points.size()===0};b.prototype.init=function b(a){a===null&&(a=this.getFactory().getCoordinateSequenceFactory().create([]));if(a.size()===1){throw new pv('Invalid number of points in LineString (found '+a.size()+' - must be 0 or >= 2)')}this._points=a};b.prototype.isCoordinate=function b(a){var c=this;for(var d=0;d<this._points.size();d++){if(c._points.getCoordinate(d).equals(a)){return !0}}return !1};b.prototype.getStartPoint=function a(){if(this.isEmpty()){return null}return this.getPointN(0)};b.prototype.getPointN=function b(a){return this.getFactory().createPoint(this._points.getCoordinate(a))};b.prototype.interfaces_=function a(){return[q_]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return 3110669828065365560};Object.defineProperties(b,c);return b}(qq),rv=function a(){};rv.prototype.interfaces_=function a(){return[]};rv.prototype.getClass=function a(){return rv};var rw=function(a){function b(b,c){a.call(this,c);this._coordinates=b||null;this.init(this._coordinates)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.computeEnvelopeInternal=function a(){if(this.isEmpty()){return new p_()}var b=new p_();b.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0));return b};b.prototype.getSortIndex=function b(){return a.SORTINDEX_POINT};b.prototype.getCoordinates=function a(){return this.isEmpty()?[]:[this.getCoordinate()]};b.prototype.equalsExact=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1];if(!this.isEquivalentClass(c)){return !1}if(this.isEmpty()&&c.isEmpty()){return !0}if(this.isEmpty()!==c.isEmpty()){return !1}return this.equal(c.getCoordinate(),this.getCoordinate(),d)}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.normalize=function a(){};b.prototype.getCoordinate=function a(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null};b.prototype.getBoundaryDimension=function a(){return rd.FALSE};b.prototype.getDimension=function a(){return 0};b.prototype.getNumPoints=function a(){return this.isEmpty()?0:1};b.prototype.reverse=function a(){return this.copy()};b.prototype.getX=function a(){if(this.getCoordinate()===null){throw new Error('getX called on empty Point')}return this.getCoordinate().x};b.prototype.compareToSameClass=function a(){if(arguments.length===1){var b=arguments[0],c=b;return this.getCoordinate().compareTo(c.getCoordinate())}else if(arguments.length===2){var d=arguments[0],e=arguments[1],f=d;return e.compare(this._coordinates,f._coordinates)}};b.prototype.apply=function a(){if(pK(arguments[0],qt)){var b=arguments[0];if(this.isEmpty()){return null}b.filter(this.getCoordinate())}else if(pK(arguments[0],rg)){var c=arguments[0];if(this.isEmpty()){return null}c.filter(this._coordinates,0);c.isGeometryChanged()&&this.geometryChanged()}else if(pK(arguments[0],rf)){var d=arguments[0];d.filter(this)}else if(pK(arguments[0],qp)){var e=arguments[0];e.filter(this)}};b.prototype.getBoundary=function a(){return this.getFactory().createGeometryCollection(null)};b.prototype.clone=function b(){var c=a.prototype.clone.call(this);c._coordinates=this._coordinates.clone();return c};b.prototype.getGeometryType=function a(){return'Point'};b.prototype.copy=function a(){return new b(this._coordinates.copy(),this._factory)};b.prototype.getCoordinateSequence=function a(){return this._coordinates};b.prototype.getY=function a(){if(this.getCoordinate()===null){throw new Error('getY called on empty Point')}return this.getCoordinate().y};b.prototype.isEmpty=function a(){return this._coordinates.size()===0};b.prototype.init=function b(a){a===null&&(a=this.getFactory().getCoordinateSequenceFactory().create([]));qh.isTrue(a.size()<=1);this._coordinates=a};b.prototype.isSimple=function a(){return !0};b.prototype.interfaces_=function a(){return[rv]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return 4902022702746614570};Object.defineProperties(b,c);return b}(qq),rz=function a(){};rz.prototype.interfaces_=function a(){return[]};rz.prototype.getClass=function a(){return rz};var rA=function(a){function b(b,c,d){a.call(this,d);this._shell=null;this._holes=null;b===null&&(b=this.getFactory().createLinearRing());c===null&&(c=[]);if(a.hasNullElements(c)){throw new pv('holes must not contain null elements')}if(b.isEmpty()&&a.hasNonEmptyElements(c)){throw new pv('shell is empty but holes are not')}this._shell=b;this._holes=c}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.computeEnvelopeInternal=function a(){return this._shell.getEnvelopeInternal()};b.prototype.getSortIndex=function b(){return a.SORTINDEX_POLYGON};b.prototype.getCoordinates=function a(){var b=this;if(this.isEmpty()){return[]}var c=new Array(this.getNumPoints()).fill(null),d=-1,e=this._shell.getCoordinates();for(var f=0;f<e.length;f++)d++,c[d]=e[f];for(var g=0;g<this._holes.length;g++){var h=b._holes[g].getCoordinates();for(var i=0;i<h.length;i++)d++,c[d]=h[i]}return c};b.prototype.getArea=function a(){var b=this,c=0.0;c+=Math.abs(qn.signedArea(this._shell.getCoordinateSequence()));for(var d=0;d<this._holes.length;d++)c-=Math.abs(qn.signedArea(b._holes[d].getCoordinateSequence()));return c};b.prototype.isRectangle=function a(){if(this.getNumInteriorRing()!==0){return !1}if(this._shell===null){return !1}if(this._shell.getNumPoints()!==5){return !1}var b=this._shell.getCoordinateSequence(),c=this.getEnvelopeInternal();for(var d=0;d<5;d++){var e=b.getX(d);if(!(e===c.getMinX()||e===c.getMaxX())){return !1}var f=b.getY(d);if(!(f===c.getMinY()||f===c.getMaxY())){return !1}}var g=b.getX(0),h=b.getY(0);for(var i=1;i<=4;i++){var j=b.getX(i),k=b.getY(i),l=j!==g,m=k!==h;if(l===m){return !1}g=j;h=k}return !0};b.prototype.equalsExact=function b(){var c=this;if(arguments.length===2){var d=arguments[0],e=arguments[1];if(!this.isEquivalentClass(d)){return !1}var f=d,g=this._shell,h=f._shell;if(!g.equalsExact(h,e)){return !1}if(this._holes.length!==f._holes.length){return !1}for(var i=0;i<this._holes.length;i++){if(!c._holes[i].equalsExact(f._holes[i],e)){return !1}}return !0}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.normalize=function a(){var b=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var c=0;c<this._holes.length;c++)b.normalize(b._holes[c],!1);rc.sort(this._holes)}else if(arguments.length===2){var d=arguments[0],e=arguments[1];if(d.isEmpty()){return null}var f=new Array(d.getCoordinates().length-1).fill(null);pY.arraycopy(d.getCoordinates(),0,f,0,f.length);var g=qI.minCoordinate(d.getCoordinates());qI.scroll(f,g);pY.arraycopy(f,0,d.getCoordinates(),0,f.length);d.getCoordinates()[f.length]=f[0];qn.isCCW(d.getCoordinates())===e&&qI.reverse(d.getCoordinates())}};b.prototype.getCoordinate=function a(){return this._shell.getCoordinate()};b.prototype.getNumInteriorRing=function a(){return this._holes.length};b.prototype.getBoundaryDimension=function a(){return 1};b.prototype.getDimension=function a(){return 2};b.prototype.getLength=function a(){var b=this,c=0.0;c+=this._shell.getLength();for(var d=0;d<this._holes.length;d++)c+=b._holes[d].getLength();return c};b.prototype.getNumPoints=function a(){var b=this,c=this._shell.getNumPoints();for(var d=0;d<this._holes.length;d++)c+=b._holes[d].getNumPoints();return c};b.prototype.reverse=function a(){var b=this,c=this.copy();c._shell=this._shell.copy().reverse();c._holes=new Array(this._holes.length).fill(null);for(var d=0;d<this._holes.length;d++)c._holes[d]=b._holes[d].copy().reverse();return c};b.prototype.convexHull=function a(){return this.getExteriorRing().convexHull()};b.prototype.compareToSameClass=function a(){var b=this;if(arguments.length===1){var c=arguments[0],d=this._shell,e=c._shell;return d.compareToSameClass(e)}else if(arguments.length===2){var f=arguments[0],g=arguments[1],h=f,i=this._shell,j=h._shell,k=i.compareToSameClass(j,g);if(k!==0){return k}var l=this.getNumInteriorRing(),m=h.getNumInteriorRing(),n=0;while(n<l&&n<m){var o=b.getInteriorRingN(n),p=h.getInteriorRingN(n),q=o.compareToSameClass(p,g);if(q!==0){return q}n++}if(n<l){return 1}if(n<m){return-1}return 0}};b.prototype.apply=function b(a){var c=this;if(pK(a,qt)){this._shell.apply(a);for(var d=0;d<this._holes.length;d++)c._holes[d].apply(a)}else if(pK(a,rg)){this._shell.apply(a);if(!a.isDone()){for(var e=0;e<this._holes.length;e++){c._holes[e].apply(a);if(a.isDone()){break}}}a.isGeometryChanged()&&this.geometryChanged()}else if(pK(a,rf))a.filter(this);else if(pK(a,qp)){a.filter(this);this._shell.apply(a);for(var f=0;f<this._holes.length;f++)c._holes[f].apply(a)}};b.prototype.getBoundary=function a(){var b=this;if(this.isEmpty()){return this.getFactory().createMultiLineString()}var c=new Array(this._holes.length+1).fill(null);c[0]=this._shell;for(var d=0;d<this._holes.length;d++)c[d+1]=b._holes[d];if(c.length<=1){return this.getFactory().createLinearRing(c[0].getCoordinateSequence())}return this.getFactory().createMultiLineString(c)};b.prototype.clone=function b(){var c=this,d=a.prototype.clone.call(this);d._shell=this._shell.clone();d._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)d._holes[e]=c._holes[e].clone();return d};b.prototype.getGeometryType=function a(){return'Polygon'};b.prototype.copy=function a(){var c=this,d=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(var f=0;f<e.length;f++)e[f]=c._holes[f].copy();return new b(d,e,this._factory)};b.prototype.getExteriorRing=function a(){return this._shell};b.prototype.isEmpty=function a(){return this._shell.isEmpty()};b.prototype.getInteriorRingN=function b(a){return this._holes[a]};b.prototype.interfaces_=function a(){return[rz]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return-3494792200821764600};Object.defineProperties(b,c);return b}(qq),rB=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.getSortIndex=function a(){return qq.SORTINDEX_MULTIPOINT};b.prototype.isValid=function a(){return !0};b.prototype.equalsExact=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1];if(!this.isEquivalentClass(c)){return !1}return a.prototype.equalsExact.call(this,c,d)}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.getCoordinate=function b(){if(arguments.length===1){var c=arguments[0];return this._geometries[c].getCoordinate()}else{return a.prototype.getCoordinate.apply(this,arguments)}};b.prototype.getBoundaryDimension=function a(){return rd.FALSE};b.prototype.getDimension=function a(){return 0};b.prototype.getBoundary=function a(){return this.getFactory().createGeometryCollection(null)};b.prototype.getGeometryType=function a(){return'MultiPoint'};b.prototype.copy=function a(){var c=this,d=new Array(this._geometries.length).fill(null);for(var e=0;e<d.length;e++)d[e]=c._geometries[e].copy();return new b(d,this._factory)};b.prototype.interfaces_=function a(){return[rv]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return-8048474874175356000};Object.defineProperties(b,c);return b}(rh),rC=function(a){function b(b,c){b instanceof pE&&c instanceof rS&&(b=c.getCoordinateSequenceFactory().create(b));a.call(this,b,c);this.validateConstruction()}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};b.prototype.getSortIndex=function a(){return qq.SORTINDEX_LINEARRING};b.prototype.getBoundaryDimension=function a(){return rd.FALSE};b.prototype.isClosed=function b(){if(this.isEmpty()){return !0}return a.prototype.isClosed.call(this)};b.prototype.reverse=function a(){var b=this._points.copy();rt.reverse(b);var c=this.getFactory().createLinearRing(b);return c};b.prototype.validateConstruction=function c(){if(!this.isEmpty()&&!a.prototype.isClosed.call(this)){throw new pv('Points of LinearRing do not form a closed linestring')}if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<b.MINIMUM_VALID_SIZE){throw new pv('Invalid number of points in LinearRing (found '+this.getCoordinateSequence().size()+' - must be 0 or >= 4)')}};b.prototype.getGeometryType=function a(){return'LinearRing'};b.prototype.copy=function a(){return new b(this._points.copy(),this._factory)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};c.MINIMUM_VALID_SIZE.get=function(){return 4};c.serialVersionUID.get=function(){return-4261142084085851600};Object.defineProperties(b,c);return b}(ru),rD=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={serialVersionUID:{configurable:!0}};b.prototype.getSortIndex=function a(){return qq.SORTINDEX_MULTIPOLYGON};b.prototype.equalsExact=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1];if(!this.isEquivalentClass(c)){return !1}return a.prototype.equalsExact.call(this,c,d)}else{return a.prototype.equalsExact.apply(this,arguments)}};b.prototype.getBoundaryDimension=function a(){return 1};b.prototype.getDimension=function a(){return 2};b.prototype.reverse=function a(){var b=this,c=this._geometries.length,d=new Array(c).fill(null);for(var e=0;e<this._geometries.length;e++)d[e]=b._geometries[e].reverse();return this.getFactory().createMultiPolygon(d)};b.prototype.getBoundary=function a(){var b=this;if(this.isEmpty()){return this.getFactory().createMultiLineString()}var c=new qF();for(var d=0;d<this._geometries.length;d++){var e=b._geometries[d],f=e.getBoundary();for(var g=0;g<f.getNumGeometries();g++)c.add(f.getGeometryN(g))}var h=new Array(c.size()).fill(null);return this.getFactory().createMultiLineString(c.toArray(h))};b.prototype.getGeometryType=function a(){return'MultiPolygon'};b.prototype.copy=function a(){var c=this,d=new Array(this._geometries.length).fill(null);for(var e=0;e<d.length;e++)d[e]=c._geometries[e].copy();return new b(d,this._factory)};b.prototype.interfaces_=function a(){return[rz]};b.prototype.getClass=function a(){return b};c.serialVersionUID.get=function(){return-551033529766975900};Object.defineProperties(b,c);return b}(rh),rE=function b(a){this._factory=a||null;this._isUserDataCopied=!1},rF={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rE.prototype.setCopyUserData=function b(a){this._isUserDataCopied=a};rE.prototype.edit=function c(a,b){if(a===null){return null}var d=this.editInternal(a,b);this._isUserDataCopied&&d.setUserData(a.getUserData());return d};rE.prototype.editInternal=function c(a,b){this._factory===null&&(this._factory=a.getFactory());if(a instanceof rh){return this.editGeometryCollection(a,b)}if(a instanceof rA){return this.editPolygon(a,b)}if(a instanceof rw){return b.edit(a,this._factory)}if(a instanceof ru){return b.edit(a,this._factory)}qh.shouldNeverReachHere('Unsupported Geometry class: '+a.getClass().getName());return null};rE.prototype.editGeometryCollection=function c(a,b){var d=this,e=b.edit(a,this._factory),f=new qF();for(var g=0;g<e.getNumGeometries();g++){var h=d.edit(e.getGeometryN(g),b);if(h===null||h.isEmpty()){continue}f.add(h)}if(e.getClass()===rB){return this._factory.createMultiPoint(f.toArray([]))}if(e.getClass()===ri){return this._factory.createMultiLineString(f.toArray([]))}if(e.getClass()===rD){return this._factory.createMultiPolygon(f.toArray([]))}return this._factory.createGeometryCollection(f.toArray([]))};rE.prototype.editPolygon=function c(a,b){var d=this,e=b.edit(a,this._factory);e===null&&(e=this._factory.createPolygon(null));if(e.isEmpty()){return e}var f=this.edit(e.getExteriorRing(),b);if(f===null||f.isEmpty()){return this._factory.createPolygon()}var g=new qF();for(var h=0;h<e.getNumInteriorRing();h++){var i=d.edit(e.getInteriorRingN(h),b);if(i===null||i.isEmpty()){continue}g.add(i)}return this._factory.createPolygon(f,g.toArray([]))};rE.prototype.interfaces_=function a(){return[]};rE.prototype.getClass=function a(){return rE};rE.GeometryEditorOperation=function a(){};rF.NoOpGeometryOperation.get=function(){return rG};rF.CoordinateOperation.get=function(){return rH};rF.CoordinateSequenceOperation.get=function(){return rI};Object.defineProperties(rE,rF);var rG=function a(){};rG.prototype.edit=function c(a,b){return a};rG.prototype.interfaces_=function a(){return[rE.GeometryEditorOperation]};rG.prototype.getClass=function a(){return rG};var rH=function a(){};rH.prototype.edit=function c(a,b){var d=this.editCoordinates(a.getCoordinates(),a);if(d===null){return a}if(a instanceof rC){return b.createLinearRing(d)}if(a instanceof ru){return b.createLineString(d)}if(a instanceof rw){if(d.length>0){return b.createPoint(d[0])}else{return b.createPoint()}}return a};rH.prototype.interfaces_=function a(){return[rE.GeometryEditorOperation]};rH.prototype.getClass=function a(){return rH};var rI=function a(){};rI.prototype.edit=function c(a,b){if(a instanceof rC){return b.createLinearRing(this.edit(a.getCoordinateSequence(),a))}if(a instanceof ru){return b.createLineString(this.edit(a.getCoordinateSequence(),a))}if(a instanceof rw){return b.createPoint(this.edit(a.getCoordinateSequence(),a))}return a};rI.prototype.interfaces_=function a(){return[rE.GeometryEditorOperation]};rI.prototype.getClass=function a(){return rI};var rJ=function a(){var b=this;this._dimension=3;this._coordinates=null;if(arguments.length===1){if(arguments[0] instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var c=arguments[0];this._coordinates=new Array(c).fill(null);for(var d=0;d<c;d++)b._coordinates[d]=new pE()}else if(pK(arguments[0],pU)){var e=arguments[0];if(e===null){this._coordinates=new Array(0).fill(null);return null}this._dimension=e.getDimension();this._coordinates=new Array(e.size()).fill(null);for(var f=0;f<this._coordinates.length;f++)b._coordinates[f]=e.getCoordinateCopy(f)}}else if(arguments.length===2){if(arguments[0] instanceof Array&&Number.isInteger(arguments[1])){var g=arguments[0],h=arguments[1];this._coordinates=g;this._dimension=h;g===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],j=arguments[1];this._coordinates=new Array(i).fill(null);this._dimension=j;for(var k=0;k<i;k++)b._coordinates[k]=new pE()}}},rK={serialVersionUID:{configurable:!0}};rJ.prototype.setOrdinate=function d(a,b,c){switch(b){case pU.X:this._coordinates[a].x=c;break;case pU.Y:this._coordinates[a].y=c;break;case pU.Z:this._coordinates[a].z=c;break;default:throw new pv('invalid ordinateIndex')}};rJ.prototype.size=function a(){return this._coordinates.length};rJ.prototype.getOrdinate=function c(a,b){switch(b){case pU.X:return this._coordinates[a].x;case pU.Y:return this._coordinates[a].y;case pU.Z:return this._coordinates[a].z;default:};return pw.NaN};rJ.prototype.getCoordinate=function a(){if(arguments.length===1){var b=arguments[0];return this._coordinates[b]}else if(arguments.length===2){var c=arguments[0],d=arguments[1];d.x=this._coordinates[c].x;d.y=this._coordinates[c].y;d.z=this._coordinates[c].z}};rJ.prototype.getCoordinateCopy=function b(a){return new pE(this._coordinates[a])};rJ.prototype.getDimension=function a(){return this._dimension};rJ.prototype.getX=function b(a){return this._coordinates[a].x};rJ.prototype.clone=function a(){var b=this,c=new Array(this.size()).fill(null);for(var d=0;d<this._coordinates.length;d++)c[d]=b._coordinates[d].clone();return new rJ(c,this._dimension)};rJ.prototype.expandEnvelope=function b(a){var c=this;for(var d=0;d<this._coordinates.length;d++)a.expandToInclude(c._coordinates[d]);return a};rJ.prototype.copy=function a(){var b=this,c=new Array(this.size()).fill(null);for(var d=0;d<this._coordinates.length;d++)c[d]=b._coordinates[d].copy();return new rJ(c,this._dimension)};rJ.prototype.toString=function a(){var b=this;if(this._coordinates.length>0){var c=new pN(17*this._coordinates.length);c.append('(');c.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)c.append(', '),c.append(b._coordinates[d]);c.append(')');return c.toString()}else{return'()'}};rJ.prototype.getY=function b(a){return this._coordinates[a].y};rJ.prototype.toCoordinateArray=function a(){return this._coordinates};rJ.prototype.interfaces_=function a(){return[pU,pD]};rJ.prototype.getClass=function a(){return rJ};rK.serialVersionUID.get=function(){return-915438501601840600};Object.defineProperties(rJ,rK);var rL=function a(){},rM={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};rL.prototype.readResolve=function a(){return rL.instance()};rL.prototype.create=function a(){if(arguments.length===1){if(arguments[0] instanceof Array){var b=arguments[0];return new rJ(b)}else if(pK(arguments[0],pU)){var c=arguments[0];return new rJ(c)}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];e>3&&(e=3);if(e<2){return new rJ(d)}return new rJ(d,e)}};rL.prototype.interfaces_=function a(){return[pH,pD]};rL.prototype.getClass=function a(){return rL};rL.instance=function a(){return rL.instanceObject};rM.serialVersionUID.get=function(){return-4099577099607551500};rM.instanceObject.get=function(){return new rL()};Object.defineProperties(rL,rM);var rN=function(a){function b(){a.call(this);this.map_=new Map()}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function b(a){return this.map_.get(a)||null};b.prototype.put=function c(a,b){this.map_.set(a,b);return b};b.prototype.values=function a(){var b=new qF(),c=this.map_.values(),d=c.next();while(!d.done)b.add(d.value),d=c.next();return b};b.prototype.entrySet=function a(){var b=new qQ();this.map_.entries().forEach(function(a){return b.add(a)});return b};b.prototype.size=function a(){return this.map_.size()};return b}(qM),rO=function a(){this._modelType=null;this._scale=null;if(arguments.length===0)this._modelType=a.FLOATING;else if(arguments.length===1){if(arguments[0] instanceof rQ){var b=arguments[0];this._modelType=b;b===a.FIXED&&this.setScale(1.0)}else if(typeof arguments[0]==='number'){var c=arguments[0];this._modelType=a.FIXED;this.setScale(c)}else if(arguments[0] instanceof a){var d=arguments[0];this._modelType=d._modelType;this._scale=d._scale}}},rP={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};rO.prototype.equals=function b(a){if(!(a instanceof rO)){return !1}var c=a;return this._modelType===c._modelType&&this._scale===c._scale};rO.prototype.compareTo=function b(a){var c=a,d=this.getMaximumSignificantDigits(),e=c.getMaximumSignificantDigits();return new pO(d).compareTo(new pO(e))};rO.prototype.getScale=function a(){return this._scale};rO.prototype.isFloating=function a(){return this._modelType===rO.FLOATING||this._modelType===rO.FLOATING_SINGLE};rO.prototype.getType=function a(){return this._modelType};rO.prototype.toString=function a(){var b='UNKNOWN';this._modelType===rO.FLOATING?(b='Floating'):this._modelType===rO.FLOATING_SINGLE?(b='Floating-Single'):this._modelType===rO.FIXED&&(b='Fixed (Scale='+this.getScale()+')');return b};rO.prototype.makePrecise=function a(){if(typeof arguments[0]==='number'){var b=arguments[0];if(pw.isNaN(b)){return b}if(this._modelType===rO.FLOATING_SINGLE){var c=b;return c}if(this._modelType===rO.FIXED){return Math.round(b*this._scale)/this._scale}return b}else if(arguments[0] instanceof pE){var d=arguments[0];if(this._modelType===rO.FLOATING){return null}d.x=this.makePrecise(d.x);d.y=this.makePrecise(d.y)}};rO.prototype.getMaximumSignificantDigits=function a(){var b=16;this._modelType===rO.FLOATING?(b=16):this._modelType===rO.FLOATING_SINGLE?(b=6):this._modelType===rO.FIXED&&(b=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10))));return b};rO.prototype.setScale=function b(a){this._scale=Math.abs(a)};rO.prototype.interfaces_=function a(){return[pD,pA]};rO.prototype.getClass=function a(){return rO};rO.mostPrecise=function c(a,b){if(a.compareTo(b)>=0){return a}return b};rP.serialVersionUID.get=function(){return 7777263578777803835};rP.maximumPreciseValue.get=function(){return 9007199254740992.0};Object.defineProperties(rO,rP);var rQ=function b(a){this._name=a||null;b.nameToTypeMap.put(a,this)},rR={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};rQ.prototype.readResolve=function a(){return rQ.nameToTypeMap.get(this._name)};rQ.prototype.toString=function a(){return this._name};rQ.prototype.interfaces_=function a(){return[pD]};rQ.prototype.getClass=function a(){return rQ};rR.serialVersionUID.get=function(){return-5528602631731590000};rR.nameToTypeMap.get=function(){return new rN()};Object.defineProperties(rQ,rR);rO.Type=rQ;rO.FIXED=new rQ('FIXED');rO.FLOATING=new rQ('FLOATING');rO.FLOATING_SINGLE=new rQ('FLOATING SINGLE');var rS=function a(){this._precisionModel=new rO();this._SRID=0;this._coordinateSequenceFactory=a.getDefaultCoordinateSequenceFactory();if(arguments.length===0);else arguments.length===1?(pK(arguments[0],pH)?(this._coordinateSequenceFactory=arguments[0]):arguments[0] instanceof rO&&(this._precisionModel=arguments[0])):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2])},rT={serialVersionUID:{configurable:!0}};rS.prototype.toGeometry=function b(a){if(a.isNull()){return this.createPoint(null)}if(a.getMinX()===a.getMaxX()&&a.getMinY()===a.getMaxY()){return this.createPoint(new pE(a.getMinX(),a.getMinY()))}if(a.getMinX()===a.getMaxX()||a.getMinY()===a.getMaxY()){return this.createLineString([new pE(a.getMinX(),a.getMinY()),new pE(a.getMaxX(),a.getMaxY())])}return this.createPolygon(this.createLinearRing([new pE(a.getMinX(),a.getMinY()),new pE(a.getMinX(),a.getMaxY()),new pE(a.getMaxX(),a.getMaxY()),new pE(a.getMaxX(),a.getMinY()),new pE(a.getMinX(),a.getMinY())]),null)};rS.prototype.createLineString=function b(a){if(!a){return new ru(this.getCoordinateSequenceFactory().create([]),this)}else if(a instanceof Array){return new ru(this.getCoordinateSequenceFactory().create(a),this)}else if(pK(a,pU)){return new ru(a,this)}};rS.prototype.createMultiLineString=function a(){if(arguments.length===0){return new ri(null,this)}else if(arguments.length===1){var b=arguments[0];return new ri(b,this)}};rS.prototype.buildGeometry=function b(a){var c=null,d=!1,e=!1;for(var f=a.iterator();f.hasNext();){var g=f.next(),h=g.getClass();c===null&&(c=h);h!==c&&(d=!0);g.isGeometryCollectionOrDerived()&&(e=!0)}if(c===null){return this.createGeometryCollection()}if(d||e){return this.createGeometryCollection(rS.toGeometryArray(a))}var i=a.iterator().next(),j=a.size()>1;if(j){if(i instanceof rA){return this.createMultiPolygon(rS.toPolygonArray(a))}else if(i instanceof ru){return this.createMultiLineString(rS.toLineStringArray(a))}else if(i instanceof rw){return this.createMultiPoint(rS.toPointArray(a))};qh.shouldNeverReachHere('Unhandled class: '+i.getClass().getName())}return i};rS.prototype.createMultiPointFromCoords=function b(a){return this.createMultiPoint(a!==null?this.getCoordinateSequenceFactory().create(a):null)};rS.prototype.createPoint=function a(){if(arguments.length===0){return this.createPoint(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0] instanceof pE){var b=arguments[0];return this.createPoint(b!==null?this.getCoordinateSequenceFactory().create([b]):null)}else if(pK(arguments[0],pU)){var c=arguments[0];return new rw(c,this)}}};rS.prototype.getCoordinateSequenceFactory=function a(){return this._coordinateSequenceFactory};rS.prototype.createPolygon=function a(){if(arguments.length===0){return new rA(null,null,this)}else if(arguments.length===1){if(pK(arguments[0],pU)){var b=arguments[0];return this.createPolygon(this.createLinearRing(b))}else if(arguments[0] instanceof Array){var c=arguments[0];return this.createPolygon(this.createLinearRing(c))}else if(arguments[0] instanceof rC){var d=arguments[0];return this.createPolygon(d,null)}}else if(arguments.length===2){var e=arguments[0],f=arguments[1];return new rA(e,f,this)}};rS.prototype.getSRID=function a(){return this._SRID};rS.prototype.createGeometryCollection=function a(){if(arguments.length===0){return new rh(null,this)}else if(arguments.length===1){var b=arguments[0];return new rh(b,this)}};rS.prototype.createGeometry=function b(a){var c=new rE(this);return c.edit(a,{edit:function(){if(arguments.length===2){var a=arguments[0];return this._coordinateSequenceFactory.create(a)}}})};rS.prototype.getPrecisionModel=function a(){return this._precisionModel};rS.prototype.createLinearRing=function a(){if(arguments.length===0){return this.createLinearRing(this.getCoordinateSequenceFactory().create([]))}else if(arguments.length===1){if(arguments[0] instanceof Array){var b=arguments[0];return this.createLinearRing(b!==null?this.getCoordinateSequenceFactory().create(b):null)}else if(pK(arguments[0],pU)){var c=arguments[0];return new rC(c,this)}}};rS.prototype.createMultiPolygon=function a(){if(arguments.length===0){return new rD(null,this)}else if(arguments.length===1){var b=arguments[0];return new rD(b,this)}};rS.prototype.createMultiPoint=function a(){var b=this;if(arguments.length===0){return new rB(null,this)}else if(arguments.length===1){if(arguments[0] instanceof Array){var c=arguments[0];return new rB(c,this)}else if(arguments[0] instanceof Array){var d=arguments[0];return this.createMultiPoint(d!==null?this.getCoordinateSequenceFactory().create(d):null)}else if(pK(arguments[0],pU)){var e=arguments[0];if(e===null){return this.createMultiPoint(new Array(0).fill(null))}var f=new Array(e.size()).fill(null);for(var g=0;g<e.size();g++){var h=b.getCoordinateSequenceFactory().create(1,e.getDimension());rt.copy(e,g,h,0,1);f[g]=b.createPoint(h)}return this.createMultiPoint(f)}}};rS.prototype.interfaces_=function a(){return[pD]};rS.prototype.getClass=function a(){return rS};rS.toMultiPolygonArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.toGeometryArray=function b(a){if(a===null){return null}var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.getDefaultCoordinateSequenceFactory=function a(){return rL.instance()};rS.toMultiLineStringArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.toLineStringArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.toMultiPointArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.toLinearRingArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.toPointArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.toPolygonArray=function b(a){var c=new Array(a.size()).fill(null);return a.toArray(c)};rS.createPointFromInternalCoord=function c(a,b){b.getPrecisionModel().makePrecise(a);return b.getFactory().createPoint(a)};rT.serialVersionUID.get=function(){return-6820524753094096000};Object.defineProperties(rS,rT);var rU=['Point','MultiPoint','LineString','MultiLineString','Polygon','MultiPolygon'],rV=function b(a){this.geometryFactory=a||new rS()};rV.prototype.read=function b(a){var c;typeof a==='string'?(c=JSON.parse(a)):(c=a);var d=c.type;if(!rW[d]){throw new Error('Unknown GeoJSON type: '+c.type)}if(rU.indexOf(d)!==-1){return rW[d].apply(this,[c.coordinates])}else if(d==='GeometryCollection'){return rW[d].apply(this,[c.geometries])};return rW[d].apply(this,[c])};rV.prototype.write=function b(a){var c=a.getGeometryType();if(!rX[c]){throw new Error('Geometry is not supported')}return rX[c].apply(this,[a])};var rW={Feature:function(a){var b={};for(var c in a)b[c]=a[c];if(a.geometry){var d=a.geometry.type;if(!rW[d]){throw new Error('Unknown GeoJSON type: '+a.type)}b.geometry=this.read(a.geometry)}a.bbox&&(b.bbox=rW.bbox.apply(this,[a.bbox]));return b},FeatureCollection:function(a){var b=this,c={};if(a.features){c.features=[];for(var d=0;d<a.features.length;++d)c.features.push(b.read(a.features[d]))}a.bbox&&(c.bbox=this.parse.bbox.apply(this,[a.bbox]));return c},coordinates:function(a){var b=[];for(var c=0;c<a.length;++c){var d=a[c];b.push(new pE(d[0],d[1]))}return b},bbox:function(a){return this.geometryFactory.createLinearRing([new pE(a[0],a[1]),new pE(a[2],a[1]),new pE(a[2],a[3]),new pE(a[0],a[3]),new pE(a[0],a[1])])},Point:function(a){var b=new pE(a[0],a[1]);return this.geometryFactory.createPoint(b)},MultiPoint:function(a){var b=this,c=[];for(var d=0;d<a.length;++d)c.push(rW.Point.apply(b,[a[d]]));return this.geometryFactory.createMultiPoint(c)},LineString:function(a){var b=rW.coordinates.apply(this,[a]);return this.geometryFactory.createLineString(b)},MultiLineString:function(a){var b=this,c=[];for(var d=0;d<a.length;++d)c.push(rW.LineString.apply(b,[a[d]]));return this.geometryFactory.createMultiLineString(c)},Polygon:function(a){var b=this,c=rW.coordinates.apply(this,[a[0]]),d=this.geometryFactory.createLinearRing(c),e=[];for(var f=1;f<a.length;++f){var g=a[f],h=rW.coordinates.apply(b,[g]),i=b.geometryFactory.createLinearRing(h);e.push(i)}return this.geometryFactory.createPolygon(d,e)},MultiPolygon:function(a){var b=this,c=[];for(var d=0;d<a.length;++d){var e=a[d];c.push(rW.Polygon.apply(b,[e]))}return this.geometryFactory.createMultiPolygon(c)},GeometryCollection:function(a){var b=this,c=[];for(var d=0;d<a.length;++d){var e=a[d];c.push(b.read(e))}return this.geometryFactory.createGeometryCollection(c)}},rX={coordinate:function(a){return[a.x,a.y]},Point:function(a){var b=rX.coordinate.apply(this,[a.getCoordinate()]);return{type:'Point',coordinates:b}},MultiPoint:function(a){var b=this,c=[];for(var d=0;d<a._geometries.length;++d){var e=a._geometries[d],f=rX.Point.apply(b,[e]);c.push(f.coordinates)}return{type:'MultiPoint',coordinates:c}},LineString:function(a){var b=this,c=[],d=a.getCoordinates();for(var e=0;e<d.length;++e){var f=d[e];c.push(rX.coordinate.apply(b,[f]))}return{type:'LineString',coordinates:c}},MultiLineString:function(a){var b=this,c=[];for(var d=0;d<a._geometries.length;++d){var e=a._geometries[d],f=rX.LineString.apply(b,[e]);c.push(f.coordinates)}return{type:'MultiLineString',coordinates:c}},Polygon:function(a){var b=this,c=[],d=rX.LineString.apply(this,[a._shell]);c.push(d.coordinates);for(var e=0;e<a._holes.length;++e){var f=a._holes[e],g=rX.LineString.apply(b,[f]);c.push(g.coordinates)}return{type:'Polygon',coordinates:c}},MultiPolygon:function(a){var b=this,c=[];for(var d=0;d<a._geometries.length;++d){var e=a._geometries[d],f=rX.Polygon.apply(b,[e]);c.push(f.coordinates)}return{type:'MultiPolygon',coordinates:c}},GeometryCollection:function(a){var b=this,c=[];for(var d=0;d<a._geometries.length;++d){var e=a._geometries[d],f=e.getGeometryType();c.push(rX[f].apply(b,[e]))}return{type:'GeometryCollection',geometries:c}}},rY=function b(a){this.geometryFactory=a||new rS();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new rV(this.geometryFactory)};rY.prototype.read=function b(a){var c=this.parser.read(a);this.precisionModel.getType()===rO.FIXED&&this.reducePrecision(c);return c};rY.prototype.reducePrecision=function b(a){var c=this,d,e;if(a.coordinate)this.precisionModel.makePrecise(a.coordinate);else if(a.points){for(d=0, e=a.points.length;d<e;d++)c.precisionModel.makePrecise(a.points[d])}else if(a.geometries){for(d=0, e=a.geometries.length;d<e;d++)c.reducePrecision(a.geometries[d])}};var rZ=function a(){this.parser=new rV(this.geometryFactory)};rZ.prototype.write=function b(a){return this.parser.write(a)};var r_=function a(){},r$={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};r_.prototype.interfaces_=function a(){return[]};r_.prototype.getClass=function a(){return r_};r_.opposite=function b(a){if(a===r_.LEFT){return r_.RIGHT}if(a===r_.RIGHT){return r_.LEFT}return a};r$.ON.get=function(){return 0};r$.LEFT.get=function(){return 1};r$.RIGHT.get=function(){return 2};Object.defineProperties(r_,r$);function sa(a){this.message=a||''}sa.prototype=new Error();sa.prototype.name='EmptyStackException';function sb(){this.array_=[]}sb.prototype=new qD();sb.prototype.add=function(a){this.array_.push(a);return !0};sb.prototype.get=function(a){if(a<0||a>=this.size()){throw new Error()}return this.array_[a]};sb.prototype.push=function(a){this.array_.push(a);return a};sb.prototype.pop=function(a){if(this.array_.length===0){throw new sa()}return this.array_.pop()};sb.prototype.peek=function(){if(this.array_.length===0){throw new sa()}return this.array_[this.array_.length-1]};sb.prototype.empty=function(){if(this.array_.length===0){return !0}else{return !1}};sb.prototype.isEmpty=function(){return this.empty()};sb.prototype.search=function(a){return this.array_.indexOf(a)};sb.prototype.size=function(){return this.array_.length};sb.prototype.toArray=function(){var a=this,b=[];for(var c=0,d=this.array_.length;c<d;c++)b.push(a.array_[c]);return b};var sc=function a(){this._minIndex=-1;this._minCoord=null;this._minDe=null;this._orientedDe=null};sc.prototype.getCoordinate=function a(){return this._minCoord};sc.prototype.getRightmostSide=function c(a,b){var d=this.getRightmostSideOfSegment(a,b);d<0&&(d=this.getRightmostSideOfSegment(a,b-1));d<0&&(this._minCoord=null,this.checkForRightmostCoordinate(a));return d};sc.prototype.findRightmostEdgeAtVertex=function a(){var b=this._minDe.getEdge().getCoordinates();qh.isTrue(this._minIndex>0&&this._minIndex<b.length,'rightmost point expected to be interior vertex of edge');var c=b[this._minIndex-1],d=b[this._minIndex+1],e=qn.computeOrientation(this._minCoord,d,c),f=!1;c.y<this._minCoord.y&&d.y<this._minCoord.y&&e===qn.COUNTERCLOCKWISE?(f=!0):c.y>this._minCoord.y&&d.y>this._minCoord.y&&e===qn.CLOCKWISE&&(f=!0);f&&(this._minIndex=this._minIndex-1)};sc.prototype.getRightmostSideOfSegment=function c(a,b){var d=a.getEdge(),e=d.getCoordinates();if(b<0||b+1>=e.length){return-1}if(e[b].y===e[b+1].y){return-1}var f=r_.LEFT;e[b].y<e[b+1].y&&(f=r_.RIGHT);return f};sc.prototype.getEdge=function a(){return this._orientedDe};sc.prototype.checkForRightmostCoordinate=function b(a){var c=this,d=a.getEdge().getCoordinates();for(var e=0;e<d.length-1;e++)(c._minCoord===null||d[e].x>c._minCoord.x)&&(c._minDe=a,c._minIndex=e,c._minCoord=d[e])};sc.prototype.findRightmostEdgeAtNode=function a(){var b=this._minDe.getNode(),c=b.getEdges();this._minDe=c.getRightmostEdge();this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};sc.prototype.findEdge=function b(a){var c=this;for(var d=a.iterator();d.hasNext();){var e=d.next();if(!e.isForward()){continue}c.checkForRightmostCoordinate(e)}qh.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),'inconsistency in rightmost processing');this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex();this._orientedDe=this._minDe;var f=this.getRightmostSide(this._minDe,this._minIndex);f===r_.LEFT&&(this._orientedDe=this._minDe.getSym())};sc.prototype.interfaces_=function a(){return[]};sc.prototype.getClass=function a(){return sc};var sd=function(a){function b(c,d){a.call(this,b.msgWithCoord(c,d));this.pt=d?new pE(d):null;this.name='TopologyException'}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getCoordinate=function a(){return this.pt};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};b.msgWithCoord=function c(a,b){if(!b){return a+' [ '+b+' ]'}return a};return b}(qf),sf=function a(){this.array_=[]};sf.prototype.addLast=function b(a){this.array_.push(a)};sf.prototype.removeFirst=function a(){return this.array_.shift()};sf.prototype.isEmpty=function a(){return this.array_.length===0};var sg=function a(){this._finder=null;this._dirEdgeList=new qF();this._nodes=new qF();this._rightMostCoord=null;this._env=null;this._finder=new sc()};sg.prototype.clearVisitedEdges=function a(){for(var b=this._dirEdgeList.iterator();b.hasNext();){var c=b.next();c.setVisited(!1)}};sg.prototype.getRightmostCoordinate=function a(){return this._rightMostCoord};sg.prototype.computeNodeDepth=function b(a){var c=this,d=null;for(var e=a.getEdges().iterator();e.hasNext();){var f=e.next();if(f.isVisited()||f.getSym().isVisited()){d=f;break}}if(d===null){throw new sd('unable to find edge to compute depths at '+a.getCoordinate())}a.getEdges().computeDepths(d);for(var g=a.getEdges().iterator();g.hasNext();){var h=g.next();h.setVisited(!0);c.copySymDepths(h)}};sg.prototype.computeDepth=function b(a){this.clearVisitedEdges();var c=this._finder.getEdge();c.setEdgeDepths(r_.RIGHT,a);this.copySymDepths(c);this.computeDepths(c)};sg.prototype.create=function b(a){this.addReachable(a);this._finder.findEdge(this._dirEdgeList);this._rightMostCoord=this._finder.getCoordinate()};sg.prototype.findResultEdges=function a(){for(var b=this._dirEdgeList.iterator();b.hasNext();){var c=b.next();c.getDepth(r_.RIGHT)>=1&&c.getDepth(r_.LEFT)<=0&&!c.isInteriorAreaEdge()&&c.setInResult(!0)}};sg.prototype.computeDepths=function b(a){var c=this,d=new qQ(),e=new sf(),f=a.getNode();e.addLast(f);d.add(f);a.setVisited(!0);while(!e.isEmpty()){var g=e.removeFirst();d.add(g);c.computeNodeDepth(g);for(var h=g.getEdges().iterator();h.hasNext();){var i=h.next(),j=i.getSym();if(j.isVisited()){continue}var k=j.getNode();d.contains(k)||(e.addLast(k),d.add(k))}}};sg.prototype.compareTo=function b(a){var c=a;if(this._rightMostCoord.x<c._rightMostCoord.x){return-1}if(this._rightMostCoord.x>c._rightMostCoord.x){return 1}return 0};sg.prototype.getEnvelope=function a(){if(this._env===null){var b=new p_();for(var c=this._dirEdgeList.iterator();c.hasNext();){var d=c.next(),e=d.getEdge().getCoordinates();for(var f=0;f<e.length-1;f++)b.expandToInclude(e[f])}this._env=b}return this._env};sg.prototype.addReachable=function b(a){var c=this,d=new sb();d.add(a);while(!d.empty()){var e=d.pop();c.add(e,d)}};sg.prototype.copySymDepths=function b(a){var c=a.getSym();c.setDepth(r_.LEFT,a.getDepth(r_.RIGHT));c.setDepth(r_.RIGHT,a.getDepth(r_.LEFT))};sg.prototype.add=function c(a,b){var d=this;a.setVisited(!0);this._nodes.add(a);for(var e=a.getEdges().iterator();e.hasNext();){var f=e.next();d._dirEdgeList.add(f);var g=f.getSym(),h=g.getNode();h.isVisited()||b.push(h)}};sg.prototype.getNodes=function a(){return this._nodes};sg.prototype.getDirectedEdges=function a(){return this._dirEdgeList};sg.prototype.interfaces_=function a(){return[pA]};sg.prototype.getClass=function a(){return sg};var sh=function a(){var b=this;this.location=null;if(arguments.length===1){if(arguments[0] instanceof Array){var c=arguments[0];this.init(c.length)}else if(Number.isInteger(arguments[0])){var d=arguments[0];this.init(1);this.location[r_.ON]=d}else if(arguments[0] instanceof a){var e=arguments[0];this.init(e.location.length);if(e!==null){for(var f=0;f<this.location.length;f++)b.location[f]=e.location[f]}}}else if(arguments.length===3){var g=arguments[0],h=arguments[1],i=arguments[2];this.init(3);this.location[r_.ON]=g;this.location[r_.LEFT]=h;this.location[r_.RIGHT]=i}};sh.prototype.setAllLocations=function b(a){var c=this;for(var d=0;d<this.location.length;d++)c.location[d]=a};sh.prototype.isNull=function a(){var b=this;for(var c=0;c<this.location.length;c++){if(b.location[c]!==pI.NONE){return !1}}return !0};sh.prototype.setAllLocationsIfNull=function b(a){var c=this;for(var d=0;d<this.location.length;d++)c.location[d]===pI.NONE&&(c.location[d]=a)};sh.prototype.isLine=function a(){return this.location.length===1};sh.prototype.merge=function b(a){var c=this;if(a.location.length>this.location.length){var d=new Array(3).fill(null);d[r_.ON]=this.location[r_.ON];d[r_.LEFT]=pI.NONE;d[r_.RIGHT]=pI.NONE;this.location=d}for(var e=0;e<this.location.length;e++)c.location[e]===pI.NONE&&e<a.location.length&&(c.location[e]=a.location[e])};sh.prototype.getLocations=function a(){return this.location};sh.prototype.flip=function a(){if(this.location.length<=1){return null}var b=this.location[r_.LEFT];this.location[r_.LEFT]=this.location[r_.RIGHT];this.location[r_.RIGHT]=b};sh.prototype.toString=function a(){var b=new pN();this.location.length>1&&b.append(pI.toLocationSymbol(this.location[r_.LEFT]));b.append(pI.toLocationSymbol(this.location[r_.ON]));this.location.length>1&&b.append(pI.toLocationSymbol(this.location[r_.RIGHT]));return b.toString()};sh.prototype.setLocations=function d(a,b,c){this.location[r_.ON]=a;this.location[r_.LEFT]=b;this.location[r_.RIGHT]=c};sh.prototype.get=function b(a){if(a<this.location.length){return this.location[a]}return pI.NONE};sh.prototype.isArea=function a(){return this.location.length>1};sh.prototype.isAnyNull=function a(){var b=this;for(var c=0;c<this.location.length;c++){if(b.location[c]===pI.NONE){return !0}}return !1};sh.prototype.setLocation=function a(){if(arguments.length===1){var b=arguments[0];this.setLocation(r_.ON,b)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.location[c]=d}};sh.prototype.init=function b(a){this.location=new Array(a).fill(null);this.setAllLocations(pI.NONE)};sh.prototype.isEqualOnSide=function c(a,b){return this.location[b]===a.location[b]};sh.prototype.allPositionsEqual=function b(a){var c=this;for(var d=0;d<this.location.length;d++){if(c.location[d]!==a){return !1}}return !0};sh.prototype.interfaces_=function a(){return[]};sh.prototype.getClass=function a(){return sh};var sj=function a(){this.elt=new Array(2).fill(null);if(arguments.length===1){if(Number.isInteger(arguments[0])){var b=arguments[0];this.elt[0]=new sh(b);this.elt[1]=new sh(b)}else if(arguments[0] instanceof a){var c=arguments[0];this.elt[0]=new sh(c.elt[0]);this.elt[1]=new sh(c.elt[1])}}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this.elt[0]=new sh(pI.NONE);this.elt[1]=new sh(pI.NONE);this.elt[d].setLocation(e)}else if(arguments.length===3){var f=arguments[0],g=arguments[1],h=arguments[2];this.elt[0]=new sh(f,g,h);this.elt[1]=new sh(f,g,h)}else if(arguments.length===4){var i=arguments[0],j=arguments[1],k=arguments[2],l=arguments[3];this.elt[0]=new sh(pI.NONE,pI.NONE,pI.NONE);this.elt[1]=new sh(pI.NONE,pI.NONE,pI.NONE);this.elt[i].setLocations(j,k,l)}};sj.prototype.getGeometryCount=function a(){var b=0;this.elt[0].isNull()||b++;this.elt[1].isNull()||b++;return b};sj.prototype.setAllLocations=function c(a,b){this.elt[a].setAllLocations(b)};sj.prototype.isNull=function b(a){return this.elt[a].isNull()};sj.prototype.setAllLocationsIfNull=function a(){if(arguments.length===1){var b=arguments[0];this.setAllLocationsIfNull(0,b);this.setAllLocationsIfNull(1,b)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.elt[c].setAllLocationsIfNull(d)}};sj.prototype.isLine=function b(a){return this.elt[a].isLine()};sj.prototype.merge=function b(a){var c=this;for(var d=0;d<2;d++)c.elt[d]===null&&a.elt[d]!==null?(c.elt[d]=new sh(a.elt[d])):c.elt[d].merge(a.elt[d])};sj.prototype.flip=function a(){this.elt[0].flip();this.elt[1].flip()};sj.prototype.getLocation=function a(){if(arguments.length===1){var b=arguments[0];return this.elt[b].get(r_.ON)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];return this.elt[c].get(d)}};sj.prototype.toString=function a(){var b=new pN();this.elt[0]!==null&&(b.append('A:'),b.append(this.elt[0].toString()));this.elt[1]!==null&&(b.append(' B:'),b.append(this.elt[1].toString()));return b.toString()};sj.prototype.isArea=function a(){if(arguments.length===0){return this.elt[0].isArea()||this.elt[1].isArea()}else if(arguments.length===1){var b=arguments[0];return this.elt[b].isArea()}};sj.prototype.isAnyNull=function b(a){return this.elt[a].isAnyNull()};sj.prototype.setLocation=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1];this.elt[b].setLocation(r_.ON,c)}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2];this.elt[d].setLocation(e,f)}};sj.prototype.isEqualOnSide=function c(a,b){return this.elt[0].isEqualOnSide(a.elt[0],b)&&this.elt[1].isEqualOnSide(a.elt[1],b)};sj.prototype.allPositionsEqual=function c(a,b){return this.elt[a].allPositionsEqual(b)};sj.prototype.toLine=function b(a){this.elt[a].isArea()&&(this.elt[a]=new sh(this.elt[a].location[0]))};sj.prototype.interfaces_=function a(){return[]};sj.prototype.getClass=function a(){return sj};sj.toLineLabel=function b(a){var c=new sj(pI.NONE);for(var d=0;d<2;d++)c.setLocation(d,a.getLocation(d));return c};var sk=function a(){this._startDe=null;this._maxNodeDegree=-1;this._edges=new qF();this._pts=new qF();this._label=new sj(pI.NONE);this._ring=null;this._isHole=null;this._shell=null;this._holes=new qF();this._geometryFactory=null;var b=arguments[0],c=arguments[1];this._geometryFactory=c;this.computePoints(b);this.computeRing()};sk.prototype.computeRing=function a(){var b=this;if(this._ring!==null){return null}var c=new Array(this._pts.size()).fill(null);for(var d=0;d<this._pts.size();d++)c[d]=b._pts.get(d);this._ring=this._geometryFactory.createLinearRing(c);this._isHole=qn.isCCW(this._ring.getCoordinates())};sk.prototype.isIsolated=function a(){return this._label.getGeometryCount()===1};sk.prototype.computePoints=function b(a){var c=this;this._startDe=a;var d=a,e=!0;do{if(d===null){throw new sd('Found null DirectedEdge')}if(d.getEdgeRing()===c){throw new sd('Directed Edge visited twice during ring-building at '+d.getCoordinate())}c._edges.add(d);var f=d.getLabel();qh.isTrue(f.isArea());c.mergeLabel(f);c.addPoints(d.getEdge(),d.isForward(),e);e=!1;c.setEdgeRing(d,c);d=c.getNext(d)}while(d!==this._startDe)};sk.prototype.getLinearRing=function a(){return this._ring};sk.prototype.getCoordinate=function b(a){return this._pts.get(a)};sk.prototype.computeMaxNodeDegree=function a(){var b=this;this._maxNodeDegree=0;var c=this._startDe;do{var d=c.getNode(),e=d.getEdges().getOutgoingDegree(b);e>b._maxNodeDegree&&(b._maxNodeDegree=e);c=b.getNext(c)}while(c!==this._startDe);this._maxNodeDegree*=2};sk.prototype.addPoints=function d(a,b,c){var e=this,f=a.getCoordinates();if(b){var g=1;c&&(g=0);for(var h=g;h<f.length;h++)e._pts.add(f[h])}else{var i=f.length-2;c&&(i=f.length-1);for(var j=i;j>=0;j--)e._pts.add(f[j])}};sk.prototype.isHole=function a(){return this._isHole};sk.prototype.setInResult=function a(){var b=this._startDe;do{b.getEdge().setInResult(!0),b=b.getNext()}while(b!==this._startDe)};sk.prototype.containsPoint=function b(a){var c=this.getLinearRing(),d=c.getEnvelopeInternal();if(!d.contains(a)){return !1}if(!qn.isPointInRing(a,c.getCoordinates())){return !1}for(var e=this._holes.iterator();e.hasNext();){var f=e.next();if(f.containsPoint(a)){return !1}}return !0};sk.prototype.addHole=function b(a){this._holes.add(a)};sk.prototype.isShell=function a(){return this._shell===null};sk.prototype.getLabel=function a(){return this._label};sk.prototype.getEdges=function a(){return this._edges};sk.prototype.getMaxNodeDegree=function a(){this._maxNodeDegree<0&&this.computeMaxNodeDegree();return this._maxNodeDegree};sk.prototype.getShell=function a(){return this._shell};sk.prototype.mergeLabel=function a(){if(arguments.length===1){var b=arguments[0];this.mergeLabel(b,0);this.mergeLabel(b,1)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],e=c.getLocation(d,r_.RIGHT);if(e===pI.NONE){return null}if(this._label.getLocation(d)===pI.NONE){this._label.setLocation(d,e);return null}}};sk.prototype.setShell=function b(a){this._shell=a;a!==null&&a.addHole(this)};sk.prototype.toPolygon=function b(a){var c=this,d=new Array(this._holes.size()).fill(null);for(var e=0;e<this._holes.size();e++)d[e]=c._holes.get(e).getLinearRing();var f=a.createPolygon(this.getLinearRing(),d);return f};sk.prototype.interfaces_=function a(){return[]};sk.prototype.getClass=function a(){return sk};var sl=function(a){function b(){var b=arguments[0],c=arguments[1];a.call(this,b,c)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.setEdgeRing=function c(a,b){a.setMinEdgeRing(b)};b.prototype.getNext=function b(a){return a.getNextMin()};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(sk),sm=function(a){function b(){var b=arguments[0],c=arguments[1];a.call(this,b,c)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.buildMinimalRings=function a(){var b=this,c=new qF(),d=this._startDe;do{if(d.getMinEdgeRing()===null){var e=new sl(d,b._geometryFactory);c.add(e)}d=d.getNext()}while(d!==this._startDe);return c};b.prototype.setEdgeRing=function c(a,b){a.setEdgeRing(b)};b.prototype.linkDirectedEdgesForMinimalEdgeRings=function a(){var b=this,c=this._startDe;do{var d=c.getNode();d.getEdges().linkMinimalDirectedEdges(b);c=c.getNext()}while(c!==this._startDe)};b.prototype.getNext=function b(a){return a.getNext()};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(sk),sn=function a(){this._label=null;this._isInResult=!1;this._isCovered=!1;this._isCoveredSet=!1;this._isVisited=!1;if(arguments.length===0);else if(arguments.length===1){var b=arguments[0];this._label=b}};sn.prototype.setVisited=function b(a){this._isVisited=a};sn.prototype.setInResult=function b(a){this._isInResult=a};sn.prototype.isCovered=function a(){return this._isCovered};sn.prototype.isCoveredSet=function a(){return this._isCoveredSet};sn.prototype.setLabel=function b(a){this._label=a};sn.prototype.getLabel=function a(){return this._label};sn.prototype.setCovered=function b(a){this._isCovered=a;this._isCoveredSet=!0};sn.prototype.updateIM=function b(a){qh.isTrue(this._label.getGeometryCount()>=2,'found partial label');this.computeIM(a)};sn.prototype.isInResult=function a(){return this._isInResult};sn.prototype.isVisited=function a(){return this._isVisited};sn.prototype.interfaces_=function a(){return[]};sn.prototype.getClass=function a(){return sn};var so=function(a){function b(){a.call(this);this._coord=null;this._edges=null;var b=arguments[0],c=arguments[1];this._coord=b;this._edges=c;this._label=new sj(0,pI.NONE)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.isIncidentEdgeInResult=function a(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();){var c=b.next();if(c.getEdge().isInResult()){return !0}}return !1};b.prototype.isIsolated=function a(){return this._label.getGeometryCount()===1};b.prototype.getCoordinate=function a(){return this._coord};b.prototype.print=function b(a){a.println('node '+this._coord+' lbl: '+this._label)};b.prototype.computeIM=function b(a){};b.prototype.computeMergedLocation=function c(a,b){var d=pI.NONE;d=this._label.getLocation(b);if(!a.isNull(b)){var e=a.getLocation(b);d!==pI.BOUNDARY&&(d=e)}return d};b.prototype.setLabel=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1];this._label===null?(this._label=new sj(c,d)):this._label.setLocation(c,d)}else{return a.prototype.setLabel.apply(this,arguments)}};b.prototype.getEdges=function a(){return this._edges};b.prototype.mergeLabel=function a(){var c=this;if(arguments[0] instanceof b){var d=arguments[0];this.mergeLabel(d._label)}else if(arguments[0] instanceof sj){var e=arguments[0];for(var f=0;f<2;f++){var g=c.computeMergedLocation(e,f),h=c._label.getLocation(f);h===pI.NONE&&c._label.setLocation(f,g)}}};b.prototype.add=function b(a){this._edges.insert(a);a.setNode(this)};b.prototype.setLabelBoundary=function b(a){if(this._label===null){return null}var c=pI.NONE;this._label!==null&&(c=this._label.getLocation(a));var d=null;switch(c){case pI.BOUNDARY:d=pI.INTERIOR;break;case pI.INTERIOR:d=pI.BOUNDARY;break;default:d=pI.BOUNDARY;break};this._label.setLocation(a,d)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(sn),sp=function a(){this.nodeMap=new qZ();this.nodeFact=null;var b=arguments[0];this.nodeFact=b};sp.prototype.find=function b(a){return this.nodeMap.get(a)};sp.prototype.addNode=function a(){if(arguments[0] instanceof pE){var b=arguments[0],c=this.nodeMap.get(b);c===null&&(c=this.nodeFact.createNode(b),this.nodeMap.put(b,c));return c}else if(arguments[0] instanceof so){var d=arguments[0],e=this.nodeMap.get(d.getCoordinate());if(e===null){this.nodeMap.put(d.getCoordinate(),d);return d}e.mergeLabel(d);return e}};sp.prototype.print=function b(a){for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(a)}};sp.prototype.iterator=function a(){return this.nodeMap.values().iterator()};sp.prototype.values=function a(){return this.nodeMap.values()};sp.prototype.getBoundaryNodes=function b(a){var c=new qF();for(var d=this.iterator();d.hasNext();){var e=d.next();e.getLabel().getLocation(a)===pI.BOUNDARY&&c.add(e)}return c};sp.prototype.add=function b(a){var c=a.getCoordinate(),d=this.addNode(c);d.add(a)};sp.prototype.interfaces_=function a(){return[]};sp.prototype.getClass=function a(){return sp};var sq=function a(){},sr={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};sq.prototype.interfaces_=function a(){return[]};sq.prototype.getClass=function a(){return sq};sq.isNorthern=function b(a){return a===sq.NE||a===sq.NW};sq.isOpposite=function c(a,b){if(a===b){return !1}var d=(a-b+4)%4;if(d===2){return !0}return !1};sq.commonHalfPlane=function c(a,b){if(a===b){return a}var d=(a-b+4)%4;if(d===2){return-1}var e=a<b?a:b,f=a>b?a:b;if(e===0&&f===3){return 3}return e};sq.isInHalfPlane=function c(a,b){if(b===sq.SE){return a===sq.SE||a===sq.SW}return a===b||a===b+1};sq.quadrant=function a(){if(typeof arguments[0]==='number'&&typeof arguments[1]==='number'){var b=arguments[0],c=arguments[1];if(b===0.0&&c===0.0){throw new pv('Cannot compute the quadrant for point ( '+b+', '+c+' )')}if(b>=0.0){if(c>=0.0){return sq.NE}else{return sq.SE}}else{if(c>=0.0){return sq.NW}else{return sq.SW}}}else if(arguments[0] instanceof pE&&arguments[1] instanceof pE){var d=arguments[0],e=arguments[1];if(e.x===d.x&&e.y===d.y){throw new pv('Cannot compute the quadrant for two identical points '+d)}if(e.x>=d.x){if(e.y>=d.y){return sq.NE}else{return sq.SE}}else{if(e.y>=d.y){return sq.NW}else{return sq.SW}}}};sr.NE.get=function(){return 0};sr.NW.get=function(){return 1};sr.SW.get=function(){return 2};sr.SE.get=function(){return 3};Object.defineProperties(sq,sr);var ss=function a(){this._edge=null;this._label=null;this._node=null;this._p0=null;this._p1=null;this._dx=null;this._dy=null;this._quadrant=null;if(arguments.length===1){var b=arguments[0];this._edge=b}else if(arguments.length===3){var c=arguments[0],d=arguments[1],e=arguments[2],f=null;this._edge=c;this.init(d,e);this._label=f}else if(arguments.length===4){var g=arguments[0],h=arguments[1],i=arguments[2],j=arguments[3];this._edge=g;this.init(h,i);this._label=j}};ss.prototype.compareDirection=function b(a){if(this._dx===a._dx&&this._dy===a._dy){return 0}if(this._quadrant>a._quadrant){return 1}if(this._quadrant<a._quadrant){return-1}return qn.computeOrientation(a._p0,a._p1,this._p1)};ss.prototype.getDy=function a(){return this._dy};ss.prototype.getCoordinate=function a(){return this._p0};ss.prototype.setNode=function b(a){this._node=a};ss.prototype.print=function b(a){var c=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),e=d.lastIndexOf('.'),f=d.substring(e+1);a.print('  '+f+': '+this._p0+' - '+this._p1+' '+this._quadrant+':'+c+'   '+this._label)};ss.prototype.compareTo=function b(a){var c=a;return this.compareDirection(c)};ss.prototype.getDirectedCoordinate=function a(){return this._p1};ss.prototype.getDx=function a(){return this._dx};ss.prototype.getLabel=function a(){return this._label};ss.prototype.getEdge=function a(){return this._edge};ss.prototype.getQuadrant=function a(){return this._quadrant};ss.prototype.getNode=function a(){return this._node};ss.prototype.toString=function a(){var b=Math.atan2(this._dy,this._dx),c=this.getClass().getName(),d=c.lastIndexOf('.'),e=c.substring(d+1);return'  '+e+': '+this._p0+' - '+this._p1+' '+this._quadrant+':'+b+'   '+this._label};ss.prototype.computeLabel=function b(a){};ss.prototype.init=function c(a,b){this._p0=a;this._p1=b;this._dx=b.x-a.x;this._dy=b.y-a.y;this._quadrant=sq.quadrant(this._dx,this._dy);qh.isTrue(!(this._dx===0&&this._dy===0),'EdgeEnd with identical endpoints found')};ss.prototype.interfaces_=function a(){return[pA]};ss.prototype.getClass=function a(){return ss};var st=function(a){function b(){var b=arguments[0],c=arguments[1];a.call(this,b);this._isForward=null;this._isInResult=!1;this._isVisited=!1;this._sym=null;this._next=null;this._nextMin=null;this._edgeRing=null;this._minEdgeRing=null;this._depth=[0,-999,-999];this._isForward=c;if(c)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var d=b.getNumPoints()-1;this.init(b.getCoordinate(d),b.getCoordinate(d-1))}this.computeDirectedLabel()}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getNextMin=function a(){return this._nextMin};b.prototype.getDepth=function b(a){return this._depth[a]};b.prototype.setVisited=function b(a){this._isVisited=a};b.prototype.computeDirectedLabel=function a(){this._label=new sj(this._edge.getLabel());this._isForward||this._label.flip()};b.prototype.getNext=function a(){return this._next};b.prototype.setDepth=function c(a,b){if(this._depth[a]!==-999){if(this._depth[a]!==b){throw new sd('assigned depths do not match',this.getCoordinate())}}this._depth[a]=b};b.prototype.isInteriorAreaEdge=function(){var b=this,a=!0;for(var c=0;c<2;c++)(b._label.isArea(c)&&b._label.getLocation(c,r_.LEFT)===pI.INTERIOR&&b._label.getLocation(c,r_.RIGHT)===pI.INTERIOR)||(a=!1);return a};b.prototype.setNextMin=function b(a){this._nextMin=a};b.prototype.print=function c(b){a.prototype.print.call(this,b);b.print(' '+this._depth[r_.LEFT]+'/'+this._depth[r_.RIGHT]);b.print(' ('+this.getDepthDelta()+')');this._isInResult&&b.print(' inResult')};b.prototype.setMinEdgeRing=function b(a){this._minEdgeRing=a};b.prototype.isLineEdge=function a(){var b=this._label.isLine(0)||this._label.isLine(1),c=!this._label.isArea(0)||this._label.allPositionsEqual(0,pI.EXTERIOR),d=!this._label.isArea(1)||this._label.allPositionsEqual(1,pI.EXTERIOR);return b&&c&&d};b.prototype.setEdgeRing=function b(a){this._edgeRing=a};b.prototype.getMinEdgeRing=function a(){return this._minEdgeRing};b.prototype.getDepthDelta=function a(){var b=this._edge.getDepthDelta();this._isForward||(b=-b);return b};b.prototype.setInResult=function b(a){this._isInResult=a};b.prototype.getSym=function a(){return this._sym};b.prototype.isForward=function a(){return this._isForward};b.prototype.getEdge=function a(){return this._edge};b.prototype.printEdge=function b(a){this.print(a);a.print(' ');this._isForward?this._edge.print(a):this._edge.printReverse(a)};b.prototype.setSym=function b(a){this._sym=a};b.prototype.setVisitedEdge=function b(a){this.setVisited(a);this._sym.setVisited(a)};b.prototype.setEdgeDepths=function c(a,b){var d=this.getEdge().getDepthDelta();this._isForward||(d=-d);var e=1;a===r_.LEFT&&(e=-1);var f=r_.opposite(a),g=d*e,h=b+g;this.setDepth(a,b);this.setDepth(f,h)};b.prototype.getEdgeRing=function a(){return this._edgeRing};b.prototype.isInResult=function a(){return this._isInResult};b.prototype.setNext=function b(a){this._next=a};b.prototype.isVisited=function a(){return this._isVisited};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};b.depthFactor=function c(a,b){if(a===pI.EXTERIOR&&b===pI.INTERIOR){return 1}else if(a===pI.INTERIOR&&b===pI.EXTERIOR){return-1};return 0};return b}(ss),su=function a(){};su.prototype.createNode=function b(a){return new so(a,null)};su.prototype.interfaces_=function a(){return[]};su.prototype.getClass=function a(){return su};var sv=function a(){this._edges=new qF();this._nodes=null;this._edgeEndList=new qF();if(arguments.length===0)this._nodes=new sp(new su());else if(arguments.length===1){var b=arguments[0];this._nodes=new sp(b)}};sv.prototype.printEdges=function b(a){var c=this;a.println('Edges:');for(var d=0;d<this._edges.size();d++){a.println('edge '+d+':');var e=c._edges.get(d);e.print(a);e.eiList.print(a)}};sv.prototype.find=function b(a){return this._nodes.find(a)};sv.prototype.addNode=function a(){if(arguments[0] instanceof so){var b=arguments[0];return this._nodes.addNode(b)}else if(arguments[0] instanceof pE){var c=arguments[0];return this._nodes.addNode(c)}};sv.prototype.getNodeIterator=function a(){return this._nodes.iterator()};sv.prototype.linkResultDirectedEdges=function a(){for(var b=this._nodes.iterator();b.hasNext();){var c=b.next();c.getEdges().linkResultDirectedEdges()}};sv.prototype.debugPrintln=function b(a){pY.out.println(a)};sv.prototype.isBoundaryNode=function c(a,b){var d=this._nodes.find(b);if(d===null){return !1}var e=d.getLabel();if(e!==null&&e.getLocation(a)===pI.BOUNDARY){return !0}return !1};sv.prototype.linkAllDirectedEdges=function a(){for(var b=this._nodes.iterator();b.hasNext();){var c=b.next();c.getEdges().linkAllDirectedEdges()}};sv.prototype.matchInSameDirection=function e(a,b,c,d){if(!a.equals(c)){return !1}if(qn.computeOrientation(a,b,d)===qn.COLLINEAR&&sq.quadrant(a,b)===sq.quadrant(c,d)){return !0}return !1};sv.prototype.getEdgeEnds=function a(){return this._edgeEndList};sv.prototype.debugPrint=function b(a){pY.out.print(a)};sv.prototype.getEdgeIterator=function a(){return this._edges.iterator()};sv.prototype.findEdgeInSameDirection=function c(a,b){var d=this;for(var e=0;e<this._edges.size();e++){var f=d._edges.get(e),g=f.getCoordinates();if(d.matchInSameDirection(a,b,g[0],g[1])){return f}if(d.matchInSameDirection(a,b,g[g.length-1],g[g.length-2])){return f}}return null};sv.prototype.insertEdge=function b(a){this._edges.add(a)};sv.prototype.findEdgeEnd=function b(a){for(var c=this.getEdgeEnds().iterator();c.hasNext();){var d=c.next();if(d.getEdge()===a){return d}}return null};sv.prototype.addEdges=function b(a){var c=this;for(var d=a.iterator();d.hasNext();){var e=d.next();c._edges.add(e);var f=new st(e,!0),g=new st(e,!1);f.setSym(g);g.setSym(f);c.add(f);c.add(g)}};sv.prototype.add=function b(a){this._nodes.add(a);this._edgeEndList.add(a)};sv.prototype.getNodes=function a(){return this._nodes.values()};sv.prototype.findEdge=function c(a,b){var d=this;for(var e=0;e<this._edges.size();e++){var f=d._edges.get(e),g=f.getCoordinates();if(a.equals(g[0])&&b.equals(g[1])){return f}}return null};sv.prototype.interfaces_=function a(){return[]};sv.prototype.getClass=function a(){return sv};sv.linkResultDirectedEdges=function b(a){for(var c=a.iterator();c.hasNext();){var d=c.next();d.getEdges().linkResultDirectedEdges()}};var sw=function a(){this._geometryFactory=null;this._shellList=new qF();var b=arguments[0];this._geometryFactory=b};sw.prototype.sortShellsAndHoles=function d(a,b,c){for(var e=a.iterator();e.hasNext();){var f=e.next();f.isHole()?c.add(f):b.add(f)}};sw.prototype.computePolygons=function b(a){var c=this,d=new qF();for(var e=a.iterator();e.hasNext();){var f=e.next(),g=f.toPolygon(c._geometryFactory);d.add(g)}return d};sw.prototype.placeFreeHoles=function c(a,b){var d=this;for(var e=b.iterator();e.hasNext();){var f=e.next();if(f.getShell()===null){var g=d.findEdgeRingContaining(f,a);if(g===null){throw new sd('unable to assign hole to a shell',f.getCoordinate(0))}f.setShell(g)}}};sw.prototype.buildMinimalEdgeRings=function d(a,b,c){var e=this,f=new qF();for(var g=a.iterator();g.hasNext();){var h=g.next();if(h.getMaxNodeDegree()>2){h.linkDirectedEdgesForMinimalEdgeRings();var i=h.buildMinimalRings(),j=e.findShell(i);j!==null?(e.placePolygonHoles(j,i),b.add(j)):c.addAll(i)}else f.add(h)}return f};sw.prototype.containsPoint=function b(a){for(var c=this._shellList.iterator();c.hasNext();){var d=c.next();if(d.containsPoint(a)){return !0}}return !1};sw.prototype.buildMaximalEdgeRings=function b(a){var c=this,d=new qF();for(var e=a.iterator();e.hasNext();){var f=e.next();if(f.isInResult()&&f.getLabel().isArea()){if(f.getEdgeRing()===null){var g=new sm(f,c._geometryFactory);d.add(g);g.setInResult()}}}return d};sw.prototype.placePolygonHoles=function c(a,b){for(var d=b.iterator();d.hasNext();){var e=d.next();e.isHole()&&e.setShell(a)}};sw.prototype.getPolygons=function a(){var b=this.computePolygons(this._shellList);return b};sw.prototype.findEdgeRingContaining=function c(a,b){var d=a.getLinearRing(),e=d.getEnvelopeInternal(),f=d.getCoordinateN(0),g=null,h=null;for(var i=b.iterator();i.hasNext();){var j=i.next(),k=j.getLinearRing(),l=k.getEnvelopeInternal();g!==null&&(h=g.getLinearRing().getEnvelopeInternal());var m=!1;l.contains(e)&&qn.isPointInRing(f,k.getCoordinates())&&(m=!0);m&&((g===null||h.contains(l))&&(g=j))}return g};sw.prototype.findShell=function b(a){var c=0,d=null;for(var e=a.iterator();e.hasNext();){var f=e.next();f.isHole()||(d=f,c++)}qh.isTrue(c<=1,'found two shells in MinimalEdgeRing list');return d};sw.prototype.add=function a(){if(arguments.length===1){var b=arguments[0];this.add(b.getEdgeEnds(),b.getNodes())}else if(arguments.length===2){var c=arguments[0],d=arguments[1];sv.linkResultDirectedEdges(d);var e=this.buildMaximalEdgeRings(c),f=new qF(),g=this.buildMinimalEdgeRings(e,this._shellList,f);this.sortShellsAndHoles(g,this._shellList,f);this.placeFreeHoles(this._shellList,f)}};sw.prototype.interfaces_=function a(){return[]};sw.prototype.getClass=function a(){return sw};var sx=function a(){};sx.prototype.getBounds=function a(){};sx.prototype.interfaces_=function a(){return[]};sx.prototype.getClass=function a(){return sx};var sy=function a(){this._bounds=null;this._item=null;var b=arguments[0],c=arguments[1];this._bounds=b;this._item=c};sy.prototype.getItem=function a(){return this._item};sy.prototype.getBounds=function a(){return this._bounds};sy.prototype.interfaces_=function a(){return[sx,pD]};sy.prototype.getClass=function a(){return sy};var sz=function a(){this._size=null;this._items=null;this._size=0;this._items=new qF();this._items.add(null)};sz.prototype.poll=function a(){if(this.isEmpty()){return null}var b=this._items.get(1);this._items.set(1,this._items.get(this._size));this._size-=1;this.reorder(1);return b};sz.prototype.size=function a(){return this._size};sz.prototype.reorder=function b(a){var c=this,d=null,e=this._items.get(a);for(;a*2<=this._size;a=d){d=a*2;d!==c._size&&c._items.get(d+1).compareTo(c._items.get(d))<0&&d++;if(c._items.get(d).compareTo(e)<0)c._items.set(a,c._items.get(d));else{break}}this._items.set(a,e)};sz.prototype.clear=function a(){this._size=0;this._items.clear()};sz.prototype.isEmpty=function a(){return this._size===0};sz.prototype.add=function b(a){var c=this;this._items.add(null);this._size+=1;var d=this._size;this._items.set(0,a);for(;a.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)c._items.set(d,c._items.get(Math.trunc(d/2)));this._items.set(d,a)};sz.prototype.interfaces_=function a(){return[]};sz.prototype.getClass=function a(){return sz};var sA=function a(){};sA.prototype.visitItem=function b(a){};sA.prototype.interfaces_=function a(){return[]};sA.prototype.getClass=function a(){return sA};var sB=function a(){};sB.prototype.insert=function c(a,b){};sB.prototype.remove=function c(a,b){};sB.prototype.query=function a(){};sB.prototype.interfaces_=function a(){return[]};sB.prototype.getClass=function a(){return sB};var sC=function a(){this._childBoundables=new qF();this._bounds=null;this._level=null;if(arguments.length===0);else if(arguments.length===1){var b=arguments[0];this._level=b}},sD={serialVersionUID:{configurable:!0}};sC.prototype.getLevel=function a(){return this._level};sC.prototype.size=function a(){return this._childBoundables.size()};sC.prototype.getChildBoundables=function a(){return this._childBoundables};sC.prototype.addChildBoundable=function b(a){qh.isTrue(this._bounds===null);this._childBoundables.add(a)};sC.prototype.isEmpty=function a(){return this._childBoundables.isEmpty()};sC.prototype.getBounds=function a(){this._bounds===null&&(this._bounds=this.computeBounds());return this._bounds};sC.prototype.interfaces_=function a(){return[sx,pD]};sC.prototype.getClass=function a(){return sC};sD.serialVersionUID.get=function(){return 6493722185909573708};Object.defineProperties(sC,sD);var sE=function a(){};sE.reverseOrder=function c(){return{compare:function c(a,b){return b.compareTo(a)}}};sE.min=function b(a){sE.sort(a);return a.get(0)};sE.sort=function c(a,b){var d=a.toArray();b?rc.sort(d,b):rc.sort(d);var e=a.iterator();for(var f=0,g=d.length;f<g;f++)e.next(),e.set(d[f])};sE.singletonList=function b(a){var c=new qF();c.add(a);return c};var sF=function a(){this._boundable1=null;this._boundable2=null;this._distance=null;this._itemDistance=null;var b=arguments[0],c=arguments[1],d=arguments[2];this._boundable1=b;this._boundable2=c;this._itemDistance=d;this._distance=this.distance()};sF.prototype.expandToQueue=function c(a,b){var d=sF.isComposite(this._boundable1),e=sF.isComposite(this._boundable2);if(d&&e){if(sF.area(this._boundable1)>sF.area(this._boundable2)){this.expand(this._boundable1,this._boundable2,a,b);return null}else{this.expand(this._boundable2,this._boundable1,a,b);return null}}else if(d){this.expand(this._boundable1,this._boundable2,a,b);return null}else if(e){this.expand(this._boundable2,this._boundable1,a,b);return null};throw new pv('neither boundable is composite')};sF.prototype.isLeaves=function a(){return!(sF.isComposite(this._boundable1)||sF.isComposite(this._boundable2))};sF.prototype.compareTo=function b(a){var c=a;if(this._distance<c._distance){return-1}if(this._distance>c._distance){return 1}return 0};sF.prototype.expand=function e(a,b,c,d){var f=this,g=a.getChildBoundables();for(var h=g.iterator();h.hasNext();){var i=h.next(),j=new sF(i,b,f._itemDistance);j.getDistance()<d&&c.add(j)}};sF.prototype.getBoundable=function b(a){if(a===0){return this._boundable1}return this._boundable2};sF.prototype.getDistance=function a(){return this._distance};sF.prototype.distance=function a(){if(this.isLeaves()){return this._itemDistance.distance(this._boundable1,this._boundable2)}return this._boundable1.getBounds().distance(this._boundable2.getBounds())};sF.prototype.interfaces_=function a(){return[pA]};sF.prototype.getClass=function a(){return sF};sF.area=function b(a){return a.getBounds().getArea()};sF.isComposite=function b(a){return a instanceof sC};var sG=function a(){this._root=null;this._built=!1;this._itemBoundables=new qF();this._nodeCapacity=null;if(arguments.length===0){var b=a.DEFAULT_NODE_CAPACITY;this._nodeCapacity=b}else if(arguments.length===1){var c=arguments[0];qh.isTrue(c>1,'Node capacity must be greater than 1');this._nodeCapacity=c}},sH={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};sG.prototype.getNodeCapacity=function a(){return this._nodeCapacity};sG.prototype.lastNode=function b(a){return a.get(a.size()-1)};sG.prototype.size=function(){var b=this;if(arguments.length===0){if(this.isEmpty()){return 0}this.build();return this.size(this._root)}else if(arguments.length===1){var c=arguments[0],a=0;for(var d=c.getChildBoundables().iterator();d.hasNext();){var e=d.next();e instanceof sC?(a+=b.size(e)):e instanceof sy&&(a+=1)}return a}};sG.prototype.removeItem=function c(a,b){var d=null;for(var e=a.getChildBoundables().iterator();e.hasNext();){var f=e.next();f instanceof sy&&(f.getItem()===b&&(d=f))}if(d!==null){a.getChildBoundables().remove(d);return !0}return !1};sG.prototype.itemsTree=function a(){var b=this;if(arguments.length===0){this.build();var c=this.itemsTree(this._root);if(c===null){return new qF()}return c}else if(arguments.length===1){var d=arguments[0],e=new qF();for(var f=d.getChildBoundables().iterator();f.hasNext();){var g=f.next();if(g instanceof sC){var h=b.itemsTree(g);h!==null&&e.add(h)}else g instanceof sy?e.add(g.getItem()):qh.shouldNeverReachHere()}if(e.size()<=0){return null}return e}};sG.prototype.insert=function c(a,b){qh.isTrue(!this._built,'Cannot insert items into an STR packed R-tree after it has been built.');this._itemBoundables.add(new sy(a,b))};sG.prototype.boundablesAtLevel=function a(){var b=this;if(arguments.length===1){var c=arguments[0],d=new qF();this.boundablesAtLevel(c,this._root,d);return d}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2];qh.isTrue(e>-2);if(f.getLevel()===e){g.add(f);return null}for(var h=f.getChildBoundables().iterator();h.hasNext();){var i=h.next();i instanceof sC?b.boundablesAtLevel(e,i,g):(qh.isTrue(i instanceof sy),e===-1&&g.add(i))}return null}};sG.prototype.query=function a(){var b=this;if(arguments.length===1){var c=arguments[0];this.build();var d=new qF();if(this.isEmpty()){return d}this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.query(c,this._root,d);return d}else if(arguments.length===2){var e=arguments[0],f=arguments[1];this.build();if(this.isEmpty()){return null}this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,f)}else if(arguments.length===3){if(pK(arguments[2],sA)&&(arguments[0] instanceof Object&&arguments[1] instanceof sC)){var g=arguments[0],h=arguments[1],i=arguments[2],j=h.getChildBoundables();for(var k=0;k<j.size();k++){var l=j.get(k);if(!b.getIntersectsOp().intersects(l.getBounds(),g)){continue}l instanceof sC?b.query(g,l,i):l instanceof sy?i.visitItem(l.getItem()):qh.shouldNeverReachHere()}}else if(pK(arguments[2],qD)&&(arguments[0] instanceof Object&&arguments[1] instanceof sC)){var m=arguments[0],n=arguments[1],o=arguments[2],p=n.getChildBoundables();for(var q=0;q<p.size();q++){var r=p.get(q);if(!b.getIntersectsOp().intersects(r.getBounds(),m)){continue}r instanceof sC?b.query(m,r,o):r instanceof sy?o.add(r.getItem()):qh.shouldNeverReachHere()}}}};sG.prototype.build=function a(){if(this._built){return null}this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1);this._itemBoundables=null;this._built=!0};sG.prototype.getRoot=function a(){this.build();return this._root};sG.prototype.remove=function a(){var b=this;if(arguments.length===2){var c=arguments[0],d=arguments[1];this.build();if(this.getIntersectsOp().intersects(this._root.getBounds(),c)){return this.remove(c,this._root,d)}return !1}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2],h=this.removeItem(f,g);if(h){return !0}var i=null;for(var j=f.getChildBoundables().iterator();j.hasNext();){var k=j.next();if(!b.getIntersectsOp().intersects(k.getBounds(),e)){continue}if(k instanceof sC){h=b.remove(e,k,g);if(h){i=k;break}}}i!==null&&(i.getChildBoundables().isEmpty()&&f.getChildBoundables().remove(i));return h}};sG.prototype.createHigherLevels=function c(a,b){qh.isTrue(!a.isEmpty());var d=this.createParentBoundables(a,b+1);if(d.size()===1){return d.get(0)}return this.createHigherLevels(d,b+1)};sG.prototype.depth=function a(){var b=this;if(arguments.length===0){if(this.isEmpty()){return 0}this.build();return this.depth(this._root)}else if(arguments.length===1){var c=arguments[0],d=0;for(var e=c.getChildBoundables().iterator();e.hasNext();){var f=e.next();if(f instanceof sC){var g=b.depth(f);g>d&&(d=g)}}return d+1}};sG.prototype.createParentBoundables=function c(a,b){var d=this;qh.isTrue(!a.isEmpty());var e=new qF();e.add(this.createNode(b));var f=new qF(a);sE.sort(f,this.getComparator());for(var g=f.iterator();g.hasNext();){var h=g.next();d.lastNode(e).getChildBoundables().size()===d.getNodeCapacity()&&e.add(d.createNode(b));d.lastNode(e).addChildBoundable(h)}return e};sG.prototype.isEmpty=function a(){if(!this._built){return this._itemBoundables.isEmpty()}return this._root.isEmpty()};sG.prototype.interfaces_=function a(){return[pD]};sG.prototype.getClass=function a(){return sG};sG.compareDoubles=function c(a,b){return a>b?1:a<b?-1:0};sH.IntersectsOp.get=function(){return sI};sH.serialVersionUID.get=function(){return-3886435814360241000};sH.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(sG,sH);var sI=function a(){},sJ=function a(){};sJ.prototype.distance=function c(a,b){};sJ.prototype.interfaces_=function a(){return[]};sJ.prototype.getClass=function a(){return sJ};var sK=function(c){function d(a){a=a||d.DEFAULT_NODE_CAPACITY;c.call(this,a)}c&&(d.__proto__=c);d.prototype=Object.create(c&&c.prototype);d.prototype.constructor=d;var f={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};d.prototype.createParentBoundablesFromVerticalSlices=function c(a,b){var d=this;qh.isTrue(a.length>0);var e=new qF();for(var f=0;f<a.length;f++)e.addAll(d.createParentBoundablesFromVerticalSlice(a[f],b));return e};d.prototype.createNode=function b(a){return new sL(a)};d.prototype.size=function a(){if(arguments.length===0){return c.prototype.size.call(this)}else{return c.prototype.size.apply(this,arguments)}};d.prototype.insert=function a(){if(arguments.length===2){var b=arguments[0],d=arguments[1];if(b.isNull()){return null}c.prototype.insert.call(this,b,d)}else{return c.prototype.insert.apply(this,arguments)}};d.prototype.getIntersectsOp=function a(){return d.intersectsOp};d.prototype.verticalSlices=function c(a,b){var d=Math.trunc(Math.ceil(a.size()/b)),e=new Array(b).fill(null),f=a.iterator();for(var g=0;g<b;g++){e[g]=new qF();var h=0;while(f.hasNext()&&h<d){var i=f.next();e[g].add(i);h++}}return e};d.prototype.query=function a(){if(arguments.length===1){var b=arguments[0];return c.prototype.query.call(this,b)}else if(arguments.length===2){var d=arguments[0],e=arguments[1];c.prototype.query.call(this,d,e)}else if(arguments.length===3){if(pK(arguments[2],sA)&&(arguments[0] instanceof Object&&arguments[1] instanceof sC)){var f=arguments[0],g=arguments[1],h=arguments[2];c.prototype.query.call(this,f,g,h)}else if(pK(arguments[2],qD)&&(arguments[0] instanceof Object&&arguments[1] instanceof sC)){var i=arguments[0],j=arguments[1],k=arguments[2];c.prototype.query.call(this,i,j,k)}}};d.prototype.getComparator=function a(){return d.yComparator};d.prototype.createParentBoundablesFromVerticalSlice=function d(a,b){return c.prototype.createParentBoundables.call(this,a,b)};d.prototype.remove=function a(){if(arguments.length===2){var b=arguments[0],d=arguments[1];return c.prototype.remove.call(this,b,d)}else{return c.prototype.remove.apply(this,arguments)}};d.prototype.depth=function a(){if(arguments.length===0){return c.prototype.depth.call(this)}else{return c.prototype.depth.apply(this,arguments)}};d.prototype.createParentBoundables=function c(a,b){qh.isTrue(!a.isEmpty());var e=Math.trunc(Math.ceil(a.size()/this.getNodeCapacity())),f=new qF(a);sE.sort(f,d.xComparator);var g=this.verticalSlices(f,Math.trunc(Math.ceil(Math.sqrt(e))));return this.createParentBoundablesFromVerticalSlices(g,b)};d.prototype.nearestNeighbour=function a(){if(arguments.length===1){if(pK(arguments[0],sJ)){var b=arguments[0],c=new sF(this.getRoot(),this.getRoot(),b);return this.nearestNeighbour(c)}else if(arguments[0] instanceof sF){var e=arguments[0];return this.nearestNeighbour(e,pw.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0] instanceof d&&pK(arguments[1],sJ)){var f=arguments[0],g=arguments[1],h=new sF(this.getRoot(),f.getRoot(),g);return this.nearestNeighbour(h)}else if(arguments[0] instanceof sF&&typeof arguments[1]==='number'){var i=arguments[0],j=arguments[1],k=j,l=null,m=new sz();m.add(i);while(!m.isEmpty()&&k>0.0){var n=m.poll(),o=n.getDistance();if(o>=k){break}n.isLeaves()?(k=o,l=n):n.expandToQueue(m,k)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(arguments.length===3){var p=arguments[0],q=arguments[1],r=arguments[2],s=new sy(p,q),t=new sF(this.getRoot(),s,r);return this.nearestNeighbour(t)[0]}};d.prototype.interfaces_=function a(){return[sB,pD]};d.prototype.getClass=function a(){return d};d.centreX=function b(a){return d.avg(a.getMinX(),a.getMaxX())};d.avg=function c(a,b){return(a+b)/2};d.centreY=function b(a){return d.avg(a.getMinY(),a.getMaxY())};f.STRtreeNode.get=function(){return sL};f.serialVersionUID.get=function(){return 259274702368956900};f.xComparator.get=function(){return{interfaces_:function(){return[pC]},compare:function(a,b){return c.compareDoubles(d.centreX(a.getBounds()),d.centreX(b.getBounds()))}}};f.yComparator.get=function(){return{interfaces_:function(){return[pC]},compare:function(a,b){return c.compareDoubles(d.centreY(a.getBounds()),d.centreY(b.getBounds()))}}};f.intersectsOp.get=function(){return{interfaces_:function(){return[c.IntersectsOp]},intersects:function(a,b){return a.intersects(b)}}};f.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(d,f);return d}(sG),sL=function(a){function b(){var b=arguments[0];a.call(this,b)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.computeBounds=function a(){var b=null;for(var c=this.getChildBoundables().iterator();c.hasNext();){var d=c.next();b===null?(b=new p_(d.getBounds())):b.expandToInclude(d.getBounds())}return b};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(sC),sM=function a(){};sM.prototype.interfaces_=function a(){return[]};sM.prototype.getClass=function a(){return sM};sM.relativeSign=function c(a,b){if(a<b){return-1}if(a>b){return 1}return 0};sM.compare=function d(a,b,c){if(b.equals2D(c)){return 0}var e=sM.relativeSign(b.x,c.x),f=sM.relativeSign(b.y,c.y);switch(a){case 0:return sM.compareValue(e,f);case 1:return sM.compareValue(f,e);case 2:return sM.compareValue(f,-e);case 3:return sM.compareValue(-e,f);case 4:return sM.compareValue(-e,-f);case 5:return sM.compareValue(-f,-e);case 6:return sM.compareValue(-f,e);case 7:return sM.compareValue(e,-f);default:};qh.shouldNeverReachHere('invalid octant value');return 0};sM.compareValue=function c(a,b){if(a<0){return-1}if(a>0){return 1}if(b<0){return-1}if(b>0){return 1}return 0};var sN=function a(){this._segString=null;this.coord=null;this.segmentIndex=null;this._segmentOctant=null;this._isInterior=null;var b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3];this._segString=b;this.coord=new pE(c);this.segmentIndex=d;this._segmentOctant=e;this._isInterior=!c.equals2D(b.getCoordinate(d))};sN.prototype.getCoordinate=function a(){return this.coord};sN.prototype.print=function b(a){a.print(this.coord);a.print(' seg # = '+this.segmentIndex)};sN.prototype.compareTo=function b(a){var c=a;if(this.segmentIndex<c.segmentIndex){return-1}if(this.segmentIndex>c.segmentIndex){return 1}if(this.coord.equals2D(c.coord)){return 0}return sM.compare(this._segmentOctant,this.coord,c.coord)};sN.prototype.isEndPoint=function b(a){if(this.segmentIndex===0&&!this._isInterior){return !0}if(this.segmentIndex===a){return !0}return !1};sN.prototype.isInterior=function a(){return this._isInterior};sN.prototype.interfaces_=function a(){return[pA]};sN.prototype.getClass=function a(){return sN};var sO=function a(){this._nodeMap=new qZ();this._edge=null;var b=arguments[0];this._edge=b};sO.prototype.getSplitCoordinates=function a(){var b=this,c=new qH();this.addEndpoints();var d=this.iterator(),e=d.next();while(d.hasNext()){var f=d.next();b.addEdgeCoordinates(e,f,c);e=f}return c.toCoordinateArray()};sO.prototype.addCollapsedNodes=function a(){var b=this,c=new qF();this.findCollapsesFromInsertedNodes(c);this.findCollapsesFromExistingVertices(c);for(var d=c.iterator();d.hasNext();){var e=d.next().intValue();b.add(b._edge.getCoordinate(e),e)}};sO.prototype.print=function b(a){a.println('Intersections:');for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(a)}};sO.prototype.findCollapsesFromExistingVertices=function b(a){var c=this;for(var d=0;d<this._edge.size()-2;d++){var e=c._edge.getCoordinate(d),f=c._edge.getCoordinate(d+2);e.equals2D(f)&&a.add(new pO(d+1))}};sO.prototype.addEdgeCoordinates=function d(a,b,c){var e=this,f=this._edge.getCoordinate(b.segmentIndex),g=b.isInterior()||!b.coord.equals2D(f);c.add(new pE(a.coord),!1);for(var h=a.segmentIndex+1;h<=b.segmentIndex;h++)c.add(e._edge.getCoordinate(h));g&&c.add(new pE(b.coord))};sO.prototype.iterator=function a(){return this._nodeMap.values().iterator()};sO.prototype.addSplitEdges=function b(a){var c=this;this.addEndpoints();this.addCollapsedNodes();var d=this.iterator(),e=d.next();while(d.hasNext()){var f=d.next(),g=c.createSplitEdge(e,f);a.add(g);e=f}};sO.prototype.findCollapseIndex=function d(a,b,c){if(!a.coord.equals2D(b.coord)){return !1}var e=b.segmentIndex-a.segmentIndex;b.isInterior()||e--;if(e===1){c[0]=a.segmentIndex+1;return !0}return !1};sO.prototype.findCollapsesFromInsertedNodes=function b(a){var c=this,d=new Array(1).fill(null),e=this.iterator(),f=e.next();while(e.hasNext()){var g=e.next(),h=c.findCollapseIndex(f,g,d);h&&a.add(new pO(d[0]));f=g}};sO.prototype.getEdge=function a(){return this._edge};sO.prototype.addEndpoints=function a(){var b=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0);this.add(this._edge.getCoordinate(b),b)};sO.prototype.createSplitEdge=function c(a,b){var d=this,e=b.segmentIndex-a.segmentIndex+2,f=this._edge.getCoordinate(b.segmentIndex),g=b.isInterior()||!b.coord.equals2D(f);g||e--;var h=new Array(e).fill(null),i=0;h[i++]=new pE(a.coord);for(var j=a.segmentIndex+1;j<=b.segmentIndex;j++)h[i++]=d._edge.getCoordinate(j);g&&(h[i]=new pE(b.coord));return new sS(h,this._edge.getData())};sO.prototype.add=function c(a,b){var d=new sN(this._edge,a,b,this._edge.getSegmentOctant(b)),e=this._nodeMap.get(d);if(e!==null){qh.isTrue(e.coord.equals2D(a),'Found equal nodes with different coordinates');return e}this._nodeMap.put(d,d);return d};sO.prototype.checkSplitEdgesCorrectness=function b(a){var c=this._edge.getCoordinates(),d=a.get(0),e=d.getCoordinate(0);if(!e.equals2D(c[0])){throw new qf('bad split edge start point at '+e)}var f=a.get(a.size()-1),g=f.getCoordinates(),h=g[g.length-1];if(!h.equals2D(c[c.length-1])){throw new qf('bad split edge end point at '+h)}};sO.prototype.interfaces_=function a(){return[]};sO.prototype.getClass=function a(){return sO};var sP=function a(){};sP.prototype.interfaces_=function a(){return[]};sP.prototype.getClass=function a(){return sP};sP.octant=function a(){if(typeof arguments[0]==='number'&&typeof arguments[1]==='number'){var b=arguments[0],c=arguments[1];if(b===0.0&&c===0.0){throw new pv('Cannot compute the octant for point ( '+b+', '+c+' )')}var d=Math.abs(b),e=Math.abs(c);if(b>=0){if(c>=0){if(d>=e){return 0}else{return 1}}else{if(d>=e){return 7}else{return 6}}}else{if(c>=0){if(d>=e){return 3}else{return 2}}else{if(d>=e){return 4}else{return 5}}}}else if(arguments[0] instanceof pE&&arguments[1] instanceof pE){var f=arguments[0],g=arguments[1],h=g.x-f.x,i=g.y-f.y;if(h===0.0&&i===0.0){throw new pv('Cannot compute the octant for two identical points '+f)}return sP.octant(h,i)}};var sQ=function a(){};sQ.prototype.getCoordinates=function a(){};sQ.prototype.size=function a(){};sQ.prototype.getCoordinate=function b(a){};sQ.prototype.isClosed=function a(){};sQ.prototype.setData=function b(a){};sQ.prototype.getData=function a(){};sQ.prototype.interfaces_=function a(){return[]};sQ.prototype.getClass=function a(){return sQ};var sR=function a(){};sR.prototype.addIntersection=function c(a,b){};sR.prototype.interfaces_=function a(){return[sQ]};sR.prototype.getClass=function a(){return sR};var sS=function a(){this._nodeList=new sO(this);this._pts=null;this._data=null;var b=arguments[0],c=arguments[1];this._pts=b;this._data=c};sS.prototype.getCoordinates=function a(){return this._pts};sS.prototype.size=function a(){return this._pts.length};sS.prototype.getCoordinate=function b(a){return this._pts[a]};sS.prototype.isClosed=function a(){return this._pts[0].equals(this._pts[this._pts.length-1])};sS.prototype.getSegmentOctant=function b(a){if(a===this._pts.length-1){return-1}return this.safeOctant(this.getCoordinate(a),this.getCoordinate(a+1))};sS.prototype.setData=function b(a){this._data=a};sS.prototype.safeOctant=function c(a,b){if(a.equals2D(b)){return 0}return sP.octant(a,b)};sS.prototype.getData=function a(){return this._data};sS.prototype.addIntersection=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1];this.addIntersectionNode(b,c)}else if(arguments.length===4){var d=arguments[0],e=arguments[1],f=arguments[3],g=new pE(d.getIntersection(f));this.addIntersection(g,e)}};sS.prototype.toString=function a(){return qe.toLineString(new rJ(this._pts))};sS.prototype.getNodeList=function a(){return this._nodeList};sS.prototype.addIntersectionNode=function c(a,b){var d=b,e=d+1;if(e<this._pts.length){var f=this._pts[e];a.equals2D(f)&&(d=e)}var g=this._nodeList.add(a,d);return g};sS.prototype.addIntersections=function d(a,b,c){var e=this;for(var f=0;f<a.getIntersectionNum();f++)e.addIntersection(a,b,c,f)};sS.prototype.interfaces_=function a(){return[sR]};sS.prototype.getClass=function a(){return sS};sS.getNodedSubstrings=function a(){if(arguments.length===1){var b=arguments[0],c=new qF();sS.getNodedSubstrings(b,c);return c}else if(arguments.length===2){var d=arguments[0],e=arguments[1];for(var f=d.iterator();f.hasNext();){var g=f.next();g.getNodeList().addSplitEdges(e)}}};var sT=function a(){this.p0=null;this.p1=null;if(arguments.length===0)this.p0=new pE(),this.p1=new pE();else if(arguments.length===1){var b=arguments[0];this.p0=new pE(b.p0);this.p1=new pE(b.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var c=arguments[0],d=arguments[1],e=arguments[2],f=arguments[3];this.p0=new pE(c,d);this.p1=new pE(e,f)}},sU={serialVersionUID:{configurable:!0}};sT.prototype.minX=function a(){return Math.min(this.p0.x,this.p1.x)};sT.prototype.orientationIndex=function a(){if(arguments[0] instanceof sT){var b=arguments[0],c=qn.orientationIndex(this.p0,this.p1,b.p0),d=qn.orientationIndex(this.p0,this.p1,b.p1);if(c>=0&&d>=0){return Math.max(c,d)}if(c<=0&&d<=0){return Math.max(c,d)}return 0}else if(arguments[0] instanceof pE){var e=arguments[0];return qn.orientationIndex(this.p0,this.p1,e)}};sT.prototype.toGeometry=function b(a){return a.createLineString([this.p0,this.p1])};sT.prototype.isVertical=function a(){return this.p0.x===this.p1.x};sT.prototype.equals=function b(a){if(!(a instanceof sT)){return !1}var c=a;return this.p0.equals(c.p0)&&this.p1.equals(c.p1)};sT.prototype.intersection=function b(a){var c=new qk();c.computeIntersection(this.p0,this.p1,a.p0,a.p1);if(c.hasIntersection()){return c.getIntersection(0)}return null};sT.prototype.project=function a(){if(arguments[0] instanceof pE){var b=arguments[0];if(b.equals(this.p0)||b.equals(this.p1)){return new pE(b)}var c=this.projectionFactor(b),d=new pE();d.x=this.p0.x+c*(this.p1.x-this.p0.x);d.y=this.p0.y+c*(this.p1.y-this.p0.y);return d}else if(arguments[0] instanceof sT){var e=arguments[0],f=this.projectionFactor(e.p0),g=this.projectionFactor(e.p1);if(f>=1.0&&g>=1.0){return null}if(f<=0.0&&g<=0.0){return null}var h=this.project(e.p0);f<0.0&&(h=this.p0);f>1.0&&(h=this.p1);var i=this.project(e.p1);g<0.0&&(i=this.p0);g>1.0&&(i=this.p1);return new sT(h,i)}};sT.prototype.normalize=function a(){this.p1.compareTo(this.p0)<0&&this.reverse()};sT.prototype.angle=function a(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};sT.prototype.getCoordinate=function b(a){if(a===0){return this.p0}return this.p1};sT.prototype.distancePerpendicular=function b(a){return qn.distancePointLinePerpendicular(a,this.p0,this.p1)};sT.prototype.minY=function a(){return Math.min(this.p0.y,this.p1.y)};sT.prototype.midPoint=function a(){return sT.midPoint(this.p0,this.p1)};sT.prototype.projectionFactor=function b(a){if(a.equals(this.p0)){return 0.0}if(a.equals(this.p1)){return 1.0}var c=this.p1.x-this.p0.x,d=this.p1.y-this.p0.y,e=c*c+d*d;if(e<=0.0){return pw.NaN}var f=((a.x-this.p0.x)*c+(a.y-this.p0.y)*d)/e;return f};sT.prototype.closestPoints=function b(a){var c=this.intersection(a);if(c!==null){return[c,c]}var d=new Array(2).fill(null),e=pw.MAX_VALUE,f=null,g=this.closestPoint(a.p0);e=g.distance(a.p0);d[0]=g;d[1]=a.p0;var h=this.closestPoint(a.p1);f=h.distance(a.p1);f<e&&(e=f,d[0]=h,d[1]=a.p1);var i=a.closestPoint(this.p0);f=i.distance(this.p0);f<e&&(e=f,d[0]=this.p0,d[1]=i);var j=a.closestPoint(this.p1);f=j.distance(this.p1);f<e&&(e=f,d[0]=this.p1,d[1]=j);return d};sT.prototype.closestPoint=function b(a){var c=this.projectionFactor(a);if(c>0&&c<1){return this.project(a)}var d=this.p0.distance(a),e=this.p1.distance(a);if(d<e){return this.p0}return this.p1};sT.prototype.maxX=function a(){return Math.max(this.p0.x,this.p1.x)};sT.prototype.getLength=function a(){return this.p0.distance(this.p1)};sT.prototype.compareTo=function b(a){var c=a,d=this.p0.compareTo(c.p0);if(d!==0){return d}return this.p1.compareTo(c.p1)};sT.prototype.reverse=function a(){var b=this.p0;this.p0=this.p1;this.p1=b};sT.prototype.equalsTopo=function b(a){return this.p0.equals(a.p0)&&(this.p1.equals(a.p1)||this.p0.equals(a.p1))&&this.p1.equals(a.p0)};sT.prototype.lineIntersection=function b(a){try{var c=pZ.intersection(this.p0,this.p1,a.p0,a.p1);return c}catch(a){if(a instanceof pX);else{throw a}}finally{};return null};sT.prototype.maxY=function a(){return Math.max(this.p0.y,this.p1.y)};sT.prototype.pointAlongOffset=function c(a,b){var d=this.p0.x+a*(this.p1.x-this.p0.x),e=this.p0.y+a*(this.p1.y-this.p0.y),f=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,h=Math.sqrt(f*f+g*g),i=0.0,j=0.0;if(b!==0.0){if(h<=0.0){throw new Error('Cannot compute offset from zero-length line segment')}i=b*f/h;j=b*g/h}var k=d-j,l=e+i,m=new pE(k,l);return m};sT.prototype.setCoordinates=function a(){if(arguments.length===1){var b=arguments[0];this.setCoordinates(b.p0,b.p1)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.p0.x=c.x;this.p0.y=c.y;this.p1.x=d.x;this.p1.y=d.y}};sT.prototype.segmentFraction=function b(a){var c=this.projectionFactor(a);c<0.0?(c=0.0):(c>1.0||pw.isNaN(c))&&(c=1.0);return c};sT.prototype.toString=function a(){return'LINESTRING( '+this.p0.x+' '+this.p0.y+', '+this.p1.x+' '+this.p1.y+')'};sT.prototype.isHorizontal=function a(){return this.p0.y===this.p1.y};sT.prototype.distance=function a(){if(arguments[0] instanceof sT){var b=arguments[0];return qn.distanceLineLine(this.p0,this.p1,b.p0,b.p1)}else if(arguments[0] instanceof pE){var c=arguments[0];return qn.distancePointLine(c,this.p0,this.p1)}};sT.prototype.pointAlong=function b(a){var c=new pE();c.x=this.p0.x+a*(this.p1.x-this.p0.x);c.y=this.p0.y+a*(this.p1.y-this.p0.y);return c};sT.prototype.hashCode=function a(){var b=pw.doubleToLongBits(this.p0.x);b^=pw.doubleToLongBits(this.p0.y)*31;var c=Math.trunc(b)^Math.trunc(b>>32),d=pw.doubleToLongBits(this.p1.x);d^=pw.doubleToLongBits(this.p1.y)*31;var e=Math.trunc(d)^Math.trunc(d>>32);return c^e};sT.prototype.interfaces_=function a(){return[pA,pD]};sT.prototype.getClass=function a(){return sT};sT.midPoint=function c(a,b){return new pE((a.x+b.x)/2,(a.y+b.y)/2)};sU.serialVersionUID.get=function(){return 3252005833466256227};Object.defineProperties(sT,sU);var sV=function a(){this.tempEnv1=new p_();this.tempEnv2=new p_();this._overlapSeg1=new sT();this._overlapSeg2=new sT()};sV.prototype.overlap=function a(){if(arguments.length===2);else if(arguments.length===4){var b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3];b.getLineSegment(c,this._overlapSeg1);d.getLineSegment(e,this._overlapSeg2);this.overlap(this._overlapSeg1,this._overlapSeg2)}};sV.prototype.interfaces_=function a(){return[]};sV.prototype.getClass=function a(){return sV};var sW=function a(){this._pts=null;this._start=null;this._end=null;this._env=null;this._context=null;this._id=null;var b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3];this._pts=b;this._start=c;this._end=d;this._context=e};sW.prototype.getLineSegment=function c(a,b){b.p0=this._pts[a];b.p1=this._pts[a+1]};sW.prototype.computeSelect=function e(a,b,c,d){var f=this._pts[b],g=this._pts[c];d.tempEnv1.init(f,g);if(c-b===1){d.select(this,b);return null}if(!a.intersects(d.tempEnv1)){return null}var h=Math.trunc((b+c)/2);b<h&&this.computeSelect(a,b,h,d);h<c&&this.computeSelect(a,h,c,d)};sW.prototype.getCoordinates=function a(){var b=this,c=new Array(this._end-this._start+1).fill(null),d=0;for(var e=this._start;e<=this._end;e++)c[d++]=b._pts[e];return c};sW.prototype.computeOverlaps=function c(a,b){this.computeOverlapsInternal(this._start,this._end,a,a._start,a._end,b)};sW.prototype.setId=function b(a){this._id=a};sW.prototype.select=function c(a,b){this.computeSelect(a,this._start,this._end,b)};sW.prototype.getEnvelope=function a(){if(this._env===null){var b=this._pts[this._start],c=this._pts[this._end];this._env=new p_(b,c)}return this._env};sW.prototype.getEndIndex=function a(){return this._end};sW.prototype.getStartIndex=function a(){return this._start};sW.prototype.getContext=function a(){return this._context};sW.prototype.getId=function a(){return this._id};sW.prototype.computeOverlapsInternal=function g(a,b,c,d,e,f){var h=this._pts[a],i=this._pts[b],j=c._pts[d],k=c._pts[e];if(b-a===1&&e-d===1){f.overlap(this,a,c,d);return null}f.tempEnv1.init(h,i);f.tempEnv2.init(j,k);if(!f.tempEnv1.intersects(f.tempEnv2)){return null}var l=Math.trunc((a+b)/2),m=Math.trunc((d+e)/2);a<l&&(d<m&&this.computeOverlapsInternal(a,l,c,d,m,f),m<e&&this.computeOverlapsInternal(a,l,c,m,e,f));l<b&&(d<m&&this.computeOverlapsInternal(l,b,c,d,m,f),m<e&&this.computeOverlapsInternal(l,b,c,m,e,f))};sW.prototype.interfaces_=function a(){return[]};sW.prototype.getClass=function a(){return sW};var sX=function a(){};sX.prototype.interfaces_=function a(){return[]};sX.prototype.getClass=function a(){return sX};sX.getChainStartIndices=function b(a){var c=0,d=new qF();d.add(new pO(c));do{var e=sX.findChainEnd(a,c);d.add(new pO(e));c=e}while(c<a.length-1);var f=sX.toIntArray(d);return f};sX.findChainEnd=function c(a,b){var d=b;while(d<a.length-1&&a[d].equals2D(a[d+1]))d++;if(d>=a.length-1){return a.length-1}var e=sq.quadrant(a[d],a[d+1]),f=b+1;while(f<a.length){if(!a[f-1].equals2D(a[f])){var g=sq.quadrant(a[f-1],a[f]);if(g!==e){break}}f++}return f-1};sX.getChains=function a(){if(arguments.length===1){var b=arguments[0];return sX.getChains(b,null)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],e=new qF(),f=sX.getChainStartIndices(c);for(var g=0;g<f.length-1;g++){var h=new sW(c,f[g],f[g+1],d);e.add(h)}return e}};sX.toIntArray=function b(a){var c=new Array(a.size()).fill(null);for(var d=0;d<c.length;d++)c[d]=a.get(d).intValue();return c};var sY=function a(){};sY.prototype.computeNodes=function b(a){};sY.prototype.getNodedSubstrings=function a(){};sY.prototype.interfaces_=function a(){return[]};sY.prototype.getClass=function a(){return sY};var sZ=function a(){this._segInt=null;if(arguments.length===0);else if(arguments.length===1){var b=arguments[0];this.setSegmentIntersector(b)}};sZ.prototype.setSegmentIntersector=function b(a){this._segInt=a};sZ.prototype.interfaces_=function a(){return[sY]};sZ.prototype.getClass=function a(){return sZ};var s_=function(a){function b(b){b?a.call(this,b):a.call(this);this._monoChains=new qF();this._index=new sK();this._idCounter=0;this._nodedSegStrings=null;this._nOverlaps=0}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={SegmentOverlapAction:{configurable:!0}};b.prototype.getMonotoneChains=function a(){return this._monoChains};b.prototype.getNodedSubstrings=function a(){return sS.getNodedSubstrings(this._nodedSegStrings)};b.prototype.getIndex=function a(){return this._index};b.prototype.add=function b(a){var c=this,d=sX.getChains(a.getCoordinates(),a);for(var e=d.iterator();e.hasNext();){var f=e.next();f.setId(c._idCounter++);c._index.insert(f.getEnvelope(),f);c._monoChains.add(f)}};b.prototype.computeNodes=function b(a){var c=this;this._nodedSegStrings=a;for(var d=a.iterator();d.hasNext();)c.add(d.next());this.intersectChains()};b.prototype.intersectChains=function a(){var b=this,c=new s$(this._segInt);for(var d=this._monoChains.iterator();d.hasNext();){var e=d.next(),f=b._index.query(e.getEnvelope());for(var g=f.iterator();g.hasNext();){var h=g.next();h.getId()>e.getId()&&(e.computeOverlaps(h,c),b._nOverlaps++);if(b._segInt.isDone()){return null}}}};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};c.SegmentOverlapAction.get=function(){return s$};Object.defineProperties(b,c);return b}(sZ),s$=function(a){function b(){a.call(this);this._si=null;var b=arguments[0];this._si=b}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.overlap=function b(){if(arguments.length===4){var c=arguments[0],d=arguments[1],e=arguments[2],f=arguments[3],g=c.getContext(),h=e.getContext();this._si.processIntersections(g,d,h,f)}else{return a.prototype.overlap.apply(this,arguments)}};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(sV),ta=function a(){this._quadrantSegments=a.DEFAULT_QUADRANT_SEGMENTS;this._endCapStyle=a.CAP_ROUND;this._joinStyle=a.JOIN_ROUND;this._mitreLimit=a.DEFAULT_MITRE_LIMIT;this._isSingleSided=!1;this._simplifyFactor=a.DEFAULT_SIMPLIFY_FACTOR;if(arguments.length===0);else if(arguments.length===1){var b=arguments[0];this.setQuadrantSegments(b)}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this.setQuadrantSegments(c);this.setEndCapStyle(d)}else if(arguments.length===4){var e=arguments[0],f=arguments[1],g=arguments[2],h=arguments[3];this.setQuadrantSegments(e);this.setEndCapStyle(f);this.setJoinStyle(g);this.setMitreLimit(h)}},tb={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};ta.prototype.getEndCapStyle=function a(){return this._endCapStyle};ta.prototype.isSingleSided=function a(){return this._isSingleSided};ta.prototype.setQuadrantSegments=function b(a){this._quadrantSegments=a;this._quadrantSegments===0&&(this._joinStyle=ta.JOIN_BEVEL);this._quadrantSegments<0&&(this._joinStyle=ta.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments));a<=0&&(this._quadrantSegments=1);this._joinStyle!==ta.JOIN_ROUND&&(this._quadrantSegments=ta.DEFAULT_QUADRANT_SEGMENTS)};ta.prototype.getJoinStyle=function a(){return this._joinStyle};ta.prototype.setJoinStyle=function b(a){this._joinStyle=a};ta.prototype.setSimplifyFactor=function b(a){this._simplifyFactor=a<0?0:a};ta.prototype.getSimplifyFactor=function a(){return this._simplifyFactor};ta.prototype.getQuadrantSegments=function a(){return this._quadrantSegments};ta.prototype.setEndCapStyle=function b(a){this._endCapStyle=a};ta.prototype.getMitreLimit=function a(){return this._mitreLimit};ta.prototype.setMitreLimit=function b(a){this._mitreLimit=a};ta.prototype.setSingleSided=function b(a){this._isSingleSided=a};ta.prototype.interfaces_=function a(){return[]};ta.prototype.getClass=function a(){return ta};ta.bufferDistanceError=function b(a){var c=Math.PI/2.0/a;return 1-Math.cos(c/2.0)};tb.CAP_ROUND.get=function(){return 1};tb.CAP_FLAT.get=function(){return 2};tb.CAP_SQUARE.get=function(){return 3};tb.JOIN_ROUND.get=function(){return 1};tb.JOIN_MITRE.get=function(){return 2};tb.JOIN_BEVEL.get=function(){return 3};tb.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};tb.DEFAULT_MITRE_LIMIT.get=function(){return 5.0};tb.DEFAULT_SIMPLIFY_FACTOR.get=function(){return 0.01};Object.defineProperties(ta,tb);var tc=function b(a){this._distanceTol=null;this._isDeleted=null;this._angleOrientation=qn.COUNTERCLOCKWISE;this._inputLine=a||null},td={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};tc.prototype.isDeletable=function e(a,b,c,d){var f=this._inputLine[a],g=this._inputLine[b],h=this._inputLine[c];if(!this.isConcave(f,g,h)){return !1}if(!this.isShallow(f,g,h,d)){return !1}return this.isShallowSampled(f,g,a,c,d)};tc.prototype.deleteShallowConcavities=function a(){var b=this,c=1,d=this.findNextNonDeletedIndex(c),e=this.findNextNonDeletedIndex(d),f=!1;while(e<this._inputLine.length){var g=!1;b.isDeletable(c,d,e,b._distanceTol)&&(b._isDeleted[d]=tc.DELETE,g=!0,f=!0);g?(c=e):(c=d);d=b.findNextNonDeletedIndex(c);e=b.findNextNonDeletedIndex(d)}return f};tc.prototype.isShallowConcavity=function e(a,b,c,d){var f=qn.computeOrientation(a,b,c),g=f===this._angleOrientation;if(!g){return !1}var h=qn.distancePointLine(b,a,c);return h<d};tc.prototype.isShallowSampled=function f(a,b,c,d,e){var g=this,h=Math.trunc((d-c)/tc.NUM_PTS_TO_CHECK);h<=0&&(h=1);for(var i=c;i<d;i+=h){if(!g.isShallow(a,b,g._inputLine[i],e)){return !1}}return !0};tc.prototype.isConcave=function(a,b,c){var e=qn.computeOrientation(a,b,c),d=e===this._angleOrientation;return d};tc.prototype.simplify=function b(a){var c=this;this._distanceTol=Math.abs(a);a<0&&(this._angleOrientation=qn.CLOCKWISE);this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do{d=c.deleteShallowConcavities()}while(d);return this.collapseLine()};tc.prototype.findNextNonDeletedIndex=function b(a){var c=a+1;while(c<this._inputLine.length&&this._isDeleted[c]===tc.DELETE)c++;return c};tc.prototype.isShallow=function e(a,b,c,d){var f=qn.distancePointLine(b,a,c);return f<d};tc.prototype.collapseLine=function a(){var b=this,c=new qH();for(var d=0;d<this._inputLine.length;d++)b._isDeleted[d]!==tc.DELETE&&c.add(b._inputLine[d]);return c.toCoordinateArray()};tc.prototype.interfaces_=function a(){return[]};tc.prototype.getClass=function a(){return tc};tc.simplify=function c(a,b){var d=new tc(a);return d.simplify(b)};td.INIT.get=function(){return 0};td.DELETE.get=function(){return 1};td.KEEP.get=function(){return 1};td.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(tc,td);var te=function a(){this._ptList=null;this._precisionModel=null;this._minimimVertexDistance=0.0;this._ptList=new qF()},tf={COORDINATE_ARRAY_TYPE:{configurable:!0}};te.prototype.getCoordinates=function a(){var b=this._ptList.toArray(te.COORDINATE_ARRAY_TYPE);return b};te.prototype.setPrecisionModel=function b(a){this._precisionModel=a};te.prototype.addPt=function b(a){var c=new pE(a);this._precisionModel.makePrecise(c);if(this.isRedundant(c)){return null}this._ptList.add(c)};te.prototype.revere=function a(){};te.prototype.addPts=function c(a,b){var d=this;if(b){for(var e=0;e<a.length;e++)d.addPt(a[e])}else{for(var f=a.length-1;f>=0;f--)d.addPt(a[f])}};te.prototype.isRedundant=function b(a){if(this._ptList.size()<1){return !1}var c=this._ptList.get(this._ptList.size()-1),d=a.distance(c);if(d<this._minimimVertexDistance){return !0}return !1};te.prototype.toString=function a(){var b=new rS(),c=b.createLineString(this.getCoordinates());return c.toString()};te.prototype.closeRing=function a(){if(this._ptList.size()<1){return null}var b=new pE(this._ptList.get(0)),c=this._ptList.get(this._ptList.size()-1);if(b.equals(c)){return null}this._ptList.add(b)};te.prototype.setMinimumVertexDistance=function b(a){this._minimimVertexDistance=a};te.prototype.interfaces_=function a(){return[]};te.prototype.getClass=function a(){return te};tf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(te,tf);var tg=function a(){},th={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};tg.prototype.interfaces_=function a(){return[]};tg.prototype.getClass=function a(){return tg};tg.toDegrees=function b(a){return a*180/Math.PI};tg.normalize=function b(a){while(a>Math.PI)a-=tg.PI_TIMES_2;while(a<=-Math.PI)a+=tg.PI_TIMES_2;return a};tg.angle=function a(){if(arguments.length===1){var b=arguments[0];return Math.atan2(b.y,b.x)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],e=d.x-c.x,f=d.y-c.y;return Math.atan2(f,e)}};tg.isAcute=function d(a,b,c){var e=a.x-b.x,f=a.y-b.y,g=c.x-b.x,h=c.y-b.y,i=e*g+f*h;return i>0};tg.isObtuse=function d(a,b,c){var e=a.x-b.x,f=a.y-b.y,g=c.x-b.x,h=c.y-b.y,i=e*g+f*h;return i<0};tg.interiorAngle=function d(a,b,c){var e=tg.angle(b,a),f=tg.angle(b,c);return Math.abs(f-e)};tg.normalizePositive=function b(a){if(a<0.0){while(a<0.0)a+=tg.PI_TIMES_2;a>=tg.PI_TIMES_2&&(a=0.0)}else{while(a>=tg.PI_TIMES_2)a-=tg.PI_TIMES_2;a<0.0&&(a=0.0)}return a};tg.angleBetween=function d(a,b,c){var e=tg.angle(b,a),f=tg.angle(b,c);return tg.diff(e,f)};tg.diff=function c(a,b){var d=null;a<b?(d=b-a):(d=a-b);d>Math.PI&&(d=2*Math.PI-d);return d};tg.toRadians=function b(a){return a*Math.PI/180.0};tg.getTurn=function c(a,b){var d=Math.sin(b-a);if(d>0){return tg.COUNTERCLOCKWISE}if(d<0){return tg.CLOCKWISE}return tg.NONE};tg.angleBetweenOriented=function d(a,b,c){var e=tg.angle(b,a),f=tg.angle(b,c),g=f-e;if(g<=-Math.PI){return g+tg.PI_TIMES_2}if(g>Math.PI){return g-tg.PI_TIMES_2}return g};th.PI_TIMES_2.get=function(){return 2.0*Math.PI};th.PI_OVER_2.get=function(){return Math.PI/2.0};th.PI_OVER_4.get=function(){return Math.PI/4.0};th.COUNTERCLOCKWISE.get=function(){return qn.COUNTERCLOCKWISE};th.CLOCKWISE.get=function(){return qn.CLOCKWISE};th.NONE.get=function(){return qn.COLLINEAR};Object.defineProperties(tg,th);var ti=function a(){this._maxCurveSegmentError=0.0;this._filletAngleQuantum=null;this._closingSegLengthFactor=1;this._segList=null;this._distance=0.0;this._precisionModel=null;this._bufParams=null;this._li=null;this._s0=null;this._s1=null;this._s2=null;this._seg0=new sT();this._seg1=new sT();this._offset0=new sT();this._offset1=new sT();this._side=0;this._hasNarrowConcaveAngle=!1;var b=arguments[0],c=arguments[1],d=arguments[2];this._precisionModel=b;this._bufParams=c;this._li=new qk();this._filletAngleQuantum=Math.PI/2.0/c.getQuadrantSegments();c.getQuadrantSegments()>=8&&c.getJoinStyle()===ta.JOIN_ROUND&&(this._closingSegLengthFactor=a.MAX_CLOSING_SEG_LEN_FACTOR);this.init(d)},tj={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ti.prototype.addNextSegment=function c(a,b){this._s0=this._s1;this._s1=this._s2;this._s2=a;this._seg0.setCoordinates(this._s0,this._s1);this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0);this._seg1.setCoordinates(this._s1,this._s2);this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1);if(this._s1.equals(this._s2)){return null}var d=qn.computeOrientation(this._s0,this._s1,this._s2),e=d===qn.CLOCKWISE&&this._side===r_.LEFT||d===qn.COUNTERCLOCKWISE&&this._side===r_.RIGHT;d===0?this.addCollinear(b):e?this.addOutsideTurn(d,b):this.addInsideTurn(d,b)};ti.prototype.addLineEndCap=function c(a,b){var d=new sT(a,b),e=new sT();this.computeOffsetSegment(d,r_.LEFT,this._distance,e);var f=new sT();this.computeOffsetSegment(d,r_.RIGHT,this._distance,f);var g=b.x-a.x,h=b.y-a.y,i=Math.atan2(h,g);switch(this._bufParams.getEndCapStyle()){case ta.CAP_ROUND:this._segList.addPt(e.p1);this.addFilletArc(b,i+Math.PI/2,i-Math.PI/2,qn.CLOCKWISE,this._distance);this._segList.addPt(f.p1);break;case ta.CAP_FLAT:this._segList.addPt(e.p1);this._segList.addPt(f.p1);break;case ta.CAP_SQUARE:var l=new pE();l.x=Math.abs(this._distance)*Math.cos(i);l.y=Math.abs(this._distance)*Math.sin(i);var k=new pE(e.p1.x+l.x,e.p1.y+l.y);var j=new pE(f.p1.x+l.x,f.p1.y+l.y);this._segList.addPt(k);this._segList.addPt(j);break;default:}};ti.prototype.getCoordinates=function a(){var b=this._segList.getCoordinates();return b};ti.prototype.addMitreJoin=function e(a,b,c,d){var f=!0,g=null;try{g=pZ.intersection(b.p0,b.p1,c.p0,c.p1);var h=d<=0.0?1.0:g.distance(a)/Math.abs(d);h>this._bufParams.getMitreLimit()&&(f=!1)}catch(a){if(a instanceof pX)g=new pE(0,0),f=!1;else{throw a}}finally{};f?this._segList.addPt(g):this.addLimitedMitreJoin(b,c,d,this._bufParams.getMitreLimit())};ti.prototype.addFilletCorner=function f(a,b,c,d,e){var g=b.x-a.x,h=b.y-a.y,i=Math.atan2(h,g),j=c.x-a.x,k=c.y-a.y,l=Math.atan2(k,j);d===qn.CLOCKWISE?(i<=l&&(i+=2.0*Math.PI)):i>=l&&(i-=2.0*Math.PI);this._segList.addPt(b);this.addFilletArc(a,i,l,d,e);this._segList.addPt(c)};ti.prototype.addOutsideTurn=function c(a,b){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ti.OFFSET_SEGMENT_SEPARATION_FACTOR){this._segList.addPt(this._offset0.p1);return null}this._bufParams.getJoinStyle()===ta.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ta.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(b&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,a,this._distance),this._segList.addPt(this._offset1.p0))};ti.prototype.createSquare=function b(a){this._segList.addPt(new pE(a.x+this._distance,a.y+this._distance));this._segList.addPt(new pE(a.x+this._distance,a.y-this._distance));this._segList.addPt(new pE(a.x-this._distance,a.y-this._distance));this._segList.addPt(new pE(a.x-this._distance,a.y+this._distance));this._segList.closeRing()};ti.prototype.addSegments=function c(a,b){this._segList.addPts(a,b)};ti.prototype.addFirstSegment=function a(){this._segList.addPt(this._offset1.p0)};ti.prototype.addLastSegment=function a(){this._segList.addPt(this._offset1.p1)};ti.prototype.initSideSegments=function d(a,b,c){this._s1=a;this._s2=b;this._side=c;this._seg1.setCoordinates(a,b);this.computeOffsetSegment(this._seg1,c,this._distance,this._offset1)};ti.prototype.addLimitedMitreJoin=function e(a,b,c,d){var f=this._seg0.p1,g=tg.angle(f,this._seg0.p0),h=tg.angleBetweenOriented(this._seg0.p0,f,this._seg1.p1),i=h/2,j=tg.normalize(g+i),k=tg.normalize(j+Math.PI),l=d*c,m=l*Math.abs(Math.sin(i)),n=c-m,o=f.x+l*Math.cos(k),p=f.y+l*Math.sin(k),q=new pE(o,p),r=new sT(f,q),s=r.pointAlongOffset(1.0,n),t=r.pointAlongOffset(1.0,-n);this._side===r_.LEFT?(this._segList.addPt(s),this._segList.addPt(t)):(this._segList.addPt(t),this._segList.addPt(s))};ti.prototype.computeOffsetSegment=function e(a,b,c,d){var f=b===r_.LEFT?1:-1,g=a.p1.x-a.p0.x,h=a.p1.y-a.p0.y,i=Math.sqrt(g*g+h*h),j=f*c*g/i,k=f*c*h/i;d.p0.x=a.p0.x-k;d.p0.y=a.p0.y+j;d.p1.x=a.p1.x-k;d.p1.y=a.p1.y+j};ti.prototype.addFilletArc=function f(a,b,c,d,e){var g=this,h=d===qn.CLOCKWISE?-1:1,i=Math.abs(b-c),j=Math.trunc(i/this._filletAngleQuantum+0.5);if(j<1){return null}var k=0.0,l=i/j,m=k,n=new pE();while(m<i){var o=b+h*m;n.x=a.x+e*Math.cos(o);n.y=a.y+e*Math.sin(o);g._segList.addPt(n);m+=l}};ti.prototype.addInsideTurn=function c(a,b){this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1);if(this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else{this._hasNarrowConcaveAngle=!0;if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ti.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{this._segList.addPt(this._offset0.p1);if(this._closingSegLengthFactor>0){var d=new pE((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(d);var e=new pE((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(e)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}};ti.prototype.createCircle=function b(a){var c=new pE(a.x+this._distance,a.y);this._segList.addPt(c);this.addFilletArc(a,0.0,2.0*Math.PI,-1,this._distance);this._segList.closeRing()};ti.prototype.addBevelJoin=function c(a,b){this._segList.addPt(a.p1);this._segList.addPt(b.p0)};ti.prototype.init=function b(a){this._distance=a;this._maxCurveSegmentError=a*(1-Math.cos(this._filletAngleQuantum/2.0));this._segList=new te();this._segList.setPrecisionModel(this._precisionModel);this._segList.setMinimumVertexDistance(a*ti.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};ti.prototype.addCollinear=function b(a){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var c=this._li.getIntersectionNum();c>=2&&(this._bufParams.getJoinStyle()===ta.JOIN_BEVEL||this._bufParams.getJoinStyle()===ta.JOIN_MITRE?(a&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,qn.CLOCKWISE,this._distance))};ti.prototype.closeRing=function a(){this._segList.closeRing()};ti.prototype.hasNarrowConcaveAngle=function a(){return this._hasNarrowConcaveAngle};ti.prototype.interfaces_=function a(){return[]};ti.prototype.getClass=function a(){return ti};tj.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return 1.0E-3};tj.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1.0E-3};tj.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1.0E-6};tj.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(ti,tj);var tk=function a(){this._distance=0.0;this._precisionModel=null;this._bufParams=null;var b=arguments[0],c=arguments[1];this._precisionModel=b;this._bufParams=c};tk.prototype.getOffsetCurve=function c(a,b){this._distance=b;if(b===0.0){return null}var d=b<0.0,e=Math.abs(b),f=this.getSegGen(e);a.length<=1?this.computePointCurve(a[0],f):this.computeOffsetCurve(a,d,f);var g=f.getCoordinates();d&&qI.reverse(g);return g};tk.prototype.computeSingleSidedBufferCurve=function d(a,b,c){var e=this.simplifyTolerance(this._distance);if(b){c.addSegments(a,!0);var f=tc.simplify(a,-e),g=f.length-1;c.initSideSegments(f[g],f[g-1],r_.LEFT);c.addFirstSegment();for(var h=g-2;h>=0;h--)c.addNextSegment(f[h],!0)}else{c.addSegments(a,!1);var i=tc.simplify(a,e),j=i.length-1;c.initSideSegments(i[0],i[1],r_.LEFT);c.addFirstSegment();for(var k=2;k<=j;k++)c.addNextSegment(i[k],!0)}c.addLastSegment();c.closeRing()};tk.prototype.computeRingBufferCurve=function d(a,b,c){var e=this.simplifyTolerance(this._distance);b===r_.RIGHT&&(e=-e);var f=tc.simplify(a,e),g=f.length-1;c.initSideSegments(f[g-1],f[0],b);for(var h=1;h<=g;h++){var i=h!==1;c.addNextSegment(f[h],i)}c.closeRing()};tk.prototype.computeLineBufferCurve=function c(a,b){var d=this.simplifyTolerance(this._distance),e=tc.simplify(a,d),f=e.length-1;b.initSideSegments(e[0],e[1],r_.LEFT);for(var g=2;g<=f;g++)b.addNextSegment(e[g],!0);b.addLastSegment();b.addLineEndCap(e[f-1],e[f]);var h=tc.simplify(a,-d),i=h.length-1;b.initSideSegments(h[i],h[i-1],r_.LEFT);for(var j=i-2;j>=0;j--)b.addNextSegment(h[j],!0);b.addLastSegment();b.addLineEndCap(h[1],h[0]);b.closeRing()};tk.prototype.computePointCurve=function c(a,b){switch(this._bufParams.getEndCapStyle()){case ta.CAP_ROUND:b.createCircle(a);break;case ta.CAP_SQUARE:b.createSquare(a);break;default:}};tk.prototype.getLineCurve=function c(a,b){this._distance=b;if(b<0.0&&!this._bufParams.isSingleSided()){return null}if(b===0.0){return null}var d=Math.abs(b),e=this.getSegGen(d);if(a.length<=1)this.computePointCurve(a[0],e);else{if(this._bufParams.isSingleSided()){var f=b<0.0;this.computeSingleSidedBufferCurve(a,f,e)}else this.computeLineBufferCurve(a,e)}var g=e.getCoordinates();return g};tk.prototype.getBufferParameters=function a(){return this._bufParams};tk.prototype.simplifyTolerance=function b(a){return a*this._bufParams.getSimplifyFactor()};tk.prototype.getRingCurve=function d(a,b,c){this._distance=c;if(a.length<=2){return this.getLineCurve(a,c)}if(c===0.0){return tk.copyCoordinates(a)}var e=this.getSegGen(c);this.computeRingBufferCurve(a,b,e);return e.getCoordinates()};tk.prototype.computeOffsetCurve=function d(a,b,c){var e=this.simplifyTolerance(this._distance);if(b){var f=tc.simplify(a,-e),g=f.length-1;c.initSideSegments(f[g],f[g-1],r_.LEFT);c.addFirstSegment();for(var h=g-2;h>=0;h--)c.addNextSegment(f[h],!0)}else{var i=tc.simplify(a,e),j=i.length-1;c.initSideSegments(i[0],i[1],r_.LEFT);c.addFirstSegment();for(var k=2;k<=j;k++)c.addNextSegment(i[k],!0)}c.addLastSegment()};tk.prototype.getSegGen=function b(a){return new ti(this._precisionModel,this._bufParams,a)};tk.prototype.interfaces_=function a(){return[]};tk.prototype.getClass=function a(){return tk};tk.copyCoordinates=function b(a){var c=new Array(a.length).fill(null);for(var d=0;d<c.length;d++)c[d]=new pE(a[d]);return c};var tl=function a(){this._subgraphs=null;this._seg=new sT();this._cga=new qn();var b=arguments[0];this._subgraphs=b},tm={DepthSegment:{configurable:!0}};tl.prototype.findStabbedSegments=function a(){var b=this;if(arguments.length===1){var c=arguments[0],d=new qF();for(var e=this._subgraphs.iterator();e.hasNext();){var f=e.next(),g=f.getEnvelope();if(c.y<g.getMinY()||c.y>g.getMaxY()){continue}b.findStabbedSegments(c,f.getDirectedEdges(),d)}return d}else if(arguments.length===3){if(pK(arguments[2],qD)&&(arguments[0] instanceof pE&&arguments[1] instanceof st)){var h=arguments[0],i=arguments[1],j=arguments[2],k=i.getEdge().getCoordinates();for(var l=0;l<k.length-1;l++){b._seg.p0=k[l];b._seg.p1=k[l+1];b._seg.p0.y>b._seg.p1.y&&b._seg.reverse();var m=Math.max(b._seg.p0.x,b._seg.p1.x);if(m<h.x){continue}if(b._seg.isHorizontal()){continue}if(h.y<b._seg.p0.y||h.y>b._seg.p1.y){continue}if(qn.computeOrientation(b._seg.p0,b._seg.p1,h)===qn.RIGHT){continue}var n=i.getDepth(r_.LEFT);b._seg.p0.equals(k[l])||(n=i.getDepth(r_.RIGHT));var o=new tn(b._seg,n);j.add(o)}}else if(pK(arguments[2],qD)&&(arguments[0] instanceof pE&&pK(arguments[1],qD))){var p=arguments[0],q=arguments[1],r=arguments[2];for(var s=q.iterator();s.hasNext();){var t=s.next();if(!t.isForward()){continue}b.findStabbedSegments(p,t,r)}}}};tl.prototype.getDepth=function b(a){var c=this.findStabbedSegments(a);if(c.size()===0){return 0}var d=sE.min(c);return d._leftDepth};tl.prototype.interfaces_=function a(){return[]};tl.prototype.getClass=function a(){return tl};tm.DepthSegment.get=function(){return tn};Object.defineProperties(tl,tm);var tn=function a(){this._upwardSeg=null;this._leftDepth=null;var b=arguments[0],c=arguments[1];this._upwardSeg=new sT(b);this._leftDepth=c};tn.prototype.compareTo=function b(a){var c=a;if(this._upwardSeg.minX()>=c._upwardSeg.maxX()){return 1}if(this._upwardSeg.maxX()<=c._upwardSeg.minX()){return-1}var d=this._upwardSeg.orientationIndex(c._upwardSeg);if(d!==0){return d}d=-1*c._upwardSeg.orientationIndex(this._upwardSeg);if(d!==0){return d}return this._upwardSeg.compareTo(c._upwardSeg)};tn.prototype.compareX=function c(a,b){var d=a.p0.compareTo(b.p0);if(d!==0){return d}return a.p1.compareTo(b.p1)};tn.prototype.toString=function a(){return this._upwardSeg.toString()};tn.prototype.interfaces_=function a(){return[pA]};tn.prototype.getClass=function a(){return tn};var tp=function d(a,b,c){this.p0=a||null;this.p1=b||null;this.p2=c||null};tp.prototype.area=function a(){return tp.area(this.p0,this.p1,this.p2)};tp.prototype.signedArea=function a(){return tp.signedArea(this.p0,this.p1,this.p2)};tp.prototype.interpolateZ=function b(a){if(a===null){throw new pv('Supplied point is null.')}return tp.interpolateZ(a,this.p0,this.p1,this.p2)};tp.prototype.longestSideLength=function a(){return tp.longestSideLength(this.p0,this.p1,this.p2)};tp.prototype.isAcute=function a(){return tp.isAcute(this.p0,this.p1,this.p2)};tp.prototype.circumcentre=function a(){return tp.circumcentre(this.p0,this.p1,this.p2)};tp.prototype.area3D=function a(){return tp.area3D(this.p0,this.p1,this.p2)};tp.prototype.centroid=function a(){return tp.centroid(this.p0,this.p1,this.p2)};tp.prototype.inCentre=function a(){return tp.inCentre(this.p0,this.p1,this.p2)};tp.prototype.interfaces_=function a(){return[]};tp.prototype.getClass=function a(){return tp};tp.area=function d(a,b,c){return Math.abs(((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2)};tp.signedArea=function d(a,b,c){return((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2};tp.det=function e(a,b,c,d){return a*d-b*c};tp.interpolateZ=function e(a,b,c,d){var f=b.x,g=b.y,h=c.x-f,i=d.x-f,j=c.y-g,k=d.y-g,l=h*k-i*j,m=a.x-f,n=a.y-g,o=(k*m-i*n)/l,p=(-j*m+h*n)/l,q=b.z+o*(c.z-b.z)+p*(d.z-b.z);return q};tp.longestSideLength=function d(a,b,c){var e=a.distance(b),f=b.distance(c),g=c.distance(a),h=e;f>h&&(h=f);g>h&&(h=g);return h};tp.isAcute=function d(a,b,c){if(!tg.isAcute(a,b,c)){return !1}if(!tg.isAcute(b,c,a)){return !1}if(!tg.isAcute(c,a,b)){return !1}return !0};tp.circumcentre=function d(a,b,c){var e=c.x,f=c.y,g=a.x-e,h=a.y-f,i=b.x-e,j=b.y-f,k=2*tp.det(g,h,i,j),l=tp.det(h,g*g+h*h,j,i*i+j*j),m=tp.det(g,g*g+h*h,i,i*i+j*j),n=e-l/k,o=f+m/k;return new pE(n,o)};tp.perpendicularBisector=function c(a,b){var d=b.x-a.x,e=b.y-a.y,f=new pZ(a.x+d/2.0,a.y+e/2.0,1.0),g=new pZ(a.x-e+d/2.0,a.y+d+e/2.0,1.0);return new pZ(f,g)};tp.angleBisector=function d(a,b,c){var e=b.distance(a),f=b.distance(c),g=e/(e+f),h=c.x-a.x,i=c.y-a.y,j=new pE(a.x+g*h,a.y+g*i);return j};tp.area3D=function(a,b,c){var e=b.x-a.x,f=b.y-a.y,g=b.z-a.z,h=c.x-a.x,i=c.y-a.y,j=c.z-a.z,k=f*j-g*i,l=g*h-e*j,m=e*i-f*h,n=k*k+l*l+m*m,d=Math.sqrt(n)/2;return d};tp.centroid=function d(a,b,c){var e=(a.x+b.x+c.x)/3,f=(a.y+b.y+c.y)/3;return new pE(e,f)};tp.inCentre=function d(a,b,c){var e=b.distance(c),f=a.distance(c),g=a.distance(b),h=e+f+g,i=(e*a.x+f*b.x+g*c.x)/h,j=(e*a.y+f*b.y+g*c.y)/h;return new pE(i,j)};var tq=function a(){this._inputGeom=null;this._distance=null;this._curveBuilder=null;this._curveList=new qF();var b=arguments[0],c=arguments[1],d=arguments[2];this._inputGeom=b;this._distance=c;this._curveBuilder=d};tq.prototype.addPoint=function b(a){if(this._distance<=0.0){return null}var c=a.getCoordinates(),d=this._curveBuilder.getLineCurve(c,this._distance);this.addCurve(d,pI.EXTERIOR,pI.INTERIOR)};tq.prototype.addPolygon=function b(a){var c=this,d=this._distance,e=r_.LEFT;this._distance<0.0&&(d=-this._distance,e=r_.RIGHT);var f=a.getExteriorRing(),g=qI.removeRepeatedPoints(f.getCoordinates());if(this._distance<0.0&&this.isErodedCompletely(f,this._distance)){return null}if(this._distance<=0.0&&g.length<3){return null}this.addPolygonRing(g,d,e,pI.EXTERIOR,pI.INTERIOR);for(var h=0;h<a.getNumInteriorRing();h++){var i=a.getInteriorRingN(h),j=qI.removeRepeatedPoints(i.getCoordinates());if(c._distance>0.0&&c.isErodedCompletely(i,-c._distance)){continue}c.addPolygonRing(j,d,r_.opposite(e),pI.INTERIOR,pI.EXTERIOR)}};tq.prototype.isTriangleErodedCompletely=function c(a,b){var d=new tp(a[0],a[1],a[2]),e=d.inCentre(),f=qn.distancePointLine(e,d.p0,d.p1);return f<Math.abs(b)};tq.prototype.addLineString=function b(a){if(this._distance<=0.0&&!this._curveBuilder.getBufferParameters().isSingleSided()){return null}var c=qI.removeRepeatedPoints(a.getCoordinates()),d=this._curveBuilder.getLineCurve(c,this._distance);this.addCurve(d,pI.EXTERIOR,pI.INTERIOR)};tq.prototype.addCurve=function d(a,b,c){if(a===null||a.length<2){return null}var e=new sS(a,new sj(0,pI.BOUNDARY,b,c));this._curveList.add(e)};tq.prototype.getCurves=function a(){this.add(this._inputGeom);return this._curveList};tq.prototype.addPolygonRing=function f(a,b,c,d,e){if(b===0.0&&a.length<rC.MINIMUM_VALID_SIZE){return null}var g=d,h=e;a.length>=rC.MINIMUM_VALID_SIZE&&qn.isCCW(a)&&(g=e,h=d,c=r_.opposite(c));var i=this._curveBuilder.getRingCurve(a,c,b);this.addCurve(i,g,h)};tq.prototype.add=function b(a){if(a.isEmpty()){return null}a instanceof rA?this.addPolygon(a):a instanceof ru?this.addLineString(a):a instanceof rw?this.addPoint(a):a instanceof rB?this.addCollection(a):a instanceof ri?this.addCollection(a):a instanceof rD?this.addCollection(a):a instanceof rh&&this.addCollection(a)};tq.prototype.isErodedCompletely=function c(a,b){var d=a.getCoordinates();if(d.length<4){return b<0}if(d.length===4){return this.isTriangleErodedCompletely(d,b)}var e=a.getEnvelopeInternal(),f=Math.min(e.getHeight(),e.getWidth());if(b<0.0&&2*Math.abs(b)>f){return !0}return !1};tq.prototype.addCollection=function b(a){var c=this;for(var d=0;d<a.getNumGeometries();d++){var e=a.getGeometryN(d);c.add(e)}};tq.prototype.interfaces_=function a(){return[]};tq.prototype.getClass=function a(){return tq};var tr=function a(){};tr.prototype.locate=function b(a){};tr.prototype.interfaces_=function a(){return[]};tr.prototype.getClass=function a(){return tr};var ts=function a(){this._parent=null;this._atStart=null;this._max=null;this._index=null;this._subcollectionIterator=null;var b=arguments[0];this._parent=b;this._atStart=!0;this._index=0;this._max=b.getNumGeometries()};ts.prototype.next=function a(){if(this._atStart){this._atStart=!1;ts.isAtomic(this._parent)&&this._index++;return this._parent}if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext()){return this._subcollectionIterator.next()}else this._subcollectionIterator=null}if(this._index>=this._max){throw new qE()}var b=this._parent.getGeometryN(this._index++);if(b instanceof rh){this._subcollectionIterator=new ts(b);return this._subcollectionIterator.next()}return b};ts.prototype.remove=function a(){throw new Error(this.getClass().getName())};ts.prototype.hasNext=function a(){if(this._atStart){return !0}if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext()){return !0}this._subcollectionIterator=null}if(this._index>=this._max){return !1}return !0};ts.prototype.interfaces_=function a(){return[qC]};ts.prototype.getClass=function a(){return ts};ts.isAtomic=function b(a){return!(a instanceof rh)};var tt=function a(){this._geom=null;var b=arguments[0];this._geom=b};tt.prototype.locate=function b(a){return tt.locate(a,this._geom)};tt.prototype.interfaces_=function a(){return[tr]};tt.prototype.getClass=function a(){return tt};tt.isPointInRing=function c(a,b){if(!b.getEnvelopeInternal().intersects(a)){return !1}return qn.isPointInRing(a,b.getCoordinates())};tt.containsPointInPolygon=function c(a,b){if(b.isEmpty()){return !1}var d=b.getExteriorRing();if(!tt.isPointInRing(a,d)){return !1}for(var e=0;e<b.getNumInteriorRing();e++){var f=b.getInteriorRingN(e);if(tt.isPointInRing(a,f)){return !1}}return !0};tt.containsPoint=function c(a,b){if(b instanceof rA){return tt.containsPointInPolygon(a,b)}else if(b instanceof rh){var d=new ts(b);while(d.hasNext()){var e=d.next();if(e!==b){if(tt.containsPoint(a,e)){return !0}}}};return !1};tt.locate=function c(a,b){if(b.isEmpty()){return pI.EXTERIOR}if(tt.containsPoint(a,b)){return pI.INTERIOR}return pI.EXTERIOR};var tu=function a(){this._edgeMap=new qZ();this._edgeList=null;this._ptInAreaLocation=[pI.NONE,pI.NONE]};tu.prototype.getNextCW=function b(a){this.getEdges();var c=this._edgeList.indexOf(a),d=c-1;c===0&&(d=this._edgeList.size()-1);return this._edgeList.get(d)};tu.prototype.propagateSideLabels=function b(a){var c=pI.NONE;for(var d=this.iterator();d.hasNext();){var e=d.next(),f=e.getLabel();f.isArea(a)&&f.getLocation(a,r_.LEFT)!==pI.NONE&&(c=f.getLocation(a,r_.LEFT))}if(c===pI.NONE){return null}var g=c;for(var h=this.iterator();h.hasNext();){var i=h.next(),j=i.getLabel();j.getLocation(a,r_.ON)===pI.NONE&&j.setLocation(a,r_.ON,g);if(j.isArea(a)){var k=j.getLocation(a,r_.LEFT),l=j.getLocation(a,r_.RIGHT);if(l!==pI.NONE){if(l!==g){throw new sd('side location conflict',i.getCoordinate())}k===pI.NONE&&qh.shouldNeverReachHere('found single null side (at '+i.getCoordinate()+')');g=k}else qh.isTrue(j.getLocation(a,r_.LEFT)===pI.NONE,'found single null side'),j.setLocation(a,r_.RIGHT,g),j.setLocation(a,r_.LEFT,g)}}};tu.prototype.getCoordinate=function a(){var b=this.iterator();if(!b.hasNext()){return null}var c=b.next();return c.getCoordinate()};tu.prototype.print=function b(a){pY.out.println('EdgeEndStar:   '+this.getCoordinate());for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(a)}};tu.prototype.isAreaLabelsConsistent=function b(a){this.computeEdgeEndLabels(a.getBoundaryNodeRule());return this.checkAreaLabelsConsistent(0)};tu.prototype.checkAreaLabelsConsistent=function b(a){var c=this.getEdges();if(c.size()<=0){return !0}var d=c.size()-1,e=c.get(d).getLabel(),f=e.getLocation(a,r_.LEFT);qh.isTrue(f!==pI.NONE,'Found unlabelled area edge');var g=f;for(var h=this.iterator();h.hasNext();){var i=h.next(),j=i.getLabel();qh.isTrue(j.isArea(a),'Found non-area edge');var k=j.getLocation(a,r_.LEFT),l=j.getLocation(a,r_.RIGHT);if(k===l){return !1}if(l!==g){return !1}g=k}return !0};tu.prototype.findIndex=function b(a){var c=this;this.iterator();for(var d=0;d<this._edgeList.size();d++){var e=c._edgeList.get(d);if(e===a){return d}}return-1};tu.prototype.iterator=function a(){return this.getEdges().iterator()};tu.prototype.getEdges=function a(){this._edgeList===null&&(this._edgeList=new qF(this._edgeMap.values()));return this._edgeList};tu.prototype.getLocation=function d(a,b,c){this._ptInAreaLocation[a]===pI.NONE&&(this._ptInAreaLocation[a]=tt.locate(b,c[a].getGeometry()));return this._ptInAreaLocation[a]};tu.prototype.toString=function a(){var b=new pN();b.append('EdgeEndStar:   '+this.getCoordinate());b.append('\n');for(var c=this.iterator();c.hasNext();){var d=c.next();b.append(d);b.append('\n')}return b.toString()};tu.prototype.computeEdgeEndLabels=function b(a){for(var c=this.iterator();c.hasNext();){var d=c.next();d.computeLabel(a)}};tu.prototype.computeLabelling=function b(a){var c=this;this.computeEdgeEndLabels(a[0].getBoundaryNodeRule());this.propagateSideLabels(0);this.propagateSideLabels(1);var d=[!1,!1];for(var e=this.iterator();e.hasNext();){var f=e.next(),g=f.getLabel();for(var h=0;h<2;h++)g.isLine(h)&&g.getLocation(h)===pI.BOUNDARY&&(d[h]=!0)}for(var i=this.iterator();i.hasNext();){var j=i.next(),k=j.getLabel();for(var l=0;l<2;l++){if(k.isAnyNull(l)){var m=pI.NONE;if(d[l])m=pI.EXTERIOR;else{var n=j.getCoordinate();m=c.getLocation(l,n,a)}k.setAllLocationsIfNull(l,m)}}}};tu.prototype.getDegree=function a(){return this._edgeMap.size()};tu.prototype.insertEdgeEnd=function c(a,b){this._edgeMap.put(a,b);this._edgeList=null};tu.prototype.interfaces_=function a(){return[]};tu.prototype.getClass=function a(){return tu};var tv=function(a){function b(){a.call(this);this._resultAreaEdgeList=null;this._label=null;this._SCANNING_FOR_INCOMING=1;this._LINKING_TO_OUTGOING=2}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.linkResultDirectedEdges=function a(){var b=this;this.getResultAreaEdges();var c=null,d=null,e=this._SCANNING_FOR_INCOMING;for(var f=0;f<this._resultAreaEdgeList.size();f++){var g=b._resultAreaEdgeList.get(f),h=g.getSym();if(!g.getLabel().isArea()){continue}c===null&&g.isInResult()&&(c=g);switch(e){case b._SCANNING_FOR_INCOMING:if(!h.isInResult()){continue};d=h;e=b._LINKING_TO_OUTGOING;break;case b._LINKING_TO_OUTGOING:if(!g.isInResult()){continue};d.setNext(g);e=b._SCANNING_FOR_INCOMING;break;default:}}if(e===this._LINKING_TO_OUTGOING){if(c===null){throw new sd('no outgoing dirEdge found',this.getCoordinate())}qh.isTrue(c.isInResult(),'unable to link last incoming dirEdge');d.setNext(c)}};b.prototype.insert=function b(a){var c=a;this.insertEdgeEnd(c,c)};b.prototype.getRightmostEdge=function a(){var b=this.getEdges(),c=b.size();if(c<1){return null}var d=b.get(0);if(c===1){return d}var e=b.get(c-1),f=d.getQuadrant(),g=e.getQuadrant();if(sq.isNorthern(f)&&sq.isNorthern(g)){return d}else if(!sq.isNorthern(f)&&!sq.isNorthern(g)){return e}else{if(d.getDy()!==0){return d}else if(e.getDy()!==0){return e}};qh.shouldNeverReachHere('found two horizontal edges incident on node');return null};b.prototype.print=function b(a){pY.out.println('DirectedEdgeStar: '+this.getCoordinate());for(var c=this.iterator();c.hasNext();){var d=c.next();a.print('out ');d.print(a);a.println();a.print('in ');d.getSym().print(a);a.println()}};b.prototype.getResultAreaEdges=function a(){var b=this;if(this._resultAreaEdgeList!==null){return this._resultAreaEdgeList}this._resultAreaEdgeList=new qF();for(var c=this.iterator();c.hasNext();){var d=c.next();(d.isInResult()||d.getSym().isInResult())&&b._resultAreaEdgeList.add(d)}return this._resultAreaEdgeList};b.prototype.updateLabelling=function b(a){for(var c=this.iterator();c.hasNext();){var d=c.next(),e=d.getLabel();e.setAllLocationsIfNull(0,a.getLocation(0));e.setAllLocationsIfNull(1,a.getLocation(1))}};b.prototype.linkAllDirectedEdges=function a(){var b=this;this.getEdges();var c=null,d=null;for(var e=this._edgeList.size()-1;e>=0;e--){var f=b._edgeList.get(e),g=f.getSym();d===null&&(d=g);c!==null&&g.setNext(c);c=f}d.setNext(c)};b.prototype.computeDepths=function a(){var b=this;if(arguments.length===1){var c=arguments[0],d=this.findIndex(c),e=c.getDepth(r_.LEFT),f=c.getDepth(r_.RIGHT),g=this.computeDepths(d+1,this._edgeList.size(),e),h=this.computeDepths(0,d,g);if(h!==f){throw new sd('depth mismatch at '+c.getCoordinate())}}else if(arguments.length===3){var i=arguments[0],j=arguments[1],k=arguments[2],l=k;for(var m=i;m<j;m++){var n=b._edgeList.get(m);n.setEdgeDepths(r_.RIGHT,l);l=n.getDepth(r_.LEFT)}return l}};b.prototype.mergeSymLabels=function a(){for(var b=this.iterator();b.hasNext();){var c=b.next(),d=c.getLabel();d.merge(c.getSym().getLabel())}};b.prototype.linkMinimalDirectedEdges=function b(a){var c=this,d=null,e=null,f=this._SCANNING_FOR_INCOMING;for(var g=this._resultAreaEdgeList.size()-1;g>=0;g--){var h=c._resultAreaEdgeList.get(g),i=h.getSym();d===null&&h.getEdgeRing()===a&&(d=h);switch(f){case c._SCANNING_FOR_INCOMING:if(i.getEdgeRing()!==a){continue};e=i;f=c._LINKING_TO_OUTGOING;break;case c._LINKING_TO_OUTGOING:if(h.getEdgeRing()!==a){continue};e.setNextMin(h);f=c._SCANNING_FOR_INCOMING;break;default:}}f===this._LINKING_TO_OUTGOING&&(qh.isTrue(d!==null,'found null for first outgoing dirEdge'),qh.isTrue(d.getEdgeRing()===a,'unable to link last incoming dirEdge'),e.setNextMin(d))};b.prototype.getOutgoingDegree=function a(){if(arguments.length===0){var b=0;for(var c=this.iterator();c.hasNext();){var d=c.next();d.isInResult()&&b++}return b}else if(arguments.length===1){var e=arguments[0],f=0;for(var g=this.iterator();g.hasNext();){var h=g.next();h.getEdgeRing()===e&&f++}return f}};b.prototype.getLabel=function a(){return this._label};b.prototype.findCoveredLineEdges=function a(){var b=pI.NONE;for(var c=this.iterator();c.hasNext();){var d=c.next(),e=d.getSym();if(!d.isLineEdge()){if(d.isInResult()){b=pI.INTERIOR;break}if(e.isInResult()){b=pI.EXTERIOR;break}}}if(b===pI.NONE){return null}var f=b;for(var g=this.iterator();g.hasNext();){var h=g.next(),i=h.getSym();h.isLineEdge()?h.getEdge().setCovered(f===pI.INTERIOR):(h.isInResult()&&(f=pI.EXTERIOR),i.isInResult()&&(f=pI.INTERIOR))}};b.prototype.computeLabelling=function c(b){var d=this;a.prototype.computeLabelling.call(this,b);this._label=new sj(pI.NONE);for(var e=this.iterator();e.hasNext();){var f=e.next(),g=f.getEdge(),h=g.getLabel();for(var i=0;i<2;i++){var j=h.getLocation(i);(j===pI.INTERIOR||j===pI.BOUNDARY)&&d._label.setLocation(i,pI.INTERIOR)}}};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(tu),tw=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.createNode=function b(a){return new so(a,new tv())};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(su),tx=function a(){this._pts=null;this._orientation=null;var b=arguments[0];this._pts=b;this._orientation=a.orientation(b)};tx.prototype.compareTo=function b(a){var c=a,d=tx.compareOriented(this._pts,this._orientation,c._pts,c._orientation);return d};tx.prototype.interfaces_=function a(){return[pA]};tx.prototype.getClass=function a(){return tx};tx.orientation=function b(a){return qI.increasingDirection(a)===1};tx.compareOriented=function e(a,b,c,d){var f=b?1:-1,g=d?1:-1,h=b?a.length:-1,i=d?c.length:-1,j=b?0:a.length-1,k=d?0:c.length-1;while(!0){var l=a[j].compareTo(c[k]);if(l!==0){return l}j+=f;k+=g;var m=j===h,n=k===i;if(m&&!n){return-1}if(!m&&n){return 1}if(m&&n){return 0}}};var ty=function a(){this._edges=new qF();this._ocaMap=new qZ()};ty.prototype.print=function b(a){var c=this;a.print('MULTILINESTRING ( ');for(var d=0;d<this._edges.size();d++){var e=c._edges.get(d);d>0&&a.print(',');a.print('(');var f=e.getCoordinates();for(var g=0;g<f.length;g++)g>0&&a.print(','),a.print(f[g].x+' '+f[g].y);a.println(')')}a.print(')  ')};ty.prototype.addAll=function b(a){var c=this;for(var d=a.iterator();d.hasNext();)c.add(d.next())};ty.prototype.findEdgeIndex=function b(a){var c=this;for(var d=0;d<this._edges.size();d++){if(c._edges.get(d).equals(a)){return d}}return-1};ty.prototype.iterator=function a(){return this._edges.iterator()};ty.prototype.getEdges=function a(){return this._edges};ty.prototype.get=function b(a){return this._edges.get(a)};ty.prototype.findEqualEdge=function b(a){var c=new tx(a.getCoordinates()),d=this._ocaMap.get(c);return d};ty.prototype.add=function b(a){this._edges.add(a);var c=new tx(a.getCoordinates());this._ocaMap.put(c,a)};ty.prototype.interfaces_=function a(){return[]};ty.prototype.getClass=function a(){return ty};var tz=function a(){};tz.prototype.processIntersections=function e(a,b,c,d){};tz.prototype.isDone=function a(){};tz.prototype.interfaces_=function a(){return[]};tz.prototype.getClass=function a(){return tz};var tA=function a(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._hasInterior=!1;this._properIntersectionPoint=null;this._li=null;this._isSelfIntersection=null;this.numIntersections=0;this.numInteriorIntersections=0;this.numProperIntersections=0;this.numTests=0;var b=arguments[0];this._li=b};tA.prototype.isTrivialIntersection=function e(a,b,c,d){if(a===c){if(this._li.getIntersectionNum()===1){if(tA.isAdjacentSegments(b,d)){return !0}if(a.isClosed()){var f=a.size()-1;if(b===0&&d===f||d===0&&b===f){return !0}}}}return !1};tA.prototype.getProperIntersectionPoint=function a(){return this._properIntersectionPoint};tA.prototype.hasProperInteriorIntersection=function a(){return this._hasProperInterior};tA.prototype.getLineIntersector=function a(){return this._li};tA.prototype.hasProperIntersection=function a(){return this._hasProper};tA.prototype.processIntersections=function e(a,b,c,d){if(a===c&&b===d){return null}this.numTests++;var f=a.getCoordinates()[b],g=a.getCoordinates()[b+1],h=c.getCoordinates()[d],i=c.getCoordinates()[d+1];this._li.computeIntersection(f,g,h,i);this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(a,b,c,d)||(this._hasIntersection=!0,a.addIntersections(this._li,b,0),c.addIntersections(this._li,d,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};tA.prototype.hasIntersection=function a(){return this._hasIntersection};tA.prototype.isDone=function a(){return !1};tA.prototype.hasInteriorIntersection=function a(){return this._hasInterior};tA.prototype.interfaces_=function a(){return[tz]};tA.prototype.getClass=function a(){return tA};tA.isAdjacentSegments=function c(a,b){return Math.abs(a-b)===1};var tB=function a(){this.coord=null;this.segmentIndex=null;this.dist=null;var b=arguments[0],c=arguments[1],d=arguments[2];this.coord=new pE(b);this.segmentIndex=c;this.dist=d};tB.prototype.getSegmentIndex=function a(){return this.segmentIndex};tB.prototype.getCoordinate=function a(){return this.coord};tB.prototype.print=function b(a){a.print(this.coord);a.print(' seg # = '+this.segmentIndex);a.println(' dist = '+this.dist)};tB.prototype.compareTo=function b(a){var c=a;return this.compare(c.segmentIndex,c.dist)};tB.prototype.isEndPoint=function b(a){if(this.segmentIndex===0&&this.dist===0.0){return !0}if(this.segmentIndex===a){return !0}return !1};tB.prototype.toString=function a(){return this.coord+' seg # = '+this.segmentIndex+' dist = '+this.dist};tB.prototype.getDistance=function a(){return this.dist};tB.prototype.compare=function c(a,b){if(this.segmentIndex<a){return-1}if(this.segmentIndex>a){return 1}if(this.dist<b){return-1}if(this.dist>b){return 1}return 0};tB.prototype.interfaces_=function a(){return[pA]};tB.prototype.getClass=function a(){return tB};var tC=function a(){this._nodeMap=new qZ();this.edge=null;var b=arguments[0];this.edge=b};tC.prototype.print=function b(a){a.println('Intersections:');for(var c=this.iterator();c.hasNext();){var d=c.next();d.print(a)}};tC.prototype.iterator=function a(){return this._nodeMap.values().iterator()};tC.prototype.addSplitEdges=function b(a){var c=this;this.addEndpoints();var d=this.iterator(),e=d.next();while(d.hasNext()){var f=d.next(),g=c.createSplitEdge(e,f);a.add(g);e=f}};tC.prototype.addEndpoints=function a(){var b=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0.0);this.add(this.edge.pts[b],b,0.0)};tC.prototype.createSplitEdge=function c(a,b){var d=this,e=b.segmentIndex-a.segmentIndex+2,f=this.edge.pts[b.segmentIndex],g=b.dist>0.0||!b.coord.equals2D(f);g||e--;var h=new Array(e).fill(null),i=0;h[i++]=new pE(a.coord);for(var j=a.segmentIndex+1;j<=b.segmentIndex;j++)h[i++]=d.edge.pts[j];g&&(h[i]=b.coord);return new tH(h,new sj(this.edge._label))};tC.prototype.add=function d(a,b,c){var e=new tB(a,b,c),f=this._nodeMap.get(e);if(f!==null){return f}this._nodeMap.put(e,e);return e};tC.prototype.isIntersection=function b(a){for(var c=this.iterator();c.hasNext();){var d=c.next();if(d.coord.equals(a)){return !0}}return !1};tC.prototype.interfaces_=function a(){return[]};tC.prototype.getClass=function a(){return tC};var tD=function a(){};tD.prototype.getChainStartIndices=function b(a){var c=this,d=0,e=new qF();e.add(new pO(d));do{var f=c.findChainEnd(a,d);e.add(new pO(f));d=f}while(d<a.length-1);var g=tD.toIntArray(e);return g};tD.prototype.findChainEnd=function c(a,b){var d=sq.quadrant(a[b],a[b+1]),e=b+1;while(e<a.length){var f=sq.quadrant(a[e-1],a[e]);if(f!==d){break}e++}return e-1};tD.prototype.interfaces_=function a(){return[]};tD.prototype.getClass=function a(){return tD};tD.toIntArray=function b(a){var c=new Array(a.size()).fill(null);for(var d=0;d<c.length;d++)c[d]=a.get(d).intValue();return c};var tE=function a(){this.e=null;this.pts=null;this.startIndex=null;this.env1=new p_();this.env2=new p_();var b=arguments[0];this.e=b;this.pts=b.getCoordinates();var c=new tD();this.startIndex=c.getChainStartIndices(this.pts)};tE.prototype.getCoordinates=function a(){return this.pts};tE.prototype.getMaxX=function b(a){var c=this.pts[this.startIndex[a]].x,d=this.pts[this.startIndex[a+1]].x;return c>d?c:d};tE.prototype.getMinX=function b(a){var c=this.pts[this.startIndex[a]].x,d=this.pts[this.startIndex[a+1]].x;return c<d?c:d};tE.prototype.computeIntersectsForChain=function a(){if(arguments.length===4){var b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3];this.computeIntersectsForChain(this.startIndex[b],this.startIndex[b+1],c,c.startIndex[d],c.startIndex[d+1],e)}else if(arguments.length===6){var f=arguments[0],g=arguments[1],h=arguments[2],i=arguments[3],j=arguments[4],k=arguments[5],l=this.pts[f],m=this.pts[g],n=h.pts[i],o=h.pts[j];if(g-f===1&&j-i===1){k.addIntersections(this.e,f,h.e,i);return null}this.env1.init(l,m);this.env2.init(n,o);if(!this.env1.intersects(this.env2)){return null}var p=Math.trunc((f+g)/2),q=Math.trunc((i+j)/2);f<p&&(i<q&&this.computeIntersectsForChain(f,p,h,i,q,k),q<j&&this.computeIntersectsForChain(f,p,h,q,j,k));p<g&&(i<q&&this.computeIntersectsForChain(p,g,h,i,q,k),q<j&&this.computeIntersectsForChain(p,g,h,q,j,k))}};tE.prototype.getStartIndexes=function a(){return this.startIndex};tE.prototype.computeIntersects=function c(a,b){var d=this;for(var e=0;e<this.startIndex.length-1;e++){for(var f=0;f<a.startIndex.length-1;f++)d.computeIntersectsForChain(e,a,f,b)}};tE.prototype.interfaces_=function a(){return[]};tE.prototype.getClass=function a(){return tE};var tF=function a(){var b=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var c=0;c<2;c++){for(var d=0;d<3;d++)b._depth[c][d]=a.NULL_VALUE}},tG={NULL_VALUE:{configurable:!0}};tF.prototype.getDepth=function c(a,b){return this._depth[a][b]};tF.prototype.setDepth=function d(a,b,c){this._depth[a][b]=c};tF.prototype.isNull=function a(){var b=this;if(arguments.length===0){for(var c=0;c<2;c++){for(var d=0;d<3;d++){if(b._depth[c][d]!==tF.NULL_VALUE){return !1}}}return !0}else if(arguments.length===1){var e=arguments[0];return this._depth[e][1]===tF.NULL_VALUE}else if(arguments.length===2){var f=arguments[0],g=arguments[1];return this._depth[f][g]===tF.NULL_VALUE}};tF.prototype.normalize=function a(){var b=this;for(var c=0;c<2;c++){if(!b.isNull(c)){var d=b._depth[c][1];b._depth[c][2]<d&&(d=b._depth[c][2]);d<0&&(d=0);for(var e=1;e<3;e++){var f=0;b._depth[c][e]>d&&(f=1);b._depth[c][e]=f}}}};tF.prototype.getDelta=function b(a){return this._depth[a][r_.RIGHT]-this._depth[a][r_.LEFT]};tF.prototype.getLocation=function c(a,b){if(this._depth[a][b]<=0){return pI.EXTERIOR}return pI.INTERIOR};tF.prototype.toString=function a(){return'A: '+this._depth[0][1]+','+this._depth[0][2]+' B: '+this._depth[1][1]+','+this._depth[1][2]};tF.prototype.add=function a(){var b=this;if(arguments.length===1){var c=arguments[0];for(var d=0;d<2;d++){for(var e=1;e<3;e++){var f=c.getLocation(d,e);(f===pI.EXTERIOR||f===pI.INTERIOR)&&(b.isNull(d,e)?(b._depth[d][e]=tF.depthAtLocation(f)):(b._depth[d][e]+=tF.depthAtLocation(f)))}}}else if(arguments.length===3){var g=arguments[0],h=arguments[1],i=arguments[2];i===pI.INTERIOR&&this._depth[g][h]++}};tF.prototype.interfaces_=function a(){return[]};tF.prototype.getClass=function a(){return tF};tF.depthAtLocation=function b(a){if(a===pI.EXTERIOR){return 0}if(a===pI.INTERIOR){return 1}return tF.NULL_VALUE};tG.NULL_VALUE.get=function(){return-1};Object.defineProperties(tF,tG);var tH=function(a){function b(){a.call(this);this.pts=null;this._env=null;this.eiList=new tC(this);this._name=null;this._mce=null;this._isIsolated=!0;this._depth=new tF();this._depthDelta=0;if(arguments.length===1){var c=arguments[0];b.call(this,c,null)}else if(arguments.length===2){var d=arguments[0],e=arguments[1];this.pts=d;this._label=e}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getDepth=function a(){return this._depth};b.prototype.getCollapsedEdge=function a(){var c=new Array(2).fill(null);c[0]=this.pts[0];c[1]=this.pts[1];var d=new b(c,sj.toLineLabel(this._label));return d};b.prototype.isIsolated=function a(){return this._isIsolated};b.prototype.getCoordinates=function a(){return this.pts};b.prototype.setIsolated=function b(a){this._isIsolated=a};b.prototype.setName=function b(a){this._name=a};b.prototype.equals=function c(a){var d=this;if(!(a instanceof b)){return !1}var e=a;if(this.pts.length!==e.pts.length){return !1}var f=!0,g=!0,h=this.pts.length;for(var i=0;i<this.pts.length;i++){d.pts[i].equals2D(e.pts[i])||(f=!1);d.pts[i].equals2D(e.pts[--h])||(g=!1);if(!f&&!g){return !1}}return !0};b.prototype.getCoordinate=function a(){if(arguments.length===0){if(this.pts.length>0){return this.pts[0]}return null}else if(arguments.length===1){var b=arguments[0];return this.pts[b]}};b.prototype.print=function b(a){var c=this;a.print('edge '+this._name+': ');a.print('LINESTRING (');for(var d=0;d<this.pts.length;d++)d>0&&a.print(','),a.print(c.pts[d].x+' '+c.pts[d].y);a.print(')  '+this._label+' '+this._depthDelta)};b.prototype.computeIM=function c(a){b.updateIM(this._label,a)};b.prototype.isCollapsed=function a(){if(!this._label.isArea()){return !1}if(this.pts.length!==3){return !1}if(this.pts[0].equals(this.pts[2])){return !0}return !1};b.prototype.isClosed=function a(){return this.pts[0].equals(this.pts[this.pts.length-1])};b.prototype.getMaximumSegmentIndex=function a(){return this.pts.length-1};b.prototype.getDepthDelta=function a(){return this._depthDelta};b.prototype.getNumPoints=function a(){return this.pts.length};b.prototype.printReverse=function b(a){var c=this;a.print('edge '+this._name+': ');for(var d=this.pts.length-1;d>=0;d--)a.print(c.pts[d]+' ');a.println('')};b.prototype.getMonotoneChainEdge=function a(){this._mce===null&&(this._mce=new tE(this));return this._mce};b.prototype.getEnvelope=function a(){var b=this;if(this._env===null){this._env=new p_();for(var c=0;c<this.pts.length;c++)b._env.expandToInclude(b.pts[c])}return this._env};b.prototype.addIntersection=function e(a,b,c,d){var f=new pE(a.getIntersection(d)),g=b,h=a.getEdgeDistance(c,d),i=g+1;if(i<this.pts.length){var j=this.pts[i];f.equals2D(j)&&(g=i,h=0.0)}this.eiList.add(f,g,h)};b.prototype.toString=function a(){var b=this,c=new pN();c.append('edge '+this._name+': ');c.append('LINESTRING (');for(var d=0;d<this.pts.length;d++)d>0&&c.append(','),c.append(b.pts[d].x+' '+b.pts[d].y);c.append(')  '+this._label+' '+this._depthDelta);return c.toString()};b.prototype.isPointwiseEqual=function b(a){var c=this;if(this.pts.length!==a.pts.length){return !1}for(var d=0;d<this.pts.length;d++){if(!c.pts[d].equals2D(a.pts[d])){return !1}}return !0};b.prototype.setDepthDelta=function b(a){this._depthDelta=a};b.prototype.getEdgeIntersectionList=function a(){return this.eiList};b.prototype.addIntersections=function d(a,b,c){var e=this;for(var f=0;f<a.getIntersectionNum();f++)e.addIntersection(a,b,c,f)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};b.updateIM=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1];d.setAtLeastIfValid(c.getLocation(0,r_.ON),c.getLocation(1,r_.ON),1);c.isArea()&&(d.setAtLeastIfValid(c.getLocation(0,r_.LEFT),c.getLocation(1,r_.LEFT),2),d.setAtLeastIfValid(c.getLocation(0,r_.RIGHT),c.getLocation(1,r_.RIGHT),2))}else{return a.prototype.updateIM.apply(this,arguments)}};return b}(sn),tI=function b(a){this._workingPrecisionModel=null;this._workingNoder=null;this._geomFact=null;this._graph=null;this._edgeList=new ty();this._bufParams=a||null};tI.prototype.setWorkingPrecisionModel=function b(a){this._workingPrecisionModel=a};tI.prototype.insertUniqueEdge=function b(a){var c=this._edgeList.findEqualEdge(a);if(c!==null){var d=c.getLabel(),e=a.getLabel();c.isPointwiseEqual(a)||(e=new sj(a.getLabel()),e.flip());d.merge(e);var f=tI.depthDelta(e),g=c.getDepthDelta(),h=g+f;c.setDepthDelta(h)}else this._edgeList.add(a),a.setDepthDelta(tI.depthDelta(a.getLabel()))};tI.prototype.buildSubgraphs=function c(a,b){var d=new qF();for(var e=a.iterator();e.hasNext();){var f=e.next(),g=f.getRightmostCoordinate(),h=new tl(d),i=h.getDepth(g);f.computeDepth(i);f.findResultEdges();d.add(f);b.add(f.getDirectedEdges(),f.getNodes())}};tI.prototype.createSubgraphs=function b(a){var c=new qF();for(var d=a.getNodes().iterator();d.hasNext();){var e=d.next();if(!e.isVisited()){var f=new sg();f.create(e);c.add(f)}}sE.sort(c,sE.reverseOrder());return c};tI.prototype.createEmptyResultGeometry=function a(){var b=this._geomFact.createPolygon();return b};tI.prototype.getNoder=function b(a){if(this._workingNoder!==null){return this._workingNoder}var c=new s_(),d=new qk();d.setPrecisionModel(a);c.setSegmentIntersector(new tA(d));return c};tI.prototype.buffer=function c(a,b){var d=this._workingPrecisionModel;d===null&&(d=a.getPrecisionModel());this._geomFact=a.getFactory();var e=new tk(d,this._bufParams),f=new tq(a,b,e),g=f.getCurves();if(g.size()<=0){return this.createEmptyResultGeometry()}this.computeNodedEdges(g,d);this._graph=new sv(new tw());this._graph.addEdges(this._edgeList.getEdges());var h=this.createSubgraphs(this._graph),i=new sw(this._geomFact);this.buildSubgraphs(h,i);var j=i.getPolygons();if(j.size()<=0){return this.createEmptyResultGeometry()}var k=this._geomFact.buildGeometry(j);return k};tI.prototype.computeNodedEdges=function c(a,b){var d=this,e=this.getNoder(b);e.computeNodes(a);var f=e.getNodedSubstrings();for(var g=f.iterator();g.hasNext();){var h=g.next(),i=h.getCoordinates();if(i.length===2&&i[0].equals2D(i[1])){continue}var j=h.getData(),k=new tH(h.getCoordinates(),new sj(j));d.insertUniqueEdge(k)}};tI.prototype.setNoder=function b(a){this._workingNoder=a};tI.prototype.interfaces_=function a(){return[]};tI.prototype.getClass=function a(){return tI};tI.depthDelta=function b(a){var c=a.getLocation(0,r_.LEFT),d=a.getLocation(0,r_.RIGHT);if(c===pI.INTERIOR&&d===pI.EXTERIOR){return 1}else if(c===pI.EXTERIOR&&d===pI.INTERIOR){return-1};return 0};tI.convertSegStrings=function b(a){var c=new rS(),d=new qF();while(a.hasNext()){var e=a.next(),f=c.createLineString(e.getCoordinates());d.add(f)}return c.buildGeometry(d)};var tJ=function a(){this._noder=null;this._scaleFactor=null;this._offsetX=null;this._offsetY=null;this._isScaled=!1;if(arguments.length===2){var b=arguments[0],c=arguments[1];this._noder=b;this._scaleFactor=c;this._offsetX=0.0;this._offsetY=0.0;this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var d=arguments[0],e=arguments[1],f=arguments[2],g=arguments[3];this._noder=d;this._scaleFactor=e;this._offsetX=f;this._offsetY=g;this._isScaled=!this.isIntegerPrecision()}};tJ.prototype.rescale=function a(){var b=this;if(pK(arguments[0],qA)){var c=arguments[0];for(var d=c.iterator();d.hasNext();){var e=d.next();b.rescale(e.getCoordinates())}}else if(arguments[0] instanceof Array){var f=arguments[0];for(var g=0;g<f.length;g++)f[g].x=f[g].x/b._scaleFactor+b._offsetX,f[g].y=f[g].y/b._scaleFactor+b._offsetY;f.length===2&&f[0].equals2D(f[1])&&pY.out.println(f)}};tJ.prototype.scale=function a(){var b=this;if(pK(arguments[0],qA)){var c=arguments[0],d=new qF();for(var e=c.iterator();e.hasNext();){var f=e.next();d.add(new sS(b.scale(f.getCoordinates()),f.getData()))}return d}else if(arguments[0] instanceof Array){var g=arguments[0],h=new Array(g.length).fill(null);for(var i=0;i<g.length;i++)h[i]=new pE(Math.round((g[i].x-b._offsetX)*b._scaleFactor),Math.round((g[i].y-b._offsetY)*b._scaleFactor),g[i].z);var j=qI.removeRepeatedPoints(h);return j}};tJ.prototype.isIntegerPrecision=function a(){return this._scaleFactor===1.0};tJ.prototype.getNodedSubstrings=function a(){var b=this._noder.getNodedSubstrings();this._isScaled&&this.rescale(b);return b};tJ.prototype.computeNodes=function b(a){var c=a;this._isScaled&&(c=this.scale(a));this._noder.computeNodes(c)};tJ.prototype.interfaces_=function a(){return[sY]};tJ.prototype.getClass=function a(){return tJ};var tK=function a(){this._li=new qk();this._segStrings=null;var b=arguments[0];this._segStrings=b},tL={fact:{configurable:!0}};tK.prototype.checkEndPtVertexIntersections=function a(){var b=this;if(arguments.length===0){for(var c=this._segStrings.iterator();c.hasNext();){var d=c.next(),e=d.getCoordinates();b.checkEndPtVertexIntersections(e[0],b._segStrings);b.checkEndPtVertexIntersections(e[e.length-1],b._segStrings)}}else if(arguments.length===2){var f=arguments[0],g=arguments[1];for(var h=g.iterator();h.hasNext();){var i=h.next(),j=i.getCoordinates();for(var k=1;k<j.length-1;k++){if(j[k].equals(f)){throw new qf('found endpt/interior pt intersection at index '+k+' :pt '+f)}}}}};tK.prototype.checkInteriorIntersections=function a(){var b=this;if(arguments.length===0){for(var c=this._segStrings.iterator();c.hasNext();){var d=c.next();for(var e=this._segStrings.iterator();e.hasNext();){var f=e.next();b.checkInteriorIntersections(d,f)}}}else if(arguments.length===2){var g=arguments[0],h=arguments[1],i=g.getCoordinates(),j=h.getCoordinates();for(var k=0;k<i.length-1;k++){for(var l=0;l<j.length-1;l++)b.checkInteriorIntersections(g,k,h,l)}}else if(arguments.length===4){var m=arguments[0],n=arguments[1],o=arguments[2],p=arguments[3];if(m===o&&n===p){return null}var q=m.getCoordinates()[n],r=m.getCoordinates()[n+1],s=o.getCoordinates()[p],t=o.getCoordinates()[p+1];this._li.computeIntersection(q,r,s,t);if(this._li.hasIntersection()){if(this._li.isProper()||this.hasInteriorIntersection(this._li,q,r)||this.hasInteriorIntersection(this._li,s,t)){throw new qf('found non-noded intersection at '+q+'-'+r+' and '+s+'-'+t)}}}};tK.prototype.checkValid=function a(){this.checkEndPtVertexIntersections();this.checkInteriorIntersections();this.checkCollapses()};tK.prototype.checkCollapses=function a(){var b=this;if(arguments.length===0){for(var c=this._segStrings.iterator();c.hasNext();){var d=c.next();b.checkCollapses(d)}}else if(arguments.length===1){var e=arguments[0],f=e.getCoordinates();for(var g=0;g<f.length-2;g++)b.checkCollapse(f[g],f[g+1],f[g+2])}};tK.prototype.hasInteriorIntersection=function d(a,b,c){for(var e=0;e<a.getIntersectionNum();e++){var f=a.getIntersection(e);if(!(f.equals(b)||f.equals(c))){return !0}}return !1};tK.prototype.checkCollapse=function d(a,b,c){if(a.equals(c)){throw new qf('found non-noded collapse at '+tK.fact.createLineString([a,b,c]))}};tK.prototype.interfaces_=function a(){return[]};tK.prototype.getClass=function a(){return tK};tL.fact.get=function(){return new rS()};Object.defineProperties(tK,tL);var tM=function a(){this._li=null;this._pt=null;this._originalPt=null;this._ptScaled=null;this._p0Scaled=null;this._p1Scaled=null;this._scaleFactor=null;this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;this._corner=new Array(4).fill(null);this._safeEnv=null;var b=arguments[0],c=arguments[1],d=arguments[2];this._originalPt=b;this._pt=b;this._scaleFactor=c;this._li=d;if(c<=0){throw new pv('Scale factor must be non-zero')}c!==1.0&&(this._pt=new pE(this.scale(b.x),this.scale(b.y)),this._p0Scaled=new pE(),this._p1Scaled=new pE());this.initCorners(this._pt)},tN={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};tM.prototype.intersectsScaled=function c(a,b){var d=Math.min(a.x,b.x),e=Math.max(a.x,b.x),f=Math.min(a.y,b.y),g=Math.max(a.y,b.y),h=this._maxx<d||this._minx>e||this._maxy<f||this._miny>g;if(h){return !1}var i=this.intersectsToleranceSquare(a,b);qh.isTrue(!(h&&i),'Found bad envelope test');return i};tM.prototype.initCorners=function b(a){var c=0.5;this._minx=a.x-c;this._maxx=a.x+c;this._miny=a.y-c;this._maxy=a.y+c;this._corner[0]=new pE(this._maxx,this._maxy);this._corner[1]=new pE(this._minx,this._maxy);this._corner[2]=new pE(this._minx,this._miny);this._corner[3]=new pE(this._maxx,this._miny)};tM.prototype.intersects=function c(a,b){if(this._scaleFactor===1.0){return this.intersectsScaled(a,b)}this.copyScaled(a,this._p0Scaled);this.copyScaled(b,this._p1Scaled);return this.intersectsScaled(this._p0Scaled,this._p1Scaled)};tM.prototype.scale=function b(a){return Math.round(a*this._scaleFactor)};tM.prototype.getCoordinate=function a(){return this._originalPt};tM.prototype.copyScaled=function c(a,b){b.x=this.scale(a.x);b.y=this.scale(a.y)};tM.prototype.getSafeEnvelope=function a(){if(this._safeEnv===null){var b=tM.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new p_(this._originalPt.x-b,this._originalPt.x+b,this._originalPt.y-b,this._originalPt.y+b)}return this._safeEnv};tM.prototype.intersectsPixelClosure=function c(a,b){this._li.computeIntersection(a,b,this._corner[0],this._corner[1]);if(this._li.hasIntersection()){return !0}this._li.computeIntersection(a,b,this._corner[1],this._corner[2]);if(this._li.hasIntersection()){return !0}this._li.computeIntersection(a,b,this._corner[2],this._corner[3]);if(this._li.hasIntersection()){return !0}this._li.computeIntersection(a,b,this._corner[3],this._corner[0]);if(this._li.hasIntersection()){return !0}return !1};tM.prototype.intersectsToleranceSquare=function c(a,b){var d=!1,e=!1;this._li.computeIntersection(a,b,this._corner[0],this._corner[1]);if(this._li.isProper()){return !0}this._li.computeIntersection(a,b,this._corner[1],this._corner[2]);if(this._li.isProper()){return !0}this._li.hasIntersection()&&(d=!0);this._li.computeIntersection(a,b,this._corner[2],this._corner[3]);if(this._li.isProper()){return !0}this._li.hasIntersection()&&(e=!0);this._li.computeIntersection(a,b,this._corner[3],this._corner[0]);if(this._li.isProper()){return !0}if(d&&e){return !0}if(a.equals(this._pt)){return !0}if(b.equals(this._pt)){return !0}return !1};tM.prototype.addSnappedNode=function c(a,b){var d=a.getCoordinate(b),e=a.getCoordinate(b+1);if(this.intersects(d,e)){a.addIntersection(this.getCoordinate(),b);return !0}return !1};tM.prototype.interfaces_=function a(){return[]};tM.prototype.getClass=function a(){return tM};tN.SAFE_ENV_EXPANSION_FACTOR.get=function(){return 0.75};Object.defineProperties(tM,tN);var tO=function a(){this.tempEnv1=new p_();this.selectedSegment=new sT()};tO.prototype.select=function a(){if(arguments.length===1);else if(arguments.length===2){var b=arguments[0],c=arguments[1];b.getLineSegment(c,this.selectedSegment);this.select(this.selectedSegment)}};tO.prototype.interfaces_=function a(){return[]};tO.prototype.getClass=function a(){return tO};var tP=function a(){this._index=null;var b=arguments[0];this._index=b},tQ={HotPixelSnapAction:{configurable:!0}};tP.prototype.snap=function a(){if(arguments.length===1){var b=arguments[0];return this.snap(b,null,-1)}else if(arguments.length===3){var c=arguments[0],d=arguments[1],e=arguments[2],f=c.getSafeEnvelope(),g=new tR(c,d,e);this._index.query(f,{interfaces_:function(){return[sA]},visitItem:function(a){var b=a;b.select(f,g)}});return g.isNodeAdded()}};tP.prototype.interfaces_=function a(){return[]};tP.prototype.getClass=function a(){return tP};tQ.HotPixelSnapAction.get=function(){return tR};Object.defineProperties(tP,tQ);var tR=function(a){function b(){a.call(this);this._hotPixel=null;this._parentEdge=null;this._hotPixelVertexIndex=null;this._isNodeAdded=!1;var b=arguments[0],c=arguments[1],d=arguments[2];this._hotPixel=b;this._parentEdge=c;this._hotPixelVertexIndex=d}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.isNodeAdded=function a(){return this._isNodeAdded};b.prototype.select=function b(){if(arguments.length===2){var c=arguments[0],d=arguments[1],e=c.getContext();if(this._parentEdge!==null){if(e===this._parentEdge&&d===this._hotPixelVertexIndex){return null}}this._isNodeAdded=this._hotPixel.addSnappedNode(e,d)}else{return a.prototype.select.apply(this,arguments)}};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(tO),tS=function a(){this._li=null;this._interiorIntersections=null;var b=arguments[0];this._li=b;this._interiorIntersections=new qF()};tS.prototype.processIntersections=function e(a,b,c,d){var f=this;if(a===c&&b===d){return null}var g=a.getCoordinates()[b],h=a.getCoordinates()[b+1],i=c.getCoordinates()[d],j=c.getCoordinates()[d+1];this._li.computeIntersection(g,h,i,j);if(this._li.hasIntersection()){if(this._li.isInteriorIntersection()){for(var k=0;k<this._li.getIntersectionNum();k++)f._interiorIntersections.add(f._li.getIntersection(k));a.addIntersections(this._li,b,0);c.addIntersections(this._li,d,1)}}};tS.prototype.isDone=function a(){return !1};tS.prototype.getInteriorIntersections=function a(){return this._interiorIntersections};tS.prototype.interfaces_=function a(){return[tz]};tS.prototype.getClass=function a(){return tS};var tT=function a(){this._pm=null;this._li=null;this._scaleFactor=null;this._noder=null;this._pointSnapper=null;this._nodedSegStrings=null;var b=arguments[0];this._pm=b;this._li=new qk();this._li.setPrecisionModel(b);this._scaleFactor=b.getScale()};tT.prototype.checkCorrectness=function b(a){var c=sS.getNodedSubstrings(a),d=new tK(c);try{d.checkValid()}catch(a){if(a instanceof pW)a.printStackTrace();else{throw a}}finally{}};tT.prototype.getNodedSubstrings=function a(){return sS.getNodedSubstrings(this._nodedSegStrings)};tT.prototype.snapRound=function c(a,b){var d=this.findInteriorIntersections(a,b);this.computeIntersectionSnaps(d);this.computeVertexSnaps(a)};tT.prototype.findInteriorIntersections=function c(a,b){var d=new tS(b);this._noder.setSegmentIntersector(d);this._noder.computeNodes(a);return d.getInteriorIntersections()};tT.prototype.computeVertexSnaps=function a(){var b=this;if(pK(arguments[0],qA)){var c=arguments[0];for(var d=c.iterator();d.hasNext();){var e=d.next();b.computeVertexSnaps(e)}}else if(arguments[0] instanceof sS){var f=arguments[0],g=f.getCoordinates();for(var h=0;h<g.length;h++){var i=new tM(g[h],b._scaleFactor,b._li),j=b._pointSnapper.snap(i,f,h);j&&f.addIntersection(g[h],h)}}};tT.prototype.computeNodes=function b(a){this._nodedSegStrings=a;this._noder=new s_();this._pointSnapper=new tP(this._noder.getIndex());this.snapRound(a,this._li)};tT.prototype.computeIntersectionSnaps=function b(a){var c=this;for(var d=a.iterator();d.hasNext();){var e=d.next(),f=new tM(e,c._scaleFactor,c._li);c._pointSnapper.snap(f)}};tT.prototype.interfaces_=function a(){return[sY]};tT.prototype.getClass=function a(){return tT};var tU=function a(){this._argGeom=null;this._distance=null;this._bufParams=new ta();this._resultGeometry=null;this._saveException=null;if(arguments.length===1){var b=arguments[0];this._argGeom=b}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this._argGeom=c;this._bufParams=d}},tV={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};tU.prototype.bufferFixedPrecision=function b(a){var c=new tJ(new tT(new rO(1.0)),a.getScale()),d=new tI(this._bufParams);d.setWorkingPrecisionModel(a);d.setNoder(c);this._resultGeometry=d.buffer(this._argGeom,this._distance)};tU.prototype.bufferReducedPrecision=function a(){var b=this;if(arguments.length===0){for(var c=tU.MAX_PRECISION_DIGITS;c>=0;c--){try{b.bufferReducedPrecision(c)}catch(a){if(a instanceof sd)b._saveException=a;else{throw a}}finally{};if(b._resultGeometry!==null){return null}}throw this._saveException}else if(arguments.length===1){var d=arguments[0],e=tU.precisionScaleFactor(this._argGeom,this._distance,d),f=new rO(e);this.bufferFixedPrecision(f)}};tU.prototype.computeGeometry=function a(){this.bufferOriginalPrecision();if(this._resultGeometry!==null){return null}var b=this._argGeom.getFactory().getPrecisionModel();b.getType()===rO.FIXED?this.bufferFixedPrecision(b):this.bufferReducedPrecision()};tU.prototype.setQuadrantSegments=function b(a){this._bufParams.setQuadrantSegments(a)};tU.prototype.bufferOriginalPrecision=function a(){try{var b=new tI(this._bufParams);this._resultGeometry=b.buffer(this._argGeom,this._distance)}catch(a){if(a instanceof qf)this._saveException=a;else{throw a}}finally{}};tU.prototype.getResultGeometry=function b(a){this._distance=a;this.computeGeometry();return this._resultGeometry};tU.prototype.setEndCapStyle=function b(a){this._bufParams.setEndCapStyle(a)};tU.prototype.interfaces_=function a(){return[]};tU.prototype.getClass=function a(){return tU};tU.bufferOp=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1],d=new tU(b),e=d.getResultGeometry(c);return e}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&(arguments[0] instanceof qq&&typeof arguments[1]==='number')){var f=arguments[0],g=arguments[1],h=arguments[2],i=new tU(f);i.setQuadrantSegments(h);var j=i.getResultGeometry(g);return j}else if(arguments[2] instanceof ta&&(arguments[0] instanceof qq&&typeof arguments[1]==='number')){var k=arguments[0],l=arguments[1],m=arguments[2],n=new tU(k,m),o=n.getResultGeometry(l);return o}}else if(arguments.length===4){var p=arguments[0],q=arguments[1],r=arguments[2],s=arguments[3],t=new tU(p);t.setQuadrantSegments(r);t.setEndCapStyle(s);var u=t.getResultGeometry(q);return u}};tU.precisionScaleFactor=function d(a,b,c){var e=a.getEnvelopeInternal(),f=pL.max(Math.abs(e.getMaxX()),Math.abs(e.getMaxY()),Math.abs(e.getMinX()),Math.abs(e.getMinY())),g=b>0.0?b:0.0,h=f+2*g,i=Math.trunc(Math.log(h)/Math.log(10)+1.0),j=c-i,k=Math.pow(10.0,j);return k};tV.CAP_ROUND.get=function(){return ta.CAP_ROUND};tV.CAP_BUTT.get=function(){return ta.CAP_FLAT};tV.CAP_FLAT.get=function(){return ta.CAP_FLAT};tV.CAP_SQUARE.get=function(){return ta.CAP_SQUARE};tV.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(tU,tV);var tW=function a(){this._pt=[new pE(),new pE()];this._distance=pw.NaN;this._isNull=!0};tW.prototype.getCoordinates=function a(){return this._pt};tW.prototype.getCoordinate=function b(a){return this._pt[a]};tW.prototype.setMinimum=function a(){if(arguments.length===1){var b=arguments[0];this.setMinimum(b._pt[0],b._pt[1])}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this._isNull){this.initialize(c,d);return null}var e=c.distance(d);e<this._distance&&this.initialize(c,d,e)}};tW.prototype.initialize=function a(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var b=arguments[0],c=arguments[1];this._pt[0].setCoordinate(b);this._pt[1].setCoordinate(c);this._distance=b.distance(c);this._isNull=!1}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2];this._pt[0].setCoordinate(d);this._pt[1].setCoordinate(e);this._distance=f;this._isNull=!1}};tW.prototype.getDistance=function a(){return this._distance};tW.prototype.setMaximum=function a(){if(arguments.length===1){var b=arguments[0];this.setMaximum(b._pt[0],b._pt[1])}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this._isNull){this.initialize(c,d);return null}var e=c.distance(d);e>this._distance&&this.initialize(c,d,e)}};tW.prototype.interfaces_=function a(){return[]};tW.prototype.getClass=function a(){return tW};var tX=function a(){};tX.prototype.interfaces_=function a(){return[]};tX.prototype.getClass=function a(){return tX};tX.computeDistance=function a(){if(arguments[2] instanceof tW&&(arguments[0] instanceof ru&&arguments[1] instanceof pE)){var b=arguments[0],c=arguments[1],d=arguments[2],e=b.getCoordinates(),f=new sT();for(var g=0;g<e.length-1;g++){f.setCoordinates(e[g],e[g+1]);var h=f.closestPoint(c);d.setMinimum(h,c)}}else if(arguments[2] instanceof tW&&(arguments[0] instanceof rA&&arguments[1] instanceof pE)){var i=arguments[0],j=arguments[1],k=arguments[2];tX.computeDistance(i.getExteriorRing(),j,k);for(var l=0;l<i.getNumInteriorRing();l++)tX.computeDistance(i.getInteriorRingN(l),j,k)}else if(arguments[2] instanceof tW&&(arguments[0] instanceof qq&&arguments[1] instanceof pE)){var m=arguments[0],n=arguments[1],o=arguments[2];if(m instanceof ru)tX.computeDistance(m,n,o);else if(m instanceof rA)tX.computeDistance(m,n,o);else if(m instanceof rh){var p=m;for(var q=0;q<p.getNumGeometries();q++){var r=p.getGeometryN(q);tX.computeDistance(r,n,o)}}else o.setMinimum(m.getCoordinate(),n)}else if(arguments[2] instanceof tW&&(arguments[0] instanceof sT&&arguments[1] instanceof pE)){var s=arguments[0],t=arguments[1],u=arguments[2],v=s.closestPoint(t);u.setMinimum(v,t)}};var tY=function b(a){this._maxPtDist=new tW();this._inputGeom=a||null},tZ={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};tY.prototype.computeMaxMidpointDistance=function b(a){var c=new t$(this._inputGeom);a.apply(c);this._maxPtDist.setMaximum(c.getMaxPointDistance())};tY.prototype.computeMaxVertexDistance=function b(a){var c=new t_(this._inputGeom);a.apply(c);this._maxPtDist.setMaximum(c.getMaxPointDistance())};tY.prototype.findDistance=function b(a){this.computeMaxVertexDistance(a);this.computeMaxMidpointDistance(a);return this._maxPtDist.getDistance()};tY.prototype.getDistancePoints=function a(){return this._maxPtDist};tY.prototype.interfaces_=function a(){return[]};tY.prototype.getClass=function a(){return tY};tZ.MaxPointDistanceFilter.get=function(){return t_};tZ.MaxMidpointDistanceFilter.get=function(){return t$};Object.defineProperties(tY,tZ);var t_=function b(a){this._maxPtDist=new tW();this._minPtDist=new tW();this._geom=a||null};t_.prototype.filter=function b(a){this._minPtDist.initialize();tX.computeDistance(this._geom,a,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};t_.prototype.getMaxPointDistance=function a(){return this._maxPtDist};t_.prototype.interfaces_=function a(){return[qt]};t_.prototype.getClass=function a(){return t_};var t$=function b(a){this._maxPtDist=new tW();this._minPtDist=new tW();this._geom=a||null};t$.prototype.filter=function c(a,b){if(b===0){return null}var d=a.getCoordinate(b-1),e=a.getCoordinate(b),f=new pE((d.x+e.x)/2,(d.y+e.y)/2);this._minPtDist.initialize();tX.computeDistance(this._geom,f,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};t$.prototype.isDone=function a(){return !1};t$.prototype.isGeometryChanged=function a(){return !1};t$.prototype.getMaxPointDistance=function a(){return this._maxPtDist};t$.prototype.interfaces_=function a(){return[rg]};t$.prototype.getClass=function a(){return t$};var ua=function b(a){this._comps=a||null};ua.prototype.filter=function b(a){a instanceof rA&&this._comps.add(a)};ua.prototype.interfaces_=function a(){return[rf]};ua.prototype.getClass=function a(){return ua};ua.getPolygons=function a(){if(arguments.length===1){var b=arguments[0];return ua.getPolygons(b,new qF())}else if(arguments.length===2){var c=arguments[0],d=arguments[1];c instanceof rA?d.add(c):c instanceof rh&&c.apply(new ua(d));return d}};var ub=function a(){this._lines=null;this._isForcedToLineString=!1;if(arguments.length===1){var b=arguments[0];this._lines=b}else if(arguments.length===2){var c=arguments[0],d=arguments[1];this._lines=c;this._isForcedToLineString=d}};ub.prototype.filter=function b(a){if(this._isForcedToLineString&&a instanceof rC){var c=a.getFactory().createLineString(a.getCoordinateSequence());this._lines.add(c);return null}a instanceof ru&&this._lines.add(a)};ub.prototype.setForceToLineString=function b(a){this._isForcedToLineString=a};ub.prototype.interfaces_=function a(){return[qp]};ub.prototype.getClass=function a(){return ub};ub.getGeometry=function a(){if(arguments.length===1){var b=arguments[0];return b.getFactory().buildGeometry(ub.getLines(b))}else if(arguments.length===2){var c=arguments[0],d=arguments[1];return c.getFactory().buildGeometry(ub.getLines(c,d))}};ub.getLines=function a(){if(arguments.length===1){var b=arguments[0];return ub.getLines(b,!1)}else if(arguments.length===2){if(pK(arguments[0],qA)&&pK(arguments[1],qA)){var c=arguments[0],d=arguments[1];for(var e=c.iterator();e.hasNext();){var f=e.next();ub.getLines(f,d)}return d}else if(arguments[0] instanceof qq&&typeof arguments[1]==='boolean'){var g=arguments[0],h=arguments[1],i=new qF();g.apply(new ub(i,h));return i}else if(arguments[0] instanceof qq&&pK(arguments[1],qA)){var j=arguments[0],k=arguments[1];j instanceof ru?k.add(j):j.apply(new ub(k));return k}}else if(arguments.length===3){if(typeof arguments[2]==='boolean'&&(pK(arguments[0],qA)&&pK(arguments[1],qA))){var l=arguments[0],m=arguments[1],n=arguments[2];for(var o=l.iterator();o.hasNext();){var p=o.next();ub.getLines(p,m,n)}return m}else if(typeof arguments[2]==='boolean'&&(arguments[0] instanceof qq&&pK(arguments[1],qA))){var q=arguments[0],r=arguments[1],s=arguments[2];q.apply(new ub(r,s));return r}}};var uc=function a(){this._boundaryRule=qu.OGC_SFS_BOUNDARY_RULE;this._isIn=null;this._numBoundaries=null;if(arguments.length===0);else if(arguments.length===1){var b=arguments[0];if(b===null){throw new pv('Rule must be non-null')}this._boundaryRule=b}};uc.prototype.locateInternal=function a(){var b=this;if(arguments[0] instanceof pE&&arguments[1] instanceof rA){var c=arguments[0],d=arguments[1];if(d.isEmpty()){return pI.EXTERIOR}var e=d.getExteriorRing(),f=this.locateInPolygonRing(c,e);if(f===pI.EXTERIOR){return pI.EXTERIOR}if(f===pI.BOUNDARY){return pI.BOUNDARY}for(var g=0;g<d.getNumInteriorRing();g++){var h=d.getInteriorRingN(g),i=b.locateInPolygonRing(c,h);if(i===pI.INTERIOR){return pI.EXTERIOR}if(i===pI.BOUNDARY){return pI.BOUNDARY}}return pI.INTERIOR}else if(arguments[0] instanceof pE&&arguments[1] instanceof ru){var j=arguments[0],k=arguments[1];if(!k.getEnvelopeInternal().intersects(j)){return pI.EXTERIOR}var l=k.getCoordinates();if(!k.isClosed()){if(j.equals(l[0])||j.equals(l[l.length-1])){return pI.BOUNDARY}}if(qn.isOnLine(j,l)){return pI.INTERIOR}return pI.EXTERIOR}else if(arguments[0] instanceof pE&&arguments[1] instanceof rw){var m=arguments[0],n=arguments[1],o=n.getCoordinate();if(o.equals2D(m)){return pI.INTERIOR}return pI.EXTERIOR}};uc.prototype.locateInPolygonRing=function c(a,b){if(!b.getEnvelopeInternal().intersects(a)){return pI.EXTERIOR}return qn.locatePointInRing(a,b.getCoordinates())};uc.prototype.intersects=function c(a,b){return this.locate(a,b)!==pI.EXTERIOR};uc.prototype.updateLocationInfo=function b(a){a===pI.INTERIOR&&(this._isIn=!0);a===pI.BOUNDARY&&this._numBoundaries++};uc.prototype.computeLocation=function c(a,b){var d=this;b instanceof rw&&this.updateLocationInfo(this.locateInternal(a,b));if(b instanceof ru)this.updateLocationInfo(this.locateInternal(a,b));else if(b instanceof rA)this.updateLocationInfo(this.locateInternal(a,b));else if(b instanceof ri){var e=b;for(var f=0;f<e.getNumGeometries();f++){var g=e.getGeometryN(f);d.updateLocationInfo(d.locateInternal(a,g))}}else if(b instanceof rD){var h=b;for(var i=0;i<h.getNumGeometries();i++){var j=h.getGeometryN(i);d.updateLocationInfo(d.locateInternal(a,j))}}else if(b instanceof rh){var k=new ts(b);while(k.hasNext()){var l=k.next();l!==b&&d.computeLocation(a,l)}}};uc.prototype.locate=function c(a,b){if(b.isEmpty()){return pI.EXTERIOR}if(b instanceof ru){return this.locateInternal(a,b)}else if(b instanceof rA){return this.locateInternal(a,b)};this._isIn=!1;this._numBoundaries=0;this.computeLocation(a,b);if(this._boundaryRule.isInBoundary(this._numBoundaries)){return pI.BOUNDARY}if(this._numBoundaries>0||this._isIn){return pI.INTERIOR}return pI.EXTERIOR};uc.prototype.interfaces_=function a(){return[]};uc.prototype.getClass=function a(){return uc};var ud=function a(){this._component=null;this._segIndex=null;this._pt=null;if(arguments.length===2){var b=arguments[0],c=arguments[1];a.call(this,b,a.INSIDE_AREA,c)}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2];this._component=d;this._segIndex=e;this._pt=f}},ue={INSIDE_AREA:{configurable:!0}};ud.prototype.isInsideArea=function a(){return this._segIndex===ud.INSIDE_AREA};ud.prototype.getCoordinate=function a(){return this._pt};ud.prototype.getGeometryComponent=function a(){return this._component};ud.prototype.getSegmentIndex=function a(){return this._segIndex};ud.prototype.interfaces_=function a(){return[]};ud.prototype.getClass=function a(){return ud};ue.INSIDE_AREA.get=function(){return-1};Object.defineProperties(ud,ue);var uf=function b(a){this._pts=a||null};uf.prototype.filter=function b(a){a instanceof rw&&this._pts.add(a)};uf.prototype.interfaces_=function a(){return[rf]};uf.prototype.getClass=function a(){return uf};uf.getPoints=function a(){if(arguments.length===1){var b=arguments[0];if(b instanceof rw){return sE.singletonList(b)}return uf.getPoints(b,new qF())}else if(arguments.length===2){var c=arguments[0],d=arguments[1];c instanceof rw?d.add(c):c instanceof rh&&c.apply(new uf(d));return d}};var ug=function a(){this._locations=null;var b=arguments[0];this._locations=b};ug.prototype.filter=function b(a){(a instanceof rw||a instanceof ru||a instanceof rA)&&this._locations.add(new ud(a,0,a.getCoordinate()))};ug.prototype.interfaces_=function a(){return[rf]};ug.prototype.getClass=function a(){return ug};ug.getLocations=function b(a){var c=new qF();a.apply(new ug(c));return c};var uh=function a(){this._geom=null;this._terminateDistance=0.0;this._ptLocator=new uc();this._minDistanceLocation=null;this._minDistance=pw.MAX_VALUE;if(arguments.length===2){var b=arguments[0],c=arguments[1];this._geom=[b,c];this._terminateDistance=0.0}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2];this._geom=new Array(2).fill(null);this._geom[0]=d;this._geom[1]=e;this._terminateDistance=f}};uh.prototype.computeContainmentDistance=function a(){var b=this;if(arguments.length===0){var c=new Array(2).fill(null);this.computeContainmentDistance(0,c);if(this._minDistance<=this._terminateDistance){return null}this.computeContainmentDistance(1,c)}else if(arguments.length===2){var d=arguments[0],e=arguments[1],f=1-d,g=ua.getPolygons(this._geom[d]);if(g.size()>0){var h=ug.getLocations(this._geom[f]);this.computeContainmentDistance(h,g,e);if(this._minDistance<=this._terminateDistance){this._minDistanceLocation[f]=e[0];this._minDistanceLocation[d]=e[1];return null}}}else if(arguments.length===3){if(arguments[2] instanceof Array&&(pK(arguments[0],qD)&&pK(arguments[1],qD))){var i=arguments[0],j=arguments[1],k=arguments[2];for(var l=0;l<i.size();l++){var m=i.get(l);for(var n=0;n<j.size();n++){b.computeContainmentDistance(m,j.get(n),k);if(b._minDistance<=b._terminateDistance){return null}}}}else if(arguments[2] instanceof Array&&(arguments[0] instanceof ud&&arguments[1] instanceof rA)){var o=arguments[0],p=arguments[1],q=arguments[2],r=o.getCoordinate();if(pI.EXTERIOR!==this._ptLocator.locate(r,p)){this._minDistance=0.0;q[0]=o;q[1]=new ud(p,r);return null}}}};uh.prototype.computeMinDistanceLinesPoints=function d(a,b,c){var e=this;for(var f=0;f<a.size();f++){var g=a.get(f);for(var h=0;h<b.size();h++){var i=b.get(h);e.computeMinDistance(g,i,c);if(e._minDistance<=e._terminateDistance){return null}}}};uh.prototype.computeFacetDistance=function a(){var b=new Array(2).fill(null),c=ub.getLines(this._geom[0]),d=ub.getLines(this._geom[1]),e=uf.getPoints(this._geom[0]),f=uf.getPoints(this._geom[1]);this.computeMinDistanceLines(c,d,b);this.updateMinDistance(b,!1);if(this._minDistance<=this._terminateDistance){return null}b[0]=null;b[1]=null;this.computeMinDistanceLinesPoints(c,f,b);this.updateMinDistance(b,!1);if(this._minDistance<=this._terminateDistance){return null}b[0]=null;b[1]=null;this.computeMinDistanceLinesPoints(d,e,b);this.updateMinDistance(b,!0);if(this._minDistance<=this._terminateDistance){return null}b[0]=null;b[1]=null;this.computeMinDistancePoints(e,f,b);this.updateMinDistance(b,!1)};uh.prototype.nearestLocations=function a(){this.computeMinDistance();return this._minDistanceLocation};uh.prototype.updateMinDistance=function c(a,b){if(a[0]===null){return null}b?(this._minDistanceLocation[0]=a[1],this._minDistanceLocation[1]=a[0]):(this._minDistanceLocation[0]=a[0],this._minDistanceLocation[1]=a[1])};uh.prototype.nearestPoints=function a(){this.computeMinDistance();var b=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return b};uh.prototype.computeMinDistance=function a(){var b=this;if(arguments.length===0){if(this._minDistanceLocation!==null){return null}this._minDistanceLocation=new Array(2).fill(null);this.computeContainmentDistance();if(this._minDistance<=this._terminateDistance){return null}this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2] instanceof Array&&(arguments[0] instanceof ru&&arguments[1] instanceof rw)){var c=arguments[0],d=arguments[1],e=arguments[2];if(c.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance){return null}var f=c.getCoordinates(),g=d.getCoordinate();for(var h=0;h<f.length-1;h++){var i=qn.distancePointLine(g,f[h],f[h+1]);if(i<b._minDistance){b._minDistance=i;var j=new sT(f[h],f[h+1]),k=j.closestPoint(g);e[0]=new ud(c,h,k);e[1]=new ud(d,0,g)}if(b._minDistance<=b._terminateDistance){return null}}}else if(arguments[2] instanceof Array&&(arguments[0] instanceof ru&&arguments[1] instanceof ru)){var l=arguments[0],m=arguments[1],n=arguments[2];if(l.getEnvelopeInternal().distance(m.getEnvelopeInternal())>this._minDistance){return null}var o=l.getCoordinates(),p=m.getCoordinates();for(var q=0;q<o.length-1;q++){for(var r=0;r<p.length-1;r++){var s=qn.distanceLineLine(o[q],o[q+1],p[r],p[r+1]);if(s<b._minDistance){b._minDistance=s;var t=new sT(o[q],o[q+1]),u=new sT(p[r],p[r+1]),v=t.closestPoints(u);n[0]=new ud(l,q,v[0]);n[1]=new ud(m,r,v[1])}if(b._minDistance<=b._terminateDistance){return null}}}}}};uh.prototype.computeMinDistancePoints=function d(a,b,c){var e=this;for(var f=0;f<a.size();f++){var g=a.get(f);for(var h=0;h<b.size();h++){var i=b.get(h),j=g.getCoordinate().distance(i.getCoordinate());j<e._minDistance&&(e._minDistance=j,c[0]=new ud(g,0,g.getCoordinate()),c[1]=new ud(i,0,i.getCoordinate()));if(e._minDistance<=e._terminateDistance){return null}}}};uh.prototype.distance=function a(){if(this._geom[0]===null||this._geom[1]===null){throw new pv('null geometries are not supported')}if(this._geom[0].isEmpty()||this._geom[1].isEmpty()){return 0.0}this.computeMinDistance();return this._minDistance};uh.prototype.computeMinDistanceLines=function d(a,b,c){var e=this;for(var f=0;f<a.size();f++){var g=a.get(f);for(var h=0;h<b.size();h++){var i=b.get(h);e.computeMinDistance(g,i,c);if(e._minDistance<=e._terminateDistance){return null}}}};uh.prototype.interfaces_=function a(){return[]};uh.prototype.getClass=function a(){return uh};uh.distance=function c(a,b){var d=new uh(a,b);return d.distance()};uh.isWithinDistance=function d(a,b,c){var e=new uh(a,b,c);return e.distance()<=c};uh.nearestPoints=function c(a,b){var d=new uh(a,b);return d.nearestPoints()};var ui=function a(){this._pt=[new pE(),new pE()];this._distance=pw.NaN;this._isNull=!0};ui.prototype.getCoordinates=function a(){return this._pt};ui.prototype.getCoordinate=function b(a){return this._pt[a]};ui.prototype.setMinimum=function a(){if(arguments.length===1){var b=arguments[0];this.setMinimum(b._pt[0],b._pt[1])}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this._isNull){this.initialize(c,d);return null}var e=c.distance(d);e<this._distance&&this.initialize(c,d,e)}};ui.prototype.initialize=function a(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var b=arguments[0],c=arguments[1];this._pt[0].setCoordinate(b);this._pt[1].setCoordinate(c);this._distance=b.distance(c);this._isNull=!1}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2];this._pt[0].setCoordinate(d);this._pt[1].setCoordinate(e);this._distance=f;this._isNull=!1}};ui.prototype.toString=function a(){return qe.toLineString(this._pt[0],this._pt[1])};ui.prototype.getDistance=function a(){return this._distance};ui.prototype.setMaximum=function a(){if(arguments.length===1){var b=arguments[0];this.setMaximum(b._pt[0],b._pt[1])}else if(arguments.length===2){var c=arguments[0],d=arguments[1];if(this._isNull){this.initialize(c,d);return null}var e=c.distance(d);e>this._distance&&this.initialize(c,d,e)}};ui.prototype.interfaces_=function a(){return[]};ui.prototype.getClass=function a(){return ui};var uj=function a(){};uj.prototype.interfaces_=function a(){return[]};uj.prototype.getClass=function a(){return uj};uj.computeDistance=function a(){if(arguments[2] instanceof ui&&(arguments[0] instanceof ru&&arguments[1] instanceof pE)){var b=arguments[0],c=arguments[1],d=arguments[2],e=new sT(),f=b.getCoordinates();for(var g=0;g<f.length-1;g++){e.setCoordinates(f[g],f[g+1]);var h=e.closestPoint(c);d.setMinimum(h,c)}}else if(arguments[2] instanceof ui&&(arguments[0] instanceof rA&&arguments[1] instanceof pE)){var i=arguments[0],j=arguments[1],k=arguments[2];uj.computeDistance(i.getExteriorRing(),j,k);for(var l=0;l<i.getNumInteriorRing();l++)uj.computeDistance(i.getInteriorRingN(l),j,k)}else if(arguments[2] instanceof ui&&(arguments[0] instanceof qq&&arguments[1] instanceof pE)){var m=arguments[0],n=arguments[1],o=arguments[2];if(m instanceof ru)uj.computeDistance(m,n,o);else if(m instanceof rA)uj.computeDistance(m,n,o);else if(m instanceof rh){var p=m;for(var q=0;q<p.getNumGeometries();q++){var r=p.getGeometryN(q);uj.computeDistance(r,n,o)}}else o.setMinimum(m.getCoordinate(),n)}else if(arguments[2] instanceof ui&&(arguments[0] instanceof sT&&arguments[1] instanceof pE)){var s=arguments[0],t=arguments[1],u=arguments[2],v=s.closestPoint(t);u.setMinimum(v,t)}};var uk=function a(){this._g0=null;this._g1=null;this._ptDist=new ui();this._densifyFrac=0.0;var b=arguments[0],c=arguments[1];this._g0=b;this._g1=c},ul={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};uk.prototype.getCoordinates=function a(){return this._ptDist.getCoordinates()};uk.prototype.setDensifyFraction=function b(a){if(a>1.0||a<=0.0){throw new pv('Fraction is not in range (0.0 - 1.0]')}this._densifyFrac=a};uk.prototype.compute=function c(a,b){this.computeOrientedDistance(a,b,this._ptDist);this.computeOrientedDistance(b,a,this._ptDist)};uk.prototype.distance=function a(){this.compute(this._g0,this._g1);return this._ptDist.getDistance()};uk.prototype.computeOrientedDistance=function d(a,b,c){var e=new um(b);a.apply(e);c.setMaximum(e.getMaxPointDistance());if(this._densifyFrac>0){var f=new un(b,this._densifyFrac);a.apply(f);c.setMaximum(f.getMaxPointDistance())}};uk.prototype.orientedDistance=function a(){this.computeOrientedDistance(this._g0,this._g1,this._ptDist);return this._ptDist.getDistance()};uk.prototype.interfaces_=function a(){return[]};uk.prototype.getClass=function a(){return uk};uk.distance=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1],d=new uk(b,c);return d.distance()}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2],h=new uk(e,f);h.setDensifyFraction(g);return h.distance()}};ul.MaxPointDistanceFilter.get=function(){return um};ul.MaxDensifiedByFractionDistanceFilter.get=function(){return un};Object.defineProperties(uk,ul);var um=function a(){this._maxPtDist=new ui();this._minPtDist=new ui();this._euclideanDist=new uj();this._geom=null;var b=arguments[0];this._geom=b};um.prototype.filter=function b(a){this._minPtDist.initialize();uj.computeDistance(this._geom,a,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};um.prototype.getMaxPointDistance=function a(){return this._maxPtDist};um.prototype.interfaces_=function a(){return[qt]};um.prototype.getClass=function a(){return um};var un=function a(){this._maxPtDist=new ui();this._minPtDist=new ui();this._geom=null;this._numSubSegs=0;var b=arguments[0],c=arguments[1];this._geom=b;this._numSubSegs=Math.trunc(Math.round(1.0/c))};un.prototype.filter=function c(a,b){var d=this;if(b===0){return null}var e=a.getCoordinate(b-1),f=a.getCoordinate(b),g=(f.x-e.x)/this._numSubSegs,h=(f.y-e.y)/this._numSubSegs;for(var i=0;i<this._numSubSegs;i++){var j=e.x+i*g,k=e.y+i*h,l=new pE(j,k);d._minPtDist.initialize();uj.computeDistance(d._geom,l,d._minPtDist);d._maxPtDist.setMaximum(d._minPtDist)}};un.prototype.isDone=function a(){return !1};un.prototype.isGeometryChanged=function a(){return !1};un.prototype.getMaxPointDistance=function a(){return this._maxPtDist};un.prototype.interfaces_=function a(){return[rg]};un.prototype.getClass=function a(){return un};var uo=function d(a,b,c){this._minValidDistance=null;this._maxValidDistance=null;this._minDistanceFound=null;this._maxDistanceFound=null;this._isValid=!0;this._errMsg=null;this._errorLocation=null;this._errorIndicator=null;this._input=a||null;this._bufDistance=b||null;this._result=c||null},up={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};uo.prototype.checkMaximumDistance=function d(a,b,c){var e=new uk(b,a);e.setDensifyFraction(0.25);this._maxDistanceFound=e.orientedDistance();if(this._maxDistanceFound>c){this._isValid=!1;var f=e.getCoordinates();this._errorLocation=f[1];this._errorIndicator=a.getFactory().createLineString(f);this._errMsg='Distance between buffer curve and input is too large ('+this._maxDistanceFound+' at '+qe.toLineString(f[0],f[1])+')'}};uo.prototype.isValid=function a(){var b=Math.abs(this._bufDistance),c=uo.MAX_DISTANCE_DIFF_FRAC*b;this._minValidDistance=b-c;this._maxValidDistance=b+c;if(this._input.isEmpty()||this._result.isEmpty()){return !0}this._bufDistance>0.0?this.checkPositiveValid():this.checkNegativeValid();uo.VERBOSE&&pY.out.println('Min Dist= '+this._minDistanceFound+'  err= '+(1.0-this._minDistanceFound/this._bufDistance)+'  Max Dist= '+this._maxDistanceFound+'  err= '+(this._maxDistanceFound/this._bufDistance-1.0));return this._isValid};uo.prototype.checkNegativeValid=function a(){if(!(this._input instanceof rA||this._input instanceof rD||this._input instanceof rh)){return null}var b=this.getPolygonLines(this._input);this.checkMinimumDistance(b,this._result,this._minValidDistance);if(!this._isValid){return null}this.checkMaximumDistance(b,this._result,this._maxValidDistance)};uo.prototype.getErrorIndicator=function a(){return this._errorIndicator};uo.prototype.checkMinimumDistance=function d(a,b,c){var e=new uh(a,b,c);this._minDistanceFound=e.distance();if(this._minDistanceFound<c){this._isValid=!1;var f=e.nearestPoints();this._errorLocation=e.nearestPoints()[1];this._errorIndicator=a.getFactory().createLineString(f);this._errMsg='Distance between buffer curve and input is too small ('+this._minDistanceFound+' at '+qe.toLineString(f[0],f[1])+' )'}};uo.prototype.checkPositiveValid=function a(){var b=this._result.getBoundary();this.checkMinimumDistance(this._input,b,this._minValidDistance);if(!this._isValid){return null}this.checkMaximumDistance(this._input,b,this._maxValidDistance)};uo.prototype.getErrorLocation=function a(){return this._errorLocation};uo.prototype.getPolygonLines=function b(a){var c=new qF(),d=new ub(c),e=ua.getPolygons(a);for(var f=e.iterator();f.hasNext();){var g=f.next();g.apply(d)}return a.getFactory().buildGeometry(c)};uo.prototype.getErrorMessage=function a(){return this._errMsg};uo.prototype.interfaces_=function a(){return[]};uo.prototype.getClass=function a(){return uo};up.VERBOSE.get=function(){return !1};up.MAX_DISTANCE_DIFF_FRAC.get=function(){return 0.012};Object.defineProperties(uo,up);var uq=function d(a,b,c){this._isValid=!0;this._errorMsg=null;this._errorLocation=null;this._errorIndicator=null;this._input=a||null;this._distance=b||null;this._result=c||null},ur={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};uq.prototype.isValid=function a(){this.checkPolygonal();if(!this._isValid){return this._isValid}this.checkExpectedEmpty();if(!this._isValid){return this._isValid}this.checkEnvelope();if(!this._isValid){return this._isValid}this.checkArea();if(!this._isValid){return this._isValid}this.checkDistance();return this._isValid};uq.prototype.checkEnvelope=function a(){if(this._distance<0.0){return null}var b=this._distance*uq.MAX_ENV_DIFF_FRAC;b===0.0&&(b=0.001);var c=new p_(this._input.getEnvelopeInternal());c.expandBy(this._distance);var d=new p_(this._result.getEnvelopeInternal());d.expandBy(b);d.contains(c)||(this._isValid=!1,this._errorMsg='Buffer envelope is incorrect',this._errorIndicator=this._input.getFactory().toGeometry(d));this.report('Envelope')};uq.prototype.checkDistance=function a(){var b=new uo(this._input,this._distance,this._result);b.isValid()||(this._isValid=!1,this._errorMsg=b.getErrorMessage(),this._errorLocation=b.getErrorLocation(),this._errorIndicator=b.getErrorIndicator());this.report('Distance')};uq.prototype.checkArea=function a(){var b=this._input.getArea(),c=this._result.getArea();this._distance>0.0&&b>c&&(this._isValid=!1,this._errorMsg='Area of positive buffer is smaller than input',this._errorIndicator=this._result);this._distance<0.0&&b<c&&(this._isValid=!1,this._errorMsg='Area of negative buffer is larger than input',this._errorIndicator=this._result);this.report('Area')};uq.prototype.checkPolygonal=function a(){(this._result instanceof rA||this._result instanceof rD)||(this._isValid=!1);this._errorMsg='Result is not polygonal';this._errorIndicator=this._result;this.report('Polygonal')};uq.prototype.getErrorIndicator=function a(){return this._errorIndicator};uq.prototype.getErrorLocation=function a(){return this._errorLocation};uq.prototype.checkExpectedEmpty=function a(){if(this._input.getDimension()>=2){return null}if(this._distance>0.0){return null}this._result.isEmpty()||(this._isValid=!1,this._errorMsg='Result is non-empty',this._errorIndicator=this._result);this.report('ExpectedEmpty')};uq.prototype.report=function b(a){if(!uq.VERBOSE){return null}pY.out.println('Check '+a+': '+(this._isValid?'passed':'FAILED'))};uq.prototype.getErrorMessage=function a(){return this._errorMsg};uq.prototype.interfaces_=function a(){return[]};uq.prototype.getClass=function a(){return uq};uq.isValidMsg=function d(a,b,c){var e=new uq(a,b,c);if(!e.isValid()){return e.getErrorMessage()}return null};uq.isValid=function d(a,b,c){var e=new uq(a,b,c);if(e.isValid()){return !0}return !1};ur.VERBOSE.get=function(){return !1};ur.MAX_ENV_DIFF_FRAC.get=function(){return 0.012};Object.defineProperties(uq,ur);var us=function a(){this._pts=null;this._data=null;var b=arguments[0],c=arguments[1];this._pts=b;this._data=c};us.prototype.getCoordinates=function a(){return this._pts};us.prototype.size=function a(){return this._pts.length};us.prototype.getCoordinate=function b(a){return this._pts[a]};us.prototype.isClosed=function a(){return this._pts[0].equals(this._pts[this._pts.length-1])};us.prototype.getSegmentOctant=function b(a){if(a===this._pts.length-1){return-1}return sP.octant(this.getCoordinate(a),this.getCoordinate(a+1))};us.prototype.setData=function b(a){this._data=a};us.prototype.getData=function a(){return this._data};us.prototype.toString=function a(){return qe.toLineString(new rJ(this._pts))};us.prototype.interfaces_=function a(){return[sQ]};us.prototype.getClass=function a(){return us};var ut=function a(){this._findAllIntersections=!1;this._isCheckEndSegmentsOnly=!1;this._li=null;this._interiorIntersection=null;this._intSegments=null;this._intersections=new qF();this._intersectionCount=0;this._keepIntersections=!0;var b=arguments[0];this._li=b;this._interiorIntersection=null};ut.prototype.getInteriorIntersection=function a(){return this._interiorIntersection};ut.prototype.setCheckEndSegmentsOnly=function b(a){this._isCheckEndSegmentsOnly=a};ut.prototype.getIntersectionSegments=function a(){return this._intSegments};ut.prototype.count=function a(){return this._intersectionCount};ut.prototype.getIntersections=function a(){return this._intersections};ut.prototype.setFindAllIntersections=function b(a){this._findAllIntersections=a};ut.prototype.setKeepIntersections=function b(a){this._keepIntersections=a};ut.prototype.processIntersections=function e(a,b,c,d){if(!this._findAllIntersections&&this.hasIntersection()){return null}if(a===c&&b===d){return null}if(this._isCheckEndSegmentsOnly){var f=this.isEndSegment(a,b)||this.isEndSegment(c,d);if(!f){return null}}var g=a.getCoordinates()[b],h=a.getCoordinates()[b+1],i=c.getCoordinates()[d],j=c.getCoordinates()[d+1];this._li.computeIntersection(g,h,i,j);this._li.hasIntersection()&&(this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=g,this._intSegments[1]=h,this._intSegments[2]=i,this._intSegments[3]=j,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++))};ut.prototype.isEndSegment=function c(a,b){if(b===0){return !0}if(b>=a.size()-2){return !0}return !1};ut.prototype.hasIntersection=function a(){return this._interiorIntersection!==null};ut.prototype.isDone=function a(){if(this._findAllIntersections){return !1}return this._interiorIntersection!==null};ut.prototype.interfaces_=function a(){return[tz]};ut.prototype.getClass=function a(){return ut};ut.createAllIntersectionsFinder=function b(a){var c=new ut(a);c.setFindAllIntersections(!0);return c};ut.createAnyIntersectionFinder=function b(a){return new ut(a)};ut.createIntersectionCounter=function b(a){var c=new ut(a);c.setFindAllIntersections(!0);c.setKeepIntersections(!1);return c};var uu=function a(){this._li=new qk();this._segStrings=null;this._findAllIntersections=!1;this._segInt=null;this._isValid=!0;var b=arguments[0];this._segStrings=b};uu.prototype.execute=function a(){if(this._segInt!==null){return null}this.checkInteriorIntersections()};uu.prototype.getIntersections=function a(){return this._segInt.getIntersections()};uu.prototype.isValid=function a(){this.execute();return this._isValid};uu.prototype.setFindAllIntersections=function b(a){this._findAllIntersections=a};uu.prototype.checkInteriorIntersections=function a(){this._isValid=!0;this._segInt=new ut(this._li);this._segInt.setFindAllIntersections(this._findAllIntersections);var b=new s_();b.setSegmentIntersector(this._segInt);b.computeNodes(this._segStrings);if(this._segInt.hasIntersection()){this._isValid=!1;return null}};uu.prototype.checkValid=function a(){this.execute();if(!this._isValid){throw new sd(this.getErrorMessage(),this._segInt.getInteriorIntersection())}};uu.prototype.getErrorMessage=function a(){if(this._isValid){return'no intersections found'}var b=this._segInt.getIntersectionSegments();return'found non-noded intersection between '+qe.toLineString(b[0],b[1])+' and '+qe.toLineString(b[2],b[3])};uu.prototype.interfaces_=function a(){return[]};uu.prototype.getClass=function a(){return uu};uu.computeIntersections=function b(a){var c=new uu(a);c.setFindAllIntersections(!0);c.isValid();return c.getIntersections()};var uv=function a(){this._nv=null;var b=arguments[0];this._nv=new uu(a.toSegmentStrings(b))};uv.prototype.checkValid=function a(){this._nv.checkValid()};uv.prototype.interfaces_=function a(){return[]};uv.prototype.getClass=function a(){return uv};uv.toSegmentStrings=function b(a){var c=new qF();for(var d=a.iterator();d.hasNext();){var e=d.next();c.add(new us(e.getCoordinates(),e))}return c};uv.checkValid=function b(a){var c=new uv(a);c.checkValid()};var uw=function b(a){this._mapOp=a};uw.prototype.map=function b(a){var c=this,d=new qF();for(var e=0;e<a.getNumGeometries();e++){var f=c._mapOp.map(a.getGeometryN(e));f.isEmpty()||d.add(f)}return a.getFactory().createGeometryCollection(rS.toGeometryArray(d))};uw.prototype.interfaces_=function a(){return[]};uw.prototype.getClass=function a(){return uw};uw.map=function c(a,b){var d=new uw(b);return d.map(a)};var ux=function a(){this._op=null;this._geometryFactory=null;this._ptLocator=null;this._lineEdgesList=new qF();this._resultLineList=new qF();var b=arguments[0],c=arguments[1],d=arguments[2];this._op=b;this._geometryFactory=c;this._ptLocator=d};ux.prototype.collectLines=function b(a){var c=this;for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var e=d.next();c.collectLineEdge(e,a,c._lineEdgesList);c.collectBoundaryTouchEdge(e,a,c._lineEdgesList)}};ux.prototype.labelIsolatedLine=function c(a,b){var d=this._ptLocator.locate(a.getCoordinate(),this._op.getArgGeometry(b));a.getLabel().setLocation(b,d)};ux.prototype.build=function b(a){this.findCoveredLineEdges();this.collectLines(a);this.buildLines(a);return this._resultLineList};ux.prototype.collectLineEdge=function d(a,b,c){var e=a.getLabel(),f=a.getEdge();a.isLineEdge()&&(!a.isVisited()&&vd.isResultOfOp(e,b)&&!f.isCovered()&&(c.add(f),a.setVisitedEdge(!0)))};ux.prototype.findCoveredLineEdges=function a(){var b=this;for(var c=this._op.getGraph().getNodes().iterator();c.hasNext();){var d=c.next();d.getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var f=e.next(),g=f.getEdge();if(f.isLineEdge()&&!g.isCoveredSet()){var h=b._op.isCoveredByA(f.getCoordinate());g.setCovered(h)}}};ux.prototype.labelIsolatedLines=function b(a){var c=this;for(var d=a.iterator();d.hasNext();){var e=d.next(),f=e.getLabel();e.isIsolated()&&(f.isNull(0)?c.labelIsolatedLine(e,0):c.labelIsolatedLine(e,1))}};ux.prototype.buildLines=function b(a){var c=this;for(var d=this._lineEdgesList.iterator();d.hasNext();){var e=d.next(),f=c._geometryFactory.createLineString(e.getCoordinates());c._resultLineList.add(f);e.setInResult(!0)}};ux.prototype.collectBoundaryTouchEdge=function d(a,b,c){var e=a.getLabel();if(a.isLineEdge()){return null}if(a.isVisited()){return null}if(a.isInteriorAreaEdge()){return null}if(a.getEdge().isInResult()){return null}qh.isTrue(!(a.isInResult()||a.getSym().isInResult())||!a.getEdge().isInResult());vd.isResultOfOp(e,b)&&b===vd.INTERSECTION&&(c.add(a.getEdge()),a.setVisitedEdge(!0))};ux.prototype.interfaces_=function a(){return[]};ux.prototype.getClass=function a(){return ux};var uy=function a(){this._op=null;this._geometryFactory=null;this._resultPointList=new qF();var b=arguments[0],c=arguments[1];this._op=b;this._geometryFactory=c};uy.prototype.filterCoveredNodeToPoint=function b(a){var c=a.getCoordinate();if(!this._op.isCoveredByLA(c)){var d=this._geometryFactory.createPoint(c);this._resultPointList.add(d)}};uy.prototype.extractNonCoveredResultNodes=function b(a){var c=this;for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var e=d.next();if(e.isInResult()){continue}if(e.isIncidentEdgeInResult()){continue}if(e.getEdges().getDegree()===0||a===vd.INTERSECTION){var f=e.getLabel();vd.isResultOfOp(f,a)&&c.filterCoveredNodeToPoint(e)}}};uy.prototype.build=function b(a){this.extractNonCoveredResultNodes(a);return this._resultPointList};uy.prototype.interfaces_=function a(){return[]};uy.prototype.getClass=function a(){return uy};var uz=function a(){this._inputGeom=null;this._factory=null;this._pruneEmptyGeometry=!0;this._preserveGeometryCollectionType=!0;this._preserveCollections=!1;this._preserveType=!1};uz.prototype.transformPoint=function c(a,b){return this._factory.createPoint(this.transformCoordinates(a.getCoordinateSequence(),a))};uz.prototype.transformPolygon=function c(a,b){var d=this,e=!0,f=this.transformLinearRing(a.getExteriorRing(),a);(f===null||!(f instanceof rC)||f.isEmpty())&&(e=!1);var g=new qF();for(var h=0;h<a.getNumInteriorRing();h++){var i=d.transformLinearRing(a.getInteriorRingN(h),a);if(i===null||i.isEmpty()){continue}(i instanceof rC)||(e=!1);g.add(i)}if(e){return this._factory.createPolygon(f,g.toArray([]))}else{var j=new qF();f!==null&&j.add(f);j.addAll(g);return this._factory.buildGeometry(j)}};uz.prototype.createCoordinateSequence=function b(a){return this._factory.getCoordinateSequenceFactory().create(a)};uz.prototype.getInputGeometry=function a(){return this._inputGeom};uz.prototype.transformMultiLineString=function c(a,b){var d=this,e=new qF();for(var f=0;f<a.getNumGeometries();f++){var g=d.transformLineString(a.getGeometryN(f),a);if(g===null){continue}if(g.isEmpty()){continue}e.add(g)}return this._factory.buildGeometry(e)};uz.prototype.transformCoordinates=function c(a,b){return this.copy(a)};uz.prototype.transformLineString=function c(a,b){return this._factory.createLineString(this.transformCoordinates(a.getCoordinateSequence(),a))};uz.prototype.transformMultiPoint=function c(a,b){var d=this,e=new qF();for(var f=0;f<a.getNumGeometries();f++){var g=d.transformPoint(a.getGeometryN(f),a);if(g===null){continue}if(g.isEmpty()){continue}e.add(g)}return this._factory.buildGeometry(e)};uz.prototype.transformMultiPolygon=function c(a,b){var d=this,e=new qF();for(var f=0;f<a.getNumGeometries();f++){var g=d.transformPolygon(a.getGeometryN(f),a);if(g===null){continue}if(g.isEmpty()){continue}e.add(g)}return this._factory.buildGeometry(e)};uz.prototype.copy=function b(a){return a.copy()};uz.prototype.transformGeometryCollection=function c(a,b){var d=this,e=new qF();for(var f=0;f<a.getNumGeometries();f++){var g=d.transform(a.getGeometryN(f));if(g===null){continue}if(d._pruneEmptyGeometry&&g.isEmpty()){continue}e.add(g)}if(this._preserveGeometryCollectionType){return this._factory.createGeometryCollection(rS.toGeometryArray(e))}return this._factory.buildGeometry(e)};uz.prototype.transform=function b(a){this._inputGeom=a;this._factory=a.getFactory();if(a instanceof rw){return this.transformPoint(a,null)}if(a instanceof rB){return this.transformMultiPoint(a,null)}if(a instanceof rC){return this.transformLinearRing(a,null)}if(a instanceof ru){return this.transformLineString(a,null)}if(a instanceof ri){return this.transformMultiLineString(a,null)}if(a instanceof rA){return this.transformPolygon(a,null)}if(a instanceof rD){return this.transformMultiPolygon(a,null)}if(a instanceof rh){return this.transformGeometryCollection(a,null)}throw new pv('Unknown Geometry subtype: '+a.getClass().getName())};uz.prototype.transformLinearRing=function c(a,b){var d=this.transformCoordinates(a.getCoordinateSequence(),a);if(d===null){return this._factory.createLinearRing(null)}var e=d.size();if(e>0&&e<4&&!this._preserveType){return this._factory.createLineString(d)}return this._factory.createLinearRing(d)};uz.prototype.interfaces_=function a(){return[]};uz.prototype.getClass=function a(){return uz};var uA=function a(){this._snapTolerance=0.0;this._srcPts=null;this._seg=new sT();this._allowSnappingToSourceVertices=!1;this._isClosed=!1;if(arguments[0] instanceof ru&&typeof arguments[1]==='number'){var b=arguments[0],c=arguments[1];a.call(this,b.getCoordinates(),c)}else if(arguments[0] instanceof Array&&typeof arguments[1]==='number'){var d=arguments[0],e=arguments[1];this._srcPts=d;this._isClosed=a.isClosed(d);this._snapTolerance=e}};uA.prototype.snapVertices=function c(a,b){var d=this,e=this._isClosed?a.size()-1:a.size();for(var f=0;f<e;f++){var g=a.get(f),h=d.findSnapForVertex(g,b);h!==null&&(a.set(f,new pE(h)),f===0&&d._isClosed&&a.set(a.size()-1,new pE(h)))}};uA.prototype.findSnapForVertex=function c(a,b){var d=this;for(var e=0;e<b.length;e++){if(a.equals2D(b[e])){return null}if(a.distance(b[e])<d._snapTolerance){return b[e]}}return null};uA.prototype.snapTo=function b(a){var c=new qH(this._srcPts);this.snapVertices(c,a);this.snapSegments(c,a);var d=c.toCoordinateArray();return d};uA.prototype.snapSegments=function c(a,b){var d=this;if(b.length===0){return null}var e=b.length;b[0].equals2D(b[b.length-1])&&(e=b.length-1);for(var f=0;f<e;f++){var g=b[f],h=d.findSegmentIndexToSnap(g,a);h>=0&&a.add(h+1,new pE(g),!1)}};uA.prototype.findSegmentIndexToSnap=function c(a,b){var d=this,e=pw.MAX_VALUE,f=-1;for(var g=0;g<b.size()-1;g++){d._seg.p0=b.get(g);d._seg.p1=b.get(g+1);if(d._seg.p0.equals2D(a)||d._seg.p1.equals2D(a)){if(d._allowSnappingToSourceVertices){continue}else{return-1}}var h=d._seg.distance(a);h<d._snapTolerance&&h<e&&(e=h,f=g)}return f};uA.prototype.setAllowSnappingToSourceVertices=function b(a){this._allowSnappingToSourceVertices=a};uA.prototype.interfaces_=function a(){return[]};uA.prototype.getClass=function a(){return uA};uA.isClosed=function b(a){if(a.length<=1){return !1}return a[0].equals2D(a[a.length-1])};var uB=function b(a){this._srcGeom=a||null},uC={SNAP_PRECISION_FACTOR:{configurable:!0}};uB.prototype.snapTo=function c(a,b){var d=this.extractTargetCoordinates(a),e=new uD(b,d);return e.transform(this._srcGeom)};uB.prototype.snapToSelf=function c(a,b){var d=this.extractTargetCoordinates(this._srcGeom),e=new uD(a,d,!0),f=e.transform(this._srcGeom),g=f;b&&pK(g,rz)&&(g=f.buffer(0));return g};uB.prototype.computeSnapTolerance=function b(a){var c=this.computeMinimumSegmentLength(a),d=c/10;return d};uB.prototype.extractTargetCoordinates=function b(a){var c=new ra(),d=a.getCoordinates();for(var e=0;e<d.length;e++)c.add(d[e]);return c.toArray(new Array(0).fill(null))};uB.prototype.computeMinimumSegmentLength=function b(a){var c=pw.MAX_VALUE;for(var d=0;d<a.length-1;d++){var e=a[d].distance(a[d+1]);e<c&&(c=e)}return c};uB.prototype.interfaces_=function a(){return[]};uB.prototype.getClass=function a(){return uB};uB.snap=function d(a,b,c){var e=new Array(2).fill(null),f=new uB(a);e[0]=f.snapTo(b,c);var g=new uB(b);e[1]=g.snapTo(e[0],c);return e};uB.computeOverlaySnapTolerance=function a(){if(arguments.length===1){var b=arguments[0],c=uB.computeSizeBasedSnapTolerance(b),d=b.getPrecisionModel();if(d.getType()===rO.FIXED){var e=1/d.getScale()*2/1.415;e>c&&(c=e)}return c}else if(arguments.length===2){var f=arguments[0],g=arguments[1];return Math.min(uB.computeOverlaySnapTolerance(f),uB.computeOverlaySnapTolerance(g))}};uB.computeSizeBasedSnapTolerance=function b(a){var c=a.getEnvelopeInternal(),d=Math.min(c.getHeight(),c.getWidth()),e=d*uB.SNAP_PRECISION_FACTOR;return e};uB.snapToSelf=function d(a,b,c){var e=new uB(a);return e.snapToSelf(b,c)};uC.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(uB,uC);var uD=function(a){function b(b,c,d){a.call(this);this._snapTolerance=b||null;this._snapPts=c||null;this._isSelfSnap=d!==undefined?d:!1}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.snapLine=function c(a,b){var d=new uA(a,this._snapTolerance);d.setAllowSnappingToSourceVertices(this._isSelfSnap);return d.snapTo(b)};b.prototype.transformCoordinates=function c(a,b){var d=a.toCoordinateArray(),e=this.snapLine(d,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(e)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(uz),uE=function a(){this._isFirst=!0;this._commonMantissaBitsCount=53;this._commonBits=0;this._commonSignExp=null};uE.prototype.getCommon=function a(){return pw.longBitsToDouble(this._commonBits)};uE.prototype.add=function b(a){var c=pw.doubleToLongBits(a);if(this._isFirst){this._commonBits=c;this._commonSignExp=uE.signExpBits(this._commonBits);this._isFirst=!1;return null}var d=uE.signExpBits(c);if(d!==this._commonSignExp){this._commonBits=0;return null}this._commonMantissaBitsCount=uE.numCommonMostSigMantissaBits(this._commonBits,c);this._commonBits=uE.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};uE.prototype.toString=function a(){if(arguments.length===1){var b=arguments[0],c=pw.longBitsToDouble(b),d=pw.toBinaryString(b),e='0000000000000000000000000000000000000000000000000000000000000000'+d,f=e.substring(e.length-64),g=f.substring(0,1)+'  '+f.substring(1,12)+'(exp) '+f.substring(12)+' [ '+c+' ]';return g}};uE.prototype.interfaces_=function a(){return[]};uE.prototype.getClass=function a(){return uE};uE.getBit=function c(a,b){var d=1<<b;return(a&d)!==0?1:0};uE.signExpBits=function b(a){return a>>52};uE.zeroLowerBits=function c(a,b){var d=(1<<b)-1,e=~d,f=a&e;return f};uE.numCommonMostSigMantissaBits=function c(a,b){var d=0;for(var e=52;e>=0;e--){if(uE.getBit(a,e)!==uE.getBit(b,e)){return d}d++}return 52};var uF=function a(){this._commonCoord=null;this._ccFilter=new uH()},uG={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};uF.prototype.addCommonBits=function b(a){var c=new uI(this._commonCoord);a.apply(c);a.geometryChanged()};uF.prototype.removeCommonBits=function b(a){if(this._commonCoord.x===0.0&&this._commonCoord.y===0.0){return a}var c=new pE(this._commonCoord);c.x=-c.x;c.y=-c.y;var d=new uI(c);a.apply(d);a.geometryChanged();return a};uF.prototype.getCommonCoordinate=function a(){return this._commonCoord};uF.prototype.add=function b(a){a.apply(this._ccFilter);this._commonCoord=this._ccFilter.getCommonCoordinate()};uF.prototype.interfaces_=function a(){return[]};uF.prototype.getClass=function a(){return uF};uG.CommonCoordinateFilter.get=function(){return uH};uG.Translater.get=function(){return uI};Object.defineProperties(uF,uG);var uH=function a(){this._commonBitsX=new uE();this._commonBitsY=new uE()};uH.prototype.filter=function b(a){this._commonBitsX.add(a.x);this._commonBitsY.add(a.y)};uH.prototype.getCommonCoordinate=function a(){return new pE(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};uH.prototype.interfaces_=function a(){return[qt]};uH.prototype.getClass=function a(){return uH};var uI=function a(){this.trans=null;var b=arguments[0];this.trans=b};uI.prototype.filter=function c(a,b){var d=a.getOrdinate(b,0)+this.trans.x,e=a.getOrdinate(b,1)+this.trans.y;a.setOrdinate(b,0,d);a.setOrdinate(b,1,e)};uI.prototype.isDone=function a(){return !1};uI.prototype.isGeometryChanged=function a(){return !0};uI.prototype.interfaces_=function a(){return[rg]};uI.prototype.getClass=function a(){return uI};var uJ=function c(a,b){this._geom=new Array(2).fill(null);this._snapTolerance=null;this._cbr=null;this._geom[0]=a;this._geom[1]=b;this.computeSnapTolerance()};uJ.prototype.selfSnap=function b(a){var c=new uB(a),d=c.snapTo(a,this._snapTolerance);return d};uJ.prototype.removeCommonBits=function b(a){this._cbr=new uF();this._cbr.add(a[0]);this._cbr.add(a[1]);var c=new Array(2).fill(null);c[0]=this._cbr.removeCommonBits(a[0].copy());c[1]=this._cbr.removeCommonBits(a[1].copy());return c};uJ.prototype.prepareResult=function b(a){this._cbr.addCommonBits(a);return a};uJ.prototype.getResultGeometry=function b(a){var c=this.snap(this._geom),d=vd.overlayOp(c[0],c[1],a);return this.prepareResult(d)};uJ.prototype.checkValid=function b(a){a.isValid()||pY.out.println('Snapped geometry is invalid')};uJ.prototype.computeSnapTolerance=function a(){this._snapTolerance=uB.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};uJ.prototype.snap=function b(a){var c=this.removeCommonBits(a),d=uB.snap(c[0],c[1],this._snapTolerance);return d};uJ.prototype.interfaces_=function a(){return[]};uJ.prototype.getClass=function a(){return uJ};uJ.overlayOp=function d(a,b,c){var e=new uJ(a,b);return e.getResultGeometry(c)};uJ.union=function c(a,b){return uJ.overlayOp(a,b,vd.UNION)};uJ.intersection=function c(a,b){return uJ.overlayOp(a,b,vd.INTERSECTION)};uJ.symDifference=function c(a,b){return uJ.overlayOp(a,b,vd.SYMDIFFERENCE)};uJ.difference=function c(a,b){return uJ.overlayOp(a,b,vd.DIFFERENCE)};var uK=function c(a,b){this._geom=new Array(2).fill(null);this._geom[0]=a;this._geom[1]=b};uK.prototype.getResultGeometry=function b(a){var c=null,d=!1,e=null;try{c=vd.overlayOp(this._geom[0],this._geom[1],a);{d=!0}}catch(a){if(a instanceof qf)e=a;else{throw a}}finally{};if(!d){try{c=uJ.overlayOp(this._geom[0],this._geom[1],a)}catch(a){if(a instanceof qf){throw e}else{throw a}}finally{}}return c};uK.prototype.interfaces_=function a(){return[]};uK.prototype.getClass=function a(){return uK};uK.overlayOp=function d(a,b,c){var e=new uK(a,b);return e.getResultGeometry(c)};uK.union=function c(a,b){return uK.overlayOp(a,b,vd.UNION)};uK.intersection=function c(a,b){return uK.overlayOp(a,b,vd.INTERSECTION)};uK.symDifference=function c(a,b){return uK.overlayOp(a,b,vd.SYMDIFFERENCE)};uK.difference=function c(a,b){return uK.overlayOp(a,b,vd.DIFFERENCE)};var uL=function a(){this.mce=null;this.chainIndex=null;var b=arguments[0],c=arguments[1];this.mce=b;this.chainIndex=c};uL.prototype.computeIntersections=function c(a,b){this.mce.computeIntersectsForChain(this.chainIndex,a.mce,a.chainIndex,b)};uL.prototype.interfaces_=function a(){return[]};uL.prototype.getClass=function a(){return uL};var uM=function a(){this._label=null;this._xValue=null;this._eventType=null;this._insertEvent=null;this._deleteEventIndex=null;this._obj=null;if(arguments.length===2){var b=arguments[0],c=arguments[1];this._eventType=a.DELETE;this._xValue=b;this._insertEvent=c}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2];this._eventType=a.INSERT;this._label=d;this._xValue=e;this._obj=f}},uN={INSERT:{configurable:!0},DELETE:{configurable:!0}};uM.prototype.isDelete=function a(){return this._eventType===uM.DELETE};uM.prototype.setDeleteEventIndex=function b(a){this._deleteEventIndex=a};uM.prototype.getObject=function a(){return this._obj};uM.prototype.compareTo=function b(a){var c=a;if(this._xValue<c._xValue){return-1}if(this._xValue>c._xValue){return 1}if(this._eventType<c._eventType){return-1}if(this._eventType>c._eventType){return 1}return 0};uM.prototype.getInsertEvent=function a(){return this._insertEvent};uM.prototype.isInsert=function a(){return this._eventType===uM.INSERT};uM.prototype.isSameLabel=function b(a){if(this._label===null){return !1}return this._label===a._label};uM.prototype.getDeleteEventIndex=function a(){return this._deleteEventIndex};uM.prototype.interfaces_=function a(){return[pA]};uM.prototype.getClass=function a(){return uM};uN.INSERT.get=function(){return 1};uN.DELETE.get=function(){return 2};Object.defineProperties(uM,uN);var uO=function a(){};uO.prototype.interfaces_=function a(){return[]};uO.prototype.getClass=function a(){return uO};var uP=function a(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._properIntersectionPoint=null;this._li=null;this._includeProper=null;this._recordIsolated=null;this._isSelfIntersection=null;this._numIntersections=0;this.numTests=0;this._bdyNodes=null;this._isDone=!1;this._isDoneWhenProperInt=!1;var b=arguments[0],c=arguments[1],d=arguments[2];this._li=b;this._includeProper=c;this._recordIsolated=d};uP.prototype.isTrivialIntersection=function e(a,b,c,d){if(a===c){if(this._li.getIntersectionNum()===1){if(uP.isAdjacentSegments(b,d)){return !0}if(a.isClosed()){var f=a.getNumPoints()-1;if(b===0&&d===f||d===0&&b===f){return !0}}}}return !1};uP.prototype.getProperIntersectionPoint=function a(){return this._properIntersectionPoint};uP.prototype.setIsDoneIfProperInt=function b(a){this._isDoneWhenProperInt=a};uP.prototype.hasProperInteriorIntersection=function a(){return this._hasProperInterior};uP.prototype.isBoundaryPointInternal=function c(a,b){for(var d=b.iterator();d.hasNext();){var e=d.next(),f=e.getCoordinate();if(a.isIntersection(f)){return !0}}return !1};uP.prototype.hasProperIntersection=function a(){return this._hasProper};uP.prototype.hasIntersection=function a(){return this._hasIntersection};uP.prototype.isDone=function a(){return this._isDone};uP.prototype.isBoundaryPoint=function c(a,b){if(b===null){return !1}if(this.isBoundaryPointInternal(a,b[0])){return !0}if(this.isBoundaryPointInternal(a,b[1])){return !0}return !1};uP.prototype.setBoundaryNodes=function c(a,b){this._bdyNodes=new Array(2).fill(null);this._bdyNodes[0]=a;this._bdyNodes[1]=b};uP.prototype.addIntersections=function e(a,b,c,d){if(a===c&&b===d){return null}this.numTests++;var f=a.getCoordinates()[b],g=a.getCoordinates()[b+1],h=c.getCoordinates()[d],i=c.getCoordinates()[d+1];this._li.computeIntersection(f,g,h,i);this._li.hasIntersection()&&(this._recordIsolated&&(a.setIsolated(!1),c.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(a,b,c,d)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(a.addIntersections(this._li,b,0),c.addIntersections(this._li,d,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};uP.prototype.interfaces_=function a(){return[]};uP.prototype.getClass=function a(){return uP};uP.isAdjacentSegments=function c(a,b){return Math.abs(a-b)===1};var uQ=function(a){function b(){a.call(this);this.events=new qF();this.nOverlaps=null}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.prepareEvents=function a(){var b=this;sE.sort(this.events);for(var c=0;c<this.events.size();c++){var d=b.events.get(c);d.isDelete()&&d.getInsertEvent().setDeleteEventIndex(c)}};b.prototype.computeIntersections=function a(){var b=this;if(arguments.length===1){var c=arguments[0];this.nOverlaps=0;this.prepareEvents();for(var d=0;d<this.events.size();d++){var e=b.events.get(d);e.isInsert()&&b.processOverlaps(d,e.getDeleteEventIndex(),e,c);if(c.isDone()){break}}}else if(arguments.length===3){if(arguments[2] instanceof uP&&(pK(arguments[0],qD)&&pK(arguments[1],qD))){var f=arguments[0],g=arguments[1],h=arguments[2];this.addEdges(f,f);this.addEdges(g,g);this.computeIntersections(h)}else if(typeof arguments[2]==='boolean'&&(pK(arguments[0],qD)&&arguments[1] instanceof uP)){var i=arguments[0],j=arguments[1],k=arguments[2];k?this.addEdges(i,null):this.addEdges(i);this.computeIntersections(j)}}};b.prototype.addEdge=function c(a,b){var d=this,e=a.getMonotoneChainEdge(),f=e.getStartIndexes();for(var g=0;g<f.length-1;g++){var h=new uL(e,g),i=new uM(b,e.getMinX(g),h);d.events.add(i);d.events.add(new uM(e.getMaxX(g),i))}};b.prototype.processOverlaps=function e(a,b,c,d){var f=this,g=c.getObject();for(var h=a;h<b;h++){var i=f.events.get(h);if(i.isInsert()){var j=i.getObject();c.isSameLabel(i)||(g.computeIntersections(j,d),f.nOverlaps++)}}};b.prototype.addEdges=function a(){var b=this;if(arguments.length===1){var c=arguments[0];for(var d=c.iterator();d.hasNext();){var e=d.next();b.addEdge(e,e)}}else if(arguments.length===2){var f=arguments[0],g=arguments[1];for(var h=f.iterator();h.hasNext();){var i=h.next();b.addEdge(i,g)}}};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(uO),uR=function a(){this._min=pw.POSITIVE_INFINITY;this._max=pw.NEGATIVE_INFINITY},uS={NodeComparator:{configurable:!0}};uR.prototype.getMin=function a(){return this._min};uR.prototype.intersects=function c(a,b){if(this._min>b||this._max<a){return !1}return !0};uR.prototype.getMax=function a(){return this._max};uR.prototype.toString=function a(){return qe.toLineString(new pE(this._min,0),new pE(this._max,0))};uR.prototype.interfaces_=function a(){return[]};uR.prototype.getClass=function a(){return uR};uS.NodeComparator.get=function(){return uT};Object.defineProperties(uR,uS);var uT=function a(){};uT.prototype.compare=function c(a,b){var d=a,e=b,f=(d._min+d._max)/2,g=(e._min+e._max)/2;if(f<g){return-1}if(f>g){return 1}return 0};uT.prototype.interfaces_=function a(){return[pC]};uT.prototype.getClass=function a(){return uT};var uU=function(a){function b(){a.call(this);this._item=null;var b=arguments[0],c=arguments[1],d=arguments[2];this._min=b;this._max=c;this._item=d}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.query=function d(a,b,c){if(!this.intersects(a,b)){return null}c.visitItem(this._item)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(uR),uV=function(a){function b(){a.call(this);this._node1=null;this._node2=null;var b=arguments[0],c=arguments[1];this._node1=b;this._node2=c;this.buildExtent(this._node1,this._node2)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.buildExtent=function c(a,b){this._min=Math.min(a._min,b._min);this._max=Math.max(a._max,b._max)};b.prototype.query=function d(a,b,c){if(!this.intersects(a,b)){return null}this._node1!==null&&this._node1.query(a,b,c);this._node2!==null&&this._node2.query(a,b,c)};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(uR),uW=function a(){this._leaves=new qF();this._root=null;this._level=0};uW.prototype.buildTree=function a(){var b=this;sE.sort(this._leaves,new uR.NodeComparator());var c=this._leaves,d=null,e=new qF();while(!0){b.buildLevel(c,e);if(e.size()===1){return e.get(0)}d=c;c=e;e=d}};uW.prototype.insert=function d(a,b,c){if(this._root!==null){throw new Error('Index cannot be added to once it has been queried')}this._leaves.add(new uU(a,b,c))};uW.prototype.query=function d(a,b,c){this.init();this._root.query(a,b,c)};uW.prototype.buildRoot=function a(){if(this._root!==null){return null}this._root=this.buildTree()};uW.prototype.printNode=function b(a){pY.out.println(qe.toLineString(new pE(a._min,this._level),new pE(a._max,this._level)))};uW.prototype.init=function a(){if(this._root!==null){return null}this.buildRoot()};uW.prototype.buildLevel=function c(a,b){this._level++;b.clear();for(var d=0;d<a.size();d+=2){var e=a.get(d),f=d+1<a.size()?a.get(d):null;if(f===null)b.add(e);else{var g=new uV(a.get(d),a.get(d+1));b.add(g)}}};uW.prototype.interfaces_=function a(){return[]};uW.prototype.getClass=function a(){return uW};var uX=function a(){this._items=new qF()};uX.prototype.visitItem=function b(a){this._items.add(a)};uX.prototype.getItems=function a(){return this._items};uX.prototype.interfaces_=function a(){return[sA]};uX.prototype.getClass=function a(){return uX};var uY=function a(){this._index=null;var b=arguments[0];if(!pK(b,rz)){throw new pv('Argument must be Polygonal')}this._index=new u$(b)},uZ={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};uY.prototype.locate=function b(a){var c=new qm(a),d=new u_(c);this._index.query(a.y,a.y,d);return c.getLocation()};uY.prototype.interfaces_=function a(){return[tr]};uY.prototype.getClass=function a(){return uY};uZ.SegmentVisitor.get=function(){return u_};uZ.IntervalIndexedGeometry.get=function(){return u$};Object.defineProperties(uY,uZ);var u_=function a(){this._counter=null;var b=arguments[0];this._counter=b};u_.prototype.visitItem=function b(a){var c=a;this._counter.countSegment(c.getCoordinate(0),c.getCoordinate(1))};u_.prototype.interfaces_=function a(){return[sA]};u_.prototype.getClass=function a(){return u_};var u$=function a(){this._index=new uW();var b=arguments[0];this.init(b)};u$.prototype.init=function b(a){var c=this,d=ub.getLines(a);for(var e=d.iterator();e.hasNext();){var f=e.next(),g=f.getCoordinates();c.addLine(g)}};u$.prototype.addLine=function b(a){var c=this;for(var d=1;d<a.length;d++){var e=new sT(a[d-1],a[d]),f=Math.min(e.p0.y,e.p1.y),g=Math.max(e.p0.y,e.p1.y);c._index.insert(f,g,e)}};u$.prototype.query=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1],d=new uX();this._index.query(b,c,d);return d.getItems()}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2];this._index.query(e,f,g)}};u$.prototype.interfaces_=function a(){return[]};u$.prototype.getClass=function a(){return u$};var va=function(a){function b(){a.call(this);this._parentGeom=null;this._lineEdgeMap=new rN();this._boundaryNodeRule=null;this._useBoundaryDeterminationRule=!0;this._argIndex=null;this._boundaryNodes=null;this._hasTooFewPoints=!1;this._invalidPoint=null;this._areaPtLocator=null;this._ptLocator=new uc();if(arguments.length===2){var b=arguments[0],c=arguments[1],d=qu.OGC_SFS_BOUNDARY_RULE;this._argIndex=b;this._parentGeom=c;this._boundaryNodeRule=d;c!==null&&this.add(c)}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2];this._argIndex=e;this._parentGeom=f;this._boundaryNodeRule=g;f!==null&&this.add(f)}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.insertBoundaryPoint=function d(a,c){var e=this._nodes.addNode(c),f=e.getLabel(),g=1,h=pI.NONE;h=f.getLocation(a,r_.ON);h===pI.BOUNDARY&&g++;var i=b.determineBoundary(this._boundaryNodeRule,g);f.setLocation(a,i)};b.prototype.computeSelfNodes=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1];return this.computeSelfNodes(b,c,!1)}else if(arguments.length===3){var d=arguments[0],e=arguments[1],f=arguments[2],g=new uP(d,!0,!1);g.setIsDoneIfProperInt(f);var h=this.createEdgeSetIntersector(),i=this._parentGeom instanceof rC||this._parentGeom instanceof rA||this._parentGeom instanceof rD,j=e||!i;h.computeIntersections(this._edges,g,j);this.addSelfIntersectionNodes(this._argIndex);return g}};b.prototype.computeSplitEdges=function b(a){for(var c=this._edges.iterator();c.hasNext();){var d=c.next();d.eiList.addSplitEdges(a)}};b.prototype.computeEdgeIntersections=function d(a,b,c){var e=new uP(b,c,!0);e.setBoundaryNodes(this.getBoundaryNodes(),a.getBoundaryNodes());var f=this.createEdgeSetIntersector();f.computeIntersections(this._edges,a._edges,e);return e};b.prototype.getGeometry=function a(){return this._parentGeom};b.prototype.getBoundaryNodeRule=function a(){return this._boundaryNodeRule};b.prototype.hasTooFewPoints=function a(){return this._hasTooFewPoints};b.prototype.addPoint=function a(){if(arguments[0] instanceof rw){var b=arguments[0],c=b.getCoordinate();this.insertPoint(this._argIndex,c,pI.INTERIOR)}else if(arguments[0] instanceof pE){var d=arguments[0];this.insertPoint(this._argIndex,d,pI.INTERIOR)}};b.prototype.addPolygon=function b(a){var c=this;this.addPolygonRing(a.getExteriorRing(),pI.EXTERIOR,pI.INTERIOR);for(var d=0;d<a.getNumInteriorRing();d++){var e=a.getInteriorRingN(d);c.addPolygonRing(e,pI.INTERIOR,pI.EXTERIOR)}};b.prototype.addEdge=function b(a){this.insertEdge(a);var c=a.getCoordinates();this.insertPoint(this._argIndex,c[0],pI.BOUNDARY);this.insertPoint(this._argIndex,c[c.length-1],pI.BOUNDARY)};b.prototype.addLineString=function b(a){var c=qI.removeRepeatedPoints(a.getCoordinates());if(c.length<2){this._hasTooFewPoints=!0;this._invalidPoint=c[0];return null}var d=new tH(c,new sj(this._argIndex,pI.INTERIOR));this._lineEdgeMap.put(a,d);this.insertEdge(d);qh.isTrue(c.length>=2,'found LineString with single point');this.insertBoundaryPoint(this._argIndex,c[0]);this.insertBoundaryPoint(this._argIndex,c[c.length-1])};b.prototype.getInvalidPoint=function a(){return this._invalidPoint};b.prototype.getBoundaryPoints=function a(){var b=this.getBoundaryNodes(),c=new Array(b.size()).fill(null),d=0;for(var e=b.iterator();e.hasNext();){var f=e.next();c[d++]=f.getCoordinate().copy()}return c};b.prototype.getBoundaryNodes=function a(){this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex));return this._boundaryNodes};b.prototype.addSelfIntersectionNode=function d(a,b,c){if(this.isBoundaryNode(a,b)){return null}c===pI.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(a,b):this.insertPoint(a,b,c)};b.prototype.addPolygonRing=function d(a,b,c){if(a.isEmpty()){return null}var e=qI.removeRepeatedPoints(a.getCoordinates());if(e.length<4){this._hasTooFewPoints=!0;this._invalidPoint=e[0];return null}var f=b,g=c;qn.isCCW(e)&&(f=c,g=b);var h=new tH(e,new sj(this._argIndex,pI.BOUNDARY,f,g));this._lineEdgeMap.put(a,h);this.insertEdge(h);this.insertPoint(this._argIndex,e[0],pI.BOUNDARY)};b.prototype.insertPoint=function d(a,b,c){var e=this._nodes.addNode(b),f=e.getLabel();f===null?(e._label=new sj(a,c)):f.setLocation(a,c)};b.prototype.createEdgeSetIntersector=function a(){return new uQ()};b.prototype.addSelfIntersectionNodes=function b(a){var c=this;for(var d=this._edges.iterator();d.hasNext();){var e=d.next(),f=e.getLabel().getLocation(a);for(var g=e.eiList.iterator();g.hasNext();){var h=g.next();c.addSelfIntersectionNode(a,h.coord,f)}}};b.prototype.add=function b(){if(arguments.length===1){var c=arguments[0];if(c.isEmpty()){return null}c instanceof rD&&(this._useBoundaryDeterminationRule=!1);if(c instanceof rA)this.addPolygon(c);else if(c instanceof ru)this.addLineString(c);else if(c instanceof rw)this.addPoint(c);else if(c instanceof rB)this.addCollection(c);else if(c instanceof ri)this.addCollection(c);else if(c instanceof rD)this.addCollection(c);else if(c instanceof rh)this.addCollection(c);else{throw new Error(c.getClass().getName())}}else{return a.prototype.add.apply(this,arguments)}};b.prototype.addCollection=function b(a){var c=this;for(var d=0;d<a.getNumGeometries();d++){var e=a.getGeometryN(d);c.add(e)}};b.prototype.locate=function b(a){if(pK(this._parentGeom,rz)&&this._parentGeom.getNumGeometries()>50){this._areaPtLocator===null&&(this._areaPtLocator=new uY(this._parentGeom));return this._areaPtLocator.locate(a)}return this._ptLocator.locate(a,this._parentGeom)};b.prototype.findEdge=function b(){if(arguments.length===1){var c=arguments[0];return this._lineEdgeMap.get(c)}else{return a.prototype.findEdge.apply(this,arguments)}};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};b.determineBoundary=function c(a,b){return a.isInBoundary(b)?pI.BOUNDARY:pI.INTERIOR};return b}(sv),vb=function a(){this._li=new qk();this._resultPrecisionModel=null;this._arg=null;if(arguments.length===1){var b=arguments[0];this.setComputationPrecision(b.getPrecisionModel());this._arg=new Array(1).fill(null);this._arg[0]=new va(0,b)}else if(arguments.length===2){var c=arguments[0],d=arguments[1],e=qu.OGC_SFS_BOUNDARY_RULE;c.getPrecisionModel().compareTo(d.getPrecisionModel())>=0?this.setComputationPrecision(c.getPrecisionModel()):this.setComputationPrecision(d.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new va(0,c,e);this._arg[1]=new va(1,d,e)}else if(arguments.length===3){var f=arguments[0],g=arguments[1],h=arguments[2];f.getPrecisionModel().compareTo(g.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(g.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new va(0,f,h);this._arg[1]=new va(1,g,h)}};vb.prototype.getArgGeometry=function b(a){return this._arg[a].getGeometry()};vb.prototype.setComputationPrecision=function b(a){this._resultPrecisionModel=a;this._li.setPrecisionModel(this._resultPrecisionModel)};vb.prototype.interfaces_=function a(){return[]};vb.prototype.getClass=function a(){return vb};var vc=function a(){};vc.prototype.interfaces_=function a(){return[]};vc.prototype.getClass=function a(){return vc};vc.map=function a(){if(arguments[0] instanceof qq&&pK(arguments[1],vc.MapOp)){var b=arguments[0],c=arguments[1],d=new qF();for(var e=0;e<b.getNumGeometries();e++){var f=c.map(b.getGeometryN(e));f!==null&&d.add(f)}return b.getFactory().buildGeometry(d)}else if(pK(arguments[0],qA)&&pK(arguments[1],vc.MapOp)){var g=arguments[0],h=arguments[1],i=new qF();for(var j=g.iterator();j.hasNext();){var k=j.next(),l=h.map(k);l!==null&&i.add(l)}return i}};vc.MapOp=function a(){};var vd=function(a){function b(){var b=arguments[0],c=arguments[1];a.call(this,b,c);this._ptLocator=new uc();this._geomFact=null;this._resultGeom=null;this._graph=null;this._edgeList=new ty();this._resultPolyList=new qF();this._resultLineList=new qF();this._resultPointList=new qF();this._graph=new sv(new tw());this._geomFact=b.getFactory()}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.insertUniqueEdge=function b(a){var c=this._edgeList.findEqualEdge(a);if(c!==null){var d=c.getLabel(),e=a.getLabel();c.isPointwiseEqual(a)||(e=new sj(a.getLabel()),e.flip());var f=c.getDepth();f.isNull()&&f.add(d);f.add(e);d.merge(e)}else this._edgeList.add(a)};b.prototype.getGraph=function a(){return this._graph};b.prototype.cancelDuplicateResultEdges=function a(){for(var b=this._graph.getEdgeEnds().iterator();b.hasNext();){var c=b.next(),d=c.getSym();c.isInResult()&&d.isInResult()&&(c.setInResult(!1),d.setInResult(!1))}};b.prototype.isCoveredByLA=function b(a){if(this.isCovered(a,this._resultLineList)){return !0}if(this.isCovered(a,this._resultPolyList)){return !0}return !1};b.prototype.computeGeometry=function f(a,c,d,e){var g=new qF();g.addAll(a);g.addAll(c);g.addAll(d);if(g.isEmpty()){return b.createEmptyResult(e,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact)}return this._geomFact.buildGeometry(g)};b.prototype.mergeSymLabels=function a(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var c=b.next();c.getEdges().mergeSymLabels()}};b.prototype.isCovered=function c(a,b){var d=this;for(var e=b.iterator();e.hasNext();){var f=e.next(),g=d._ptLocator.locate(a,f);if(g!==pI.EXTERIOR){return !0}}return !1};b.prototype.replaceCollapsedEdges=function a(){var b=new qF();for(var c=this._edgeList.iterator();c.hasNext();){var d=c.next();d.isCollapsed()&&(c.remove(),b.add(d.getCollapsedEdge()))}this._edgeList.addAll(b)};b.prototype.updateNodeLabelling=function a(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var c=b.next(),d=c.getEdges().getLabel();c.getLabel().merge(d)}};b.prototype.getResultGeometry=function b(a){this.computeOverlay(a);return this._resultGeom};b.prototype.insertUniqueEdges=function b(a){var c=this;for(var d=a.iterator();d.hasNext();){var e=d.next();c.insertUniqueEdge(e)}};b.prototype.computeOverlay=function b(a){this.copyPoints(0);this.copyPoints(1);this._arg[0].computeSelfNodes(this._li,!1);this._arg[1].computeSelfNodes(this._li,!1);this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var c=new qF();this._arg[0].computeSplitEdges(c);this._arg[1].computeSplitEdges(c);this.insertUniqueEdges(c);this.computeLabelsFromDepths();this.replaceCollapsedEdges();uv.checkValid(this._edgeList.getEdges());this._graph.addEdges(this._edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(a);this.cancelDuplicateResultEdges();var d=new sw(this._geomFact);d.add(this._graph);this._resultPolyList=d.getPolygons();var e=new ux(this,this._geomFact,this._ptLocator);this._resultLineList=e.build(a);var f=new uy(this,this._geomFact,this._ptLocator);this._resultPointList=f.build(a);this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,a)};b.prototype.labelIncompleteNode=function c(a,b){var d=this._ptLocator.locate(a.getCoordinate(),this._arg[b].getGeometry());a.getLabel().setLocation(b,d)};b.prototype.copyPoints=function b(a){var c=this;for(var d=this._arg[a].getNodeIterator();d.hasNext();){var e=d.next(),f=c._graph.addNode(e.getCoordinate());f.setLabel(a,e.getLabel().getLocation(a))}};b.prototype.findResultAreaEdges=function c(a){for(var d=this._graph.getEdgeEnds().iterator();d.hasNext();){var e=d.next(),f=e.getLabel();f.isArea()&&!e.isInteriorAreaEdge()&&b.isResultOfOp(f.getLocation(0,r_.RIGHT),f.getLocation(1,r_.RIGHT),a)&&e.setInResult(!0)}};b.prototype.computeLabelsFromDepths=function a(){for(var b=this._edgeList.iterator();b.hasNext();){var c=b.next(),d=c.getLabel(),e=c.getDepth();if(!e.isNull()){e.normalize();for(var f=0;f<2;f++)!d.isNull(f)&&d.isArea()&&!e.isNull(f)&&(e.getDelta(f)===0?d.toLine(f):(qh.isTrue(!e.isNull(f,r_.LEFT),'depth of LEFT side has not been initialized'),d.setLocation(f,r_.LEFT,e.getLocation(f,r_.LEFT)),qh.isTrue(!e.isNull(f,r_.RIGHT),'depth of RIGHT side has not been initialized'),d.setLocation(f,r_.RIGHT,e.getLocation(f,r_.RIGHT))))}}};b.prototype.computeLabelling=function a(){var b=this;for(var c=this._graph.getNodes().iterator();c.hasNext();){var d=c.next();d.getEdges().computeLabelling(b._arg)}this.mergeSymLabels();this.updateNodeLabelling()};b.prototype.labelIncompleteNodes=function a(){var b=this;for(var c=this._graph.getNodes().iterator();c.hasNext();){var d=c.next(),e=d.getLabel();d.isIsolated()&&(e.isNull(0)?b.labelIncompleteNode(d,0):b.labelIncompleteNode(d,1));d.getEdges().updateLabelling(e)}};b.prototype.isCoveredByA=function b(a){if(this.isCovered(a,this._resultPolyList)){return !0}return !1};b.prototype.interfaces_=function a(){return[]};b.prototype.getClass=function a(){return b};return b}(vb);vd.overlayOp=function(a,b,c){var d=new vd(a,b),e=d.getResultGeometry(c);return e};vd.intersection=function(a,b){if(a.isEmpty()||b.isEmpty()){return vd.createEmptyResult(vd.INTERSECTION,a,b,a.getFactory())}if(a.isGeometryCollection()){var c=b;return uw.map(a,{interfaces_:function(){return[vc.MapOp]},map:function(a){return a.intersection(c)}})}a.checkNotGeometryCollection(a);a.checkNotGeometryCollection(b);return uK.overlayOp(a,b,vd.INTERSECTION)};vd.symDifference=function(a,b){if(a.isEmpty()||b.isEmpty()){if(a.isEmpty()&&b.isEmpty()){return vd.createEmptyResult(vd.SYMDIFFERENCE,a,b,a.getFactory())}if(a.isEmpty()){return b.copy()}if(b.isEmpty()){return a.copy()}}a.checkNotGeometryCollection(a);a.checkNotGeometryCollection(b);return uK.overlayOp(a,b,vd.SYMDIFFERENCE)};vd.resultDimension=function(a,b,c){var d=b.getDimension(),e=c.getDimension(),f=-1;switch(a){case vd.INTERSECTION:f=Math.min(d,e);break;case vd.UNION:f=Math.max(d,e);break;case vd.DIFFERENCE:f=d;break;case vd.SYMDIFFERENCE:f=Math.max(d,e);break;default:};return f};vd.createEmptyResult=function(a,b,c,d){var e=null;switch(vd.resultDimension(a,b,c)){case -1:e=d.createGeometryCollection(new Array(0).fill(null));break;case 0:e=d.createPoint();break;case 1:e=d.createLineString();break;case 2:e=d.createPolygon();break;default:};return e};vd.difference=function(a,b){if(a.isEmpty()){return vd.createEmptyResult(vd.DIFFERENCE,a,b,a.getFactory())}if(b.isEmpty()){return a.copy()}a.checkNotGeometryCollection(a);a.checkNotGeometryCollection(b);return uK.overlayOp(a,b,vd.DIFFERENCE)};vd.isResultOfOp=function(){if(arguments.length===2){var a=arguments[0],b=arguments[1],c=a.getLocation(0),d=a.getLocation(1);return vd.isResultOfOp(c,d,b)}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2];e===pI.BOUNDARY&&(e=pI.INTERIOR);f===pI.BOUNDARY&&(f=pI.INTERIOR);switch(g){case vd.INTERSECTION:return e===pI.INTERIOR&&f===pI.INTERIOR;case vd.UNION:return e===pI.INTERIOR||f===pI.INTERIOR;case vd.DIFFERENCE:return e===pI.INTERIOR&&f!==pI.INTERIOR;case vd.SYMDIFFERENCE:return e===pI.INTERIOR&&f!==pI.INTERIOR||e!==pI.INTERIOR&&f===pI.INTERIOR;default:};return !1}};vd.INTERSECTION=1;vd.UNION=2;vd.DIFFERENCE=3;vd.SYMDIFFERENCE=4;var ve=function a(){this._g=null;this._boundaryDistanceTolerance=null;this._linework=null;this._ptLocator=new uc();this._seg=new sT();var b=arguments[0],c=arguments[1];this._g=b;this._boundaryDistanceTolerance=c;this._linework=this.extractLinework(b)};ve.prototype.isWithinToleranceOfBoundary=function b(a){var c=this;for(var d=0;d<this._linework.getNumGeometries();d++){var e=c._linework.getGeometryN(d),f=e.getCoordinateSequence();for(var g=0;g<f.size()-1;g++){f.getCoordinate(g,c._seg.p0);f.getCoordinate(g+1,c._seg.p1);var h=c._seg.distance(a);if(h<=c._boundaryDistanceTolerance){return !0}}}return !1};ve.prototype.getLocation=function b(a){if(this.isWithinToleranceOfBoundary(a)){return pI.BOUNDARY}return this._ptLocator.locate(a,this._g)};ve.prototype.extractLinework=function b(a){var c=new vf();a.apply(c);var d=c.getLinework(),e=rS.toLineStringArray(d);return a.getFactory().createMultiLineString(e)};ve.prototype.interfaces_=function a(){return[]};ve.prototype.getClass=function a(){return ve};var vf=function a(){this._linework=null;this._linework=new qF()};vf.prototype.getLinework=function a(){return this._linework};vf.prototype.filter=function b(a){var c=this;if(a instanceof rA){var d=a;this._linework.add(d.getExteriorRing());for(var e=0;e<d.getNumInteriorRing();e++)c._linework.add(d.getInteriorRingN(e))}};vf.prototype.interfaces_=function a(){return[rf]};vf.prototype.getClass=function a(){return vf};var vg=function a(){this._g=null;this._doLeft=!0;this._doRight=!0;var b=arguments[0];this._g=b};vg.prototype.extractPoints=function d(a,b,c){var e=this,f=a.getCoordinates();for(var g=0;g<f.length-1;g++)e.computeOffsetPoints(f[g],f[g+1],b,c)};vg.prototype.setSidesToGenerate=function c(a,b){this._doLeft=a;this._doRight=b};vg.prototype.getPoints=function b(a){var c=this,d=new qF(),e=ub.getLines(this._g);for(var f=e.iterator();f.hasNext();){var g=f.next();c.extractPoints(g,a,d)}return d};vg.prototype.computeOffsetPoints=function e(a,b,c,d){var f=b.x-a.x,g=b.y-a.y,h=Math.sqrt(f*f+g*g),i=c*f/h,j=c*g/h,k=(b.x+a.x)/2,l=(b.y+a.y)/2;if(this._doLeft){var m=new pE(k-j,l+i);d.add(m)}if(this._doRight){var n=new pE(k+j,l-i);d.add(n)}};vg.prototype.interfaces_=function a(){return[]};vg.prototype.getClass=function a(){return vg};var vh=function a(){this._geom=null;this._locFinder=null;this._location=new Array(3).fill(null);this._invalidLocation=null;this._boundaryDistanceTolerance=a.TOLERANCE;this._testCoords=new qF();var b=arguments[0],c=arguments[1],d=arguments[2];this._boundaryDistanceTolerance=a.computeBoundaryDistanceTolerance(b,c);this._geom=[b,c,d];this._locFinder=[new ve(this._geom[0],this._boundaryDistanceTolerance),new ve(this._geom[1],this._boundaryDistanceTolerance),new ve(this._geom[2],this._boundaryDistanceTolerance)]},vi={TOLERANCE:{configurable:!0}};vh.prototype.reportResult=function d(a,b,c){pY.out.println('Overlay result invalid - A:'+pI.toLocationSymbol(b[0])+' B:'+pI.toLocationSymbol(b[1])+' expected:'+(c?'i':'e')+' actual:'+pI.toLocationSymbol(b[2]))};vh.prototype.isValid=function(a){this.addTestPts(this._geom[0]);this.addTestPts(this._geom[1]);var b=this.checkValid(a);return b};vh.prototype.checkValid=function a(){var b=this;if(arguments.length===1){var c=arguments[0];for(var d=0;d<this._testCoords.size();d++){var e=b._testCoords.get(d);if(!b.checkValid(c,e)){b._invalidLocation=e;return !1}}return !0}else if(arguments.length===2){var f=arguments[0],g=arguments[1];this._location[0]=this._locFinder[0].getLocation(g);this._location[1]=this._locFinder[1].getLocation(g);this._location[2]=this._locFinder[2].getLocation(g);if(vh.hasLocation(this._location,pI.BOUNDARY)){return !0}return this.isValidResult(f,this._location)}};vh.prototype.addTestPts=function b(a){var c=new vg(a);this._testCoords.addAll(c.getPoints(5*this._boundaryDistanceTolerance))};vh.prototype.isValidResult=function c(a,b){var d=vd.isResultOfOp(b[0],b[1],a),e=b[2]===pI.INTERIOR,f=!(d^e);f||this.reportResult(a,b,d);return f};vh.prototype.getInvalidLocation=function a(){return this._invalidLocation};vh.prototype.interfaces_=function a(){return[]};vh.prototype.getClass=function a(){return vh};vh.hasLocation=function c(a,b){for(var d=0;d<3;d++){if(a[d]===b){return !0}}return !1};vh.computeBoundaryDistanceTolerance=function c(a,b){return Math.min(uB.computeSizeBasedSnapTolerance(a),uB.computeSizeBasedSnapTolerance(b))};vh.isValid=function e(a,b,c,d){var f=new vh(a,b,d);return f.isValid(c)};vi.TOLERANCE.get=function(){return 0.000001};Object.defineProperties(vh,vi);var vj=function b(a){this._geomFactory=null;this._skipEmpty=!1;this._inputGeoms=null;this._geomFactory=b.extractFactory(a);this._inputGeoms=a};vj.prototype.extractElements=function c(a,b){var d=this;if(a===null){return null}for(var e=0;e<a.getNumGeometries();e++){var f=a.getGeometryN(e);if(d._skipEmpty&&f.isEmpty()){continue}b.add(f)}};vj.prototype.combine=function a(){var b=this,c=new qF();for(var d=this._inputGeoms.iterator();d.hasNext();){var e=d.next();b.extractElements(e,c)}if(c.size()===0){if(this._geomFactory!==null){return this._geomFactory.createGeometryCollection(null)}return null}return this._geomFactory.buildGeometry(c)};vj.prototype.interfaces_=function a(){return[]};vj.prototype.getClass=function a(){return vj};vj.combine=function a(){if(arguments.length===1){var b=arguments[0],c=new vj(b);return c.combine()}else if(arguments.length===2){var d=arguments[0],e=arguments[1],f=new vj(vj.createList(d,e));return f.combine()}else if(arguments.length===3){var g=arguments[0],h=arguments[1],i=arguments[2],j=new vj(vj.createList(g,h,i));return j.combine()}};vj.extractFactory=function b(a){if(a.isEmpty()){return null}return a.iterator().next().getFactory()};vj.createList=function a(){if(arguments.length===2){var b=arguments[0],c=arguments[1],d=new qF();d.add(b);d.add(c);return d}else if(arguments.length===3){var e=arguments[0],f=arguments[1],g=arguments[2],h=new qF();h.add(e);h.add(f);h.add(g);return h}};var vk=function a(){this._inputPolys=null;this._geomFactory=null;var b=arguments[0];this._inputPolys=b;this._inputPolys===null&&(this._inputPolys=new qF())},vl={STRTREE_NODE_CAPACITY:{configurable:!0}};vk.prototype.reduceToGeometries=function b(a){var c=this,d=new qF();for(var e=a.iterator();e.hasNext();){var f=e.next(),g=null;pK(f,qD)?(g=c.unionTree(f)):f instanceof qq&&(g=f);d.add(g)}return d};vk.prototype.extractByEnvelope=function d(a,b,c){var e=new qF();for(var f=0;f<b.getNumGeometries();f++){var g=b.getGeometryN(f);g.getEnvelopeInternal().intersects(a)?e.add(g):c.add(g)}return this._geomFactory.buildGeometry(e)};vk.prototype.unionOptimized=function c(a,b){var d=a.getEnvelopeInternal(),e=b.getEnvelopeInternal();if(!d.intersects(e)){var f=vj.combine(a,b);return f}if(a.getNumGeometries()<=1&&b.getNumGeometries()<=1){return this.unionActual(a,b)}var g=d.intersection(e);return this.unionUsingEnvelopeIntersection(a,b,g)};vk.prototype.union=function a(){if(this._inputPolys===null){throw new Error('union() method cannot be called twice')}if(this._inputPolys.isEmpty()){return null}this._geomFactory=this._inputPolys.iterator().next().getFactory();var b=new sK(vk.STRTREE_NODE_CAPACITY);for(var c=this._inputPolys.iterator();c.hasNext();){var d=c.next();b.insert(d.getEnvelopeInternal(),d)}this._inputPolys=null;var e=b.itemsTree(),f=this.unionTree(e);return f};vk.prototype.binaryUnion=function a(){if(arguments.length===1){var b=arguments[0];return this.binaryUnion(b,0,b.size())}else if(arguments.length===3){var c=arguments[0],d=arguments[1],e=arguments[2];if(e-d<=1){var f=vk.getGeometry(c,d);return this.unionSafe(f,null)}else if(e-d===2){return this.unionSafe(vk.getGeometry(c,d),vk.getGeometry(c,d+1))}else{var g=Math.trunc((e+d)/2),h=this.binaryUnion(c,d,g),i=this.binaryUnion(c,g,e);return this.unionSafe(h,i)}}};vk.prototype.repeatedUnion=function b(a){var c=null;for(var d=a.iterator();d.hasNext();){var e=d.next();c===null?(c=e.copy()):(c=c.union(e))}return c};vk.prototype.unionSafe=function c(a,b){if(a===null&&b===null){return null}if(a===null){return b.copy()}if(b===null){return a.copy()}return this.unionOptimized(a,b)};vk.prototype.unionActual=function c(a,b){return vk.restrictToPolygons(a.union(b))};vk.prototype.unionTree=function b(a){var c=this.reduceToGeometries(a),d=this.binaryUnion(c);return d};vk.prototype.unionUsingEnvelopeIntersection=function d(a,b,c){var e=new qF(),f=this.extractByEnvelope(c,a,e),g=this.extractByEnvelope(c,b,e),h=this.unionActual(f,g);e.add(h);var i=vj.combine(e);return i};vk.prototype.bufferUnion=function a(){if(arguments.length===1){var b=arguments[0],c=b.get(0).getFactory(),d=c.buildGeometry(b),e=d.buffer(0.0);return e}else if(arguments.length===2){var f=arguments[0],g=arguments[1],h=f.getFactory(),i=h.createGeometryCollection([f,g]),j=i.buffer(0.0);return j}};vk.prototype.interfaces_=function a(){return[]};vk.prototype.getClass=function a(){return vk};vk.restrictToPolygons=function b(a){if(pK(a,rz)){return a}var c=ua.getPolygons(a);if(c.size()===1){return c.get(0)}return a.getFactory().createMultiPolygon(rS.toPolygonArray(c))};vk.getGeometry=function c(a,b){if(b>=a.size()){return null}return a.get(b)};vk.union=function b(a){var c=new vk(a);return c.union()};vl.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(vk,vl);var vm=function a(){};vm.prototype.interfaces_=function a(){return[]};vm.prototype.getClass=function a(){return vm};vm.union=function c(a,b){if(a.isEmpty()||b.isEmpty()){if(a.isEmpty()&&b.isEmpty()){return vd.createEmptyResult(vd.UNION,a,b,a.getFactory())}if(a.isEmpty()){return b.copy()}if(b.isEmpty()){return a.copy()}}a.checkNotGeometryCollection(a);a.checkNotGeometryCollection(b);return uK.overlayOp(a,b,vd.UNION)};function vn(a,b,c){c=af(c);var d=c.units||'kilometers';if(!a)throw new Error('geojson is required');if(typeof c!=='object')throw new Error('options must be an object');if(b===undefined)throw new Error('radius is required');var e=T(U(b,d),'meters'),f=[];switch(a.type){case 'GeometryCollection':av(a,function(a){var b=vo(a,e);b&&f.push(b)});return N(f);case 'FeatureCollection':as(a,function(a){var b=vo(a,e);b&&f.push(b)});return N(f)};return vo(a,e)}function vo(a,b){var c=a.properties||{},d=a.type==='Feature'?ed(a.geometry):ed(a),e=eT(d),f=vr(e.geometry);vq(d,f,!0);var g=new rY(),h=g.read(d),i=tU.bufferOp(h,b),j=new rZ();i=j.write(i);if(vp(i.coordinates))return undefined;vq(i,f,!1);return i.geometry?i:E(i,c)}function vp(a){if(Array.isArray(a[0]))return vp(a[0]);return isNaN(a[0])}function vq(a,b,c){ao(a,function(a,d){var e=c?vt(a[0],a[1],b):vu(a[0],a[1],b);a.length=0;a.push(e[0],e[1])},!1)}function vr(a){let b=a.coordinates[1],c=a.coordinates[0],d=Math.floor((c+180)/6)+1,e='N';c===180&&(d=60);b<0.0&&(e='S');b>=56.0&&b<64.0&&c>=3.0&&c<12.0&&(d=32);return{zoneNumber:d,hemisphere:e}}function vt(a,b,c){let d=500e3,e=10000e3,f=Y(((c.zoneNumber-1)*6-180+3)),g='CDEFGHJKLMNPQRSTUVWXX',h=g.charAt(Math.floor(b/8+10));c===31&&h==='V'&&a>=3&&(c++,Y(f+=6));c===32&&h==='X'&&a<9&&(c--,Y(f-=6));c===32&&h==='X'&&a>=9&&(c++,Y(f+=6));c===34&&h==='X'&&a<21&&(c--,Y(f-=6));c===34&&h==='X'&&a>=21&&(c++,Y(f+=6));c===36&&h==='X'&&a<33&&(c--,Y(f-=6));c===36&&h==='X'&&a>=33&&(c++,Y(f+=6));var i=Y(b),j=Y(a)-f;let k=6378137,l=0.0033528106647474805,m=0.9996,n=Math.sqrt(l*(2-l)),o=l/(2-l),p=o*o,q=o*p,r=o*q,s=o*r,t=o*s,u=Math.cos(j),v=Math.sin(j),w=Math.tan(i),x=Math.sinh(n*Math.atanh(n*w/Math.sqrt(1+w*w))),y=w*Math.sqrt(1+x*x)-x*Math.sqrt(1+w*w),z=Math.atan2(y,u),A=Math.asinh(v/Math.sqrt(y*y+u*u)),B=k/(1+o)*(1+0.25*p+0.015625*r+0.00390625*t),C=[null,0.5*o-0.6666666666666666*p+0.3125*q+0.22777777777777777*r-0.4409722222222222*s+0.20875661375661375*t,0.2708333333333333*p-0.6*q+0.38680555555555557*r+0.44603174603174606*s-1.0248393063822752*t,0.25416666666666665*q-0.7357142857142858*r+0.5603050595238095*s+0.9237378747795415*t,0.30729786706349205*r-1.0654761904761905*s+0.9096203979276896*t,0.4306671626984127*s-1.713007555715889*t,0.6650675310896665*t],D=z;for(let a=1;a<=6;a++)D+=C[a]*Math.sin(2*a*z)*Math.cosh(2*a*A);let E=A;for(let a=1;a<=6;a++)E+=C[a]*Math.cos(2*a*z)*Math.sinh(2*a*A);let F=m*B*E,G=m*B*D;F+=d;G<0&&(G+=e);return[G,F]}function vu(a,b,c){var d=c.zoneNumber,e=c.hemisphere,f=500e3,g=10000e3,h=6378137,i=0.0033528106647474805,j=0.9996;b-=f;a=e==='S'?a-g:a;var k=Math.sqrt(i*(2-i)),l=i/(2-i),m=l*l,n=l*m,o=l*n,p=l*o,q=l*p,r=h/(1+l)*(1+0.25*m+0.015625*o+0.00390625*q),s=b/(j*r),t=a/(j*r),u=[null,0.5*l-0.6666666666666666*m+0.3854166666666667*n-0.002777777777777778*o-0.158203125*p+0.15905919312169312*q,0.020833333333333332*m+0.06666666666666667*n-0.3034722222222222*o+0.4380952380952381*p-0.2890188388723545*q,0.035416666666666666*n-0.04404761904761905*o-0.046651785714285715*p+0.06138668430335097*q,0.02726314484126984*o-0.021825396825396824*p-0.11439745921516754*q,0.02841641865079365*p-0.027268468414301746*q,0.03233083094085698*q],v=t;for(var w=1;w<=6;w++)v-=u[w]*Math.sin(2*w*t)*Math.cosh(2*w*s);var x=s;for(w=1;w<=6;w++)x-=u[w]*Math.cos(2*w*t)*Math.sinh(2*w*s);var y=Math.sinh(x),z=Math.sin(v),A=Math.cos(v),B=z/Math.sqrt(y*y+A*A),C=B;do{var D=Math.sinh(k*Math.atanh(k*C/Math.sqrt(1+C*C))),E=C*Math.sqrt(1+D*D)-D*Math.sqrt(1+C*C),F=(B-E)/Math.sqrt(1+E*E)*(1+(1-k*k)*C*C)/((1-k*k)*Math.sqrt(1+C*C));C+=F}while(Math.abs(F)>1e-12);var G=C,H=Math.atan(G),I=Math.atan2(y,A),J=Y((d-1)*6-180+3);I+=J;var K=X(H),L=X(I);return[L,K]}h.projection=oL;h.random=oV;h.clusters=pe;h.helpers=an;h.invariant=aR;h.meta=aH;h.isolines=bd;h.convex=cK;h.pointsWithinPolygon=cO;h.concave=ea;h.collect=ec;h.flip=ek;h.simplify=ey;h.bezierSpline=eF;h.tag=eG;h.sample=eH;h.envelope=eK;h.square=eL;h.circle=eN;h.midpoint=eQ;h.center=eR;h.centerOfMass=eT;h.centroid=eS;h.combine=eU;h.distance=cP;h.explode=eV;h.bbox=aI;h.tesselate=fB;h.bboxPolygon=eJ;h.booleanPointInPolygon=cL;h.nearestPoint=fE;h.nearestPointOnLine=hd;h.nearestPointToLine=hq;h.planepoint=hs;h.tin=cQ;h.bearing=eO;h.destination=eM;h.kinks=ht;h.pointOnFeature=hv;h.area=hy;h.along=hH;h.length=hI;h.lineSlice=hJ;h.lineSliceAlong=hK;h.pointGrid=hY;h.truncate=hZ;h.flatten=h$;h.lineIntersect=hb;h.lineChunk=ia;h.unkinkPolygon=iq;h.greatCircle=iy;h.lineSegment=fF;h.lineSplit=iz;h.lineArc=iE;h.polygonToLine=iG;h.lineToPolygon=iK;h.bboxClip=iS;h.lineOverlap=jd;h.sector=jf;h.rhumbBearing=hD;h.rhumbDistance=he;h.rhumbDestination=hF;h.polygonTangents=jh;h.rewind=jn;h.isobands=la;h.transformRotate=lj;h.transformScale=lk;h.transformTranslate=ln;h.lineOffset=ly;h.polygonize=lP;h.booleanDisjoint=lQ;h.booleanContains=lY;h.booleanCrosses=mi;h.booleanClockwise=jm;h.booleanOverlap=mv;h.booleanPointOnLine=hL;h.booleanEqual=mx;h.booleanWithin=hN;h.clone=ed;h.cleanCoords=el;h.clustersDbscan=mP;h.clustersKmeans=nk;h.pointToLineDistance=hg;h.booleanParallel=nl;h.shortestPath=nu;h.voronoi=om;h.ellipse=oo;h.centerMean=or;h.centerMedian=os;h.standardDeviationalEllipse=ou;h.angle=ow;h.polygonSmooth=ox;h.moranIndex=oC;h.distanceWeight=oB;h.difference=pf;h.union=d_;h.intersect=pg;h.dissolve=d$;h.hexGrid=ph;h.mask=pk;h.squareGrid=pq;h.triangleGrid=pr;h.interpolate=ps;h.buffer=vn;h.pointOnSurface=hv;h.polygonToLineString=iG;h.lineStringToPolygon=iK;h.inside=cL;h.within=cO;h.bezier=eF;h.nearest=fE;h.pointOnLine=hd;h.lineDistance=hI;h.radians2degrees=X;h.degrees2radians=Y;h.distanceToDegrees=V;h.distanceToRadians=U;h.radiansToDistance=T;h.bearingToAngle=W;h.convertDistance=Z;h.toMercator=oF;h.toWgs84=oG;h.randomPosition=oM;h.randomPoint=oN;h.randomPolygon=oO;h.randomLineString=oP;h.getCluster=oW;h.clusterEach=oX;h.clusterReduce=oY;h.createBins=oZ;h.applyFilter=o_;h.propertiesContainsFilter=o$;h.filterProperties=pd;h.earthRadius=w;h.factors=x;h.areaFactors=y;h.feature=E;h.geometry=F;h.point=G;h.points=H;h.polygon=I;h.polygons=J;h.lineString=K;h.lineStrings=L;h.featureCollection=N;h.multiLineString=O;h.multiPoint=P;h.multiPolygon=Q;h.geometryCollection=R;h.round=S;h.radiansToLength=T;h.lengthToRadians=U;h.lengthToDegrees=V;h.bearingToAzimuth=W;h.radiansToDegrees=X;h.degreesToRadians=Y;h.convertLength=Z;h.convertArea=$;h.isNumber=ab;h.isObject=ac;h.validateBBox=ad;h.validateId=ae;h.checkIfOptionsExist=af;h.getCoord=aJ;h.getCoords=aK;h.containsNumber=aL;h.geojsonType=aM;h.featureOf=aN;h.collectionOf=aO;h.getGeom=aP;h.getType=aQ;h.coordEach=ao;h.coordReduce=ap;h.propEach=aq;h.propReduce=ar;h.featureEach=as;h.featureReduce=at;h.coordAll=au;h.geomEach=av;h.geomReduce=aw;h.flattenEach=az;h.flattenReduce=aA;h.segmentEach=aB;h.segmentReduce=aC;h.lineEach=aD;h.lineReduce=aE;h.findSegment=aF;h.findPoint=aG;Object.defineProperty(h,'__esModule',{value:!0})}))
